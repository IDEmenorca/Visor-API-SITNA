TC.control=TC.control||{};TC.Control||TC.syncLoadJS(TC.apiLocation+"TC/Control");TC.control.TabContainer=function(){TC.Control.apply(this,arguments);var t=this._classSelector="."+this.CLASS;this._selectors={TAB:t+"-tab",RADIOBUTTON:"input[type=radio][name=sctnr-sel]",ELEMENT:t+"-elm"};this.controlOptions=this.options.controls||[];var e=this.controlOptions.length;this._ctlDeferreds=new Array(e);for(var n=0;n<e;n++)this._ctlDeferreds[n]=$.Deferred();this.defaultSelection=this.options.defaultSelection};TC.inherit(TC.control.TabContainer,TC.Control);!function(){var t=TC.control.TabContainer.prototype;t.CLASS="tc-ctl-tctr";TC.isDebug?t.template=TC.apiLocation+"TC/templates/TabContainer.html":t.template=function(){dust.register(t.CLASS,e);function e(t,e){return t.w("<h2>").f(e.get(["title"],!1),e,"h").w('</h2><div class="tc-ctl-tctr-select"><form>').s(e.get(["controls"],!1),e,{block:n},{}).w("</form></div>").s(e.get(["controls"],!1),e,{block:o},{})}e.__dustBody=!0;function n(t,e){return t.w('<label class="tc-ctl-tctr-tab tc-ctl-tctr-tab-').f(e.get(["$idx"],!1),e,"h").w('" style="width:calc(100%/').f(e.get(["$len"],!1),e,"h").w(' - 1px)"><input type="radio" name="sctnr-sel" value="').f(e.get(["$idx"],!1),e,"h").w('" /><span>').f(e.get(["title"],!1),e,"h").w("</span></label>")}n.__dustBody=!0;function o(t,e){return t.w('<div class="tc-ctl-tctr-elm tc-ctl-tctr-elm-').f(e.get(["$idx"],!1),e,"h").w(' tc-hidden"></div>')}o.__dustBody=!0;return e};t.register=function(t){var e=this;TC.Control.prototype.register.call(e,t);const n=new Array(e.controlOptions.length);n.forEach(function(t,n,o){o[n]=e.getUID()});e.renderPromise().then(function(){e.title=e.title||e.getLocaleString(e.options.title||"moreControls");e._$div.find("h2").first().html(e.title);for(var o=new Array(e.controlOptions.length),r=0,l=e.controlOptions.length;r<l;r++){var i=e.controlOptions[r];o[r]=t.addControl(i.name,$.extend({id:n[r],div:e._$div.find("."+e.CLASS+"-elm-"+r)},i.options))}var s=function(t,n){t.renderPromise().then(function(){var o=e.getLocaleString(e.controlOptions[n].title)||t._$div.find("h2").first().html();t._$div.parents(e._classSelector).first().find(e._selectors.TAB+"-"+n+" span").html(o)})};$.when.apply(e,o).then(function(){for(var t=0,n=arguments.length;t<n;t++){var o=arguments[t];o.containerControl=e;s(o,t);e._ctlDeferreds[t].resolve(o)}})})};t.render=function(t){var e=this;e.renderData({title:e.title,controls:e.controlOptions},function(){var t=function(t){var n=$(this).closest(e._selectors.TAB).find(e._selectors.RADIOBUTTON),o=n.val(),r=e._$div.find(e._selectors.ELEMENT);if(e._oldValue===o&&e.options.deselectable){setTimeout(function(){n.prop("checked",!1)},0);e._oldValue=null;$active=$();$hidden=r}else{$active=r.filter(e._selectors.ELEMENT+"-"+o);$hidden=r.not($active);e._oldValue=o}$active.removeClass(TC.Consts.classes.HIDDEN);$hidden.addClass(TC.Consts.classes.HIDDEN);n.prop("checked",!0)};e._$div.find("span").on(TC.Consts.event.CLICK,t);"number"==typeof e.defaultSelection&&t.call(e._$div.find(e._selectors.RADIOBUTTON).get(e.defaultSelection))})};t.getControl=function(t){var e=this._ctlDeferreds[t];e||(e=$.Deferred()).reject();return e.promise()}}();