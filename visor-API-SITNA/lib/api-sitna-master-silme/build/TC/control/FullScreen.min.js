TC.control=TC.control||{};TC.Control||TC.syncLoadJS(TC.apiLocation+"TC/Control");TC.control.FullScreen=function(){TC.Control.apply(this,arguments);this.fullScreenElement=document.documentElement};TC.inherit(TC.control.FullScreen,TC.Control);!function(){var e=TC.control.FullScreen.prototype;e.CLASS="tc-ctl-fscreen";TC.isDebug?e.template=TC.apiLocation+"TC/templates/FullScreen.html":e.template=function(){dust.register(e.CLASS,n);function n(e,n){return e.w('<button class="tc-ctl-fscreen-btn" title="').h("i18n",n,{},{$key:"fscreen.tip"}).w('"></button>')}n.__dustBody=!0;return n};e.register=function(e){var n=this;TC.Control.prototype.register.call(n,e);n.renderPromise().then(function(){var e=n._$div.find("."+n.CLASS+"-btn");if(n.enabledFullScreen()){e.on("click",function(){n.toggleFullScreen()});$(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange",function(){e.toggleClass(TC.Consts.classes.ACTIVE,n.isFullScreen());e.attr("title",n.isFullScreen()?n.getLocaleString("fscreen.tip.return"):n.getLocaleString("fscreen.tip"))})}else e.addClass(TC.Consts.classes.HIDDEN)})};e.requestFullScreen=function(){var e=this.fullScreenElement;document.documentElement.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen&&e.msRequestFullscreen()};e.cancelFullScreen=function(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()};e.isFullScreen=function(){return document.fullScreenElement||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement};e.toggleFullScreen=function(){this.isFullScreen()?this.cancelFullScreen():this.requestFullScreen()};e.enabledFullScreen=function(){var e=this.fullScreenElement,n=document.documentElement.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen;return n&&"function"==typeof n}}();