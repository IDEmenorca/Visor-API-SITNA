TC.control=TC.control||{};TC.Control||TC.syncLoadJS(TC.apiLocation+"TC/Control");TC.control.OverviewMap=function(){TC.Control.apply(this,arguments);this.$events=$(this);this.isLoaded=!1;this.layer=null;this.wrap=new TC.wrap.control.OverviewMap(this)};TC.inherit(TC.control.OverviewMap,TC.Control);!function(){var t=TC.control.OverviewMap.prototype;t.CLASS="tc-ctl-ovmap";TC.isDebug?t.template=TC.apiLocation+"TC/templates/OverviewMap.html":t.template=function(){dust.register(t.CLASS,e);function e(t,e){return t.w('<div class="tc-ctl-ovmap-load tc-hidden"></div>')}e.__dustBody=!0;return e};t.register=function(t){var e=this,a=e.options.layer;TC.Control.prototype.register.call(e,t);t.loaded(function(){var n;if("string"==typeof a){var o=function(t,e){for(var a=null,n=0;n<e.length;n++){var o=e[n];if((o.id||o)===t){a=o;break}}return a},i=o(a,t.options.availableBaseLayers);$.isPlainObject(i)||(i=o(a,t.options.baseLayers));$.isPlainObject(i)&&(n=new TC.layer.Raster(i))}else n=a instanceof TC.Layer?a:a.type===TC.Consts.layerType.VECTOR||a.type===TC.Consts.layerType.KML||a.type===TC.Consts.layerType.WFS?new TC.layer.Vector(a):new TC.layer.Raster(a);n.map=t;e.layer=n;e.wrap.register(t);const r=function(a){const n={};e.layer.getCapabilitiesPromise().then(function(){e.layer.isCompatible(t.crs)||0!==e.layer.wrap.getCompatibleMatrixSets(t.crs).length||(n.layer=e.layer.getFallbackLayer());e.wrap.reset(n)})};r(t.crs);t.on(TC.Consts.event.PROJECTIONCHANGE,r)})};t.loaded=function(t){$.isFunction(t)&&(this.isLoaded&&this.map&&this.map.isLoaded?t():this.$events.on(TC.Consts.event.MAPLOAD,t))};t.activate=function(){this.enable()};t.deactivate=function(){this.disable()};t.enable=function(){TC.Control.prototype.enable.call(this);this.wrap.enable()};t.disable=function(){TC.Control.prototype.disable.call(this);this.wrap.disable()}}();