var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(e){return void 0!==e};goog.exportPath_=function(e,t,o){e=e.split(".");o=o||goog.global;e[0]in o||!o.execScript||o.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)!e.length&&goog.isDef(t)?o[r]=t:o=o[r]?o[r]:o[r]={}};goog.define=function(e,t){var o=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)?o=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)&&(o=goog.global.CLOSURE_DEFINES[e]));goog.exportPath_(e,o)};goog.DEBUG=!1;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;goog.provide=function(e){if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)};goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var o=e;(o=o.substring(0,o.lastIndexOf(".")))&&!goog.getObjectByName(o);)goog.implicitNamespaces_[o]=!0}goog.exportPath_(e,t)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=e;if(!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}};goog.module.get=function(e){return goog.module.getInternal_(e)};goog.module.getInternal_=function(e){return COMPILED?void 0:goog.isProvided_(e)?e in goog.loadedModules_?goog.loadedModules_[e]:goog.getObjectByName(e):null};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_};goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))};goog.forwardDeclare=function(){};COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0});goog.getObjectByName=function(e,t){for(var o,r=e.split("."),n=t||goog.global;o=r.shift();){if(!goog.isDefAndNotNull(n[o]))return null;n=n[o]}return n};goog.globalize=function(e,t){var o,r=t||goog.global;for(o in e)r[o]=e[o]};goog.addDependency=function(e,t,o,r){if(goog.DEPENDENCIES_ENABLED){var n;e=e.replace(/\\/g,"/");for(var i=goog.dependencies_,s=0;n=t[s];s++)i.nameToPath[n]=e,i.pathIsModule[e]=!!r;for(r=0;t=o[r];r++)e in i.requires||(i.requires[e]={}),i.requires[e][t]=!0}};goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)};goog.require=function(e){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(e);if(goog.isProvided_(e))return goog.isInModuleLoader_()?goog.module.getInternal_(e):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.included_[t]=!0,goog.writeScripts_(),null}e="goog.require could not find: "+e;goog.logToConsole_(e);throw Error(e)}};goog.basePath="";goog.nullFunction=function(){};goog.abstractMethod=function(){throw Error("unimplemented abstract method")};goog.addSingletonGetter=function(e){e.getInstance=function(){if(e.instance_)return e.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e);return e.instance_=new e}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return"undefined"!=typeof e&&"write"in e},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var e=goog.global.document.getElementsByTagName("SCRIPT"),t=e.length-1;t>=0;--t){var o=e[t].src,r=o.lastIndexOf("?"),r=-1==r?o.length:r;if("base.js"==o.substr(r-7,7)){goog.basePath=o.substr(0,r-7);break}}},goog.importScript_=function(e,t){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importModule_=function(e){goog.importScript_("",'goog.retrieveAndExecModule_("'+e+'");')&&(goog.dependencies_.written[e]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(e>0){var t=goog.queuedModules_;goog.queuedModules_=[];for(var o=0;e>o;o++)goog.maybeProcessDeferredPath_(t[o])}},goog.maybeProcessDeferredDep_=function(e){goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)&&(e=goog.getPathFromDeps_(e),goog.maybeProcessDeferredPath_(goog.basePath+e))},goog.isDeferredModule_=function(e){return(e=goog.getPathFromDeps_(e))&&goog.dependencies_.pathIsModule[e]?goog.basePath+e in goog.dependencies_.deferred:!1},goog.allDepsAreAvailable_=function(e){if((e=goog.getPathFromDeps_(e))&&e in goog.dependencies_.requires)for(var t in goog.dependencies_.requires[e])if(!goog.isProvided_(t)&&!goog.isDeferredModule_(t))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e];goog.globalEval(t)}},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0};var o;if(goog.isFunction(e))o=e.call(goog.global,{});else{if(!goog.isString(e))throw Error("Invalid module definition");o=goog.loadModuleFromSource_.call(goog.global,e)}var r=goog.moduleLoaderState_.moduleName;if(!goog.isString(r)||!r)throw Error('Invalid module name "'+r+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,o):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(o);goog.loadedModules_[r]=o}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){eval(a);return{}},goog.writeScriptSrcNode_=function(e){goog.global.document.write('<script type="text/javascript" src="'+e+'"></script>')},goog.appendScriptSrcNode_=function(e){var t=goog.global.document,o=t.createElement("script");o.type="text/javascript";o.src=e;o.defer=!1;o.async=!1;t.head.appendChild(o)},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var o=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==o.readyState){if(/\bdeps.js$/.test(e))return!1;throw Error('Cannot write "'+e+'" after document load')}var r=goog.IS_OLD_IE_;void 0===t?r?(r=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ",o.write('<script type="text/javascript" src="'+e+'"'+r+"></script>")):goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(e):goog.writeScriptSrcNode_(e):o.write('<script type="text/javascript">'+t+"</script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_();return!0},goog.writeScripts_=function(){function e(t){if(!(t in n.written)){if(!(t in n.visited)&&(n.visited[t]=!0,t in n.requires))for(var i in n.requires[t])if(!goog.isProvided_(i)){if(!(i in n.nameToPath))throw Error("Undefined nameToPath for "+i);e(n.nameToPath[i])}t in r||(r[t]=!0,o.push(t))}}var t,o=[],r={},n=goog.dependencies_;for(t in goog.included_)n.written[t]||e(t);for(var i=0;i<o.length;i++)t=o[i],goog.dependencies_.written[t]=!0;var s=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(i=0;i<o.length;i++){if(!(t=o[i]))throw goog.moduleLoaderState_=s,Error("Undefined script input");n.pathIsModule[t]?goog.importModule_(goog.basePath+t):goog.importScript_(goog.basePath+t)}goog.moduleLoaderState_=s},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")};goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);var t=new goog.global.XMLHttpRequest;t.open("get",e,!1);t.send();return t.responseText};goog.retrieveAndExecModule_=function(e){if(!COMPILED){var t=e;e=goog.normalizePath_(e);var o=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,r=goog.loadFileSync_(e);if(null==r)throw Error("load of "+e+"failed");r=goog.wrapModule_(e,r),goog.IS_OLD_IE_?(goog.dependencies_.deferred[t]=r,goog.queuedModules_.push(t)):o(e,r)}};goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var o=Object.prototype.toString.call(e);if("[object Window]"==o)return"object";if("[object Array]"==o||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==o||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t};goog.isNull=function(e){return null===e};goog.isDefAndNotNull=function(e){return null!=e};goog.isArray=function(e){return"array"==goog.typeOf(e)};goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length};goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear};goog.isString=function(e){return"string"==typeof e};goog.isBoolean=function(e){return"boolean"==typeof e};goog.isNumber=function(e){return"number"==typeof e};goog.isFunction=function(e){return"function"==goog.typeOf(e)};goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t};goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]};goog.removeUid=function(e){"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(t){}};goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var o,t="array"==t?[]:{};for(o in e)t[o]=goog.cloneObject(e[o]);return t}return e};goog.bindNative_=function(e){return e.call.apply(e.bind,arguments)};goog.bindJs_=function(e,t){if(!e)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(r,o);return e.apply(t,r)}}return function(){return e.apply(t,arguments)}};goog.bind=function(){goog.bind=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bindNative_:goog.bindJs_;return goog.bind.apply(null,arguments)};goog.partial=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();o.push.apply(o,arguments);return e.apply(this,o)}};goog.mixin=function(e,t){for(var o in t)e[o]=t[o]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),"undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(t){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var o=goog.global.document,r=o.createElement("SCRIPT");r.type="text/javascript";r.defer=!1;r.appendChild(o.createTextNode(e));o.body.appendChild(r);o.body.removeChild(r)}}};goog.evalWorksForGlobals_=null;goog.getCssName=function(e,t){var o=function(e){return goog.cssNameMapping_[e]||e},r=function(e){e=e.split("-");for(var t=[],r=0;r<e.length;r++)t.push(o(e[r]));return t.join("-")},r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?o:r:function(e){return e};return t?e+"-"+r(t):r(e)};goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e;goog.cssNameMappingStyle_=t};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(e,t){t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,o){return o in t?t[o]:e}));return e};goog.getMsgWithFallback=function(e){return e};goog.exportSymbol=function(e,t,o){goog.exportPath_(e,t,o)};goog.exportProperty=function(e,t,o){e[t]=o};goog.inherits=function(e,t){function o(){}o.prototype=t.prototype;e.superClass_=t.prototype;e.prototype=new o;e.prototype.constructor=e;e.base=function(e,o){for(var r=Array(arguments.length-2),n=2;n<arguments.length;n++)r[n-2]=arguments[n];return t.prototype[o].apply(e,r)}};goog.base=function(e,t){var o=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!o)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(o.superClass_){for(var r=Array(arguments.length-1),n=1;n<arguments.length;n++)r[n-1]=arguments[n];return o.superClass_.constructor.apply(e,r)}r=Array(arguments.length-2);for(n=2;n<arguments.length;n++)r[n-2]=arguments[n];for(var n=!1,i=e.constructor;i;i=i.superClass_&&i.superClass_.constructor)if(i.prototype[t]===o)n=!0;else if(n)return i.prototype[t].apply(e,r);if(e[t]===o)return e.constructor.prototype[t].apply(e,r);throw Error("goog.base called from a method of one name to a method of a different name")};goog.scope=function(e){e.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);goog.defineClass=function(e,t){var o=t.constructor,r=t.statics;o&&o!=Object.prototype.constructor||(o=function(){throw Error("cannot instantiate an interface (no constructor defined).")});o=goog.defineClass.createSealingConstructor_(o,e);e&&goog.inherits(o,e);delete t.constructor;delete t.statics;goog.defineClass.applyProperties_(o.prototype,t);null!=r&&(r instanceof Function?r(o):goog.defineClass.applyProperties_(o,r));return o};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;goog.defineClass.createSealingConstructor_=function(e,t){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return e;var o=function(){var t=e.apply(this,arguments)||this;t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_];this.constructor===o&&Object.seal(t);return t};return o}return e};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.defineClass.applyProperties_=function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)o=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])};goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";var ol={};goog.debug={};goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e));this.reportErrorToServer=!0};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.dom={};goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.string={};goog.string.DETECT_DOUBLE_ESCAPING=!1;goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1;goog.string.Unicode={NBSP:"\xa0"};goog.string.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)};goog.string.endsWith=function(e,t){var o=e.length-t.length;return o>=0&&e.indexOf(t,o)==o};goog.string.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(0,t.length))};goog.string.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))};goog.string.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()};goog.string.subs=function(e){for(var t=e.split("%s"),o="",r=Array.prototype.slice.call(arguments,1);r.length&&1<t.length;)o+=t.shift()+r.shift();return o+t.join("%s")};goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)};goog.string.isEmptyString=function(e){return 0==e.length};goog.string.isEmpty=goog.string.isEmptyOrWhitespace;goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))};goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe;goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)};goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)};goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)};goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)};goog.string.isSpace=function(e){return" "==e};goog.string.isUnicodeChar=function(e){return 1==e.length&&e>=" "&&"~">=e||e>="\x80"&&"\ufffd">=e};goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(e,t){var o=String(e).toLowerCase(),r=String(t).toLowerCase();return r>o?-1:o==r?0:1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;goog.string.numerateCompare=function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var o=e.toLowerCase().match(goog.string.numerateCompareRegExp_),r=t.toLowerCase().match(goog.string.numerateCompareRegExp_),n=Math.min(o.length,r.length),i=0;n>i;i++){var s=o[i],a=r[i];if(s!=a)return o=parseInt(s,10),!isNaN(o)&&(r=parseInt(a,10),!isNaN(r)&&o-r)?o-r:a>s?-1:1}return o.length!=r.length?o.length-r.length:t>e?-1:1};goog.string.urlEncode=function(e){return encodeURIComponent(String(e))};goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))};goog.string.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")};goog.string.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;"));else{if(!goog.string.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.AMP_RE_,"&amp;"));-1!=e.indexOf("<")&&(e=e.replace(goog.string.LT_RE_,"&lt;"));-1!=e.indexOf(">")&&(e=e.replace(goog.string.GT_RE_,"&gt;"));-1!=e.indexOf('"')&&(e=e.replace(goog.string.QUOT_RE_,"&quot;"));-1!=e.indexOf("'")&&(e=e.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;"));-1!=e.indexOf("\x00")&&(e=e.replace(goog.string.NULL_RE_,"&#0;"));goog.string.DETECT_DOUBLE_ESCAPING&&-1!=e.indexOf("e")&&(e=e.replace(goog.string.E_RE_,"&#101;"))}return e};goog.string.AMP_RE_=/&/g;goog.string.LT_RE_=/</g;goog.string.GT_RE_=/>/g;goog.string.QUOT_RE_=/"/g;goog.string.SINGLE_QUOTE_RE_=/'/g;goog.string.NULL_RE_=/\x00/g;goog.string.E_RE_=/e/g;goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/;goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e};goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e};goog.string.unescapeEntitiesUsingDom_=function(e,t){var o,r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};o=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,t){var n=r[e];if(n)return n;if("#"==t.charAt(0)){var i=Number("0"+t.substr(1));isNaN(i)||(n=String.fromCharCode(i))}n||(o.innerHTML=e+" ",n=o.firstChild.nodeValue.slice(0,-1));return r[e]=n})};goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==t.charAt(0)){var o=Number("0"+t.substr(1));if(!isNaN(o))return String.fromCharCode(o)}return e}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)};goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)};goog.string.stripQuotes=function(e,t){for(var o=t.length,r=0;o>r;r++){var n=1==o?t:t.charAt(r);if(e.charAt(0)==n&&e.charAt(e.length-1)==n)return e.substring(1,e.length-1)}return e};goog.string.truncate=function(e,t,o){o&&(e=goog.string.unescapeEntities(e));e.length>t&&(e=e.substring(0,t-3)+"...");o&&(e=goog.string.htmlEscape(e));return e};goog.string.truncateMiddle=function(e,t,o,r){o&&(e=goog.string.unescapeEntities(e));if(r&&e.length>t){r>t&&(r=t);var n=e.length-r;e=e.substring(0,t-r)+"..."+e.substring(n)}else e.length>t&&(r=Math.floor(t/2),n=e.length-r,e=e.substring(0,r+t%2)+"..."+e.substring(n));o&&(e=goog.string.htmlEscape(e));return e};goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};goog.string.quote=function(e){e=String(e);if(e.quote)return e.quote();for(var t=['"'],o=0;o<e.length;o++){var r=e.charAt(o),n=r.charCodeAt(0);t[o+1]=goog.string.specialEscapeChars_[r]||(n>31&&127>n?r:goog.string.escapeChar(r))}t.push('"');return t.join("")};goog.string.escapeString=function(e){for(var t=[],o=0;o<e.length;o++)t[o]=goog.string.escapeChar(e.charAt(o));return t.join("")};goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e,o=e.charCodeAt(0);if(o>31&&127>o)t=e;else{256>o?(t="\\x",16>o||o>256)&&(t+="0"):(t="\\u",4096>o&&(t+="0"));t+=o.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[e]=t};goog.string.contains=function(e,t){return-1!=e.indexOf(t)};goog.string.caseInsensitiveContains=function(e,t){return goog.string.contains(e.toLowerCase(),t.toLowerCase())};goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0};goog.string.removeAt=function(e,t,o){var r=e;t>=0&&t<e.length&&o>0&&(r=e.substr(0,t)+e.substr(t+o,e.length-t-o));return r};goog.string.remove=function(e,t){var o=new RegExp(goog.string.regExpEscape(t),"");return e.replace(o,"")};goog.string.removeAll=function(e,t){var o=new RegExp(goog.string.regExpEscape(t),"g");return e.replace(o,"")};goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(e,t){return Array(t+1).join(e)};goog.string.padNumber=function(e,t,o){e=goog.isDef(o)?e.toFixed(o):String(e);o=e.indexOf(".");-1==o&&(o=e.length);return goog.string.repeat("0",Math.max(0,t-o))+e};goog.string.makeSafe=function(e){return null==e?"":String(e)};goog.string.buildString=function(){return Array.prototype.join.call(arguments,"")};goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};goog.string.compareVersions=function(e,t){for(var o=0,r=goog.string.trim(String(e)).split("."),n=goog.string.trim(String(t)).split("."),i=Math.max(r.length,n.length),s=0;0==o&&i>s;s++){var a=r[s]||"",g=n[s]||"",l=RegExp("(\\d*)(\\D*)","g"),u=RegExp("(\\d*)(\\D*)","g");do{var c=l.exec(a)||["","",""],h=u.exec(g)||["","",""];if(0==c[0].length&&0==h[0].length)break;var o=0==c[1].length?0:parseInt(c[1],10),d=0==h[1].length?0:parseInt(h[1],10),o=goog.string.compareElements_(o,d)||goog.string.compareElements_(0==c[2].length,0==h[2].length)||goog.string.compareElements_(c[2],h[2])}while(0==o)}return o};goog.string.compareElements_=function(e,t){return t>e?-1:e>t?1:0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(e){for(var t=0,o=0;o<e.length;++o)t=31*t+e.charCodeAt(o),t%=goog.string.HASHCODE_MAX_;return t};goog.string.uniqueStringCounter_=2147483648*Math.random()|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?0/0:t};goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)};goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)};goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})};goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()};goog.string.toTitleCase=function(e,t){var o=goog.isString(t)?goog.string.regExpEscape(t):"\\s";return e.replace(new RegExp("(^"+(o?"|["+o+"]+":"")+")([a-z])","g"),function(e,t,o){return t+o.toUpperCase()})};goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()};goog.string.parseInt=function(e){isFinite(e)&&(e=String(e));return goog.isString(e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):0/0};goog.string.splitLimit=function(e,t,o){e=e.split(t);for(var r=[];o>0&&e.length;)r.push(e.shift()),o--;e.length&&r.push(e.join(t));return r};goog.string.editDistance=function(e,t){var o=[],r=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var n=0;n<t.length+1;n++)o[n]=n;for(n=0;n<e.length;n++){r[0]=n+1;for(var i=0;i<t.length;i++)r[i+1]=Math.min(r[i]+1,o[i+1]+1,o[i]+(e[n]!=t[i]));for(i=0;i<o.length;i++)o[i]=r[i]}return r[t.length]};goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(e,t){t.unshift(e);goog.debug.Error.call(this,goog.string.subs.apply(null,t));t.shift();this.messagePattern=e};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e};goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER;goog.asserts.doAssertFailure_=function(e,t,o,r){var n="Assertion failed";if(o)var n=n+(": "+o),i=r;else e&&(n+=": "+e,i=t);e=new goog.asserts.AssertionError(""+n,i||[]);goog.asserts.errorHandler_(e)};goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)};goog.asserts.assert=function(e,t){goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.fail=function(e){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))};goog.asserts.assertNumber=function(e,t){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertString=function(e,t){goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertFunction=function(e,t){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertObject=function(e,t){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertArray=function(e,t){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertBoolean=function(e,t){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertElement=function(e,t){!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertInstanceof=function(e,t,o){!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],o,Array.prototype.slice.call(arguments,3));return e};goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")};goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE;goog.array.ASSUME_NATIVE_FUNCTIONS=!0;goog.array.peek=function(e){return e[e.length-1]};goog.array.last=goog.array.peek;goog.array.ARRAY_PROTOTYPE_=Array.prototype;goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.indexOf)?function(e,t,o){goog.asserts.assert(null!=e.length);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(e,t,o)}:function(e,t,o){o=null==o?0:0>o?Math.max(0,e.length+o):o;if(goog.isString(e))return goog.isString(t)&&1==t.length?e.indexOf(t,o):-1;for(;o<e.length;o++)if(o in e&&e[o]===t)return o;
return-1};goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.lastIndexOf)?function(e,t,o){goog.asserts.assert(null!=e.length);return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(e,t,null==o?e.length-1:o)}:function(e,t,o){o=null==o?e.length-1:o;0>o&&(o=Math.max(0,e.length+o));if(goog.isString(e))return goog.isString(t)&&1==t.length?e.lastIndexOf(t,o):-1;for(;o>=0;o--)if(o in e&&e[o]===t)return o;return-1};goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.forEach)?function(e,t,o){goog.asserts.assert(null!=e.length);goog.array.ARRAY_PROTOTYPE_.forEach.call(e,t,o)}:function(e,t,o){for(var r=e.length,n=goog.isString(e)?e.split(""):e,i=0;r>i;i++)i in n&&t.call(o,n[i],i,e)};goog.array.forEachRight=function(e,t,o){for(var r=e.length,n=goog.isString(e)?e.split(""):e,r=r-1;r>=0;--r)r in n&&t.call(o,n[r],r,e)};goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.filter)?function(e,t,o){goog.asserts.assert(null!=e.length);return goog.array.ARRAY_PROTOTYPE_.filter.call(e,t,o)}:function(e,t,o){for(var r=e.length,n=[],i=0,s=goog.isString(e)?e.split(""):e,a=0;r>a;a++)if(a in s){var g=s[a];t.call(o,g,a,e)&&(n[i++]=g)}return n};goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.map)?function(e,t,o){goog.asserts.assert(null!=e.length);return goog.array.ARRAY_PROTOTYPE_.map.call(e,t,o)}:function(e,t,o){for(var r=e.length,n=Array(r),i=goog.isString(e)?e.split(""):e,s=0;r>s;s++)s in i&&(n[s]=t.call(o,i[s],s,e));return n};goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduce)?function(e,t,o,r){goog.asserts.assert(null!=e.length);r&&(t=goog.bind(t,r));return goog.array.ARRAY_PROTOTYPE_.reduce.call(e,t,o)}:function(e,t,o,r){var n=o;goog.array.forEach(e,function(o,i){n=t.call(r,n,o,i,e)});return n};goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduceRight)?function(e,t,o,r){goog.asserts.assert(null!=e.length);r&&(t=goog.bind(t,r));return goog.array.ARRAY_PROTOTYPE_.reduceRight.call(e,t,o)}:function(e,t,o,r){var n=o;goog.array.forEachRight(e,function(o,i){n=t.call(r,n,o,i,e)});return n};goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.some)?function(e,t,o){goog.asserts.assert(null!=e.length);return goog.array.ARRAY_PROTOTYPE_.some.call(e,t,o)}:function(e,t,o){for(var r=e.length,n=goog.isString(e)?e.split(""):e,i=0;r>i;i++)if(i in n&&t.call(o,n[i],i,e))return!0;return!1};goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.every)?function(e,t,o){goog.asserts.assert(null!=e.length);return goog.array.ARRAY_PROTOTYPE_.every.call(e,t,o)}:function(e,t,o){for(var r=e.length,n=goog.isString(e)?e.split(""):e,i=0;r>i;i++)if(i in n&&!t.call(o,n[i],i,e))return!1;return!0};goog.array.count=function(e,t,o){var r=0;goog.array.forEach(e,function(e,n,i){t.call(o,e,n,i)&&++r},o);return r};goog.array.find=function(e,t,o){t=goog.array.findIndex(e,t,o);return 0>t?null:goog.isString(e)?e.charAt(t):e[t]};goog.array.findIndex=function(e,t,o){for(var r=e.length,n=goog.isString(e)?e.split(""):e,i=0;r>i;i++)if(i in n&&t.call(o,n[i],i,e))return i;return-1};goog.array.findRight=function(e,t,o){t=goog.array.findIndexRight(e,t,o);return 0>t?null:goog.isString(e)?e.charAt(t):e[t]};goog.array.findIndexRight=function(e,t,o){for(var r=e.length,n=goog.isString(e)?e.split(""):e,r=r-1;r>=0;r--)if(r in n&&t.call(o,n[r],r,e))return r;return-1};goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)};goog.array.isEmpty=function(e){return 0==e.length};goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;t>=0;t--)delete e[t];e.length=0};goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)};goog.array.insertAt=function(e,t,o){goog.array.splice(e,o,0,t)};goog.array.insertArrayAt=function(e,t,o){goog.partial(goog.array.splice,e,o,0).apply(null,t)};goog.array.insertBefore=function(e,t,o){var r;2==arguments.length||0>(r=goog.array.indexOf(e,o))?e.push(t):goog.array.insertAt(e,t,r)};goog.array.remove=function(e,t){var o,r=goog.array.indexOf(e,t);(o=r>=0)&&goog.array.removeAt(e,r);return o};goog.array.removeAt=function(e,t){goog.asserts.assert(null!=e.length);return 1==goog.array.ARRAY_PROTOTYPE_.splice.call(e,t,1).length};goog.array.removeIf=function(e,t,o){t=goog.array.findIndex(e,t,o);return t>=0?(goog.array.removeAt(e,t),!0):!1};goog.array.removeAllIf=function(e,t,o){var r=0;goog.array.forEachRight(e,function(n,i){t.call(o,n,i,e)&&goog.array.removeAt(e,i)&&r++});return r};goog.array.concat=function(){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.join=function(){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.toArray=function(e){var t=e.length;if(t>0){for(var o=Array(t),r=0;t>r;r++)o[r]=e[r];return o}return[]};goog.array.clone=goog.array.toArray;goog.array.extend=function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];if(goog.isArrayLike(o)){var r=e.length||0,n=o.length||0;e.length=r+n;for(var i=0;n>i;i++)e[r+i]=o[i]}else e.push(o)}};goog.array.splice=function(e){goog.asserts.assert(null!=e.length);return goog.array.ARRAY_PROTOTYPE_.splice.apply(e,goog.array.slice(arguments,1))};goog.array.slice=function(e,t,o){goog.asserts.assert(null!=e.length);return 2>=arguments.length?goog.array.ARRAY_PROTOTYPE_.slice.call(e,t):goog.array.ARRAY_PROTOTYPE_.slice.call(e,t,o)};goog.array.removeDuplicates=function(e,t,o){t=t||e;var r=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};o=o||r;for(var r={},n=0,i=0;i<e.length;){var s=e[i++],a=o(s);Object.prototype.hasOwnProperty.call(r,a)||(r[a]=!0,t[n++]=s)}t.length=n};goog.array.binarySearch=function(e,t,o){return goog.array.binarySearch_(e,o||goog.array.defaultCompare,!1,t)};goog.array.binarySelect=function(e,t,o){return goog.array.binarySearch_(e,t,!0,void 0,o)};goog.array.binarySearch_=function(e,t,o,r,n){for(var i,s=0,a=e.length;a>s;){var g,l=s+a>>1;g=o?t.call(n,e[l],l,e):t(r,e[l]);g>0?s=l+1:(a=l,i=!g)}return i?s:~s};goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)};goog.array.stableSort=function(e,t){for(var o=0;o<e.length;o++)e[o]={index:o,value:e[o]};var r=t||goog.array.defaultCompare;goog.array.sort(e,function(e,t){return r(e.value,t.value)||e.index-t.index});for(o=0;o<e.length;o++)e[o]=e[o].value};goog.array.sortByKey=function(e,t,o){var r=o||goog.array.defaultCompare;goog.array.sort(e,function(e,o){return r(t(e),t(o))})};goog.array.sortObjectsByKey=function(e,t,o){goog.array.sortByKey(e,function(e){return e[t]},o)};goog.array.isSorted=function(e,t,o){t=t||goog.array.defaultCompare;for(var r=1;r<e.length;r++){var n=t(e[r-1],e[r]);if(n>0||0==n&&o)return!1}return!0};goog.array.equals=function(e,t,o){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var r=e.length;o=o||goog.array.defaultCompareEquality;for(var n=0;r>n;n++)if(!o(e[n],t[n]))return!1;return!0};goog.array.compare3=function(e,t,o){o=o||goog.array.defaultCompare;for(var r=Math.min(e.length,t.length),n=0;r>n;n++){var i=o(e[n],t[n]);if(0!=i)return i}return goog.array.defaultCompare(e.length,t.length)};goog.array.defaultCompare=function(e,t){return e>t?1:t>e?-1:0};goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)};goog.array.defaultCompareEquality=function(e,t){return e===t};goog.array.binaryInsert=function(e,t,o){o=goog.array.binarySearch(e,t,o);return 0>o?(goog.array.insertAt(e,t,-(o+1)),!0):!1};goog.array.binaryRemove=function(e,t,o){t=goog.array.binarySearch(e,t,o);return t>=0?goog.array.removeAt(e,t):!1};goog.array.bucket=function(e,t,o){for(var r={},n=0;n<e.length;n++){var i=e[n],s=t.call(o,i,n,e);goog.isDef(s)&&(r[s]||(r[s]=[])).push(i)}return r};goog.array.toObject=function(e,t,o){var r={};goog.array.forEach(e,function(n,i){r[t.call(o,n,i,e)]=n});return r};goog.array.range=function(e,t,o){var r=[],n=0,i=e;o=o||1;void 0!==t&&(n=e,i=t);if(0>o*(i-n))return[];if(o>0)for(e=n;i>e;e+=o)r.push(e);else for(e=n;e>i;e+=o)r.push(e);return r};goog.array.repeat=function(e,t){for(var o=[],r=0;t>r;r++)o[r]=e;return o};goog.array.flatten=function(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(goog.isArray(o))for(var r=0;r<o.length;r+=8192)for(var n=goog.array.slice(o,r,r+8192),n=goog.array.flatten.apply(null,n),i=0;i<n.length;i++)e.push(n[i]);else e.push(o)}return e};goog.array.rotate=function(e,t){goog.asserts.assert(null!=e.length);e.length&&(t%=e.length,t>0?goog.array.ARRAY_PROTOTYPE_.unshift.apply(e,e.splice(-t,t)):0>t&&goog.array.ARRAY_PROTOTYPE_.push.apply(e,e.splice(0,-t)));return e};goog.array.moveItem=function(e,t,o){goog.asserts.assert(t>=0&&t<e.length);goog.asserts.assert(o>=0&&o<e.length);t=goog.array.ARRAY_PROTOTYPE_.splice.call(e,t,1);goog.array.ARRAY_PROTOTYPE_.splice.call(e,o,0,t[0])};goog.array.zip=function(){if(!arguments.length)return[];for(var e=[],t=0;;t++){for(var o=[],r=0;r<arguments.length;r++){var n=arguments[r];if(t>=n.length)return e;o.push(n[t])}e.push(o)}};goog.array.shuffle=function(e,t){for(var o=t||Math.random,r=e.length-1;r>0;r--){var n=Math.floor(o()*(r+1)),i=e[r];e[r]=e[n];e[n]=i}};goog.array.copyByIndex=function(e,t){var o=[];goog.array.forEach(t,function(t){o.push(e[t])});return o};goog.labs={};goog.labs.userAgent={};goog.labs.userAgent.util={};goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""};goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator};goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_();goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()};goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_};goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(t,e)};goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(t,e)};goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,o=RegExp("(\\w[\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g"),r=[];t=o.exec(e);)r.push([t[1],t[2],t[3]||void 0]);return r};goog.object={};goog.object.forEach=function(e,t,o){for(var r in e)t.call(o,e[r],r,e)};goog.object.filter=function(e,t,o){var r,n={};for(r in e)t.call(o,e[r],r,e)&&(n[r]=e[r]);return n};goog.object.map=function(e,t,o){var r,n={};for(r in e)n[r]=t.call(o,e[r],r,e);return n};goog.object.some=function(e,t,o){for(var r in e)if(t.call(o,e[r],r,e))return!0;return!1};goog.object.every=function(e,t,o){for(var r in e)if(!t.call(o,e[r],r,e))return!1;return!0};goog.object.getCount=function(e){var t,o=0;for(t in e)o++;return o};goog.object.getAnyKey=function(e){for(var t in e)return t};goog.object.getAnyValue=function(e){for(var t in e)return e[t]};goog.object.contains=function(e,t){return goog.object.containsValue(e,t)};goog.object.getValues=function(e){var t,o=[],r=0;for(t in e)o[r++]=e[t];return o};goog.object.getKeys=function(e){var t,o=[],r=0;for(t in e)o[r++]=t;return o};goog.object.getValueByKeys=function(e,t){for(var o=goog.isArrayLike(t),r=o?t:arguments,o=o?0:1;o<r.length&&(e=e[r[o]],goog.isDef(e));o++);return e};goog.object.containsKey=function(e,t){return t in e};goog.object.containsValue=function(e,t){for(var o in e)if(e[o]==t)return!0;return!1};goog.object.findKey=function(e,t,o){for(var r in e)if(t.call(o,e[r],r,e))return r};goog.object.findValue=function(e,t,o){return(t=goog.object.findKey(e,t,o))&&e[t]};goog.object.isEmpty=function(e){for(var t in e)return!1;return!0};goog.object.clear=function(e){for(var t in e)delete e[t]};goog.object.remove=function(e,t){var o;(o=t in e)&&delete e[t];return o};goog.object.add=function(e,t,o){if(t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,o)};goog.object.get=function(e,t,o){return t in e?e[t]:o};goog.object.set=function(e,t,o){e[t]=o};goog.object.setIfUndefined=function(e,t,o){return t in e?e[t]:e[t]=o};goog.object.setWithReturnValueIfNotSet=function(e,t,o){if(t in e)return e[t];o=o();return e[t]=o};goog.object.equals=function(e,t){for(var o in e)if(!(o in t)||e[o]!==t[o])return!1;for(o in t)if(!(o in e))return!1;return!0};goog.object.clone=function(e){var t,o={};for(t in e)o[t]=e[t];return o};goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var o,t="array"==t?[]:{};for(o in e)t[o]=goog.object.unsafeClone(e[o]);return t}return e};goog.object.transpose=function(e){var t,o={};for(t in e)o[e[t]]=t;return o};goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.object.extend=function(e){for(var t,o,r=1;r<arguments.length;r++){o=arguments[r];for(t in o)e[t]=o[t];for(var n=0;n<goog.object.PROTOTYPE_FIELDS_.length;n++)t=goog.object.PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}};goog.object.create=function(){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(e%2)throw Error("Uneven number of arguments");for(var t={},o=0;e>o;o+=2)t[arguments[o]]=arguments[o+1];return t};goog.object.createSet=function(){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var t={},o=0;e>o;o++)t[arguments[o]]=!0;return t};goog.object.createImmutableView=function(e){var t=e;Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t));return t};goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)};goog.labs.userAgent.browser={};goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")||goog.labs.userAgent.util.matchUserAgent("OPR")};goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")};goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")};goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))};goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")};goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")};goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchOpera_()&&!goog.labs.userAgent.browser.matchEdge_()};goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())};goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_;goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_;goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_;goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_;goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_;goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_;goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_;goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_;goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_;goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")};goog.labs.userAgent.browser.getVersion=function(){function e(e){e=goog.array.find(e,r);return o[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);var t=goog.labs.userAgent.util.extractVersionTuples(t),o={};goog.array.forEach(t,function(e){o[e[0]]=e[1]});var r=goog.partial(goog.object.containsKey,o);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera","OPR"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS"]):(t=t[2])&&t[1]||""};goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),e)};goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];var t="",o=/MSIE +([\d\.]+)/.exec(e);if(o&&o[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==o[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=o[1];return t};goog.labs.userAgent.engine={};goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")};goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")};goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){var e=goog.labs.userAgent.util.extractVersionTuples(e),t=goog.labs.userAgent.engine.getEngineTuple_(e);if(t)return"Gecko"==t[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):t[1];var o,e=e[0];if(e&&(o=e[2])&&(o=/Trident\/([^\s;]+)/.exec(o)))return o[1]}return""};goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var o=e[t];if("Edge"==o[0])return o}};goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)};goog.labs.userAgent.engine.getVersionForKey_=function(e,t){var o=goog.array.find(e,function(e){return t==e[0]});return o&&o[1]||""};goog.labs.userAgent.platform={};goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")};goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")};goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")};goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")};goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()};goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")};goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")};goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")};goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")};goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";goog.labs.userAgent.platform.isWindows()?(t=/Windows (?:NT|Phone) ([0-9.]+)/,t=(e=t.exec(e))?e[1]:"0.0"):goog.labs.userAgent.platform.isIos()?(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,t=(e=t.exec(e))&&e[1].replace(/_/g,".")):goog.labs.userAgent.platform.isMacintosh()?(t=/Mac OS X ([0-9_.]+)/,t=(e=t.exec(e))?e[1].replace(/_/g,"."):"10"):goog.labs.userAgent.platform.isAndroid()?(t=/Android\s+([^\);]+)(\)|;)/,t=(e=t.exec(e))&&e[1]):goog.labs.userAgent.platform.isChromeOS()&&(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,t=(e=t.exec(e))&&e[1]);return t||""};goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)};goog.userAgent={};goog.userAgent.ASSUME_IE=!1;goog.userAgent.ASSUME_EDGE=!1;goog.userAgent.ASSUME_GECKO=!1;goog.userAgent.ASSUME_WEBKIT=!1;goog.userAgent.ASSUME_MOBILE_WEBKIT=!1;goog.userAgent.ASSUME_OPERA=!1;goog.userAgent.ASSUME_ANY_VERSION=!1;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()};goog.userAgent.getNavigator=function(){return goog.global.navigator||null};goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera();goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE();goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge();goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko();goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit();goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")};goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_();goog.userAgent.SAFARI=goog.userAgent.WEBKIT;goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigator();return e&&e.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=!1;goog.userAgent.ASSUME_WINDOWS=!1;goog.userAgent.ASSUME_LINUX=!1;goog.userAgent.ASSUME_X11=!1;goog.userAgent.ASSUME_ANDROID=!1;goog.userAgent.ASSUME_IPHONE=!1;goog.userAgent.ASSUME_IPAD=!1;goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD;goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh();goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows();goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()};goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_();goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigator();return!!e&&goog.string.contains(e.appVersion||"","X11")};goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_();goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid();goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone();goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad();goog.userAgent.determineVersion_=function(){if(goog.userAgent.OPERA&&goog.global.opera){var e=goog.global.opera.version;return goog.isFunction(e)?e():e}var e="",t=goog.userAgent.getVersionRegexResult_();t&&(e=t?t[1]:"");return goog.userAgent.IE&&(t=goog.userAgent.getDocumentMode_(),t>parseFloat(e))?String(t):e};goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv\:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):void 0};goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)};goog.userAgent.isVersionOrHigherCache_={};goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[e]||(goog.userAgent.isVersionOrHigherCache_[e]=0<=goog.string.compareVersions(goog.userAgent.VERSION,e))};goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher;goog.userAgent.isDocumentModeOrHigher=function(e){return goog.userAgent.DOCUMENT_MODE>=e};goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;goog.userAgent.DOCUMENT_MODE=function(){var e=goog.global.document,t=goog.userAgent.getDocumentMode_();return e&&goog.userAgent.IE?t||("CSS1Compat"==e.compatMode?parseInt(goog.userAgent.VERSION,10):5):void 0}();ol.ASSUME_TOUCH=!1;ol.DEFAULT_MAX_ZOOM=42;ol.DEFAULT_MIN_ZOOM=0;ol.DEFAULT_TILE_CACHE_HIGH_WATER_MARK=2048;ol.DEFAULT_TILE_SIZE=256;ol.DEFAULT_WMS_VERSION="1.3.0";ol.DRAG_BOX_HYSTERESIS_PIXELS=8;ol.ENABLE_CANVAS=!0;ol.ENABLE_DOM=!0;ol.ENABLE_IMAGE=!0;ol.ENABLE_NAMED_COLORS=!1;ol.ENABLE_PROJ4JS=!0;ol.ENABLE_TILE=!0;ol.ENABLE_VECTOR=!0;ol.ENABLE_WEBGL=!0;ol.LEGACY_IE_SUPPORT=!1;ol.INITIAL_ATLAS_SIZE=256;ol.IS_LEGACY_IE=goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9.0")&&""!==goog.userAgent.VERSION;ol.MAX_ATLAS_SIZE=-1;ol.MOUSEWHEELZOOM_MAXDELTA=1;ol.MOUSEWHEELZOOM_TIMEOUT_DURATION=80;ol.OVERVIEWMAP_MAX_RATIO=.75;ol.OVERVIEWMAP_MIN_RATIO=.1;ol.SIMPLIFY_TOLERANCE=.5;ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK=1024;ol.inherits=goog.inherits;goog.math={};goog.math.randomInt=function(e){return Math.floor(Math.random()*e)};goog.math.uniformRandom=function(e,t){return e+Math.random()*(t-e)};goog.math.clamp=function(e,t,o){return Math.min(Math.max(e,t),o)};goog.math.modulo=function(e,t){var o=e%t;return 0>o*t?o+t:o};goog.math.lerp=function(e,t,o){return e+o*(t-e)};goog.math.nearlyEquals=function(e,t,o){return Math.abs(e-t)<=(o||1e-6)};goog.math.standardAngle=function(e){return goog.math.modulo(e,360)};goog.math.standardAngleInRadians=function(e){return goog.math.modulo(e,2*Math.PI)};goog.math.toRadians=function(e){return e*Math.PI/180};goog.math.toDegrees=function(e){return 180*e/Math.PI};goog.math.angleDx=function(e,t){return t*Math.cos(goog.math.toRadians(e))};goog.math.angleDy=function(e,t){return t*Math.sin(goog.math.toRadians(e))};goog.math.angle=function(e,t,o,r){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(r-t,o-e)))};goog.math.angleDifference=function(e,t){var o=goog.math.standardAngle(t)-goog.math.standardAngle(e);o>180?o-=360:-180>=o&&(o=360+o);return o};goog.math.sign=Math.sign||function(e){return e>0?1:0>e?-1:e};goog.math.longestCommonSubsequence=function(e,t,o,r){o=o||function(e,t){return e==t};r=r||function(t){return e[t]};for(var n=e.length,i=t.length,s=[],a=0;n+1>a;a++)s[a]=[],s[a][0]=0;for(var g=0;i+1>g;g++)s[0][g]=0;for(a=1;n>=a;a++)for(g=1;i>=g;g++)s[a][g]=o(e[a-1],t[g-1])?s[a-1][g-1]+1:Math.max(s[a-1][g],s[a][g-1]);for(var l=[],a=n,g=i;a>0&&g>0;)o(e[a-1],t[g-1])?(l.unshift(r(a-1,g-1)),a--,g--):s[a-1][g]>s[a][g-1]?a--:g--;return l};goog.math.sum=function(){return goog.array.reduce(arguments,function(e,t){return e+t},0)};goog.math.average=function(){return goog.math.sum.apply(null,arguments)/arguments.length};goog.math.sampleVariance=function(){var e=arguments.length;if(2>e)return 0;var t=goog.math.average.apply(null,arguments);return goog.math.sum.apply(null,goog.array.map(arguments,function(e){return Math.pow(e-t,2)}))/(e-1)};goog.math.standardDeviation=function(){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))};goog.math.isInt=function(e){return isFinite(e)&&0==e%1};goog.math.isFiniteNumber=function(e){return isFinite(e)&&!isNaN(e)};goog.math.isNegativeZero=function(e){return 0==e&&0>1/e};goog.math.log10Floor=function(e){if(e>0){var t=Math.round(Math.log(e)*Math.LOG10E);return t-(parseFloat("1e"+t)>e)}return 0==e?-1/0:0/0};goog.math.safeFloor=function(e,t){goog.asserts.assert(!goog.isDef(t)||t>0);return Math.floor(e+(t||2e-15))};goog.math.safeCeil=function(e,t){goog.asserts.assert(!goog.isDef(t)||t>0);return Math.ceil(e-(t||2e-15))};ol.CenterConstraint={};ol.CenterConstraint.createExtent=function(e){return function(t){return goog.isDef(t)?[goog.math.clamp(t[0],e[0],e[2]),goog.math.clamp(t[1],e[1],e[3])]:void 0}};ol.CenterConstraint.none=function(e){return e};ol.array={};ol.array.binaryFindNearest=function(e,t){var o=goog.array.binarySearch(e,t,function(e,t){return t-e});if(o>=0)return o;if(-1==o)return 0;if(o==-e.length-1)return e.length-1;var r=-o-2,o=-o-1;return e[r]-t<t-e[o]?r:o};ol.array.linearFindNearest=function(e,t,o){var r=e.length;if(e[0]<=t)return 0;if(!(t<=e[r-1])){if(o>0){for(o=1;r>o;++o)if(e[o]<t)return o-1}else if(0>o){for(o=1;r>o;++o)if(e[o]<=t)return o}else for(o=1;r>o;++o){if(e[o]==t)return o;if(e[o]<t)return e[o-1]-t<t-e[o]?o-1:o}goog.asserts.fail()}return r-1};ol.array.reverseSubArray=function(e,t,o){goog.asserts.assert(t>=0,"Array begin index should be equal to or greater than 0");for(goog.asserts.assert(o<e.length,"Array end index should be less than the array length");o>t;){var r=e[t];e[t]=e[o];e[o]=r;++t;--o}};ol.ResolutionConstraint={};ol.ResolutionConstraint.createSnapToResolutions=function(e){return function(t,o,r){return goog.isDef(t)?(t=ol.array.linearFindNearest(e,t,r),t=goog.math.clamp(t+o,0,e.length-1),e[t]):void 0}};ol.ResolutionConstraint.createSnapToPower=function(e,t,o){return function(r,n,i){return goog.isDef(r)?(i=i>0?0:0>i?1:.5,r=Math.floor(Math.log(t/r)/Math.log(e)+i),n=Math.max(r+n,0),goog.isDef(o)&&(n=Math.min(n,o)),t/Math.pow(e,n)):void 0}};ol.RotationConstraint={};ol.RotationConstraint.disable=function(e){return goog.isDef(e)?0:void 0};ol.RotationConstraint.none=function(e,t){return goog.isDef(e)?e+t:void 0};ol.RotationConstraint.createSnapToN=function(e){var t=2*Math.PI/e;return function(e,o){return goog.isDef(e)?e=Math.floor((e+o)/t+.5)*t:void 0}};ol.RotationConstraint.createSnapToZero=function(e){var t=e||goog.math.toRadians(5);return function(e,o){return goog.isDef(e)?Math.abs(e+o)<=t?0:e+o:void 0}};ol.Constraints=function(e,t,o){this.center=e;this.resolution=t;this.rotation=o};goog.debug.entryPointRegistry={};goog.debug.EntryPointMonitor=function(){};goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=!1;goog.debug.entryPointRegistry.register=function(e){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=e;
if(goog.debug.entryPointRegistry.monitorsMayExist_)for(var t=goog.debug.entryPointRegistry.monitors_,o=0;o<t.length;o++)e(goog.bind(t[o].wrap,t[o]))};goog.debug.entryPointRegistry.monitorAll=function(e){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var t=goog.bind(e.wrap,e),o=0;o<goog.debug.entryPointRegistry.refList_.length;o++)goog.debug.entryPointRegistry.refList_[o](t);goog.debug.entryPointRegistry.monitors_.push(e)};goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(e){var t=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(e==t[t.length-1],"Only the most recent monitor can be unwrapped.");e=goog.bind(e.unwrap,e);for(var o=0;o<goog.debug.entryPointRegistry.refList_.length;o++)goog.debug.entryPointRegistry.refList_[o](e);t.length--};goog.events={};goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.msMaxTouchPoints)};goog.disposable={};goog.disposable.IDisposable=function(){};goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=Error().stack),goog.Disposable.instances_[goog.getUid(this)]=this);this.disposed_=this.disposed_;this.onDisposeCallbacks_=this.onDisposeCallbacks_};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};goog.Disposable.MONITORING_MODE=0;goog.Disposable.INCLUDE_STACK_ON_CREATION=!0;goog.Disposable.instances_={};goog.Disposable.getUndisposedObjects=function(){var e,t=[];for(e in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(e)&&t.push(goog.Disposable.instances_[Number(e)]);return t};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=!1;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var e=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(e))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete goog.Disposable.instances_[e]}};goog.Disposable.prototype.registerDisposable=function(e){this.addOnDisposeCallback(goog.partial(goog.dispose,e))};goog.Disposable.prototype.addOnDisposeCallback=function(e,t){this.disposed_?e.call(t):(this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),this.onDisposeCallbacks_.push(goog.isDef(t)?goog.bind(e,t):e))};goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()};goog.Disposable.isDisposed=function(e){return e&&"function"==typeof e.isDisposed?e.isDisposed():!1};goog.dispose=function(e){e&&"function"==typeof e.dispose&&e.dispose()};goog.disposeAll=function(){for(var e=0,t=arguments.length;t>e;++e){var o=arguments[e];goog.isArrayLike(o)?goog.disposeAll.apply(null,o):goog.dispose(o)}};goog.events.EventId=function(e){this.id=e};goog.events.EventId.prototype.toString=function(){return this.id};goog.events.Event=function(e,t){this.type=e instanceof goog.events.EventId?String(e):e;this.currentTarget=this.target=t;this.defaultPrevented=this.propagationStopped_=!1;this.returnValue_=!0};goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0};goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0;this.returnValue_=!1};goog.events.Event.stopPropagation=function(e){e.stopPropagation()};goog.events.Event.preventDefault=function(e){e.preventDefault()};goog.events.getVendorPrefixedName_=function(e){return goog.userAgent.WEBKIT?"webkit"+e:goog.userAgent.OPERA?"o"+e.toLowerCase():e.toLowerCase()};goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",SELECTSTART:"selectstart",WHEEL:"wheel",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",RESET:"reset",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",ANIMATIONSTART:goog.events.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.getVendorPrefixedName_("AnimationIteration"),TRANSITIONEND:goog.events.getVendorPrefixedName_("TransitionEnd"),POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXT:"text",TEXTINPUT:"textInput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified",BEFOREPRINT:"beforeprint",AFTERPRINT:"afterprint"};goog.reflect={};goog.reflect.object=function(e,t){return t};goog.reflect.sinkValue=function(e){goog.reflect.sinkValue[" "](e);return e};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(o){}return!1};goog.events.BrowserEvent=function(e,t){goog.events.Event.call(this,e?e.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.platformModifierKey=!1;this.event_=null;e&&this.init(e,t)};goog.inherits(goog.events.BrowserEvent,goog.events.Event);goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};goog.events.BrowserEvent.IEButtonMap=[1,4,2];goog.events.BrowserEvent.prototype.init=function(e,t){var o=this.type=e.type,r=e.changedTouches?e.changedTouches[0]:null;this.target=goog.isNull(r)?e.target||e.srcElement:r.target;this.currentTarget=t;var n=e.relatedTarget;n?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(n,"nodeName")||(n=null)):o==goog.events.EventType.MOUSEOVER?n=e.fromElement:o==goog.events.EventType.MOUSEOUT&&(n=e.toElement);this.relatedTarget=n;goog.isNull(r)?(this.offsetX=goog.userAgent.WEBKIT||void 0!==e.offsetX?e.offsetX:e.layerX,this.offsetY=goog.userAgent.WEBKIT||void 0!==e.offsetY?e.offsetY:e.layerY,this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0);this.button=e.button;this.keyCode=e.keyCode||0;this.charCode=e.charCode||("keypress"==o?e.keyCode:0);this.ctrlKey=e.ctrlKey;this.altKey=e.altKey;this.shiftKey=e.shiftKey;this.metaKey=e.metaKey;this.platformModifierKey=goog.userAgent.MAC?e.metaKey:e.ctrlKey;this.state=e.state;this.event_=e;e.defaultPrevented&&this.preventDefault()};goog.events.BrowserEvent.prototype.isButton=function(e){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==e:"click"==this.type?e==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[e])};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)};goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0};goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var e=this.event_;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};goog.events.Listenable=function(){};goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1e6*Math.random()|0);goog.events.Listenable.addImplementation=function(e){e.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0};goog.events.Listenable.isImplementedBy=function(e){return!(!e||!e[goog.events.Listenable.IMPLEMENTED_BY_PROP])};goog.events.ListenableKey=function(){};goog.events.ListenableKey.counter_=0;goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_};goog.events.Listener=function(e,t,o,r,n,i){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=Error().stack);this.listener=e;this.proxy=t;this.src=o;this.type=r;this.capture=!!n;this.handler=i;this.key=goog.events.ListenableKey.reserveKey();this.removed=this.callOnce=!1};goog.events.Listener.ENABLE_MONITORING=!1;goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0;this.handler=this.src=this.proxy=this.listener=null};goog.events.ListenerMap=function(e){this.src=e;this.listeners={};this.typeCount_=0};goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_};goog.events.ListenerMap.prototype.getListenerCount=function(){var e,t=0;for(e in this.listeners)t+=this.listeners[e].length;return t};goog.events.ListenerMap.prototype.add=function(e,t,o,r,n){var i=e.toString();e=this.listeners[i];e||(e=this.listeners[i]=[],this.typeCount_++);var s=goog.events.ListenerMap.findListenerIndex_(e,t,r,n);s>-1?(t=e[s],o||(t.callOnce=!1)):(t=new goog.events.Listener(t,null,this.src,i,!!r,n),t.callOnce=o,e.push(t));return t};goog.events.ListenerMap.prototype.remove=function(e,t,o,r){e=e.toString();if(!(e in this.listeners))return!1;var n=this.listeners[e];t=goog.events.ListenerMap.findListenerIndex_(n,t,o,r);return t>-1?(n[t].markAsRemoved(),goog.array.removeAt(n,t),0==n.length&&(delete this.listeners[e],this.typeCount_--),!0):!1};goog.events.ListenerMap.prototype.removeByKey=function(e){var t=e.type;if(!(t in this.listeners))return!1;var o=goog.array.remove(this.listeners[t],e);o&&(e.markAsRemoved(),0==this.listeners[t].length&&(delete this.listeners[t],this.typeCount_--));return o};goog.events.ListenerMap.prototype.removeAll=function(e){e=e&&e.toString();var t,o=0;for(t in this.listeners)if(!e||t==e){for(var r=this.listeners[t],n=0;n<r.length;n++)++o,r[n].markAsRemoved();delete this.listeners[t];this.typeCount_--}return o};goog.events.ListenerMap.prototype.getListeners=function(e,t){var o=this.listeners[e.toString()],r=[];if(o)for(var n=0;n<o.length;++n){var i=o[n];i.capture==t&&r.push(i)}return r};goog.events.ListenerMap.prototype.getListener=function(e,t,o,r){e=this.listeners[e.toString()];var n=-1;e&&(n=goog.events.ListenerMap.findListenerIndex_(e,t,o,r));return n>-1?e[n]:null};goog.events.ListenerMap.prototype.hasListener=function(e,t){var o=goog.isDef(e),r=o?e.toString():"",n=goog.isDef(t);return goog.object.some(this.listeners,function(e){for(var i=0;i<e.length;++i)if(!(o&&e[i].type!=r||n&&e[i].capture!=t))return!0;return!1})};goog.events.ListenerMap.findListenerIndex_=function(e,t,o,r){for(var n=0;n<e.length;++n){var i=e[n];if(!i.removed&&i.listener==t&&i.capture==!!o&&i.handler==r)return n}return-1};goog.events.LISTENER_MAP_PROP_="closure_lm_"+(1e6*Math.random()|0);goog.events.onString_="on";goog.events.onStringMap_={};goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2};goog.events.CAPTURE_SIMULATION_MODE=2;goog.events.listenerCountEstimate_=0;goog.events.listen=function(e,t,o,r,n){if(goog.isArray(t)){for(var i=0;i<t.length;i++)goog.events.listen(e,t[i],o,r,n);return null}o=goog.events.wrapListener(o);return goog.events.Listenable.isImplementedBy(e)?e.listen(t,o,r,n):goog.events.listen_(e,t,o,!1,r,n)};goog.events.listen_=function(e,t,o,r,n,i){if(!t)throw Error("Invalid event type");var s=!!n;if(s&&!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_FAIL)return goog.asserts.fail("Can not register capture listener in IE8-."),null;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_SILENT)return null}var a=goog.events.getListenerMap_(e);a||(e[goog.events.LISTENER_MAP_PROP_]=a=new goog.events.ListenerMap(e));o=a.add(t,o,r,n,i);if(o.proxy)return o;r=goog.events.getProxy();o.proxy=r;r.src=e;r.listener=o;if(e.addEventListener)e.addEventListener(t.toString(),r,s);else{if(!e.attachEvent)throw Error("addEventListener and attachEvent are unavailable.");e.attachEvent(goog.events.getOnString_(t.toString()),r)}goog.events.listenerCountEstimate_++;return o};goog.events.getProxy=function(){var e=goog.events.handleBrowserEvent_,t=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(o){return e.call(t.src,t.listener,o)}:function(o){o=e.call(t.src,t.listener,o);return o?void 0:o};return t};goog.events.listenOnce=function(e,t,o,r,n){if(goog.isArray(t)){for(var i=0;i<t.length;i++)goog.events.listenOnce(e,t[i],o,r,n);return null}o=goog.events.wrapListener(o);return goog.events.Listenable.isImplementedBy(e)?e.listenOnce(t,o,r,n):goog.events.listen_(e,t,o,!0,r,n)};goog.events.listenWithWrapper=function(e,t,o,r,n){t.listen(e,o,r,n)};goog.events.unlisten=function(e,t,o,r,n){if(goog.isArray(t)){for(var i=0;i<t.length;i++)goog.events.unlisten(e,t[i],o,r,n);return null}o=goog.events.wrapListener(o);if(goog.events.Listenable.isImplementedBy(e))return e.unlisten(t,o,r,n);if(!e)return!1;r=!!r;return(e=goog.events.getListenerMap_(e))&&(t=e.getListener(t,o,r,n))?goog.events.unlistenByKey(t):!1};goog.events.unlistenByKey=function(e){if(goog.isNumber(e)||!e||e.removed)return!1;var t=e.src;if(goog.events.Listenable.isImplementedBy(t))return t.unlistenByKey(e);var o=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(o,r,e.capture):t.detachEvent&&t.detachEvent(goog.events.getOnString_(o),r);goog.events.listenerCountEstimate_--;(o=goog.events.getListenerMap_(t))?(o.removeByKey(e),0==o.getTypeCount()&&(o.src=null,t[goog.events.LISTENER_MAP_PROP_]=null)):e.markAsRemoved();return!0};goog.events.unlistenWithWrapper=function(e,t,o,r,n){t.unlisten(e,o,r,n)};goog.events.removeAll=function(e,t){if(!e)return 0;if(goog.events.Listenable.isImplementedBy(e))return e.removeAllListeners(t);var o=goog.events.getListenerMap_(e);if(!o)return 0;var r,n=0,i=t&&t.toString();for(r in o.listeners)if(!i||r==i)for(var s=o.listeners[r].concat(),a=0;a<s.length;++a)goog.events.unlistenByKey(s[a])&&++n;return n};goog.events.getListeners=function(e,t,o){return goog.events.Listenable.isImplementedBy(e)?e.getListeners(t,o):e&&(e=goog.events.getListenerMap_(e))?e.getListeners(t,o):[]};goog.events.getListener=function(e,t,o,r,n){o=goog.events.wrapListener(o);r=!!r;return goog.events.Listenable.isImplementedBy(e)?e.getListener(t,o,r,n):e&&(e=goog.events.getListenerMap_(e))?e.getListener(t,o,r,n):null};goog.events.hasListener=function(e,t,o){if(goog.events.Listenable.isImplementedBy(e))return e.hasListener(t,o);e=goog.events.getListenerMap_(e);return!!e&&e.hasListener(t,o)};goog.events.expose=function(e){var t,o=[];for(t in e)o.push(e[t]&&e[t].id?t+" = "+e[t]+" ("+e[t].id+")":t+" = "+e[t]);return o.join("\n")};goog.events.getOnString_=function(e){return e in goog.events.onStringMap_?goog.events.onStringMap_[e]:goog.events.onStringMap_[e]=goog.events.onString_+e};goog.events.fireListeners=function(e,t,o,r){return goog.events.Listenable.isImplementedBy(e)?e.fireListeners(t,o,r):goog.events.fireListeners_(e,t,o,r)};goog.events.fireListeners_=function(e,t,o,r){var n=!0;if((e=goog.events.getListenerMap_(e))&&(t=e.listeners[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var i=t[e];i&&i.capture==o&&!i.removed&&(i=goog.events.fireListener(i,r),n=n&&!1!==i)}return n};goog.events.fireListener=function(e,t){var o=e.listener,r=e.handler||e.src;e.callOnce&&goog.events.unlistenByKey(e);return o.call(r,t)};goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_};goog.events.dispatchEvent=function(e,t){goog.asserts.assert(goog.events.Listenable.isImplementedBy(e),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance.");return e.dispatchEvent(t)};goog.events.protectBrowserEventEntryPoint=function(e){goog.events.handleBrowserEvent_=e.protectEntryPoint(goog.events.handleBrowserEvent_)};goog.events.handleBrowserEvent_=function(e,t){if(e.removed)return!0;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var o=t||goog.getObjectByName("window.event"),r=new goog.events.BrowserEvent(o,this),n=!0;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.ON){if(!goog.events.isMarkedIeEvent_(o)){goog.events.markIeEvent_(o);for(var o=[],i=r.currentTarget;i;i=i.parentNode)o.push(i);for(var i=e.type,s=o.length-1;!r.propagationStopped_&&s>=0;s--){r.currentTarget=o[s];var a=goog.events.fireListeners_(o[s],i,!0,r),n=n&&a}for(s=0;!r.propagationStopped_&&s<o.length;s++)r.currentTarget=o[s],a=goog.events.fireListeners_(o[s],i,!1,r),n=n&&a}}else n=goog.events.fireListener(e,r);return n}return goog.events.fireListener(e,new goog.events.BrowserEvent(t,this))};goog.events.markIeEvent_=function(e){var t=!1;if(0==e.keyCode)try{e.keyCode=-1;return}catch(o){t=!0}(t||void 0==e.returnValue)&&(e.returnValue=!0)};goog.events.isMarkedIeEvent_=function(e){return 0>e.keyCode||void 0!=e.returnValue};goog.events.uniqueIdCounter_=0;goog.events.getUniqueId=function(e){return e+"_"+goog.events.uniqueIdCounter_++};goog.events.getListenerMap_=function(e){e=e[goog.events.LISTENER_MAP_PROP_];return e instanceof goog.events.ListenerMap?e:null};goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1e9*Math.random()>>>0);goog.events.wrapListener=function(e){goog.asserts.assert(e,"Listener can not be null.");if(goog.isFunction(e))return e;goog.asserts.assert(e.handleEvent,"An object listener must have handleEvent method.");e[goog.events.LISTENER_WRAPPER_PROP_]||(e[goog.events.LISTENER_WRAPPER_PROP_]=function(t){return e.handleEvent(t)});return e[goog.events.LISTENER_WRAPPER_PROP_]};goog.debug.entryPointRegistry.register(function(e){goog.events.handleBrowserEvent_=e(goog.events.handleBrowserEvent_)});goog.events.EventTarget=function(){goog.Disposable.call(this);this.eventTargetListeners_=new goog.events.ListenerMap(this);this.actualEventTarget_=this;this.parentEventTarget_=null};goog.inherits(goog.events.EventTarget,goog.Disposable);goog.events.Listenable.addImplementation(goog.events.EventTarget);goog.events.EventTarget.MAX_ANCESTORS_=1e3;goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_};goog.events.EventTarget.prototype.setParentEventTarget=function(e){this.parentEventTarget_=e};goog.events.EventTarget.prototype.addEventListener=function(e,t,o,r){goog.events.listen(this,e,t,o,r)};goog.events.EventTarget.prototype.removeEventListener=function(e,t,o,r){goog.events.unlisten(this,e,t,o,r)};goog.events.EventTarget.prototype.dispatchEvent=function(e){this.assertInitialized_();var t,o=this.getParentEventTarget();if(o){t=[];for(var r=1;o;o=o.getParentEventTarget())t.push(o),goog.asserts.assert(++r<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop")}return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,e,t)};goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this);this.removeAllListeners();this.parentEventTarget_=null};goog.events.EventTarget.prototype.listen=function(e,t,o,r){this.assertInitialized_();return this.eventTargetListeners_.add(String(e),t,!1,o,r)};goog.events.EventTarget.prototype.listenOnce=function(e,t,o,r){return this.eventTargetListeners_.add(String(e),t,!0,o,r)};goog.events.EventTarget.prototype.unlisten=function(e,t,o,r){return this.eventTargetListeners_.remove(String(e),t,o,r)};goog.events.EventTarget.prototype.unlistenByKey=function(e){return this.eventTargetListeners_.removeByKey(e)};goog.events.EventTarget.prototype.removeAllListeners=function(e){return this.eventTargetListeners_?this.eventTargetListeners_.removeAll(e):0};goog.events.EventTarget.prototype.fireListeners=function(e,t,o){e=this.eventTargetListeners_.listeners[String(e)];if(!e)return!0;e=e.concat();for(var r=!0,n=0;n<e.length;++n){var i=e[n];if(i&&!i.removed&&i.capture==t){var s=i.listener,a=i.handler||i.src;i.callOnce&&this.unlistenByKey(i);r=!1!==s.call(a,o)&&r}}return r&&0!=o.returnValue_};goog.events.EventTarget.prototype.getListeners=function(e,t){return this.eventTargetListeners_.getListeners(String(e),t)};goog.events.EventTarget.prototype.getListener=function(e,t,o,r){return this.eventTargetListeners_.getListener(String(e),t,o,r)};goog.events.EventTarget.prototype.hasListener=function(e,t){var o=goog.isDef(e)?String(e):void 0;return this.eventTargetListeners_.hasListener(o,t)};goog.events.EventTarget.prototype.setTargetForTesting=function(e){this.actualEventTarget_=e};goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")};goog.events.EventTarget.dispatchEventInternal_=function(e,t,o){var r=t.type||t;if(goog.isString(t))t=new goog.events.Event(t,e);else if(t instanceof goog.events.Event)t.target=t.target||e;else{var n=t;t=new goog.events.Event(r,e);goog.object.extend(t,n)}var i,n=!0;if(o)for(var s=o.length-1;!t.propagationStopped_&&s>=0;s--)i=t.currentTarget=o[s],n=i.fireListeners(r,!0,t)&&n;t.propagationStopped_||(i=t.currentTarget=e,n=i.fireListeners(r,!0,t)&&n,t.propagationStopped_||(n=i.fireListeners(r,!1,t)&&n));if(o)for(s=0;!t.propagationStopped_&&s<o.length;s++)i=t.currentTarget=o[s],n=i.fireListeners(r,!1,t)&&n;return n};ol.Observable=function(){goog.events.EventTarget.call(this);this.revision_=0};goog.inherits(ol.Observable,goog.events.EventTarget);ol.Observable.unByKey=function(e){goog.events.unlistenByKey(e)};ol.Observable.prototype.changed=function(){++this.revision_;this.dispatchEvent(goog.events.EventType.CHANGE)};ol.Observable.prototype.getRevision=function(){return this.revision_};ol.Observable.prototype.on=function(e,t,o){return goog.events.listen(this,e,t,!1,o)};ol.Observable.prototype.once=function(e,t,o){return goog.events.listenOnce(this,e,t,!1,o)};ol.Observable.prototype.un=function(e,t,o){goog.events.unlisten(this,e,t,!1,o)};ol.Observable.prototype.unByKey=ol.Observable.unByKey;ol.ObjectEventType={PROPERTYCHANGE:"propertychange"};ol.ObjectEvent=function(e,t,o){goog.events.Event.call(this,e);this.key=t;this.oldValue=o};goog.inherits(ol.ObjectEvent,goog.events.Event);ol.Object=function(e){ol.Observable.call(this);goog.getUid(this);this.values_={};goog.isDef(e)&&this.setProperties(e)};goog.inherits(ol.Object,ol.Observable);ol.Object.changeEventTypeCache_={};ol.Object.getChangeEventType=function(e){return ol.Object.changeEventTypeCache_.hasOwnProperty(e)?ol.Object.changeEventTypeCache_[e]:ol.Object.changeEventTypeCache_[e]="change:"+e};ol.Object.prototype.get=function(e){var t;this.values_.hasOwnProperty(e)&&(t=this.values_[e]);return t};ol.Object.prototype.getKeys=function(){return goog.object.getKeys(this.values_)};ol.Object.prototype.getProperties=function(){var e,t={};for(e in this.values_)t[e]=this.values_[e];return t};ol.Object.prototype.notify=function(e,t){var o;o=ol.Object.getChangeEventType(e);this.dispatchEvent(new ol.ObjectEvent(o,e,t));o=ol.ObjectEventType.PROPERTYCHANGE;this.dispatchEvent(new ol.ObjectEvent(o,e,t))};ol.Object.prototype.set=function(e,t){var o=this.values_[e];this.values_[e]=t;this.notify(e,o)};ol.Object.prototype.setProperties=function(e){for(var t in e)this.set(t,e[t])};ol.Object.prototype.unset=function(e){if(e in this.values_){var t=this.values_[e];delete this.values_[e];this.notify(e,t)}};ol.size={};ol.size.buffer=function(e,t,o){goog.isDef(o)||(o=[0,0]);o[0]=e[0]+2*t;o[1]=e[1]+2*t;return o};ol.size.equals=function(e,t){return e[0]==t[0]&&e[1]==t[1]};ol.size.hasArea=function(e){return 0<e[0]&&0<e[1]};ol.size.scale=function(e,t,o){goog.isDef(o)||(o=[0,0]);o[0]=e[0]*t+.5|0;o[1]=e[1]*t+.5|0;return o};ol.size.toSize=function(e,t){if(goog.isArray(e))return e;goog.asserts.assert(goog.isNumber(e));goog.isDef(t)?(t[0]=e,t[1]=e):t=[e,e];return t};ol.coordinate={};ol.coordinate.add=function(e,t){e[0]+=t[0];e[1]+=t[1];return e};ol.coordinate.closestOnSegment=function(e,t){var o=e[0],r=e[1],n=t[0],i=t[1],s=n[0],n=n[1],a=i[0],i=i[1],g=a-s,l=i-n,o=0===g&&0===l?0:(g*(o-s)+l*(r-n))/(g*g+l*l||0);0>=o||(o>=1?(s=a,n=i):(s+=o*g,n+=o*l));return[s,n]};ol.coordinate.createStringXY=function(e){return function(t){return ol.coordinate.toStringXY(t,e)}};ol.coordinate.degreesToStringHDMS_=function(e,t){var o=goog.math.modulo(e+180,360)-180,r=Math.abs(Math.round(3600*o));return Math.floor(r/3600)+"\xb0 "+goog.string.padNumber(Math.floor(r/60%60),2)+"\u2032 "+goog.string.padNumber(Math.floor(r%60),2)+"\u2033 "+t.charAt(0>o?1:0)};ol.coordinate.format=function(e,t,o){return goog.isDef(e)?t.replace("{x}",e[0].toFixed(o)).replace("{y}",e[1].toFixed(o)):""};ol.coordinate.equals=function(e,t){for(var o=!0,r=e.length-1;r>=0;--r)if(e[r]!=t[r]){o=!1;break}return o};ol.coordinate.rotate=function(e,t){var o=Math.cos(t),r=Math.sin(t),n=e[1]*o+e[0]*r;e[0]=e[0]*o-e[1]*r;e[1]=n;return e};ol.coordinate.scale=function(e,t){e[0]*=t;e[1]*=t;return e};ol.coordinate.sub=function(e,t){e[0]-=t[0];e[1]-=t[1];return e};ol.coordinate.squaredDistance=function(e,t){var o=e[0]-t[0],r=e[1]-t[1];return o*o+r*r};ol.coordinate.squaredDistanceToSegment=function(e,t){return ol.coordinate.squaredDistance(e,ol.coordinate.closestOnSegment(e,t))};ol.coordinate.toStringHDMS=function(e){return goog.isDef(e)?ol.coordinate.degreesToStringHDMS_(e[1],"NS")+" "+ol.coordinate.degreesToStringHDMS_(e[0],"EW"):""};ol.coordinate.toStringXY=function(e,t){return ol.coordinate.format(e,"{x}, {y}",t)};ol.coordinate.fromProjectedArray=function(e,t){var o=t.charAt(0);return"n"===o||"s"===o?[e[1],e[0]]:e};goog.vec={};goog.vec.Float32Array=function(e){this.length=e.length||e;for(var t=0;t<this.length;t++)this[t]=e[t]||0};goog.vec.Float32Array.BYTES_PER_ELEMENT=4;goog.vec.Float32Array.prototype.BYTES_PER_ELEMENT=4;goog.vec.Float32Array.prototype.set=function(e,t){t=t||0;for(var o=0;o<e.length&&t+o<this.length;o++)this[t+o]=e[o]};goog.vec.Float32Array.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(goog.exportProperty(goog.vec.Float32Array,"BYTES_PER_ELEMENT",goog.vec.Float32Array.BYTES_PER_ELEMENT),goog.exportProperty(goog.vec.Float32Array.prototype,"BYTES_PER_ELEMENT",goog.vec.Float32Array.prototype.BYTES_PER_ELEMENT),goog.exportProperty(goog.vec.Float32Array.prototype,"set",goog.vec.Float32Array.prototype.set),goog.exportProperty(goog.vec.Float32Array.prototype,"toString",goog.vec.Float32Array.prototype.toString),goog.exportSymbol("Float32Array",goog.vec.Float32Array));goog.vec.Float64Array=function(e){this.length=e.length||e;for(var t=0;t<this.length;t++)this[t]=e[t]||0};goog.vec.Float64Array.BYTES_PER_ELEMENT=8;goog.vec.Float64Array.prototype.BYTES_PER_ELEMENT=8;goog.vec.Float64Array.prototype.set=function(e,t){t=t||0;for(var o=0;o<e.length&&t+o<this.length;o++)this[t+o]=e[o]};goog.vec.Float64Array.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{goog.exportProperty(goog.vec.Float64Array,"BYTES_PER_ELEMENT",goog.vec.Float64Array.BYTES_PER_ELEMENT)}catch(float64ArrayError){}goog.exportProperty(goog.vec.Float64Array.prototype,"BYTES_PER_ELEMENT",goog.vec.Float64Array.prototype.BYTES_PER_ELEMENT);goog.exportProperty(goog.vec.Float64Array.prototype,"set",goog.vec.Float64Array.prototype.set);goog.exportProperty(goog.vec.Float64Array.prototype,"toString",goog.vec.Float64Array.prototype.toString);goog.exportSymbol("Float64Array",goog.vec.Float64Array)}goog.vec.EPSILON=1e-6;goog.vec.Vec3={};goog.vec.Vec3.createFloat32=function(){return new Float32Array(3)};goog.vec.Vec3.createFloat64=function(){return new Float64Array(3)};goog.vec.Vec3.createNumber=function(){var e=Array(3);goog.vec.Vec3.setFromValues(e,0,0,0);return e};goog.vec.Vec3.create=function(){return new Float32Array(3)};goog.vec.Vec3.createFloat32FromArray=function(e){var t=goog.vec.Vec3.createFloat32();goog.vec.Vec3.setFromArray(t,e);return t};goog.vec.Vec3.createFloat32FromValues=function(e,t,o){var r=goog.vec.Vec3.createFloat32();goog.vec.Vec3.setFromValues(r,e,t,o);return r};goog.vec.Vec3.cloneFloat32=goog.vec.Vec3.createFloat32FromArray;goog.vec.Vec3.createFloat64FromArray=function(e){var t=goog.vec.Vec3.createFloat64();goog.vec.Vec3.setFromArray(t,e);return t};goog.vec.Vec3.createFloat64FromValues=function(e,t,o){var r=goog.vec.Vec3.createFloat64();goog.vec.Vec3.setFromValues(r,e,t,o);return r};goog.vec.Vec3.cloneFloat64=goog.vec.Vec3.createFloat64FromArray;
goog.vec.Vec3.createFromArray=function(e){var t=goog.vec.Vec3.create();goog.vec.Vec3.setFromArray(t,e);return t};goog.vec.Vec3.createFromValues=function(e,t,o){var r=goog.vec.Vec3.create();goog.vec.Vec3.setFromValues(r,e,t,o);return r};goog.vec.Vec3.clone=function(e){var t=goog.vec.Vec3.create();goog.vec.Vec3.setFromArray(t,e);return t};goog.vec.Vec3.setFromValues=function(e,t,o,r){e[0]=t;e[1]=o;e[2]=r;return e};goog.vec.Vec3.setFromArray=function(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];return e};goog.vec.Vec3.add=function(e,t,o){o[0]=e[0]+t[0];o[1]=e[1]+t[1];o[2]=e[2]+t[2];return o};goog.vec.Vec3.subtract=function(e,t,o){o[0]=e[0]-t[0];o[1]=e[1]-t[1];o[2]=e[2]-t[2];return o};goog.vec.Vec3.negate=function(e,t){t[0]=-e[0];t[1]=-e[1];t[2]=-e[2];return t};goog.vec.Vec3.abs=function(e,t){t[0]=Math.abs(e[0]);t[1]=Math.abs(e[1]);t[2]=Math.abs(e[2]);return t};goog.vec.Vec3.scale=function(e,t,o){o[0]=e[0]*t;o[1]=e[1]*t;o[2]=e[2]*t;return o};goog.vec.Vec3.magnitudeSquared=function(e){var t=e[0],o=e[1];e=e[2];return t*t+o*o+e*e};goog.vec.Vec3.magnitude=function(e){var t=e[0],o=e[1];e=e[2];return Math.sqrt(t*t+o*o+e*e)};goog.vec.Vec3.normalize=function(e,t){var o=1/goog.vec.Vec3.magnitude(e);t[0]=e[0]*o;t[1]=e[1]*o;t[2]=e[2]*o;return t};goog.vec.Vec3.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]};goog.vec.Vec3.cross=function(e,t,o){var r=e[0],n=e[1];e=e[2];var i=t[0],s=t[1];t=t[2];o[0]=n*t-e*s;o[1]=e*i-r*t;o[2]=r*s-n*i;return o};goog.vec.Vec3.distanceSquared=function(e,t){var o=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return o*o+r*r+n*n};goog.vec.Vec3.distance=function(e,t){return Math.sqrt(goog.vec.Vec3.distanceSquared(e,t))};goog.vec.Vec3.direction=function(e,t,o){var r=t[0]-e[0],n=t[1]-e[1];e=t[2]-e[2];(t=Math.sqrt(r*r+n*n+e*e))?(t=1/t,o[0]=r*t,o[1]=n*t,o[2]=e*t):o[0]=o[1]=o[2]=0;return o};goog.vec.Vec3.lerp=function(e,t,o,r){var n=e[0],i=e[1];e=e[2];r[0]=(t[0]-n)*o+n;r[1]=(t[1]-i)*o+i;r[2]=(t[2]-e)*o+e;return r};goog.vec.Vec3.max=function(e,t,o){goog.isNumber(t)?(o[0]=Math.max(e[0],t),o[1]=Math.max(e[1],t),o[2]=Math.max(e[2],t)):(o[0]=Math.max(e[0],t[0]),o[1]=Math.max(e[1],t[1]),o[2]=Math.max(e[2],t[2]));return o};goog.vec.Vec3.min=function(e,t,o){goog.isNumber(t)?(o[0]=Math.min(e[0],t),o[1]=Math.min(e[1],t),o[2]=Math.min(e[2],t)):(o[0]=Math.min(e[0],t[0]),o[1]=Math.min(e[1],t[1]),o[2]=Math.min(e[2],t[2]));return o};goog.vec.Vec3.equals=function(e,t){return e.length==t.length&&e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]};goog.vec.Vec4={};goog.vec.Vec4.createFloat32=function(){return new Float32Array(4)};goog.vec.Vec4.createFloat64=function(){return new Float64Array(4)};goog.vec.Vec4.createNumber=function(){var e=Array(4);goog.vec.Vec4.setFromValues(e,0,0,0,0);return e};goog.vec.Vec4.create=function(){return new Float32Array(4)};goog.vec.Vec4.createFromArray=function(e){var t=goog.vec.Vec4.create();goog.vec.Vec4.setFromArray(t,e);return t};goog.vec.Vec4.createFloat32FromArray=function(e){var t=goog.vec.Vec4.createFloat32();goog.vec.Vec4.setFromArray(t,e);return t};goog.vec.Vec4.createFloat32FromValues=function(e,t,o,r){var n=goog.vec.Vec4.createFloat32();goog.vec.Vec4.setFromValues(n,e,t,o,r);return n};goog.vec.Vec4.cloneFloat32=goog.vec.Vec4.createFloat32FromArray;goog.vec.Vec4.createFloat64FromArray=function(e){var t=goog.vec.Vec4.createFloat64();goog.vec.Vec4.setFromArray(t,e);return t};goog.vec.Vec4.createFloat64FromValues=function(e,t,o,r){var n=goog.vec.Vec4.createFloat64();goog.vec.Vec4.setFromValues(n,e,t,o,r);return n};goog.vec.Vec4.cloneFloat64=goog.vec.Vec4.createFloat64FromArray;goog.vec.Vec4.createFromValues=function(e,t,o,r){var n=goog.vec.Vec4.create();goog.vec.Vec4.setFromValues(n,e,t,o,r);return n};goog.vec.Vec4.clone=goog.vec.Vec4.createFromArray;goog.vec.Vec4.setFromValues=function(e,t,o,r,n){e[0]=t;e[1]=o;e[2]=r;e[3]=n;return e};goog.vec.Vec4.setFromArray=function(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];return e};goog.vec.Vec4.add=function(e,t,o){o[0]=e[0]+t[0];o[1]=e[1]+t[1];o[2]=e[2]+t[2];o[3]=e[3]+t[3];return o};goog.vec.Vec4.subtract=function(e,t,o){o[0]=e[0]-t[0];o[1]=e[1]-t[1];o[2]=e[2]-t[2];o[3]=e[3]-t[3];return o};goog.vec.Vec4.negate=function(e,t){t[0]=-e[0];t[1]=-e[1];t[2]=-e[2];t[3]=-e[3];return t};goog.vec.Vec4.abs=function(e,t){t[0]=Math.abs(e[0]);t[1]=Math.abs(e[1]);t[2]=Math.abs(e[2]);t[3]=Math.abs(e[3]);return t};goog.vec.Vec4.scale=function(e,t,o){o[0]=e[0]*t;o[1]=e[1]*t;o[2]=e[2]*t;o[3]=e[3]*t;return o};goog.vec.Vec4.magnitudeSquared=function(e){var t=e[0],o=e[1],r=e[2];e=e[3];return t*t+o*o+r*r+e*e};goog.vec.Vec4.magnitude=function(e){var t=e[0],o=e[1],r=e[2];e=e[3];return Math.sqrt(t*t+o*o+r*r+e*e)};goog.vec.Vec4.normalize=function(e,t){var o=1/goog.vec.Vec4.magnitude(e);t[0]=e[0]*o;t[1]=e[1]*o;t[2]=e[2]*o;t[3]=e[3]*o;return t};goog.vec.Vec4.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]};goog.vec.Vec4.lerp=function(e,t,o,r){var n=e[0],i=e[1],s=e[2];e=e[3];r[0]=(t[0]-n)*o+n;r[1]=(t[1]-i)*o+i;r[2]=(t[2]-s)*o+s;r[3]=(t[3]-e)*o+e;return r};goog.vec.Vec4.max=function(e,t,o){goog.isNumber(t)?(o[0]=Math.max(e[0],t),o[1]=Math.max(e[1],t),o[2]=Math.max(e[2],t),o[3]=Math.max(e[3],t)):(o[0]=Math.max(e[0],t[0]),o[1]=Math.max(e[1],t[1]),o[2]=Math.max(e[2],t[2]),o[3]=Math.max(e[3],t[3]));return o};goog.vec.Vec4.min=function(e,t,o){goog.isNumber(t)?(o[0]=Math.min(e[0],t),o[1]=Math.min(e[1],t),o[2]=Math.min(e[2],t),o[3]=Math.min(e[3],t)):(o[0]=Math.min(e[0],t[0]),o[1]=Math.min(e[1],t[1]),o[2]=Math.min(e[2],t[2]),o[3]=Math.min(e[3],t[3]));return o};goog.vec.Vec4.equals=function(e,t){return e.length==t.length&&e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]&&e[3]==t[3]};goog.vec.Mat4={};goog.vec.Mat4.createFloat32=function(){return new Float32Array(16)};goog.vec.Mat4.createFloat64=function(){return new Float64Array(16)};goog.vec.Mat4.createNumber=function(){var e=Array(16);goog.vec.Mat4.setFromValues(e,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return e};goog.vec.Mat4.create=function(){return goog.vec.Mat4.createFloat32()};goog.vec.Mat4.createFloat32Identity=function(){var e=goog.vec.Mat4.createFloat32();e[0]=e[5]=e[10]=e[15]=1;return e};goog.vec.Mat4.createFloat64Identity=function(){var e=goog.vec.Mat4.createFloat64();e[0]=e[5]=e[10]=e[15]=1;return e};goog.vec.Mat4.createNumberIdentity=function(){var e=Array(16);goog.vec.Mat4.setFromValues(e,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return e};goog.vec.Mat4.createIdentity=function(){return goog.vec.Mat4.createFloat32Identity()};goog.vec.Mat4.createFloat32FromArray=function(e){var t=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromArray(t,e);return t};goog.vec.Mat4.createFloat32FromValues=function(e,t,o,r,n,i,s,a,g,l,u,c,h,d,m,p){var f=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromValues(f,e,t,o,r,n,i,s,a,g,l,u,c,h,d,m,p);return f};goog.vec.Mat4.cloneFloat32=goog.vec.Mat4.createFloat32FromArray;goog.vec.Mat4.createFloat64FromArray=function(e){var t=goog.vec.Mat4.createFloat64();goog.vec.Mat4.setFromArray(t,e);return t};goog.vec.Mat4.createFloat64FromValues=function(e,t,o,r,n,i,s,a,g,l,u,c,h,d,m,p){var f=goog.vec.Mat4.createFloat64();goog.vec.Mat4.setFromValues(f,e,t,o,r,n,i,s,a,g,l,u,c,h,d,m,p);return f};goog.vec.Mat4.cloneFloat64=goog.vec.Mat4.createFloat64FromArray;goog.vec.Mat4.createFromArray=function(e){var t=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromArray(t,e);return t};goog.vec.Mat4.createFromValues=function(e,t,o,r,n,i,s,a,g,l,u,c,h,d,m,p){return goog.vec.Mat4.createFloat32FromValues(e,t,o,r,n,i,s,a,g,l,u,c,h,d,m,p)};goog.vec.Mat4.clone=goog.vec.Mat4.createFromArray;goog.vec.Mat4.getElement=function(e,t,o){return e[t+4*o]};goog.vec.Mat4.setElement=function(e,t,o,r){e[t+4*o]=r;return e};goog.vec.Mat4.setFromValues=function(e,t,o,r,n,i,s,a,g,l,u,c,h,d,m,p,f){e[0]=t;e[1]=o;e[2]=r;e[3]=n;e[4]=i;e[5]=s;e[6]=a;e[7]=g;e[8]=l;e[9]=u;e[10]=c;e[11]=h;e[12]=d;e[13]=m;e[14]=p;e[15]=f;return e};goog.vec.Mat4.setFromArray=function(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e};goog.vec.Mat4.setFromRowMajorArray=function(e,t){e[0]=t[0];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=t[1];e[5]=t[5];e[6]=t[9];e[7]=t[13];e[8]=t[2];e[9]=t[6];e[10]=t[10];e[11]=t[14];e[12]=t[3];e[13]=t[7];e[14]=t[11];e[15]=t[15];return e};goog.vec.Mat4.setDiagonalValues=function(e,t,o,r,n){e[0]=t;e[5]=o;e[10]=r;e[15]=n;return e};goog.vec.Mat4.setDiagonal=function(e,t){e[0]=t[0];e[5]=t[1];e[10]=t[2];e[15]=t[3];return e};goog.vec.Mat4.getDiagonal=function(e,t,o){if(o)for(var r=o>0?4*o:-o,n=0;n<4-Math.abs(o);n++)t[n]=e[r+5*n];else t[0]=e[0],t[1]=e[5],t[2]=e[10],t[3]=e[15];return t};goog.vec.Mat4.setColumnValues=function(e,t,o,r,n,i){t*=4;e[t]=o;e[t+1]=r;e[t+2]=n;e[t+3]=i;return e};goog.vec.Mat4.setColumn=function(e,t,o){t*=4;e[t]=o[0];e[t+1]=o[1];e[t+2]=o[2];e[t+3]=o[3];return e};goog.vec.Mat4.getColumn=function(e,t,o){t*=4;o[0]=e[t];o[1]=e[t+1];o[2]=e[t+2];o[3]=e[t+3];return o};goog.vec.Mat4.setColumns=function(e,t,o,r,n){goog.vec.Mat4.setColumn(e,0,t);goog.vec.Mat4.setColumn(e,1,o);goog.vec.Mat4.setColumn(e,2,r);goog.vec.Mat4.setColumn(e,3,n);return e};goog.vec.Mat4.getColumns=function(e,t,o,r,n){goog.vec.Mat4.getColumn(e,0,t);goog.vec.Mat4.getColumn(e,1,o);goog.vec.Mat4.getColumn(e,2,r);goog.vec.Mat4.getColumn(e,3,n)};goog.vec.Mat4.setRowValues=function(e,t,o,r,n,i){e[t]=o;e[t+4]=r;e[t+8]=n;e[t+12]=i;return e};goog.vec.Mat4.setRow=function(e,t,o){e[t]=o[0];e[t+4]=o[1];e[t+8]=o[2];e[t+12]=o[3];return e};goog.vec.Mat4.getRow=function(e,t,o){o[0]=e[t];o[1]=e[t+4];o[2]=e[t+8];o[3]=e[t+12];return o};goog.vec.Mat4.setRows=function(e,t,o,r,n){goog.vec.Mat4.setRow(e,0,t);goog.vec.Mat4.setRow(e,1,o);goog.vec.Mat4.setRow(e,2,r);goog.vec.Mat4.setRow(e,3,n);return e};goog.vec.Mat4.getRows=function(e,t,o,r,n){goog.vec.Mat4.getRow(e,0,t);goog.vec.Mat4.getRow(e,1,o);goog.vec.Mat4.getRow(e,2,r);goog.vec.Mat4.getRow(e,3,n)};goog.vec.Mat4.makeZero=function(e){e[0]=0;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=0;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=0;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=0;return e};goog.vec.Mat4.makeIdentity=function(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e};goog.vec.Mat4.addMat=function(e,t,o){o[0]=e[0]+t[0];o[1]=e[1]+t[1];o[2]=e[2]+t[2];o[3]=e[3]+t[3];o[4]=e[4]+t[4];o[5]=e[5]+t[5];o[6]=e[6]+t[6];o[7]=e[7]+t[7];o[8]=e[8]+t[8];o[9]=e[9]+t[9];o[10]=e[10]+t[10];o[11]=e[11]+t[11];o[12]=e[12]+t[12];o[13]=e[13]+t[13];o[14]=e[14]+t[14];o[15]=e[15]+t[15];return o};goog.vec.Mat4.subMat=function(e,t,o){o[0]=e[0]-t[0];o[1]=e[1]-t[1];o[2]=e[2]-t[2];o[3]=e[3]-t[3];o[4]=e[4]-t[4];o[5]=e[5]-t[5];o[6]=e[6]-t[6];o[7]=e[7]-t[7];o[8]=e[8]-t[8];o[9]=e[9]-t[9];o[10]=e[10]-t[10];o[11]=e[11]-t[11];o[12]=e[12]-t[12];o[13]=e[13]-t[13];o[14]=e[14]-t[14];o[15]=e[15]-t[15];return o};goog.vec.Mat4.multScalar=function(e,t,o){o[0]=e[0]*t;o[1]=e[1]*t;o[2]=e[2]*t;o[3]=e[3]*t;o[4]=e[4]*t;o[5]=e[5]*t;o[6]=e[6]*t;o[7]=e[7]*t;o[8]=e[8]*t;o[9]=e[9]*t;o[10]=e[10]*t;o[11]=e[11]*t;o[12]=e[12]*t;o[13]=e[13]*t;o[14]=e[14]*t;o[15]=e[15]*t;return o};goog.vec.Mat4.multMat=function(e,t,o){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],g=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],m=e[11],p=e[12],f=e[13],_=e[14];e=e[15];var y=t[0],E=t[1],S=t[2],v=t[3],T=t[4],b=t[5],R=t[6],C=t[7],A=t[8],N=t[9],M=t[10],L=t[11],I=t[12],x=t[13],D=t[14];t=t[15];o[0]=r*y+a*E+c*S+p*v;o[1]=n*y+g*E+h*S+f*v;o[2]=i*y+l*E+d*S+_*v;o[3]=s*y+u*E+m*S+e*v;o[4]=r*T+a*b+c*R+p*C;o[5]=n*T+g*b+h*R+f*C;o[6]=i*T+l*b+d*R+_*C;o[7]=s*T+u*b+m*R+e*C;o[8]=r*A+a*N+c*M+p*L;o[9]=n*A+g*N+h*M+f*L;o[10]=i*A+l*N+d*M+_*L;o[11]=s*A+u*N+m*M+e*L;o[12]=r*I+a*x+c*D+p*t;o[13]=n*I+g*x+h*D+f*t;o[14]=i*I+l*x+d*D+_*t;o[15]=s*I+u*x+m*D+e*t;return o};goog.vec.Mat4.transpose=function(e,t){if(t==e){var o=e[1],r=e[2],n=e[3],i=e[6],s=e[7],a=e[11];t[1]=e[4];t[2]=e[8];t[3]=e[12];t[4]=o;t[6]=e[9];t[7]=e[13];t[8]=r;t[9]=i;t[11]=e[14];t[12]=n;t[13]=s;t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t};goog.vec.Mat4.determinant=function(e){var t=e[0],o=e[1],r=e[2],n=e[3],i=e[4],s=e[5],a=e[6],g=e[7],l=e[8],u=e[9],c=e[10],h=e[11],d=e[12],m=e[13],p=e[14];e=e[15];return(t*s-o*i)*(c*e-h*p)-(t*a-r*i)*(u*e-h*m)+(t*g-n*i)*(u*p-c*m)+(o*a-r*s)*(l*e-h*d)-(o*g-n*s)*(l*p-c*d)+(r*g-n*a)*(l*m-u*d)};goog.vec.Mat4.invert=function(e,t){var o=e[0],r=e[1],n=e[2],i=e[3],s=e[4],a=e[5],g=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],m=e[12],p=e[13],f=e[14],_=e[15],y=o*a-r*s,E=o*g-n*s,S=o*l-i*s,v=r*g-n*a,T=r*l-i*a,b=n*l-i*g,R=u*p-c*m,C=u*f-h*m,A=u*_-d*m,N=c*f-h*p,M=c*_-d*p,L=h*_-d*f,I=y*L-E*M+S*N+v*A-T*C+b*R;if(0==I)return!1;I=1/I;t[0]=(a*L-g*M+l*N)*I;t[1]=(-r*L+n*M-i*N)*I;t[2]=(p*b-f*T+_*v)*I;t[3]=(-c*b+h*T-d*v)*I;t[4]=(-s*L+g*A-l*C)*I;t[5]=(o*L-n*A+i*C)*I;t[6]=(-m*b+f*S-_*E)*I;t[7]=(u*b-h*S+d*E)*I;t[8]=(s*M-a*A+l*R)*I;t[9]=(-o*M+r*A-i*R)*I;t[10]=(m*T-p*S+_*y)*I;t[11]=(-u*T+c*S-d*y)*I;t[12]=(-s*N+a*C-g*R)*I;t[13]=(o*N-r*C+n*R)*I;t[14]=(-m*v+p*E-f*y)*I;t[15]=(u*v-c*E+h*y)*I;return!0};goog.vec.Mat4.equals=function(e,t){return e.length==t.length&&e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]&&e[3]==t[3]&&e[4]==t[4]&&e[5]==t[5]&&e[6]==t[6]&&e[7]==t[7]&&e[8]==t[8]&&e[9]==t[9]&&e[10]==t[10]&&e[11]==t[11]&&e[12]==t[12]&&e[13]==t[13]&&e[14]==t[14]&&e[15]==t[15]};goog.vec.Mat4.multVec3=function(e,t,o){var r=t[0],n=t[1];t=t[2];o[0]=r*e[0]+n*e[4]+t*e[8]+e[12];o[1]=r*e[1]+n*e[5]+t*e[9]+e[13];o[2]=r*e[2]+n*e[6]+t*e[10]+e[14];return o};goog.vec.Mat4.multVec3NoTranslate=function(e,t,o){var r=t[0],n=t[1];t=t[2];o[0]=r*e[0]+n*e[4]+t*e[8];o[1]=r*e[1]+n*e[5]+t*e[9];o[2]=r*e[2]+n*e[6]+t*e[10];return o};goog.vec.Mat4.multVec3Projective=function(e,t,o){var r=t[0],n=t[1];t=t[2];var i=1/(r*e[3]+n*e[7]+t*e[11]+e[15]);o[0]=(r*e[0]+n*e[4]+t*e[8]+e[12])*i;o[1]=(r*e[1]+n*e[5]+t*e[9]+e[13])*i;o[2]=(r*e[2]+n*e[6]+t*e[10]+e[14])*i;return o};goog.vec.Mat4.multVec4=function(e,t,o){var r=t[0],n=t[1],i=t[2];t=t[3];o[0]=r*e[0]+n*e[4]+i*e[8]+t*e[12];o[1]=r*e[1]+n*e[5]+i*e[9]+t*e[13];o[2]=r*e[2]+n*e[6]+i*e[10]+t*e[14];o[3]=r*e[3]+n*e[7]+i*e[11]+t*e[15];return o};goog.vec.Mat4.makeTranslate=function(e,t,o,r){goog.vec.Mat4.makeIdentity(e);return goog.vec.Mat4.setColumnValues(e,3,t,o,r,1)};goog.vec.Mat4.makeScale=function(e,t,o,r){goog.vec.Mat4.makeIdentity(e);return goog.vec.Mat4.setDiagonalValues(e,t,o,r,1)};goog.vec.Mat4.makeRotate=function(e,t,o,r,n){var i=Math.cos(t),s=1-i;t=Math.sin(t);return goog.vec.Mat4.setFromValues(e,o*o*s+i,o*r*s+n*t,o*n*s-r*t,0,o*r*s-n*t,r*r*s+i,r*n*s+o*t,0,o*n*s+r*t,r*n*s-o*t,n*n*s+i,0,0,0,0,1)};goog.vec.Mat4.makeRotateX=function(e,t){var o=Math.cos(t),r=Math.sin(t);return goog.vec.Mat4.setFromValues(e,1,0,0,0,0,o,r,0,0,-r,o,0,0,0,0,1)};goog.vec.Mat4.makeRotateY=function(e,t){var o=Math.cos(t),r=Math.sin(t);return goog.vec.Mat4.setFromValues(e,o,0,-r,0,0,1,0,0,r,0,o,0,0,0,0,1)};goog.vec.Mat4.makeRotateZ=function(e,t){var o=Math.cos(t),r=Math.sin(t);return goog.vec.Mat4.setFromValues(e,o,r,0,0,-r,o,0,0,0,0,1,0,0,0,0,1)};goog.vec.Mat4.makeFrustum=function(e,t,o,r,n,i,s){return goog.vec.Mat4.setFromValues(e,2*i/(o-t),0,0,0,0,2*i/(n-r),0,0,(o+t)/(o-t),(n+r)/(n-r),-(s+i)/(s-i),-1,0,0,-(2*s*i)/(s-i),0)};goog.vec.Mat4.makePerspective=function(e,t,o,r,n){var i=t/2;t=n-r;var s=Math.sin(i);if(0==t||0==s||0==o)return e;i=Math.cos(i)/s;return goog.vec.Mat4.setFromValues(e,i/o,0,0,0,0,i,0,0,0,0,-(n+r)/t,-1,0,0,-(2*r*n)/t,0)};goog.vec.Mat4.makeOrtho=function(e,t,o,r,n,i,s){return goog.vec.Mat4.setFromValues(e,2/(o-t),0,0,0,0,2/(n-r),0,0,0,0,-2/(s-i),0,-(o+t)/(o-t),-(n+r)/(n-r),-(s+i)/(s-i),1)};goog.vec.Mat4.makeLookAt=function(e,t,o,r){var n=goog.vec.Mat4.tmpVec4_[0];goog.vec.Vec3.subtract(o,t,n);goog.vec.Vec3.normalize(n,n);n[3]=0;o=goog.vec.Mat4.tmpVec4_[1];goog.vec.Vec3.cross(n,r,o);goog.vec.Vec3.normalize(o,o);o[3]=0;r=goog.vec.Mat4.tmpVec4_[2];goog.vec.Vec3.cross(o,n,r);goog.vec.Vec3.normalize(r,r);r[3]=0;goog.vec.Vec3.negate(n,n);goog.vec.Mat4.setRow(e,0,o);goog.vec.Mat4.setRow(e,1,r);goog.vec.Mat4.setRow(e,2,n);goog.vec.Mat4.setRowValues(e,3,0,0,0,1);goog.vec.Mat4.translate(e,-t[0],-t[1],-t[2]);return e};goog.vec.Mat4.toLookAt=function(e,t,o,r){var n=goog.vec.Mat4.tmpMat4_[0];if(!goog.vec.Mat4.invert(e,n))return!1;t&&(t[0]=n[12],t[1]=n[13],t[2]=n[14]);(o||r)&&(o||(o=goog.vec.Mat4.tmpVec3_[0]),o[0]=-e[2],o[1]=-e[6],o[2]=-e[10],goog.vec.Vec3.normalize(o,o));r&&(t=goog.vec.Mat4.tmpVec3_[1],t[0]=e[0],t[1]=e[4],t[2]=e[8],goog.vec.Vec3.cross(t,o,r),goog.vec.Vec3.normalize(r,r));return!0};goog.vec.Mat4.makeEulerZXZ=function(e,t,o,r){var n=Math.cos(t);t=Math.sin(t);var i=Math.cos(o);o=Math.sin(o);var s=Math.cos(r);r=Math.sin(r);e[0]=n*s-i*t*r;e[1]=i*n*r+s*t;e[2]=r*o;e[3]=0;e[4]=-n*r-s*i*t;e[5]=n*i*s-t*r;e[6]=s*o;e[7]=0;e[8]=o*t;e[9]=-n*o;e[10]=i;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e};goog.vec.Mat4.toEulerZXZ=function(e,t,o){var r=Math.sqrt(e[2]*e[2]+e[6]*e[6]);o=o?-1:1;r>goog.vec.EPSILON?(t[2]=Math.atan2(e[2]*o,e[6]*o),t[1]=Math.atan2(r*o,e[10]),t[0]=Math.atan2(e[8]*o,-e[9]*o)):(t[0]=0,t[1]=Math.atan2(r*o,e[10]),t[2]=Math.atan2(e[1],e[0]));t[0]=(t[0]+2*Math.PI)%(2*Math.PI);t[2]=(t[2]+2*Math.PI)%(2*Math.PI);t[1]=(t[1]*o+2*Math.PI)%(2*Math.PI)*o;return t};goog.vec.Mat4.translate=function(e,t,o,r){return goog.vec.Mat4.setColumnValues(e,3,e[0]*t+e[4]*o+e[8]*r+e[12],e[1]*t+e[5]*o+e[9]*r+e[13],e[2]*t+e[6]*o+e[10]*r+e[14],e[3]*t+e[7]*o+e[11]*r+e[15])};goog.vec.Mat4.scale=function(e,t,o,r){return goog.vec.Mat4.setFromValues(e,e[0]*t,e[1]*t,e[2]*t,e[3]*t,e[4]*o,e[5]*o,e[6]*o,e[7]*o,e[8]*r,e[9]*r,e[10]*r,e[11]*r,e[12],e[13],e[14],e[15])};goog.vec.Mat4.rotate=function(e,t,o,r,n){var i=e[0],s=e[1],a=e[2],g=e[3],l=e[4],u=e[5],c=e[6],h=e[7],d=e[8],m=e[9],p=e[10],f=e[11],_=e[12],y=e[13],E=e[14],S=e[15],v=Math.cos(t),T=Math.sin(t),b=1-v;t=o*o*b+v;var R=o*r*b+n*T,C=o*n*b-r*T,A=o*r*b-n*T,N=r*r*b+v,M=r*n*b+o*T,L=o*n*b+r*T;o=r*n*b-o*T;n=n*n*b+v;return goog.vec.Mat4.setFromValues(e,i*t+l*R+d*C,s*t+u*R+m*C,a*t+c*R+p*C,g*t+h*R+f*C,i*A+l*N+d*M,s*A+u*N+m*M,a*A+c*N+p*M,g*A+h*N+f*M,i*L+l*o+d*n,s*L+u*o+m*n,a*L+c*o+p*n,g*L+h*o+f*n,_,y,E,S)};goog.vec.Mat4.rotateX=function(e,t){var o=e[4],r=e[5],n=e[6],i=e[7],s=e[8],a=e[9],g=e[10],l=e[11],u=Math.cos(t),c=Math.sin(t);e[4]=o*u+s*c;e[5]=r*u+a*c;e[6]=n*u+g*c;e[7]=i*u+l*c;e[8]=o*-c+s*u;e[9]=r*-c+a*u;e[10]=n*-c+g*u;e[11]=i*-c+l*u;return e};goog.vec.Mat4.rotateY=function(e,t){var o=e[0],r=e[1],n=e[2],i=e[3],s=e[8],a=e[9],g=e[10],l=e[11],u=Math.cos(t),c=Math.sin(t);e[0]=o*u+s*-c;e[1]=r*u+a*-c;e[2]=n*u+g*-c;e[3]=i*u+l*-c;e[8]=o*c+s*u;e[9]=r*c+a*u;e[10]=n*c+g*u;e[11]=i*c+l*u;return e};goog.vec.Mat4.rotateZ=function(e,t){var o=e[0],r=e[1],n=e[2],i=e[3],s=e[4],a=e[5],g=e[6],l=e[7],u=Math.cos(t),c=Math.sin(t);e[0]=o*u+s*c;e[1]=r*u+a*c;e[2]=n*u+g*c;e[3]=i*u+l*c;e[4]=o*-c+s*u;e[5]=r*-c+a*u;e[6]=n*-c+g*u;e[7]=i*-c+l*u;return e};goog.vec.Mat4.getTranslation=function(e,t){t[0]=e[12];t[1]=e[13];t[2]=e[14];return t};goog.vec.Mat4.tmpVec3_=[goog.vec.Vec3.createFloat64(),goog.vec.Vec3.createFloat64()];goog.vec.Mat4.tmpVec4_=[goog.vec.Vec4.createFloat64(),goog.vec.Vec4.createFloat64(),goog.vec.Vec4.createFloat64()];goog.vec.Mat4.tmpMat4_=[goog.vec.Mat4.createFloat64()];ol.extent={};ol.extent.Corner={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};ol.extent.Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};ol.extent.boundingExtent=function(e){for(var t=ol.extent.createEmpty(),o=0,r=e.length;r>o;++o)ol.extent.extendCoordinate(t,e[o]);return t};ol.extent.boundingExtentXYs_=function(e,t,o){goog.asserts.assert(0<e.length,"xs length should be larger than 0");goog.asserts.assert(0<t.length,"ys length should be larger than 0");var r=Math.min.apply(null,e),n=Math.min.apply(null,t);e=Math.max.apply(null,e);t=Math.max.apply(null,t);return ol.extent.createOrUpdate(r,n,e,t,o)};ol.extent.buffer=function(e,t,o){return goog.isDef(o)?(o[0]=e[0]-t,o[1]=e[1]-t,o[2]=e[2]+t,o[3]=e[3]+t,o):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]};ol.extent.clone=function(e,t){return goog.isDef(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()};ol.extent.closestSquaredDistanceXY=function(e,t,o){t=t<e[0]?e[0]-t:e[2]<t?t-e[2]:0;e=o<e[1]?e[1]-o:e[3]<o?o-e[3]:0;return t*t+e*e};ol.extent.containsCoordinate=function(e,t){return ol.extent.containsXY(e,t[0],t[1])};ol.extent.containsExtent=function(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]};ol.extent.containsXY=function(e,t,o){return e[0]<=t&&t<=e[2]&&e[1]<=o&&o<=e[3]};ol.extent.coordinateRelationship=function(e,t){var o=e[1],r=e[2],n=e[3],i=t[0],s=t[1],a=ol.extent.Relationship.UNKNOWN;i<e[0]?a|=ol.extent.Relationship.LEFT:i>r&&(a|=ol.extent.Relationship.RIGHT);o>s?a|=ol.extent.Relationship.BELOW:s>n&&(a|=ol.extent.Relationship.ABOVE);a===ol.extent.Relationship.UNKNOWN&&(a=ol.extent.Relationship.INTERSECTING);return a};ol.extent.createEmpty=function(){return[1/0,1/0,-1/0,-1/0]};ol.extent.createOrUpdate=function(e,t,o,r,n){return goog.isDef(n)?(n[0]=e,n[1]=t,n[2]=o,n[3]=r,n):[e,t,o,r]};ol.extent.createOrUpdateEmpty=function(e){return ol.extent.createOrUpdate(1/0,1/0,-1/0,-1/0,e)};ol.extent.createOrUpdateFromCoordinate=function(e,t){var o=e[0],r=e[1];return ol.extent.createOrUpdate(o,r,o,r,t)};ol.extent.createOrUpdateFromCoordinates=function(e,t){var o=ol.extent.createOrUpdateEmpty(t);return ol.extent.extendCoordinates(o,e)};ol.extent.createOrUpdateFromFlatCoordinates=function(e,t,o,r,n){n=ol.extent.createOrUpdateEmpty(n);return ol.extent.extendFlatCoordinates(n,e,t,o,r)};ol.extent.createOrUpdateFromRings=function(e,t){var o=ol.extent.createOrUpdateEmpty(t);return ol.extent.extendRings(o,e)};ol.extent.empty=function(e){e[0]=e[1]=1/0;e[2]=e[3]=-1/0;return e};ol.extent.equals=function(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]};ol.extent.extend=function(e,t){t[0]<e[0]&&(e[0]=t[0]);t[2]>e[2]&&(e[2]=t[2]);t[1]<e[1]&&(e[1]=t[1]);t[3]>e[3]&&(e[3]=t[3]);return e};ol.extent.extendCoordinate=function(e,t){t[0]<e[0]&&(e[0]=t[0]);t[0]>e[2]&&(e[2]=t[0]);t[1]<e[1]&&(e[1]=t[1]);t[1]>e[3]&&(e[3]=t[1])};ol.extent.extendCoordinates=function(e,t){var o,r;o=0;for(r=t.length;r>o;++o)ol.extent.extendCoordinate(e,t[o]);return e};ol.extent.extendFlatCoordinates=function(e,t,o,r,n){for(;r>o;o+=n)ol.extent.extendXY(e,t[o],t[o+1]);return e};ol.extent.extendRings=function(e,t){var o,r;o=0;for(r=t.length;r>o;++o)ol.extent.extendCoordinates(e,t[o]);return e};ol.extent.extendXY=function(e,t,o){e[0]=Math.min(e[0],t);e[1]=Math.min(e[1],o);e[2]=Math.max(e[2],t);e[3]=Math.max(e[3],o)};ol.extent.forEachCorner=function(e,t,o){var r;return(r=t.call(o,ol.extent.getBottomLeft(e)))||(r=t.call(o,ol.extent.getBottomRight(e)))||(r=t.call(o,ol.extent.getTopRight(e)))?r:(r=t.call(o,ol.extent.getTopLeft(e)))?r:!1};ol.extent.getArea=function(e){var t=0;ol.extent.isEmpty(e)||(t=ol.extent.getWidth(e)*ol.extent.getHeight(e));return t};ol.extent.getBottomLeft=function(e){return[e[0],e[1]]};ol.extent.getBottomRight=function(e){return[e[2],e[1]]};ol.extent.getCenter=function(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]};ol.extent.getCorner=function(e,t){var o;t===ol.extent.Corner.BOTTOM_LEFT?o=ol.extent.getBottomLeft(e):t===ol.extent.Corner.BOTTOM_RIGHT?o=ol.extent.getBottomRight(e):t===ol.extent.Corner.TOP_LEFT?o=ol.extent.getTopLeft(e):t===ol.extent.Corner.TOP_RIGHT?o=ol.extent.getTopRight(e):goog.asserts.fail("Invalid corner: %s",t);goog.asserts.assert(goog.isDef(o),"coordinate should be defined");return o};ol.extent.getEnlargedArea=function(e,t){var o=Math.min(e[0],t[0]),r=Math.min(e[1],t[1]),n=Math.max(e[2],t[2]),i=Math.max(e[3],t[3]);return(n-o)*(i-r)};ol.extent.getForViewAndSize=function(e,t,o,r,n){var i=t*r[0]/2;r=t*r[1]/2;t=Math.cos(o);o=Math.sin(o);i=[-i,-i,i,i];r=[-r,r,-r,r];var s,a,g;for(s=0;4>s;++s)a=i[s],g=r[s],i[s]=e[0]+a*t-g*o,r[s]=e[1]+a*o+g*t;return ol.extent.boundingExtentXYs_(i,r,n)};ol.extent.getHeight=function(e){return e[3]-e[1]};ol.extent.getIntersectionArea=function(e,t){var o=ol.extent.getIntersection(e,t);return ol.extent.getArea(o)};ol.extent.getIntersection=function(e,t,o){o=goog.isDef(o)?o:ol.extent.createEmpty();ol.extent.intersects(e,t)&&(o[0]=e[0]>t[0]?e[0]:t[0],o[1]=e[1]>t[1]?e[1]:t[1],o[2]=e[2]<t[2]?e[2]:t[2],o[3]=e[3]<t[3]?e[3]:t[3]);return o};ol.extent.getMargin=function(e){return ol.extent.getWidth(e)+ol.extent.getHeight(e)};ol.extent.getSize=function(e){return[e[2]-e[0],e[3]-e[1]]};ol.extent.getTopLeft=function(e){return[e[0],e[3]]};ol.extent.getTopRight=function(e){return[e[2],e[3]]};ol.extent.getWidth=function(e){return e[2]-e[0]};ol.extent.intersects=function(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]};ol.extent.isEmpty=function(e){return e[2]<e[0]||e[3]<e[1]};ol.extent.isInfinite=function(e){return-1/0==e[0]||-1/0==e[1]||1/0==e[2]||1/0==e[3]};ol.extent.normalize=function(e,t){return[(t[0]-e[0])/(e[2]-e[0]),(t[1]-e[1])/(e[3]-e[1])]};ol.extent.returnOrUpdate=function(e,t){return goog.isDef(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e};ol.extent.scaleFromCenter=function(e,t){var o=(e[2]-e[0])/2*(t-1),r=(e[3]-e[1])/2*(t-1);e[0]-=o;e[2]+=o;e[1]-=r;e[3]+=r};ol.extent.intersectsSegment=function(e,t,o){var r=!1,n=ol.extent.coordinateRelationship(e,t),i=ol.extent.coordinateRelationship(e,o);if(n===ol.extent.Relationship.INTERSECTING||i===ol.extent.Relationship.INTERSECTING)r=!0;else{var s=e[0],a=e[1],g=e[2];e=e[3];var l=o[0];o=o[1];t=(o-t[1])/(l-t[0]);i&ol.extent.Relationship.ABOVE&&!(n&ol.extent.Relationship.ABOVE)&&(r=l-(o-e)/t,r=r>=s&&g>=r);r||!(i&ol.extent.Relationship.RIGHT)||n&ol.extent.Relationship.RIGHT||(r=o-(l-g)*t,r=r>=a&&e>=r);r||!(i&ol.extent.Relationship.BELOW)||n&ol.extent.Relationship.BELOW||(r=l-(o-a)/t,r=r>=s&&g>=r);r||!(i&ol.extent.Relationship.LEFT)||n&ol.extent.Relationship.LEFT||(r=o-(l-s)*t,r=r>=a&&e>=r)}return r};ol.extent.touches=function(e,t){return ol.extent.intersects(e,t)&&(e[0]==t[2]||e[2]==t[0]||e[1]==t[3]||e[3]==t[1])};ol.extent.applyTransform=function(e,t,o){e=[e[0],e[1],e[0],e[3],e[2],e[1],e[2],e[3]];t(e,e,2);return ol.extent.boundingExtentXYs_([e[0],e[2],e[4],e[6]],[e[1],e[3],e[5],e[7]],o)};ol.extent.transform2D=function(e,t,o){o=goog.isDef(o)?o:[];var r=goog.vec.Mat4.getElement(t,0,0),n=goog.vec.Mat4.getElement(t,1,0),i=goog.vec.Mat4.getElement(t,0,1),s=goog.vec.Mat4.getElement(t,1,1),a=goog.vec.Mat4.getElement(t,0,3);t=goog.vec.Mat4.getElement(t,1,3);var g,l,u,c=[0,2,0,2],h=[1,1,3,3],d=[],m=[];for(g=0;4>g;++g)l=e[c[g]],u=e[h[g]],d[g]=r*l+i*u+a,m[g]=n*l+s*u+t;o[0]=Math.min.apply(null,d);o[1]=Math.min.apply(null,m);o[2]=Math.max.apply(null,d);o[3]=Math.max.apply(null,m);return o};goog.functions={};goog.functions.constant=function(e){return function(){return e}};goog.functions.FALSE=goog.functions.constant(!1);goog.functions.TRUE=goog.functions.constant(!0);goog.functions.NULL=goog.functions.constant(null);goog.functions.identity=function(e){return e};goog.functions.error=function(e){return function(){throw Error(e)}};goog.functions.fail=function(e){return function(){throw e}};goog.functions.lock=function(e,t){t=t||0;return function(){return e.apply(this,Array.prototype.slice.call(arguments,0,t))}};goog.functions.nth=function(e){return function(){return arguments[e]}};goog.functions.withReturnValue=function(e,t){return goog.functions.sequence(e,goog.functions.constant(t))};goog.functions.equalTo=function(e,t){return function(o){return t?e==o:e===o}};goog.functions.compose=function(){var e=arguments,t=e.length;return function(){var o;t&&(o=e[t-1].apply(this,arguments));for(var r=t-2;r>=0;r--)o=e[r].call(this,o);return o}};goog.functions.sequence=function(){var e=arguments,t=e.length;return function(){for(var o,r=0;t>r;r++)o=e[r].apply(this,arguments);return o}};goog.functions.and=function(){var e=arguments,t=e.length;return function(){for(var o=0;t>o;o++)if(!e[o].apply(this,arguments))return!1;return!0}};goog.functions.or=function(){var e=arguments,t=e.length;return function(){for(var o=0;t>o;o++)if(e[o].apply(this,arguments))return!0;return!1}};goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}};goog.functions.create=function(e){var t=function(){};t.prototype=e.prototype;t=new t;e.apply(t,Array.prototype.slice.call(arguments,1));return t};goog.functions.CACHE_RETURN_VALUE=!0;goog.functions.cacheReturnValue=function(e){var t,o=!1;return function(){if(!goog.functions.CACHE_RETURN_VALUE)return e();o||(t=e(),o=!0);return t}};goog.functions.once=function(e){var t=e;return function(){if(t){var e=t;t=null;e()}}};ol.Sphere=function(e){this.radius=e};ol.Sphere.prototype.geodesicArea=function(e){for(var t=0,o=e.length,r=e[o-1][0],n=e[o-1][1],i=0;o>i;i++)var s=e[i][0],a=e[i][1],t=t+goog.math.toRadians(s-r)*(2+Math.sin(goog.math.toRadians(n))+Math.sin(goog.math.toRadians(a))),r=s,n=a;return t*this.radius*this.radius/2};ol.Sphere.prototype.haversineDistance=function(e,t){var o=goog.math.toRadians(e[1]),r=goog.math.toRadians(t[1]),n=(r-o)/2,i=goog.math.toRadians(t[0]-e[0])/2,o=Math.sin(n)*Math.sin(n)+Math.sin(i)*Math.sin(i)*Math.cos(o)*Math.cos(r);return 2*this.radius*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))};ol.Sphere.prototype.offset=function(e,t,o){var r=goog.math.toRadians(e[1]);e=goog.math.toRadians(e[0]);var n=t/this.radius;t=Math.asin(Math.sin(r)*Math.cos(n)+Math.cos(r)*Math.sin(n)*Math.cos(o));o=e+Math.atan2(Math.sin(o)*Math.sin(n)*Math.cos(r),Math.cos(n)-Math.sin(r)*Math.sin(t));return[goog.math.toDegrees(o),goog.math.toDegrees(t)]};ol.sphere={};ol.sphere.NORMAL=new ol.Sphere(6370997);ol.proj={};ol.proj.Units={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",USFEET:"us-ft"};ol.proj.METERS_PER_UNIT={};ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]=2*Math.PI*ol.sphere.NORMAL.radius/360;ol.proj.METERS_PER_UNIT[ol.proj.Units.FEET]=.3048;ol.proj.METERS_PER_UNIT[ol.proj.Units.METERS]=1;ol.proj.METERS_PER_UNIT[ol.proj.Units.USFEET]=1200/3937;ol.proj.Projection=function(e){this.code_=e.code;this.units_=e.units;this.extent_=goog.isDef(e.extent)?e.extent:null;this.worldExtent_=goog.isDef(e.worldExtent)?e.worldExtent:null;this.axisOrientation_=goog.isDef(e.axisOrientation)?e.axisOrientation:"enu";this.canWrapX_=(this.global_=goog.isDef(e.global)?e.global:!1)&&!goog.isNull(this.extent_);this.getPointResolutionFunc_=goog.isDef(e.getPointResolution)?e.getPointResolution:this.getPointResolution_;this.defaultTileGrid_=null;var t=ol.proj.projections_,o=e.code;goog.asserts.assert(goog.isDef(o),'Option "code" is required for constructing instance');if(ol.ENABLE_PROJ4JS&&"function"==typeof proj4&&!goog.isDef(t[o])){var r=proj4.defs(o);if(goog.isDef(r)){goog.isDef(r.axis)&&!goog.isDef(e.axisOrientation)&&(this.axisOrientation_=r.axis);goog.isDef(e.units)||(e=r.units,!goog.isDef(e)&&goog.isDef(r.to_meter)&&(e=r.to_meter.toString(),ol.proj.METERS_PER_UNIT[e]=r.to_meter),this.units_=e);for(var n in t)e=proj4.defs(n),goog.isDef(e)&&(t=ol.proj.get(n),e===r?ol.proj.addEquivalentProjections([t,this]):(e=proj4(n,o),ol.proj.addCoordinateTransforms(t,this,e.forward,e.inverse)))}}};ol.proj.Projection.prototype.canWrapX=function(){return this.canWrapX_};ol.proj.Projection.prototype.getCode=function(){return this.code_};ol.proj.Projection.prototype.getExtent=function(){return this.extent_};ol.proj.Projection.prototype.getUnits=function(){return this.units_};ol.proj.Projection.prototype.getMetersPerUnit=function(){return ol.proj.METERS_PER_UNIT[this.units_]};ol.proj.Projection.prototype.getWorldExtent=function(){return this.worldExtent_};ol.proj.Projection.prototype.getAxisOrientation=function(){return this.axisOrientation_};ol.proj.Projection.prototype.isGlobal=function(){return this.global_};ol.proj.Projection.prototype.setGlobal=function(e){this.canWrapX_=(this.global_=e)&&!goog.isNull(this.extent_)};ol.proj.Projection.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_};ol.proj.Projection.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e};ol.proj.Projection.prototype.setExtent=function(e){this.extent_=e;this.canWrapX_=this.global_&&!goog.isNull(e)};ol.proj.Projection.prototype.setWorldExtent=function(e){this.worldExtent_=e};ol.proj.Projection.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e
};ol.proj.Projection.prototype.getPointResolution_=function(e,t){if(this.getUnits()==ol.proj.Units.DEGREES)return e;var o=ol.proj.getTransformFromProjections(this,ol.proj.get("EPSG:4326")),r=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2],r=o(r,r,2),o=ol.sphere.NORMAL.haversineDistance(r.slice(0,2),r.slice(2,4)),r=ol.sphere.NORMAL.haversineDistance(r.slice(4,6),r.slice(6,8)),r=(o+r)/2,o=this.getMetersPerUnit();goog.isDef(o)&&(r/=o);return r};ol.proj.Projection.prototype.getPointResolution=function(e,t){return this.getPointResolutionFunc_(e,t)};ol.proj.projections_={};ol.proj.transforms_={};ol.proj.addEquivalentProjections=function(e){ol.proj.addProjections(e);goog.array.forEach(e,function(t){goog.array.forEach(e,function(e){t!==e&&ol.proj.addTransform(t,e,ol.proj.cloneTransform)})})};ol.proj.addEquivalentTransforms=function(e,t,o,r){goog.array.forEach(e,function(e){goog.array.forEach(t,function(t){ol.proj.addTransform(e,t,o);ol.proj.addTransform(t,e,r)})})};ol.proj.addProjection=function(e){ol.proj.projections_[e.getCode()]=e;ol.proj.addTransform(e,e,ol.proj.cloneTransform)};ol.proj.addProjections=function(e){var t=[];goog.array.forEach(e,function(e){t.push(ol.proj.addProjection(e))})};ol.proj.clearAllProjections=function(){ol.proj.projections_={};ol.proj.transforms_={}};ol.proj.createProjection=function(e,t){if(goog.isDefAndNotNull(e)){if(goog.isString(e))return ol.proj.get(e);goog.asserts.assertInstanceof(e,ol.proj.Projection,"projection should be an ol.proj.Projection");return e}return ol.proj.get(t)};ol.proj.addTransform=function(e,t,o){e=e.getCode();t=t.getCode();var r=ol.proj.transforms_;goog.object.containsKey(r,e)||(r[e]={});r[e][t]=o};ol.proj.addCoordinateTransforms=function(e,t,o,r){e=ol.proj.get(e);t=ol.proj.get(t);ol.proj.addTransform(e,t,ol.proj.createTransformFromCoordinateTransform(o));ol.proj.addTransform(t,e,ol.proj.createTransformFromCoordinateTransform(r))};ol.proj.createTransformFromCoordinateTransform=function(e){return function(t,o,r){var n=t.length;r=goog.isDef(r)?r:2;o=goog.isDef(o)?o:Array(n);var i,s;for(s=0;n>s;s+=r)for(i=e([t[s],t[s+1]]),o[s]=i[0],o[s+1]=i[1],i=r-1;i>=2;--i)o[s+i]=t[s+i];return o}};ol.proj.removeTransform=function(e,t){var o=e.getCode(),r=t.getCode(),n=ol.proj.transforms_;goog.asserts.assert(o in n,"sourceCode should be in transforms");goog.asserts.assert(r in n[o],"destinationCode should be in transforms of sourceCode");var i=n[o][r];delete n[o][r];0===goog.object.getKeys(n[o]).length&&delete n[o];return i};ol.proj.fromLonLat=function(e,t){return ol.proj.transform(e,"EPSG:4326",goog.isDef(t)?t:"EPSG:3857")};ol.proj.toLonLat=function(e,t){return ol.proj.transform(e,goog.isDef(t)?t:"EPSG:3857","EPSG:4326")};ol.proj.get=function(e){var t;e instanceof ol.proj.Projection?t=e:goog.isString(e)?(t=ol.proj.projections_[e],ol.ENABLE_PROJ4JS&&!goog.isDef(t)&&"function"==typeof proj4&&goog.isDef(proj4.defs(e))&&(t=new ol.proj.Projection({code:e}),ol.proj.addProjection(t))):t=null;return t};ol.proj.equivalent=function(e,t){return e===t?!0:e.getCode()===t.getCode()?!0:e.getUnits()!=t.getUnits()?!1:ol.proj.getTransformFromProjections(e,t)===ol.proj.cloneTransform};ol.proj.getTransform=function(e,t){var o=ol.proj.get(e),r=ol.proj.get(t);return ol.proj.getTransformFromProjections(o,r)};ol.proj.getTransformFromProjections=function(e,t){var o,r=ol.proj.transforms_,n=e.getCode(),i=t.getCode();goog.object.containsKey(r,n)&&goog.object.containsKey(r[n],i)&&(o=r[n][i]);goog.isDef(o)||(goog.asserts.assert(goog.isDef(o),"transform should be defined"),o=ol.proj.identityTransform);return o};ol.proj.identityTransform=function(e,t,o){if(goog.isDef(t)&&e!==t){goog.asserts.fail("This should not be used internally.");o=0;for(var r=e.length;r>o;++o)t[o]=e[o];e=t}return e};ol.proj.cloneTransform=function(e,t,o){if(goog.isDef(t)){o=0;for(var r=e.length;r>o;++o)t[o]=e[o];e=t}else e=e.slice();return e};ol.proj.transform=function(e,t,o){return ol.proj.getTransform(t,o)(e,void 0,e.length)};ol.proj.transformExtent=function(e,t,o){t=ol.proj.getTransform(t,o);return ol.extent.applyTransform(e,t)};ol.proj.transformWithProjections=function(e,t,o){return ol.proj.getTransformFromProjections(t,o)(e)};ol.geom={};ol.geom.GeometryType={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};ol.geom.GeometryLayout={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};ol.geom.Geometry=function(){ol.Object.call(this);this.extent_=ol.extent.createEmpty();this.extentRevision_=-1;this.simplifiedGeometryCache={};this.simplifiedGeometryRevision=this.simplifiedGeometryMaxMinSquaredTolerance=0};goog.inherits(ol.geom.Geometry,ol.Object);ol.geom.Geometry.prototype.getClosestPoint=function(e,t){var o=goog.isDef(t)?t:[0/0,0/0];this.closestPointXY(e[0],e[1],o,1/0);return o};ol.geom.Geometry.prototype.containsCoordinate=function(e){return this.containsXY(e[0],e[1])};ol.geom.Geometry.prototype.containsXY=goog.functions.FALSE;ol.geom.Geometry.prototype.getExtent=function(e){this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision());return ol.extent.returnOrUpdate(this.extent_,e)};ol.geom.Geometry.prototype.transform=function(e,t){this.applyTransform(ol.proj.getTransform(e,t));return this};ol.geom.flat={};ol.geom.flat.transform={};ol.geom.flat.transform.transform2D=function(e,t,o,r,n,i){var s=goog.vec.Mat4.getElement(n,0,0),a=goog.vec.Mat4.getElement(n,1,0),g=goog.vec.Mat4.getElement(n,0,1),l=goog.vec.Mat4.getElement(n,1,1),u=goog.vec.Mat4.getElement(n,0,3);n=goog.vec.Mat4.getElement(n,1,3);for(var c=goog.isDef(i)?i:[],h=0;o>t;t+=r){var d=e[t],m=e[t+1];c[h++]=s*d+g*m+u;c[h++]=a*d+l*m+n}goog.isDef(i)&&c.length!=h&&(c.length=h);return c};ol.geom.flat.transform.translate=function(e,t,o,r,n,i,s){for(var a,g=goog.isDef(s)?s:[],l=0;o>t;t+=r)for(g[l++]=e[t]+n,g[l++]=e[t+1]+i,a=t+2;t+r>a;++a)g[l++]=e[a];goog.isDef(s)&&g.length!=l&&(g.length=l);return g};ol.geom.SimpleGeometry=function(){ol.geom.Geometry.call(this);this.layout=ol.geom.GeometryLayout.XY;this.stride=2;this.flatCoordinates=null};goog.inherits(ol.geom.SimpleGeometry,ol.geom.Geometry);ol.geom.SimpleGeometry.getLayoutForStride_=function(e){if(2==e)return ol.geom.GeometryLayout.XY;if(3==e)return ol.geom.GeometryLayout.XYZ;if(4==e)return ol.geom.GeometryLayout.XYZM;goog.asserts.fail("unsupported stride: "+e);return void 0};ol.geom.SimpleGeometry.getStrideForLayout=function(e){if(e==ol.geom.GeometryLayout.XY)return 2;if(e==ol.geom.GeometryLayout.XYZ||e==ol.geom.GeometryLayout.XYM)return 3;if(e==ol.geom.GeometryLayout.XYZM)return 4;goog.asserts.fail("unsupported layout: "+e);return void 0};ol.geom.SimpleGeometry.prototype.containsXY=goog.functions.FALSE;ol.geom.SimpleGeometry.prototype.computeExtent=function(e){return ol.extent.createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)};ol.geom.SimpleGeometry.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)};ol.geom.SimpleGeometry.prototype.getFlatCoordinates=function(){return this.flatCoordinates};ol.geom.SimpleGeometry.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)};ol.geom.SimpleGeometry.prototype.getLayout=function(){return this.layout};ol.geom.SimpleGeometry.prototype.getSimplifiedGeometry=function(e){this.simplifiedGeometryRevision!=this.getRevision()&&(goog.object.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision());if(0>e||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var t=e.toString();if(this.simplifiedGeometryCache.hasOwnProperty(t))return this.simplifiedGeometryCache[t];var o=this.getSimplifiedGeometryInternal(e);if(o.getFlatCoordinates().length<this.flatCoordinates.length)return this.simplifiedGeometryCache[t]=o;this.simplifiedGeometryMaxMinSquaredTolerance=e;return this};ol.geom.SimpleGeometry.prototype.getSimplifiedGeometryInternal=function(){return this};ol.geom.SimpleGeometry.prototype.getStride=function(){return this.stride};ol.geom.SimpleGeometry.prototype.setFlatCoordinatesInternal=function(e,t){this.stride=ol.geom.SimpleGeometry.getStrideForLayout(e);this.layout=e;this.flatCoordinates=t};ol.geom.SimpleGeometry.prototype.setLayout=function(e,t,o){if(goog.isDef(e))t=ol.geom.SimpleGeometry.getStrideForLayout(e);else{for(e=0;o>e;++e){if(0===t.length){this.layout=ol.geom.GeometryLayout.XY;this.stride=2;return}t=t[0]}t=t.length;e=ol.geom.SimpleGeometry.getLayoutForStride_(t)}this.layout=e;this.stride=t};ol.geom.SimpleGeometry.prototype.applyTransform=function(e){goog.isNull(this.flatCoordinates)||(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())};ol.geom.SimpleGeometry.prototype.translate=function(e,t){var o=this.getFlatCoordinates();if(!goog.isNull(o)){var r=this.getStride();ol.geom.flat.transform.translate(o,0,o.length,r,e,t,o);this.changed()}};ol.geom.transformSimpleGeometry2D=function(e,t,o){var r=e.getFlatCoordinates();if(goog.isNull(r))return null;e=e.getStride();return ol.geom.flat.transform.transform2D(r,0,r.length,e,t,o)};ol.geom.flat.area={};ol.geom.flat.area.linearRing=function(e,t,o,r){for(var n=0,i=e[o-r],s=e[o-r+1];o>t;t+=r)var a=e[t],g=e[t+1],n=n+(s*a-i*g),i=a,s=g;return n/2};ol.geom.flat.area.linearRings=function(e,t,o,r){var n,i,s=0;n=0;for(i=o.length;i>n;++n){var a=o[n],s=s+ol.geom.flat.area.linearRing(e,t,a,r);t=a}return s};ol.geom.flat.area.linearRingss=function(e,t,o,r){var n,i,s=0;n=0;for(i=o.length;i>n;++n){var a=o[n],s=s+ol.geom.flat.area.linearRings(e,t,a,r);t=a[a.length-1]}return s};ol.math={};ol.math.cosh=function(e){return(Math.exp(e)+Math.exp(-e))/2};ol.math.coth=function(e){e=Math.exp(-2*e);return(1+e)/(1-e)};ol.math.csch=function(e){return 2/(Math.exp(e)-Math.exp(-e))};ol.math.roundUpToPowerOfTwo=function(e){goog.asserts.assert(e>0,"x should be larger than 0");return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))};ol.math.sech=function(e){return 2/(Math.exp(e)+Math.exp(-e))};ol.math.sinh=function(e){return(Math.exp(e)-Math.exp(-e))/2};ol.math.squaredSegmentDistance=function(e,t,o,r,n,i){var s=n-o,a=i-r;if(0!==s||0!==a){var g=((e-o)*s+(t-r)*a)/(s*s+a*a);g>1?(o=n,r=i):g>0&&(o+=s*g,r+=a*g)}return ol.math.squaredDistance(e,t,o,r)};ol.math.squaredDistance=function(e,t,o,r){e=o-e;t=r-t;return e*e+t*t};ol.math.tanh=function(e){e=Math.exp(-2*e);return(1-e)/(1+e)};ol.geom.flat.closest={};ol.geom.flat.closest.point=function(e,t,o,r,n,i,s){var a=e[t],g=e[t+1],l=e[o]-a,u=e[o+1]-g;if(0!==l||0!==u)if(i=((n-a)*l+(i-g)*u)/(l*l+u*u),i>1)t=o;else if(i>0){for(n=0;r>n;++n)s[n]=goog.math.lerp(e[t+n],e[o+n],i);s.length=r;return}for(n=0;r>n;++n)s[n]=e[t+n];s.length=r};ol.geom.flat.closest.getMaxSquaredDelta=function(e,t,o,r,n){var i=e[t],s=e[t+1];for(t+=r;o>t;t+=r){var a=e[t],g=e[t+1],i=ol.math.squaredDistance(i,s,a,g);i>n&&(n=i);i=a;s=g}return n};ol.geom.flat.closest.getsMaxSquaredDelta=function(e,t,o,r,n){var i,s;i=0;for(s=o.length;s>i;++i){var a=o[i];n=ol.geom.flat.closest.getMaxSquaredDelta(e,t,a,r,n);t=a}return n};ol.geom.flat.closest.getssMaxSquaredDelta=function(e,t,o,r,n){var i,s;i=0;for(s=o.length;s>i;++i){var a=o[i];n=ol.geom.flat.closest.getsMaxSquaredDelta(e,t,a,r,n);t=a[a.length-1]}return n};ol.geom.flat.closest.getClosestPoint=function(e,t,o,r,n,i,s,a,g,l,u){if(t==o)return l;var c;if(0===n){c=ol.math.squaredDistance(s,a,e[t],e[t+1]);if(l>c){for(u=0;r>u;++u)g[u]=e[t+u];g.length=r;return c}return l}goog.asserts.assert(n>0,"maxDelta should be larger than 0");for(var h=goog.isDef(u)?u:[0/0,0/0],d=t+r;o>d;)if(ol.geom.flat.closest.point(e,d-r,d,r,s,a,h),c=ol.math.squaredDistance(s,a,h[0],h[1]),l>c){l=c;for(u=0;r>u;++u)g[u]=h[u];g.length=r;d+=r}else d+=r*Math.max((Math.sqrt(c)-Math.sqrt(l))/n|0,1);if(i&&(ol.geom.flat.closest.point(e,o-r,t,r,s,a,h),c=ol.math.squaredDistance(s,a,h[0],h[1]),l>c)){l=c;for(u=0;r>u;++u)g[u]=h[u];g.length=r}return l};ol.geom.flat.closest.getsClosestPoint=function(e,t,o,r,n,i,s,a,g,l,u){u=goog.isDef(u)?u:[0/0,0/0];var c,h;c=0;for(h=o.length;h>c;++c){var d=o[c];l=ol.geom.flat.closest.getClosestPoint(e,t,d,r,n,i,s,a,g,l,u);t=d}return l};ol.geom.flat.closest.getssClosestPoint=function(e,t,o,r,n,i,s,a,g,l,u){u=goog.isDef(u)?u:[0/0,0/0];var c,h;c=0;for(h=o.length;h>c;++c){var d=o[c];l=ol.geom.flat.closest.getsClosestPoint(e,t,d,r,n,i,s,a,g,l,u);t=d[d.length-1]}return l};ol.geom.flat.deflate={};ol.geom.flat.deflate.coordinate=function(e,t,o,r){goog.asserts.assert(o.length==r,"length of the coordinate array should match stride");var n;r=0;for(n=o.length;n>r;++r)e[t++]=o[r];return t};ol.geom.flat.deflate.coordinates=function(e,t,o,r){var n,i;n=0;for(i=o.length;i>n;++n){var s=o[n];goog.asserts.assert(s.length==r,"length of coordinate array should match stride");var a;for(a=0;r>a;++a)e[t++]=s[a]}return t};ol.geom.flat.deflate.coordinatess=function(e,t,o,r,n){n=goog.isDef(n)?n:[];var i,s,a=0;i=0;for(s=o.length;s>i;++i)t=ol.geom.flat.deflate.coordinates(e,t,o[i],r),n[a++]=t;n.length=a;return n};ol.geom.flat.deflate.coordinatesss=function(e,t,o,r,n){n=goog.isDef(n)?n:[];var i,s,a=0;i=0;for(s=o.length;s>i;++i)t=ol.geom.flat.deflate.coordinatess(e,t,o[i],r,n[a]),n[a++]=t,t=t[t.length-1];n.length=a;return n};ol.geom.flat.inflate={};ol.geom.flat.inflate.coordinates=function(e,t,o,r,n){n=goog.isDef(n)?n:[];for(var i=0;o>t;t+=r)n[i++]=e.slice(t,t+r);n.length=i;return n};ol.geom.flat.inflate.coordinatess=function(e,t,o,r,n){n=goog.isDef(n)?n:[];var i,s,a=0;i=0;for(s=o.length;s>i;++i){var g=o[i];n[a++]=ol.geom.flat.inflate.coordinates(e,t,g,r,n[a]);t=g}n.length=a;return n};ol.geom.flat.inflate.coordinatesss=function(e,t,o,r,n){n=goog.isDef(n)?n:[];var i,s,a=0;i=0;for(s=o.length;s>i;++i){var g=o[i];n[a++]=ol.geom.flat.inflate.coordinatess(e,t,g,r,n[a]);t=g[g.length-1]}n.length=a;return n};ol.geom.flat.simplify={};ol.geom.flat.simplify.lineString=function(e,t,o,r,n,i,s){s=goog.isDef(s)?s:[];i||(o=ol.geom.flat.simplify.radialDistance(e,t,o,r,n,s,0),e=s,t=0,r=2);s.length=ol.geom.flat.simplify.douglasPeucker(e,t,o,r,n,s,0);return s};ol.geom.flat.simplify.douglasPeucker=function(e,t,o,r,n,i,s){var a=(o-t)/r;if(3>a){for(;o>t;t+=r)i[s++]=e[t],i[s++]=e[t+1];return s}var g=Array(a);g[0]=1;g[a-1]=1;o=[t,o-r];for(var l,u=0;0<o.length;){var c=o.pop(),h=o.pop(),d=0,m=e[h],p=e[h+1],f=e[c],_=e[c+1];for(l=h+r;c>l;l+=r){var y=ol.math.squaredSegmentDistance(e[l],e[l+1],m,p,f,_);y>d&&(u=l,d=y)}d>n&&(g[(u-t)/r]=1,u>h+r&&o.push(h,u),c>u+r&&o.push(u,c))}for(l=0;a>l;++l)g[l]&&(i[s++]=e[t+l*r],i[s++]=e[t+l*r+1]);return s};ol.geom.flat.simplify.douglasPeuckers=function(e,t,o,r,n,i,s,a){var g,l;g=0;for(l=o.length;l>g;++g){var u=o[g];s=ol.geom.flat.simplify.douglasPeucker(e,t,u,r,n,i,s);a.push(s);t=u}return s};ol.geom.flat.simplify.douglasPeuckerss=function(e,t,o,r,n,i,s,a){var g,l;g=0;for(l=o.length;l>g;++g){var u=o[g],c=[];s=ol.geom.flat.simplify.douglasPeuckers(e,t,u,r,n,i,s,c);a.push(c);t=u[u.length-1]}return s};ol.geom.flat.simplify.radialDistance=function(e,t,o,r,n,i,s){if(t+r>=o){for(;o>t;t+=r)i[s++]=e[t],i[s++]=e[t+1];return s}var a=e[t],g=e[t+1];i[s++]=a;i[s++]=g;var l=a,u=g;for(t+=r;o>t;t+=r)l=e[t],u=e[t+1],ol.math.squaredDistance(a,g,l,u)>n&&(i[s++]=l,i[s++]=u,a=l,g=u);(l!=a||u!=g)&&(i[s++]=l,i[s++]=u);return s};ol.geom.flat.simplify.snap=function(e,t){return t*Math.round(e/t)};ol.geom.flat.simplify.quantize=function(e,t,o,r,n,i,s){if(t==o)return s;var a=ol.geom.flat.simplify.snap(e[t],n),g=ol.geom.flat.simplify.snap(e[t+1],n);t+=r;i[s++]=a;i[s++]=g;var l,u;do if(l=ol.geom.flat.simplify.snap(e[t],n),u=ol.geom.flat.simplify.snap(e[t+1],n),t+=r,t==o)return i[s++]=l,i[s++]=u,s;while(l==a&&u==g);for(;o>t;){var c,h;c=ol.geom.flat.simplify.snap(e[t],n);h=ol.geom.flat.simplify.snap(e[t+1],n);t+=r;if(c!=l||h!=u){var d=l-a,m=u-g,p=c-a,f=h-g;d*f==m*p&&(0>d&&d>p||d==p||d>0&&p>d)&&(0>m&&m>f||m==f||m>0&&f>m)||(i[s++]=l,i[s++]=u,a=l,g=u);l=c;u=h}}i[s++]=l;i[s++]=u;return s};ol.geom.flat.simplify.quantizes=function(e,t,o,r,n,i,s,a){var g,l;g=0;for(l=o.length;l>g;++g){var u=o[g];s=ol.geom.flat.simplify.quantize(e,t,u,r,n,i,s);a.push(s);t=u}return s};ol.geom.flat.simplify.quantizess=function(e,t,o,r,n,i,s,a){var g,l;g=0;for(l=o.length;l>g;++g){var u=o[g],c=[];s=ol.geom.flat.simplify.quantizes(e,t,u,r,n,i,s,c);a.push(c);t=u[u.length-1]}return s};ol.geom.LinearRing=function(e,t){ol.geom.SimpleGeometry.call(this);this.maxDeltaRevision_=this.maxDelta_=-1;this.setCoordinates(e,t)};goog.inherits(ol.geom.LinearRing,ol.geom.SimpleGeometry);ol.geom.LinearRing.prototype.clone=function(){var e=new ol.geom.LinearRing(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};ol.geom.LinearRing.prototype.closestPointXY=function(e,t,o,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t))return r;this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision());return ol.geom.flat.closest.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,o,r)};ol.geom.LinearRing.prototype.getArea=function(){return ol.geom.flat.area.linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LinearRing.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LinearRing.prototype.getSimplifiedGeometryInternal=function(e){var t=[];t.length=ol.geom.flat.simplify.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0);e=new ol.geom.LinearRing(null);e.setFlatCoordinates(ol.geom.GeometryLayout.XY,t);return e};ol.geom.LinearRing.prototype.getType=function(){return ol.geom.GeometryType.LINEAR_RING};ol.geom.LinearRing.prototype.setCoordinates=function(e,t){goog.isNull(e)?this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null):(this.setLayout(t,e,1),goog.isNull(this.flatCoordinates)&&(this.flatCoordinates=[]),this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,e,this.stride),this.changed())};ol.geom.LinearRing.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t);this.changed()};ol.geom.Point=function(e,t){ol.geom.SimpleGeometry.call(this);this.setCoordinates(e,t)};goog.inherits(ol.geom.Point,ol.geom.SimpleGeometry);ol.geom.Point.prototype.clone=function(){var e=new ol.geom.Point(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};ol.geom.Point.prototype.closestPointXY=function(e,t,o,r){var n=this.flatCoordinates;e=ol.math.squaredDistance(e,t,n[0],n[1]);if(r>e){r=this.stride;for(t=0;r>t;++t)o[t]=n[t];o.length=r;return e}return r};ol.geom.Point.prototype.getCoordinates=function(){return goog.isNull(this.flatCoordinates)?[]:this.flatCoordinates.slice()};ol.geom.Point.prototype.computeExtent=function(e){return ol.extent.createOrUpdateFromCoordinate(this.flatCoordinates,e)};ol.geom.Point.prototype.getType=function(){return ol.geom.GeometryType.POINT};ol.geom.Point.prototype.intersectsExtent=function(e){return ol.extent.containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])};ol.geom.Point.prototype.setCoordinates=function(e,t){goog.isNull(e)?this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null):(this.setLayout(t,e,0),goog.isNull(this.flatCoordinates)&&(this.flatCoordinates=[]),this.flatCoordinates.length=ol.geom.flat.deflate.coordinate(this.flatCoordinates,0,e,this.stride),this.changed())};ol.geom.Point.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t);this.changed()};ol.geom.flat.contains={};ol.geom.flat.contains.linearRingContainsExtent=function(e,t,o,r,n){return!ol.extent.forEachCorner(n,function(n){return!ol.geom.flat.contains.linearRingContainsXY(e,t,o,r,n[0],n[1])})};ol.geom.flat.contains.linearRingContainsXY=function(e,t,o,r,n,i){for(var s=!1,a=e[o-r],g=e[o-r+1];o>t;t+=r){var l=e[t],u=e[t+1];g>i!=u>i&&(l-a)*(i-g)/(u-g)+a>n&&(s=!s);a=l;g=u}return s};ol.geom.flat.contains.linearRingsContainsXY=function(e,t,o,r,n,i){goog.asserts.assert(0<o.length,"ends should not be an empty array");if(0===o.length||!ol.geom.flat.contains.linearRingContainsXY(e,t,o[0],r,n,i))return!1;var s;t=1;for(s=o.length;s>t;++t)if(ol.geom.flat.contains.linearRingContainsXY(e,o[t-1],o[t],r,n,i))return!1;return!0};ol.geom.flat.contains.linearRingssContainsXY=function(e,t,o,r,n,i){goog.asserts.assert(0<o.length,"endss should not be an empty array");if(0===o.length)return!1;var s,a;s=0;for(a=o.length;a>s;++s){var g=o[s];if(ol.geom.flat.contains.linearRingsContainsXY(e,t,g,r,n,i))return!0;t=g[g.length-1]}return!1};ol.geom.flat.interiorpoint={};ol.geom.flat.interiorpoint.linearRings=function(e,t,o,r,n,i,s){var a,g,l,u,c,h=n[i+1],d=[],m=o[0];l=e[m-r];c=e[m-r+1];for(a=t;m>a;a+=r){u=e[a];g=e[a+1];(c>=h&&h>=g||h>=c&&g>=h)&&(l=(h-c)/(g-c)*(u-l)+l,d.push(l));l=u;c=g}m=0/0;c=-1/0;d.sort();l=d[0];a=1;for(g=d.length;g>a;++a){u=d[a];var p=Math.abs(u-l);p>c&&(l=(l+u)/2,ol.geom.flat.contains.linearRingsContainsXY(e,t,o,r,l,h)&&(m=l,c=p));l=u}isNaN(m)&&(m=n[i]);return goog.isDef(s)?(s.push(m,h),s):[m,h]};ol.geom.flat.interiorpoint.linearRingss=function(e,t,o,r,n){goog.asserts.assert(2*o.length==n.length,"endss.length times 2 should be flatCenters.length");var i,s,a=[];i=0;for(s=o.length;s>i;++i){var g=o[i],a=ol.geom.flat.interiorpoint.linearRings(e,t,g,r,n,2*i,a);t=g[g.length-1]}return a};ol.geom.flat.segments={};ol.geom.flat.segments.forEach=function(e,t,o,r,n,i){for(var s,a=[e[t],e[t+1]],g=[];o>t+r;t+=r){g[0]=e[t+r];g[1]=e[t+r+1];if(s=n.call(i,a,g))return s;a[0]=g[0];a[1]=g[1]}return!1};ol.geom.flat.intersectsextent={};ol.geom.flat.intersectsextent.lineString=function(e,t,o,r,n){var i=ol.extent.extendFlatCoordinates(ol.extent.createEmpty(),e,t,o,r);return ol.extent.intersects(n,i)?ol.extent.containsExtent(n,i)||i[0]>=n[0]&&i[2]<=n[2]||i[1]>=n[1]&&i[3]<=n[3]?!0:ol.geom.flat.segments.forEach(e,t,o,r,function(e,t){return ol.extent.intersectsSegment(n,e,t)}):!1};ol.geom.flat.intersectsextent.lineStrings=function(e,t,o,r,n){var i,s;i=0;for(s=o.length;s>i;++i){if(ol.geom.flat.intersectsextent.lineString(e,t,o[i],r,n))return!0;t=o[i]}return!1};ol.geom.flat.intersectsextent.linearRing=function(e,t,o,r,n){return ol.geom.flat.intersectsextent.lineString(e,t,o,r,n)||ol.geom.flat.contains.linearRingContainsXY(e,t,o,r,n[0],n[1])||ol.geom.flat.contains.linearRingContainsXY(e,t,o,r,n[0],n[3])||ol.geom.flat.contains.linearRingContainsXY(e,t,o,r,n[2],n[1])||ol.geom.flat.contains.linearRingContainsXY(e,t,o,r,n[2],n[3])?!0:!1};ol.geom.flat.intersectsextent.linearRings=function(e,t,o,r,n){goog.asserts.assert(0<o.length,"ends should not be an empty array");if(!ol.geom.flat.intersectsextent.linearRing(e,t,o[0],r,n))return!1;if(1===o.length)return!0;var i;t=1;for(i=o.length;i>t;++t)if(ol.geom.flat.contains.linearRingContainsExtent(e,o[t-1],o[t],r,n))return!1;return!0};ol.geom.flat.intersectsextent.linearRingss=function(e,t,o,r,n){goog.asserts.assert(0<o.length,"endss should not be an empty array");var i,s;i=0;for(s=o.length;s>i;++i){var a=o[i];if(ol.geom.flat.intersectsextent.linearRings(e,t,a,r,n))return!0;t=a[a.length-1]}return!1};ol.geom.flat.reverse={};ol.geom.flat.reverse.coordinates=function(e,t,o,r){for(;o-r>t;){var n;for(n=0;r>n;++n){var i=e[t+n];e[t+n]=e[o-r+n];e[o-r+n]=i}t+=r;o-=r}};ol.geom.flat.orient={};ol.geom.flat.orient.linearRingIsClockwise=function(e,t,o,r){for(var n=0,i=e[o-r],s=e[o-r+1];o>t;t+=r)var a=e[t],g=e[t+1],n=n+(a-i)*(g+s),i=a,s=g;return n>0};ol.geom.flat.orient.linearRingsAreOriented=function(e,t,o,r,n){n=goog.isDef(n)?n:!1;var i,s;i=0;for(s=o.length;s>i;++i){var a=o[i];t=ol.geom.flat.orient.linearRingIsClockwise(e,t,a,r);if(0===i){if(n&&t||!n&&!t)return!1}else if(n&&!t||!n&&t)return!1;t=a}return!0};ol.geom.flat.orient.linearRingssAreOriented=function(e,t,o,r,n){var i,s;i=0;for(s=o.length;s>i;++i)if(!ol.geom.flat.orient.linearRingsAreOriented(e,t,o[i],r,n))return!1;return!0};ol.geom.flat.orient.orientLinearRings=function(e,t,o,r,n){n=goog.isDef(n)?n:!1;var i,s;i=0;for(s=o.length;s>i;++i){var a=o[i],g=ol.geom.flat.orient.linearRingIsClockwise(e,t,a,r);(0===i?n&&g||!n&&!g:n&&!g||!n&&g)&&ol.geom.flat.reverse.coordinates(e,t,a,r);t=a}return t};ol.geom.flat.orient.orientLinearRingss=function(e,t,o,r,n){var i,s;i=0;for(s=o.length;s>i;++i)t=ol.geom.flat.orient.orientLinearRings(e,t,o[i],r,n);return t};ol.geom.Polygon=function(e,t){ol.geom.SimpleGeometry.call(this);this.ends_=[];this.flatInteriorPointRevision_=-1;this.flatInteriorPoint_=null;this.orientedRevision_=this.maxDeltaRevision_=this.maxDelta_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(e,t)};goog.inherits(ol.geom.Polygon,ol.geom.SimpleGeometry);ol.geom.Polygon.prototype.appendLinearRing=function(e){goog.asserts.assert(e.getLayout()==this.layout,"layout of linearRing should match layout");goog.isNull(this.flatCoordinates)?this.flatCoordinates=e.getFlatCoordinates().slice():goog.array.extend(this.flatCoordinates,e.getFlatCoordinates());this.ends_.push(this.flatCoordinates.length);this.changed()};ol.geom.Polygon.prototype.clone=function(){var e=new ol.geom.Polygon(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return e};ol.geom.Polygon.prototype.closestPointXY=function(e,t,o,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t))return r;this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision());return ol.geom.flat.closest.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,o,r)};ol.geom.Polygon.prototype.containsXY=function(e,t){return ol.geom.flat.contains.linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)};ol.geom.Polygon.prototype.getArea=function(){return ol.geom.flat.area.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)};ol.geom.Polygon.prototype.getCoordinates=function(e){var t;goog.isDef(e)?(t=this.getOrientedFlatCoordinates().slice(),ol.geom.flat.orient.orientLinearRings(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates;return ol.geom.flat.inflate.coordinatess(t,0,this.ends_,this.stride)};ol.geom.Polygon.prototype.getEnds=function(){return this.ends_};ol.geom.Polygon.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var e=ol.extent.getCenter(this.getExtent());this.flatInteriorPoint_=ol.geom.flat.interiorpoint.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0);this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_};ol.geom.Polygon.prototype.getInteriorPoint=function(){return new ol.geom.Point(this.getFlatInteriorPoint())};ol.geom.Polygon.prototype.getLinearRingCount=function(){return this.ends_.length};ol.geom.Polygon.prototype.getLinearRing=function(e){goog.asserts.assert(e>=0&&e<this.ends_.length,"index should be in between 0 and and length of this.ends_");if(0>e||this.ends_.length<=e)return null;var t=new ol.geom.LinearRing(null);t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]));return t};ol.geom.Polygon.prototype.getLinearRings=function(){var e,t,o=this.layout,r=this.flatCoordinates,n=this.ends_,i=[],s=0;e=0;for(t=n.length;t>e;++e){var a=n[e],g=new ol.geom.LinearRing(null);g.setFlatCoordinates(o,r.slice(s,a));i.push(g);s=a}return i};ol.geom.Polygon.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;ol.geom.flat.orient.linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=ol.geom.flat.orient.orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride));this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};ol.geom.Polygon.prototype.getSimplifiedGeometryInternal=function(e){var t=[],o=[];t.length=ol.geom.flat.simplify.quantizes(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,o);e=new ol.geom.Polygon(null);e.setFlatCoordinates(ol.geom.GeometryLayout.XY,t,o);return e};ol.geom.Polygon.prototype.getType=function(){return ol.geom.GeometryType.POLYGON};ol.geom.Polygon.prototype.intersectsExtent=function(e){return ol.geom.flat.intersectsextent.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)};ol.geom.Polygon.prototype.setCoordinates=function(e,t){if(goog.isNull(e))this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.ends_);else{this.setLayout(t,e,2);goog.isNull(this.flatCoordinates)&&(this.flatCoordinates=[]);var o=ol.geom.flat.deflate.coordinatess(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===o.length?0:o[o.length-1];this.changed()}};ol.geom.Polygon.prototype.setFlatCoordinates=function(e,t,o){goog.isNull(t)?goog.asserts.assert(!goog.isNull(o)&&0===o.length,"ends cannot be null and should be an empty array"):0===o.length?goog.asserts.assert(0===t.length,"flatCoordinates should be an empty array"):goog.asserts.assert(t.length==o[o.length-1],"the length of flatCoordinates should be the last entry of ends");this.setFlatCoordinatesInternal(e,t);this.ends_=o;this.changed()};ol.geom.Polygon.circular=function(e,t,o,r){var n=goog.isDef(r)?r:32;r=[];var i;for(i=0;n>i;++i)goog.array.extend(r,e.offset(t,o,2*Math.PI*i/n));r.push(r[0],r[1]);e=new ol.geom.Polygon(null);e.setFlatCoordinates(ol.geom.GeometryLayout.XY,r,[r.length]);return e};ol.geom.Polygon.fromExtent=function(e){var t=e[0],o=e[1],r=e[2];e=e[3];t=[t,o,t,e,r,e,r,o,t,o];o=new ol.geom.Polygon(null);o.setFlatCoordinates(ol.geom.GeometryLayout.XY,t,[t.length]);return o};ol.geom.Polygon.fromCircle=function(e,t,o){var r=goog.isDef(t)?t:32,n=e.getStride();t=e.getLayout();var i=new ol.geom.Polygon(null,t),r=goog.array.repeat(0,n*(r+1));i.setFlatCoordinates(t,r,[r.length]);ol.geom.Polygon.makeRegular(i,e.getCenter(),e.getRadius(),o);return i};ol.geom.Polygon.makeRegular=function(e,t,o,r){var n=e.getFlatCoordinates(),i=e.getLayout(),s=e.getStride(),a=e.getEnds();goog.asserts.assert(1===a.length,"only 1 ring is supported");var g=n.length/s-1;r=goog.isDef(r)?r:0;for(var l,u,c=0;g>=c;++c)u=c*s,l=r+2*goog.math.modulo(c,g)*Math.PI/g,n[u]=t[0]+o*Math.cos(l),n[u+1]=t[1]+o*Math.sin(l);e.setFlatCoordinates(i,n,a)};ol.ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};ol.ViewHint={ANIMATING:0,INTERACTING:1};ol.View=function(e){ol.Object.call(this);e=goog.isDef(e)?e:{};this.hints_=[0,0];var t={};t[ol.ViewProperty.CENTER]=goog.isDef(e.center)?e.center:null;this.projection_=ol.proj.createProjection(e.projection,"EPSG:3857");var o=ol.View.createResolutionConstraint_(e);this.maxResolution_=o.maxResolution;this.minResolution_=o.minResolution;this.minZoom_=o.minZoom;var r=ol.View.createCenterConstraint_(e),o=o.constraint,n=ol.View.createRotationConstraint_(e);this.constraints_=new ol.Constraints(r,o,n);goog.isDef(e.resolution)?t[ol.ViewProperty.RESOLUTION]=e.resolution:goog.isDef(e.zoom)&&(t[ol.ViewProperty.RESOLUTION]=this.constrainResolution(this.maxResolution_,e.zoom-this.minZoom_));t[ol.ViewProperty.ROTATION]=goog.isDef(e.rotation)?e.rotation:0;this.setProperties(t)};goog.inherits(ol.View,ol.Object);ol.View.prototype.calculateCenterRotate=function(e,t){var o,r=this.getCenter();goog.isDef(r)&&(o=[r[0]-t[0],r[1]-t[1]],ol.coordinate.rotate(o,e-this.getRotation()),ol.coordinate.add(o,t));return o};ol.View.prototype.calculateCenterZoom=function(e,t){var o,r=this.getCenter(),n=this.getResolution();goog.isDef(r)&&goog.isDef(n)&&(o=[t[0]-e*(t[0]-r[0])/n,t[1]-e*(t[1]-r[1])/n]);return o};ol.View.prototype.constrainCenter=function(e){return this.constraints_.center(e)
};ol.View.prototype.constrainResolution=function(e,t,o){return this.constraints_.resolution(e,t||0,o||0)};ol.View.prototype.constrainRotation=function(e,t){return this.constraints_.rotation(e,t||0)};ol.View.prototype.getCenter=function(){return this.get(ol.ViewProperty.CENTER)};ol.View.prototype.getHints=function(){return this.hints_.slice()};ol.View.prototype.calculateExtent=function(e){var t=this.getCenter();goog.asserts.assert(goog.isDefAndNotNull(t),"The view center is not defined");var o=this.getResolution();goog.asserts.assert(goog.isDef(o),"The view resolution is not defined");var r=this.getRotation();goog.asserts.assert(goog.isDef(r),"The view rotation is not defined");return ol.extent.getForViewAndSize(t,o,r,e)};ol.View.prototype.getProjection=function(){return this.projection_};ol.View.prototype.getResolution=function(){return this.get(ol.ViewProperty.RESOLUTION)};ol.View.prototype.getResolutionForExtent=function(e,t){var o=ol.extent.getWidth(e)/t[0],r=ol.extent.getHeight(e)/t[1];return Math.max(o,r)};ol.View.prototype.getResolutionForValueFunction=function(e){var t=e||2,o=this.maxResolution_,r=this.minResolution_,n=Math.log(o/r)/Math.log(t);return function(e){e=o/Math.pow(t,e*n);goog.asserts.assert(e>=r&&o>=e,"calculated resolution outside allowed bounds (%s <= %s <= %s)",r,e,o);return e}};ol.View.prototype.getRotation=function(){return this.get(ol.ViewProperty.ROTATION)};ol.View.prototype.getValueForResolutionFunction=function(e){var t=e||2,o=this.maxResolution_,r=Math.log(o/this.minResolution_)/Math.log(t);return function(e){e=Math.log(o/e)/Math.log(t)/r;goog.asserts.assert(e>=0&&1>=e,"calculated value (%s) ouside allowed range (0-1)",e);return e}};ol.View.prototype.getState=function(){goog.asserts.assert(this.isDef(),"the view was not defined (had no center and/or resolution)");var e=this.getCenter(),t=this.getProjection(),o=this.getResolution(),r=this.getRotation();return{center:[Math.round(e[0]/o)*o,Math.round(e[1]/o)*o],projection:goog.isDef(t)?t:null,resolution:o,rotation:r}};ol.View.prototype.getZoom=function(){var e,t=this.getResolution();if(goog.isDef(t)){var o,r=0;do{o=this.constrainResolution(this.maxResolution_,r);if(o==t){e=r;break}++r}while(o>this.minResolution_)}return goog.isDef(e)?this.minZoom_+e:e};ol.View.prototype.fit=function(e,t,o){e instanceof ol.geom.SimpleGeometry||(goog.asserts.assert(goog.isArray(e),"invalid extent or geometry"),goog.asserts.assert(!ol.extent.isEmpty(e),"cannot fit empty extent"),e=ol.geom.Polygon.fromExtent(e));var r=goog.isDef(o)?o:{};o=goog.isDef(r.padding)?r.padding:[0,0,0,0];var n,i=goog.isDef(r.constrainResolution)?r.constrainResolution:!0,s=goog.isDef(r.nearest)?r.nearest:!1;n=goog.isDef(r.minResolution)?r.minResolution:goog.isDef(r.maxZoom)?this.constrainResolution(this.maxResolution_,r.maxZoom-this.minZoom_,0):0;var a=e.getFlatCoordinates(),g=this.getRotation();goog.asserts.assert(goog.isDef(g),"rotation was not defined");var r=Math.cos(-g),g=Math.sin(-g),l=1/0,u=1/0,c=-1/0,h=-1/0;e=e.getStride();for(var d=0,m=a.length;m>d;d+=e)var p=a[d]*r-a[d+1]*g,f=a[d]*g+a[d+1]*r,l=Math.min(l,p),u=Math.min(u,f),c=Math.max(c,p),h=Math.max(h,f);t=this.getResolutionForExtent([l,u,c,h],[t[0]-o[1]-o[3],t[1]-o[0]-o[2]]);t=isNaN(t)?n:Math.max(t,n);i&&(i=this.constrainResolution(t,0,0),!s&&t>i&&(i=this.constrainResolution(i,-1,0)),t=i);this.setResolution(t);g=-g;s=(l+c)/2+(o[1]-o[3])/2*t;o=(u+h)/2+(o[0]-o[2])/2*t;this.setCenter([s*r-o*g,o*r+s*g])};ol.View.prototype.centerOn=function(e,t,o){var r=this.getRotation(),n=Math.cos(-r),r=Math.sin(-r),i=e[0]*n-e[1]*r;e=e[1]*n+e[0]*r;var s=this.getResolution(),i=i+(t[0]/2-o[0])*s;e+=(o[1]-t[1]/2)*s;r=-r;this.setCenter([i*n-e*r,e*n+i*r])};ol.View.prototype.isDef=function(){return goog.isDefAndNotNull(this.getCenter())&&goog.isDef(this.getResolution())};ol.View.prototype.rotate=function(e,t){if(goog.isDef(t)){var o=this.calculateCenterRotate(e,t);this.setCenter(o)}this.setRotation(e)};ol.View.prototype.setCenter=function(e){this.set(ol.ViewProperty.CENTER,e)};ol.View.prototype.setHint=function(e,t){goog.asserts.assert(e>=0&&e<this.hints_.length,"illegal hint (%s), must be between 0 and %s",e,this.hints_.length);this.hints_[e]+=t;goog.asserts.assert(0<=this.hints_[e],"Hint at %s must be positive, was %s",e,this.hints_[e]);return this.hints_[e]};ol.View.prototype.setResolution=function(e){this.set(ol.ViewProperty.RESOLUTION,e)};ol.View.prototype.setRotation=function(e){this.set(ol.ViewProperty.ROTATION,e)};ol.View.prototype.setZoom=function(e){e=this.constrainResolution(this.maxResolution_,e-this.minZoom_,0);this.setResolution(e)};ol.View.createCenterConstraint_=function(e){return goog.isDef(e.extent)?ol.CenterConstraint.createExtent(e.extent):ol.CenterConstraint.none};ol.View.createResolutionConstraint_=function(e){var t,o,r=goog.isDef(e.minZoom)?e.minZoom:ol.DEFAULT_MIN_ZOOM,n=goog.isDef(e.maxZoom)?e.maxZoom:28,i=goog.isDef(e.zoomFactor)?e.zoomFactor:2;if(goog.isDef(e.resolutions))e=e.resolutions,t=e[0],o=e[e.length-1],e=ol.ResolutionConstraint.createSnapToResolutions(e);else{t=ol.proj.createProjection(e.projection,"EPSG:3857");o=t.getExtent();var s=(goog.isNull(o)?360*ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]/ol.proj.METERS_PER_UNIT[t.getUnits()]:Math.max(ol.extent.getWidth(o),ol.extent.getHeight(o)))/ol.DEFAULT_TILE_SIZE/Math.pow(2,ol.DEFAULT_MIN_ZOOM),a=s/Math.pow(2,28-ol.DEFAULT_MIN_ZOOM);t=e.maxResolution;goog.isDef(t)?r=0:t=s/Math.pow(i,r);o=e.minResolution;goog.isDef(o)||(o=goog.isDef(e.maxZoom)?goog.isDef(e.maxResolution)?t/Math.pow(i,n):s/Math.pow(i,n):a);n=r+Math.floor(Math.log(t/o)/Math.log(i));o=t/Math.pow(i,n-r);e=ol.ResolutionConstraint.createSnapToPower(i,t,n-r)}return{constraint:e,maxResolution:t,minResolution:o,minZoom:r}};ol.View.createRotationConstraint_=function(e){if(goog.isDef(e.enableRotation)?e.enableRotation:1){e=e.constrainRotation;if(goog.isDef(e)&&!0!==e){if(!1===e)return ol.RotationConstraint.none;if(goog.isNumber(e))return ol.RotationConstraint.createSnapToN(e);goog.asserts.fail("illegal option for constrainRotation (%s)",e);return ol.RotationConstraint.none}return ol.RotationConstraint.createSnapToZero()}return ol.RotationConstraint.disable};goog.fx={};goog.fx.easing={};goog.fx.easing.easeIn=function(e){return goog.fx.easing.easeInInternal_(e,3)};goog.fx.easing.easeInInternal_=function(e,t){return Math.pow(e,t)};goog.fx.easing.easeOut=function(e){return goog.fx.easing.easeOutInternal_(e,3)};goog.fx.easing.easeOutInternal_=function(e,t){return 1-goog.fx.easing.easeInInternal_(1-e,t)};goog.fx.easing.easeOutLong=function(e){return goog.fx.easing.easeOutInternal_(e,4)};goog.fx.easing.inAndOut=function(e){return 3*e*e-2*e*e*e};ol.easing={};ol.easing.easeIn=goog.fx.easing.easeIn;ol.easing.easeOut=goog.fx.easing.easeOut;ol.easing.inAndOut=goog.fx.easing.inAndOut;ol.easing.linear=function(e){return e};ol.easing.upAndDown=function(e){return.5>e?ol.easing.inAndOut(2*e):1-ol.easing.inAndOut(2*(e-.5))};ol.animation={};ol.animation.bounce=function(e){var t=e.resolution,o=goog.isDef(e.start)?e.start:goog.now(),r=goog.isDef(e.duration)?e.duration:1e3,n=goog.isDef(e.easing)?e.easing:ol.easing.upAndDown;return function(e,i){if(i.time<o)return i.animate=!0,i.viewHints[ol.ViewHint.ANIMATING]+=1,!0;if(i.time<o+r){var s=n((i.time-o)/r),a=t-i.viewState.resolution;i.animate=!0;i.viewState.resolution+=s*a;i.viewHints[ol.ViewHint.ANIMATING]+=1;return!0}return!1}};ol.animation.pan=function(e){var t=e.source,o=goog.isDef(e.start)?e.start:goog.now(),r=t[0],n=t[1],i=goog.isDef(e.duration)?e.duration:1e3,s=goog.isDef(e.easing)?e.easing:ol.easing.inAndOut;return function(e,t){if(t.time<o)return t.animate=!0,t.viewHints[ol.ViewHint.ANIMATING]+=1,!0;if(t.time<o+i){var a=1-s((t.time-o)/i),g=r-t.viewState.center[0],l=n-t.viewState.center[1];t.animate=!0;t.viewState.center[0]+=a*g;t.viewState.center[1]+=a*l;t.viewHints[ol.ViewHint.ANIMATING]+=1;return!0}return!1}};ol.animation.rotate=function(e){var t=goog.isDef(e.rotation)?e.rotation:0,o=goog.isDef(e.start)?e.start:goog.now(),r=goog.isDef(e.duration)?e.duration:1e3,n=goog.isDef(e.easing)?e.easing:ol.easing.inAndOut,i=goog.isDef(e.anchor)?e.anchor:null;return function(e,s){if(s.time<o)return s.animate=!0,s.viewHints[ol.ViewHint.ANIMATING]+=1,!0;if(s.time<o+r){var a=1-n((s.time-o)/r),a=(t-s.viewState.rotation)*a;s.animate=!0;s.viewState.rotation+=a;if(!goog.isNull(i)){var g=s.viewState.center;ol.coordinate.sub(g,i);ol.coordinate.rotate(g,a);ol.coordinate.add(g,i)}s.viewHints[ol.ViewHint.ANIMATING]+=1;return!0}return!1}};ol.animation.zoom=function(e){var t=e.resolution,o=goog.isDef(e.start)?e.start:goog.now(),r=goog.isDef(e.duration)?e.duration:1e3,n=goog.isDef(e.easing)?e.easing:ol.easing.inAndOut;return function(e,i){if(i.time<o)return i.animate=!0,i.viewHints[ol.ViewHint.ANIMATING]+=1,!0;if(i.time<o+r){var s=1-n((i.time-o)/r),a=t-i.viewState.resolution;i.animate=!0;i.viewState.resolution+=s*a;i.viewHints[ol.ViewHint.ANIMATING]+=1;return!0}return!1}};ol.tilecoord={};ol.QuadKeyCharCode={ZERO:48,ONE:49,TWO:50,THREE:51};ol.tilecoord.createFromString=function(e){var t=e.split("/");goog.asserts.assert(3===t.length,'must provide a string in "z/x/y" format, got "%s"',e);return t=goog.array.map(t,function(e){return parseInt(e,10)})};ol.tilecoord.createOrUpdate=function(e,t,o,r){return goog.isDef(r)?(r[0]=e,r[1]=t,r[2]=o,r):[e,t,o]};ol.tilecoord.getKeyZXY=function(e,t,o){return e+"/"+t+"/"+o};ol.tilecoord.hash=function(e){return(e[1]<<e[0])+e[2]};ol.tilecoord.quadKey=function(e){var t,o,r=e[0],n=Array(r),i=1<<r-1;for(t=0;r>t;++t)o=ol.QuadKeyCharCode.ZERO,e[1]&i&&(o+=1),e[2]&i&&(o+=2),n[t]=String.fromCharCode(o),i>>=1;return n.join("")};ol.tilecoord.toString=function(e){return ol.tilecoord.getKeyZXY(e[0],e[1],e[2])};ol.tilecoord.wrapX=function(e,t,o){var r=e[0],n=t.getTileCoordCenter(e);o=ol.tilegrid.extentFromProjection(o);if(ol.extent.containsCoordinate(o,n))return e;e=ol.extent.getWidth(o);o=Math.ceil((o[0]-n[0])/e);n[0]+=e*o;return t.getTileCoordForCoordAndZ(n,r)};ol.tilecoord.withinExtentAndZ=function(e,t){var o=e[0],r=e[1],n=e[2];if(t.getMinZoom()>o||o>t.getMaxZoom())return!1;var i=t.getExtent(),o=goog.isNull(i)?t.getFullTileRange(o):t.getTileRangeForExtentAndZ(i,o);return goog.isNull(o)?!0:o.containsXY(r,n)};ol.TileRange=function(e,t,o,r){this.minX=e;this.maxX=t;this.minY=o;this.maxY=r};ol.TileRange.boundingTileRange=function(){var e,t,o,r,n=arguments[0],i=n[0],s=n[1],n=n[2],s=new ol.TileRange(s,s,n,n),n=1;for(e=arguments.length;e>n;++n)t=arguments[n],r=t[0],o=t[1],t=t[2],goog.asserts.assert(r==i,"passed tilecoords all have the same Z-value"),s.minX=Math.min(s.minX,o),s.maxX=Math.max(s.maxX,o),s.minY=Math.min(s.minY,t),s.maxY=Math.max(s.maxY,t);return s};ol.TileRange.createOrUpdate=function(e,t,o,r,n){return goog.isDef(n)?(n.minX=e,n.maxX=t,n.minY=o,n.maxY=r,n):new ol.TileRange(e,t,o,r)};ol.TileRange.prototype.contains=function(e){return this.containsXY(e[1],e[2])};ol.TileRange.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY};ol.TileRange.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY};ol.TileRange.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY};ol.TileRange.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX);e.maxX>this.maxX&&(this.maxX=e.maxX);e.minY<this.minY&&(this.minY=e.minY);e.maxY>this.maxY&&(this.maxY=e.maxY)};ol.TileRange.prototype.getHeight=function(){return this.maxY-this.minY+1};ol.TileRange.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]};ol.TileRange.prototype.getWidth=function(){return this.maxX-this.minX+1};ol.TileRange.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY};ol.Attribution=function(e){this.html_=e.html;this.tileRanges_=goog.isDef(e.tileRanges)?e.tileRanges:null};ol.Attribution.prototype.getHTML=function(){return this.html_};ol.Attribution.prototype.intersectsAnyTileRange=function(e,t,o){if(goog.isNull(this.tileRanges_))return!0;var r,n,i,s;for(s in e)if(s in this.tileRanges_){i=e[s];var a;r=0;for(n=this.tileRanges_[s].length;n>r;++r){a=this.tileRanges_[s][r];if(a.intersects(i))return!0;var g=t.getTileRangeForExtentAndZ(o.getExtent(),parseInt(s,10)),l=g.getWidth();if((i.minX<g.minX||i.maxX>g.maxX)&&(a.intersects(new ol.TileRange(goog.math.modulo(i.minX,l),goog.math.modulo(i.maxX,l),i.minY,i.maxY))||i.getWidth()>l&&a.intersects(g)))return!0}}return!1};ol.CollectionEventType={ADD:"add",REMOVE:"remove"};ol.CollectionEvent=function(e,t,o){goog.events.Event.call(this,e,o);this.element=t};goog.inherits(ol.CollectionEvent,goog.events.Event);ol.CollectionProperty={LENGTH:"length"};ol.Collection=function(e){ol.Object.call(this);this.array_=goog.isDef(e)?e:[];this.updateLength_()};goog.inherits(ol.Collection,ol.Object);ol.Collection.prototype.clear=function(){for(;0<this.getLength();)this.pop()};ol.Collection.prototype.extend=function(e){var t,o;t=0;for(o=e.length;o>t;++t)this.push(e[t]);return this};ol.Collection.prototype.forEach=function(e,t){goog.array.forEach(this.array_,e,t)};ol.Collection.prototype.getArray=function(){return this.array_};ol.Collection.prototype.item=function(e){return this.array_[e]};ol.Collection.prototype.getLength=function(){return this.get(ol.CollectionProperty.LENGTH)};ol.Collection.prototype.insertAt=function(e,t){goog.array.insertAt(this.array_,t,e);this.updateLength_();this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.ADD,t,this))};ol.Collection.prototype.pop=function(){return this.removeAt(this.getLength()-1)};ol.Collection.prototype.push=function(e){var t=this.array_.length;this.insertAt(t,e);return t};ol.Collection.prototype.remove=function(e){var t,o,r=this.array_;t=0;for(o=r.length;o>t;++t)if(r[t]===e)return this.removeAt(t)};ol.Collection.prototype.removeAt=function(e){var t=this.array_[e];goog.array.removeAt(this.array_,e);this.updateLength_();this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.REMOVE,t,this));return t};ol.Collection.prototype.setAt=function(e,t){var o=this.getLength();if(o>e)o=this.array_[e],this.array_[e]=t,this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.REMOVE,o,this)),this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.ADD,t,this));else{for(;e>o;++o)this.insertAt(o,void 0);this.insertAt(e,t)}};ol.Collection.prototype.updateLength_=function(){this.set(ol.CollectionProperty.LENGTH,this.array_.length)};goog.color={};goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};goog.color.parse=function(e){var t={};e=String(e);var o=goog.color.prependHashIfNecessaryHelper(e);if(goog.color.isValidHexColor_(o))return t.hex=goog.color.normalizeHex(o),t.type="hex",t;o=goog.color.isValidRgbColor_(e);if(o.length)return t.hex=goog.color.rgbArrayToHex(o),t.type="rgb",t;if(goog.color.names&&(o=goog.color.names[e.toLowerCase()]))return t.hex=o,t.type="named",t;throw Error(e+" is not a valid color string")};goog.color.isValidColor=function(e){var t=goog.color.prependHashIfNecessaryHelper(e);return!!(goog.color.isValidHexColor_(t)||goog.color.isValidRgbColor_(e).length||goog.color.names&&goog.color.names[e.toLowerCase()])};goog.color.parseRgb=function(e){var t=goog.color.isValidRgbColor_(e);if(!t.length)throw Error(e+" is not a valid RGB color");return t};goog.color.hexToRgbStyle=function(e){return goog.color.rgbStyle_(goog.color.hexToRgb(e))};goog.color.hexTripletRe_=/#(.)(.)(.)/;goog.color.normalizeHex=function(e){if(!goog.color.isValidHexColor_(e))throw Error("'"+e+"' is not a valid hex color");4==e.length&&(e=e.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3"));return e.toLowerCase()};goog.color.hexToRgb=function(e){e=goog.color.normalizeHex(e);var t=parseInt(e.substr(1,2),16),o=parseInt(e.substr(3,2),16);e=parseInt(e.substr(5,2),16);return[t,o,e]};goog.color.rgbToHex=function(e,t,o){e=Number(e);t=Number(t);o=Number(o);if(isNaN(e)||0>e||e>255||isNaN(t)||0>t||t>255||isNaN(o)||0>o||o>255)throw Error('"('+e+","+t+","+o+'") is not a valid RGB color');e=goog.color.prependZeroIfNecessaryHelper(e.toString(16));t=goog.color.prependZeroIfNecessaryHelper(t.toString(16));o=goog.color.prependZeroIfNecessaryHelper(o.toString(16));return"#"+e+t+o};goog.color.rgbArrayToHex=function(e){return goog.color.rgbToHex(e[0],e[1],e[2])};goog.color.rgbToHsl=function(e,t,o){e/=255;t/=255;o/=255;var r=Math.max(e,t,o),n=Math.min(e,t,o),i=0,s=0,a=.5*(r+n);r!=n&&(r==e?i=60*(t-o)/(r-n):r==t?i=60*(o-e)/(r-n)+120:r==o&&(i=60*(e-t)/(r-n)+240),s=a>0&&.5>=a?(r-n)/(2*a):(r-n)/(2-2*a));return[Math.round(i+360)%360,s,a]};goog.color.rgbArrayToHsl=function(e){return goog.color.rgbToHsl(e[0],e[1],e[2])};goog.color.hueToRgb_=function(e,t,o){0>o?o+=1:o>1&&--o;return 1>6*o?e+6*(t-e)*o:1>2*o?t:2>3*o?e+(t-e)*(2/3-o)*6:e};goog.color.hslToRgb=function(e,t,o){var r=0,n=0,i=0;e/=360;if(0==t)r=n=i=255*o;else var s=i=0,s=.5>o?o*(1+t):o+t-t*o,i=2*o-s,r=255*goog.color.hueToRgb_(i,s,e+1/3),n=255*goog.color.hueToRgb_(i,s,e),i=255*goog.color.hueToRgb_(i,s,e-1/3);return[Math.round(r),Math.round(n),Math.round(i)]};goog.color.hslArrayToRgb=function(e){return goog.color.hslToRgb(e[0],e[1],e[2])};goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;goog.color.isValidHexColor_=function(e){return goog.color.validHexColorRe_.test(e)};goog.color.normalizedHexColorRe_=/^#[0-9a-f]{6}$/;goog.color.isNormalizedHexColor_=function(e){return goog.color.normalizedHexColorRe_.test(e)};goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;goog.color.isValidRgbColor_=function(e){var t=e.match(goog.color.rgbColorRe_);if(t){e=Number(t[1]);var o=Number(t[2]),t=Number(t[3]);if(e>=0&&255>=e&&o>=0&&255>=o&&t>=0&&255>=t)return[e,o,t]}return[]};goog.color.prependZeroIfNecessaryHelper=function(e){return 1==e.length?"0"+e:e};goog.color.prependHashIfNecessaryHelper=function(e){return"#"==e.charAt(0)?e:"#"+e};goog.color.rgbStyle_=function(e){return"rgb("+e.join(",")+")"};goog.color.hsvToRgb=function(e,t,o){var r=0,n=0,i=0;if(0==t)i=n=r=o;else{var s=Math.floor(e/60),a=e/60-s;e=o*(1-t);var g=o*(1-t*a);t=o*(1-t*(1-a));switch(s){case 1:r=g;n=o;i=e;break;case 2:r=e;n=o;i=t;break;case 3:r=e;n=g;i=o;break;case 4:r=t;n=e;i=o;break;case 5:r=o;n=e;i=g;break;case 6:case 0:r=o,n=t,i=e}}return[Math.floor(r),Math.floor(n),Math.floor(i)]};goog.color.rgbToHsv=function(e,t,o){var r=Math.max(Math.max(e,t),o),n=Math.min(Math.min(e,t),o);if(n==r)n=e=0;else{var i=r-n,n=i/r;e=60*(e==r?(t-o)/i:t==r?2+(o-e)/i:4+(e-t)/i);0>e&&(e+=360);e>360&&(e-=360)}return[e,n,r]};goog.color.rgbArrayToHsv=function(e){return goog.color.rgbToHsv(e[0],e[1],e[2])};goog.color.hsvArrayToRgb=function(e){return goog.color.hsvToRgb(e[0],e[1],e[2])};goog.color.hexToHsl=function(e){e=goog.color.hexToRgb(e);return goog.color.rgbToHsl(e[0],e[1],e[2])};goog.color.hslToHex=function(e,t,o){return goog.color.rgbArrayToHex(goog.color.hslToRgb(e,t,o))};goog.color.hslArrayToHex=function(e){return goog.color.rgbArrayToHex(goog.color.hslToRgb(e[0],e[1],e[2]))};goog.color.hexToHsv=function(e){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(e))};goog.color.hsvToHex=function(e,t,o){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(e,t,o))};goog.color.hsvArrayToHex=function(e){return goog.color.hsvToHex(e[0],e[1],e[2])};goog.color.hslDistance=function(e,t){var o,r;o=.5>=e[2]?e[1]*e[2]:e[1]*(1-e[2]);r=.5>=t[2]?t[1]*t[2]:t[1]*(1-t[2]);return(e[2]-t[2])*(e[2]-t[2])+o*o+r*r-2*o*r*Math.cos(2*(e[0]/360-t[0]/360)*Math.PI)};goog.color.blend=function(e,t,o){o=goog.math.clamp(o,0,1);return[Math.round(o*e[0]+(1-o)*t[0]),Math.round(o*e[1]+(1-o)*t[1]),Math.round(o*e[2]+(1-o)*t[2])]};goog.color.darken=function(e,t){return goog.color.blend([0,0,0],e,t)};goog.color.lighten=function(e,t){return goog.color.blend([255,255,255],e,t)};goog.color.highContrast=function(e,t){for(var o=[],r=0;r<t.length;r++)o.push({color:t[r],diff:goog.color.yiqBrightnessDiff_(t[r],e)+goog.color.colorDiff_(t[r],e)});o.sort(function(e,t){return t.diff-e.diff});return o[0].color};goog.color.yiqBrightness_=function(e){return Math.round((299*e[0]+587*e[1]+114*e[2])/1e3)};goog.color.yiqBrightnessDiff_=function(e,t){return Math.abs(goog.color.yiqBrightness_(e)-goog.color.yiqBrightness_(t))};goog.color.colorDiff_=function(e,t){return Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])+Math.abs(e[2]-t[2])};ol.color={};ol.color.hexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;ol.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;ol.color.rgbaColorRe_=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i;ol.color.blend=function(e,t,o){o=goog.isDef(o)?o:[];var r=e[3],n=t[3];if(1==r)o[0]=t[0]*n+e[0]*(1-n)+.5|0,o[1]=t[1]*n+e[1]*(1-n)+.5|0,o[2]=t[2]*n+e[2]*(1-n)+.5|0,o[3]=1;else if(0===n)o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=r;else{var i=n+r*(1-n);0===i?(o[0]=0,o[1]=0,o[2]=0,o[3]=0):(o[0]=(t[0]*n+e[0]*r*(1-n))/i+.5|0,o[1]=(t[1]*n+e[1]*r*(1-n))/i+.5|0,o[2]=(t[2]*n+e[2]*r*(1-n))/i+.5|0,o[3]=i)}goog.asserts.assert(ol.color.isValid(o),"Output color of blend should be a valid color");return o};ol.color.asArray=function(e){if(goog.isArray(e))return e;goog.asserts.assert(goog.isString(e),"Color should be a string");return ol.color.fromString(e)};ol.color.asString=function(e){if(goog.isString(e))return e;goog.asserts.assert(goog.isArray(e),"Color should be an array");return ol.color.toString(e)};ol.color.equals=function(e,t){return e===t||e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]&&e[3]==t[3]};ol.color.fromString=function(){var e={},t=0;return function(o){var r;if(e.hasOwnProperty(o))r=e[o];else{if(t>=1024){r=0;for(var n in e)0===(3&r++)&&(delete e[n],--t)}r=ol.color.fromStringInternal_(o);e[o]=r;++t}return r}}();ol.color.fromStringInternal_=function(e){var t=!1;ol.ENABLE_NAMED_COLORS&&goog.color.names.hasOwnProperty(e)&&(e=goog.color.names[e],t=!0);var o,r;if(t||ol.color.hexColorRe_.exec(e))return t=e.length-1,goog.asserts.assert(3==t||6==t,"Color string length should be 3 or 6"),r=3==t?1:2,t=parseInt(e.substr(1+0*r,r),16),o=parseInt(e.substr(1+1*r,r),16),e=parseInt(e.substr(1+2*r,r),16),1==r&&(t=(t<<4)+t,o=(o<<4)+o,e=(e<<4)+e),e=[t,o,e,1],goog.asserts.assert(ol.color.isValid(e),"Color should be a valid color"),e;if(r=ol.color.rgbaColorRe_.exec(e))return t=Number(r[1]),o=Number(r[2]),e=Number(r[3]),r=Number(r[4]),e=[t,o,e,r],ol.color.normalize(e,e);if(r=ol.color.rgbColorRe_.exec(e))return t=Number(r[1]),o=Number(r[2]),e=Number(r[3]),e=[t,o,e,1],ol.color.normalize(e,e);goog.asserts.fail(e+" is not a valid color");return void 0};ol.color.isValid=function(e){return 0<=e[0]&&256>e[0]&&0<=e[1]&&256>e[1]&&0<=e[2]&&256>e[2]&&0<=e[3]&&1>=e[3]};ol.color.normalize=function(e,t){var o=goog.isDef(t)?t:[];o[0]=goog.math.clamp(e[0]+.5|0,0,255);o[1]=goog.math.clamp(e[1]+.5|0,0,255);o[2]=goog.math.clamp(e[2]+.5|0,0,255);o[3]=goog.math.clamp(e[3],0,1);return o};ol.color.toString=function(e){var t=e[0];t!=(0|t)&&(t=t+.5|0);var o=e[1];o!=(0|o)&&(o=o+.5|0);var r=e[2];r!=(0|r)&&(r=r+.5|0);return"rgba("+t+","+o+","+r+","+e[3]+")"};ol.color.transform=function(e,t,o){o=goog.isDef(o)?o:[];o=goog.vec.Mat4.multVec3(t,e,o);goog.asserts.assert(goog.isArray(o),"result should be an array");o[3]=e[3];return ol.color.normalize(o,o)};ol.color.stringOrColorEquals=function(e,t){if(e===t||e==t)return!0;goog.isString(e)&&(e=ol.color.fromString(e));goog.isString(t)&&(t=ol.color.fromString(t));return ol.color.equals(e,t)};ol.color.Matrix=function(){this.colorMatrix_=goog.vec.Mat4.createNumber();this.brightness_=void 0;this.brightnessMatrix_=goog.vec.Mat4.createNumber();this.contrast_=void 0;this.contrastMatrix_=goog.vec.Mat4.createNumber();this.hue_=void 0;this.hueMatrix_=goog.vec.Mat4.createNumber();this.saturation_=void 0;this.saturationMatrix_=goog.vec.Mat4.createNumber()};ol.color.Matrix.makeBrightness=function(e,t){goog.vec.Mat4.makeTranslate(e,t,t,t);return e};ol.color.Matrix.makeContrast=function(e,t){goog.vec.Mat4.makeScale(e,t,t,t);var o=-.5*t+.5;goog.vec.Mat4.setColumnValues(e,3,o,o,o,1);return e};ol.color.Matrix.makeHue=function(e,t){var o=Math.cos(t),r=Math.sin(t);goog.vec.Mat4.setFromValues(e,.213+.787*o-.213*r,.213-.213*o+.143*r,.213-.213*o-.787*r,0,.715-.715*o-.715*r,.715+.285*o+.14*r,.715-.715*o+.715*r,0,.072-.072*o+.928*r,.072-.072*o-.283*r,.072+.928*o+.072*r,0,0,0,0,1);return e};ol.color.Matrix.makeSaturation=function(e,t){goog.vec.Mat4.setFromValues(e,.213+.787*t,.213-.213*t,.213-.213*t,0,.715-.715*t,.715+.285*t,.715-.715*t,0,.072-.072*t,.072-.072*t,.072+.928*t,0,0,0,0,1);return e};ol.color.Matrix.prototype.getMatrix=function(e,t,o,r){var n=!1;goog.isDef(e)&&e!==this.brightness_&&(ol.color.Matrix.makeBrightness(this.brightnessMatrix_,e),this.brightness_=e,n=!0);goog.isDef(t)&&t!==this.contrast_&&(ol.color.Matrix.makeContrast(this.contrastMatrix_,t),this.contrast_=t,n=!0);goog.isDef(o)&&o!==this.hue_&&(ol.color.Matrix.makeHue(this.hueMatrix_,o),this.hue_=o,n=!0);goog.isDef(r)&&r!==this.saturation_&&(ol.color.Matrix.makeSaturation(this.saturationMatrix_,r),this.saturation_=r,n=!0);n&&(n=this.colorMatrix_,goog.vec.Mat4.makeIdentity(n),goog.isDef(t)&&goog.vec.Mat4.multMat(n,this.contrastMatrix_,n),goog.isDef(e)&&goog.vec.Mat4.multMat(n,this.brightnessMatrix_,n),goog.isDef(r)&&goog.vec.Mat4.multMat(n,this.saturationMatrix_,n),goog.isDef(o)&&goog.vec.Mat4.multMat(n,this.hueMatrix_,n));return this.colorMatrix_};goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE,LEGACY_IE_RANGES:goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)};goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",COMMAND:"COMMAND",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HGROUP:"HGROUP",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",KEYGEN:"KEYGEN",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MARK:"MARK",MATH:"MATH",MENU:"MENU",META:"META",METER:"METER",NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEMPLATE:"TEMPLATE",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"};goog.dom.tags={};goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};goog.dom.tags.isVoidTag=function(e){return!0===goog.dom.tags.VOID_TAGS_[e]};goog.string.TypedString=function(){};goog.string.Const=function(){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_="";this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_};goog.string.Const.prototype.implementsGoogStringTypedString=!0;goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_};goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"};goog.string.Const.unwrap=function(e){if(e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_)return e.stringConstValueWithSecurityContract__googStringSecurityPrivate_;goog.asserts.fail("expected object of type Const, got '"+e+"'");return"type_error:Const"};goog.string.Const.from=function(e){return goog.string.Const.create__googStringSecurityPrivate_(e)};goog.string.Const.TYPE_MARKER_={};goog.string.Const.create__googStringSecurityPrivate_=function(e){var t=new goog.string.Const;t.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e;
return t};goog.html={};goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="";this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0;goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeStyle.fromConstant=function(e){e=goog.string.Const.unwrap(e);if(0===e.length)return goog.html.SafeStyle.EMPTY;goog.html.SafeStyle.checkStyle_(e);goog.asserts.assert(goog.string.endsWith(e,";"),"Last character of style string is not ';': "+e);goog.asserts.assert(goog.string.contains(e,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+e);return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e)};goog.html.SafeStyle.checkStyle_=function(e){goog.asserts.assert(!/[<>]/.test(e),"Forbidden characters in style string: "+e)};goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_};goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"});goog.html.SafeStyle.unwrap=function(e){if(e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return e.privateDoNotAccessOrElseSafeStyleWrappedValue_;goog.asserts.fail("expected object of type SafeStyle, got '"+e+"'");return"type_error:SafeStyle"};goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)};goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){this.privateDoNotAccessOrElseSafeStyleWrappedValue_=e;return this};goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse("");goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez";goog.html.SafeStyle.create=function(e){var t,o="";for(t in e){if(!/^[-_a-zA-Z0-9]+$/.test(t))throw Error("Name allows only [-_a-zA-Z0-9], got: "+t);var r=e[t];null!=r&&(r instanceof goog.string.Const?(r=goog.string.Const.unwrap(r),goog.asserts.assert(!/[{;}]/.test(r),"Value does not allow [{;}].")):goog.html.SafeStyle.VALUE_RE_.test(r)?goog.html.SafeStyle.hasBalancedQuotes_(r)||(goog.asserts.fail("String value requires balanced quotes, got: "+r),r=goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only [-,.\"'%_!# a-zA-Z0-9], got: "+r),r=goog.html.SafeStyle.INNOCUOUS_STRING),o+=t+":"+r+";")}if(!o)return goog.html.SafeStyle.EMPTY;goog.html.SafeStyle.checkStyle_(o);return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o)};goog.html.SafeStyle.hasBalancedQuotes_=function(e){for(var t=!0,o=!0,r=0;r<e.length;r++){var n=e.charAt(r);"'"==n&&o?t=!t:'"'==n&&t&&(o=!o)}return t&&o};goog.html.SafeStyle.VALUE_RE_=/^[-,."'%_!# a-zA-Z0-9]+$/;goog.html.SafeStyle.concat=function(){var e="",t=function(o){goog.isArray(o)?goog.array.forEach(o,t):e+=goog.html.SafeStyle.unwrap(o)};goog.array.forEach(arguments,t);return e?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e):goog.html.SafeStyle.EMPTY};goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="";this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0;goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeStyleSheet.concat=function(){var e="",t=function(o){goog.isArray(o)?goog.array.forEach(o,t):e+=goog.html.SafeStyleSheet.unwrap(o)};goog.array.forEach(arguments,t);return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)};goog.html.SafeStyleSheet.fromConstant=function(e){e=goog.string.Const.unwrap(e);if(0===e.length)return goog.html.SafeStyleSheet.EMPTY;goog.asserts.assert(!goog.string.contains(e,"<"),"Forbidden '<' character in style sheet string: "+e);return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)};goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_};goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"});goog.html.SafeStyleSheet.unwrap=function(e){if(e instanceof goog.html.SafeStyleSheet&&e.constructor===goog.html.SafeStyleSheet&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_;goog.asserts.fail("expected object of type SafeStyleSheet, got '"+e+"'");return"type_error:SafeStyleSheet"};goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)};goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=e;return this};goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse("");goog.fs={};goog.fs.url={};goog.fs.url.createObjectUrl=function(e){return goog.fs.url.getUrlObject_().createObjectURL(e)};goog.fs.url.revokeObjectUrl=function(e){goog.fs.url.getUrlObject_().revokeObjectURL(e)};goog.fs.url.getUrlObject_=function(){var e=goog.fs.url.findUrlObject_();if(null!=e)return e;throw Error("This browser doesn't seem to support blob URLs")};goog.fs.url.findUrlObject_=function(){return goog.isDef(goog.global.URL)&&goog.isDef(goog.global.URL.createObjectURL)?goog.global.URL:goog.isDef(goog.global.webkitURL)&&goog.isDef(goog.global.webkitURL.createObjectURL)?goog.global.webkitURL:goog.isDef(goog.global.createObjectURL)?goog.global:null};goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()};goog.i18n={};goog.i18n.bidi={};goog.i18n.bidi.FORCE_RTL=!1;goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4));goog.i18n.bidi.Format={LRE:"\u202a",RLE:"\u202b",PDF:"\u202c",LRM:"\u200e",RLM:"\u200f"};goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0};goog.i18n.bidi.RIGHT="right";goog.i18n.bidi.LEFT="left";goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT;goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT;goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?e>0?goog.i18n.bidi.Dir.LTR:0>e?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR};goog.i18n.bidi.ltrChars_="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff";goog.i18n.bidi.rtlChars_="\u0591-\u06ef\u06fa-\u07ff\u200f\ufb1d-\ufdff\ufe70-\ufefc";goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g;goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e};goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))};goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl;goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))};goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)};goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)};goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)};goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))};goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl;goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))};goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr;goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/;goog.i18n.bidi.isNeutralText=function(e,t){e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t);return goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)};goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$");goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$");goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))};goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr;goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))};goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl;goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)};goog.i18n.bidi.bracketGuardHtmlRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(&lt;.*?(&gt;)+)/g;goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g;goog.i18n.bidi.guardBracketInHtml=function(e,t){return(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?e.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=rtl>$&</span>"):e.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=ltr>$&</span>")};goog.i18n.bidi.guardBracketInText=function(e,t){var o=(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return e.replace(goog.i18n.bidi.bracketGuardTextRe_,o+"$&"+o)};goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"};goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF};goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"};goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF};goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g;goog.i18n.bidi.leftRe_=/left/gi;goog.i18n.bidi.rightRe_=/right/gi;goog.i18n.bidi.tempRe_=/%%%%/g;goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)};goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g;goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g;goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1\u05f4").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1\u05f3")};goog.i18n.bidi.wordSeparatorRe_=/\s+/;goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/;goog.i18n.bidi.rtlDetectionThreshold_=.4;goog.i18n.bidi.estimateDirection=function(e,t){for(var o=0,r=0,n=!1,i=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),s=0;s<i.length;s++){var a=i[s];goog.i18n.bidi.startsWithRtl(a)?(o++,r++):goog.i18n.bidi.isRequiredLtrRe_.test(a)?n=!0:goog.i18n.bidi.hasAnyLtr(a)?r++:goog.i18n.bidi.hasNumeralsRe_.test(a)&&(n=!0)}return 0==r?n?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:o/r>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR};goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL};goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t))&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")};goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}};goog.i18n.bidi.DirectionalString=function(){};goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="";this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez";goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0;goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_};goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0;goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"});goog.html.SafeUrl.unwrap=function(e){if(e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return e.privateDoNotAccessOrElseSafeHtmlWrappedValue_;goog.asserts.fail("expected object of type SafeUrl, got '"+e+"'");return"type_error:SafeUrl"};goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))};goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm))$/i;goog.html.SafeUrl.fromBlob=function(e){e=goog.html.SAFE_MIME_TYPE_PATTERN_.test(e.type)?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING;return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)};goog.html.DATA_URL_PATTERN_=/^data:([^;,]*);base64,[a-z0-9+\/]+=*$/i;goog.html.SafeUrl.fromDataUrl=function(e){var t=e.match(goog.html.DATA_URL_PATTERN_),t=t&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(t[1]);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t?e:goog.html.SafeUrl.INNOCUOUS_STRING)};goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/i;goog.html.SafeUrl.sanitize=function(e){if(e instanceof goog.html.SafeUrl)return e;e=e.implementsGoogStringTypedString?e.getTypedStringValue():String(e);goog.html.SAFE_URL_PATTERN_.test(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)};goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){var t=new goog.html.SafeUrl;t.privateDoNotAccessOrElseSafeHtmlWrappedValue_=e;return t};goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="";this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0;goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_};goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0;goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"});goog.html.TrustedResourceUrl.unwrap=function(e){if(e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_;goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"'");return"type_error:TrustedResourceUrl"};goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))};goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){var t=new goog.html.TrustedResourceUrl;t.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=e;return t};goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="";this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_;this.dir_=null};goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0;goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_};goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0;goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_};goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"});goog.html.SafeHtml.unwrap=function(e){if(e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return e.privateDoNotAccessOrElseSafeHtmlWrappedValue_;goog.asserts.fail("expected object of type SafeHtml, got '"+e+"'");return"type_error:SafeHtml"};goog.html.SafeHtml.htmlEscape=function(e){if(e instanceof goog.html.SafeHtml)return e;var t=null;e.implementsGoogI18nBidiDirectionalString&&(t=e.getDirection());e=e.implementsGoogStringTypedString?e.getTypedStringValue():String(e);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.htmlEscape(e),t)};goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){if(e instanceof goog.html.SafeHtml)return e;e=goog.html.SafeHtml.htmlEscape(e);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.newLineToBr(goog.html.SafeHtml.unwrap(e)),e.getDirection())};goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){if(e instanceof goog.html.SafeHtml)return e;e=goog.html.SafeHtml.htmlEscape(e);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.whitespaceEscape(goog.html.SafeHtml.unwrap(e)),e.getDirection())};goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape;goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/;goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0};goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_=goog.object.createSet(goog.dom.TagName.EMBED,goog.dom.TagName.IFRAME,goog.dom.TagName.LINK,goog.dom.TagName.OBJECT,goog.dom.TagName.SCRIPT,goog.dom.TagName.STYLE,goog.dom.TagName.TEMPLATE);goog.html.SafeHtml.create=function(e,t,o){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e))throw Error("Invalid tag name <"+e+">.");if(e.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error("Tag name <"+e+"> is not allowed for SafeHtml.");return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(e,t,o)};goog.html.SafeHtml.createIframe=function(e,t,o,r){var n={};n.src=e||null;n.srcdoc=t||null;e=goog.html.SafeHtml.combineAttributes(n,{sandbox:""},o);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,r)};goog.html.SafeHtml.createStyle=function(e,t){var o=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},t),r="";e=goog.array.concat(e);for(var n=0;n<e.length;n++)r+=goog.html.SafeStyleSheet.unwrap(e[n]);r=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",o,r)};goog.html.SafeHtml.getAttrNameAndValue_=function(e,t,o){if(o instanceof goog.string.Const)o=goog.string.Const.unwrap(o);else if("style"==t.toLowerCase())o=goog.html.SafeHtml.getStyleValue_(o);else{if(/^on/i.test(t))throw Error('Attribute "'+t+'" requires goog.string.Const value, "'+o+'" given.');if(t.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(o instanceof goog.html.TrustedResourceUrl)o=goog.html.TrustedResourceUrl.unwrap(o);else if(o instanceof goog.html.SafeUrl)o=goog.html.SafeUrl.unwrap(o);else{if(!goog.isString(o))throw Error('Attribute "'+t+'" on tag "'+e+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+o+'" given.');o=goog.html.SafeUrl.sanitize(o).getTypedStringValue()}}o.implementsGoogStringTypedString&&(o=o.getTypedStringValue());goog.asserts.assert(goog.isString(o)||goog.isNumber(o),"String or number value expected, got "+typeof o+" with value: "+o);return t+'="'+goog.string.htmlEscape(String(o))+'"'};goog.html.SafeHtml.getStyleValue_=function(e){if(!goog.isObject(e))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof e+" given: "+e);e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e));return goog.html.SafeStyle.unwrap(e)};goog.html.SafeHtml.createWithDir=function(e,t,o,r){t=goog.html.SafeHtml.create(t,o,r);t.dir_=e;return t};goog.html.SafeHtml.concat=function(){var e=goog.i18n.bidi.Dir.NEUTRAL,t="",o=function(r){goog.isArray(r)?goog.array.forEach(r,o):(r=goog.html.SafeHtml.htmlEscape(r),t+=goog.html.SafeHtml.unwrap(r),r=r.getDirection(),e==goog.i18n.bidi.Dir.NEUTRAL?e=r:r!=goog.i18n.bidi.Dir.NEUTRAL&&e!=r&&(e=null))};goog.array.forEach(arguments,o);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,e)};goog.html.SafeHtml.concatWithDir=function(e){var t=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));t.dir_=e;return t};goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,t){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e,t)};goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e,t){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=e;this.dir_=t;return this};goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,t,o){var r=null,n="<"+e;if(t)for(var i in t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(i))throw Error('Invalid attribute name "'+i+'".');var s=t[i];goog.isDefAndNotNull(s)&&(n+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,i,s))}goog.isDefAndNotNull(o)?goog.isArray(o)||(o=[o]):o=[];goog.dom.tags.isVoidTag(e.toLowerCase())?(goog.asserts.assert(!o.length,"Void tag <"+e+"> does not allow content."),n+=">"):(r=goog.html.SafeHtml.concat(o),n+=">"+goog.html.SafeHtml.unwrap(r)+"</"+e+">",r=r.getDirection());(e=t&&t.dir)&&(r=/^(ltr|rtl|auto)$/i.test(e)?goog.i18n.bidi.Dir.NEUTRAL:null);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,r)};goog.html.SafeHtml.combineAttributes=function(e,t,o){var r,n={};for(r in e)goog.asserts.assert(r.toLowerCase()==r,"Must be lower case"),n[r]=e[r];for(r in t)goog.asserts.assert(r.toLowerCase()==r,"Must be lower case"),n[r]=t[r];for(r in o){var i=r.toLowerCase();if(i in e)throw Error('Cannot override "'+i+'" attribute, got "'+r+'" with value "'+o[r]+'"');i in t&&delete n[i];n[r]=o[r]}return n};goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL);goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL);goog.dom.safe={};goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"};goog.dom.safe.insertAdjacentHtml=function(e,t,o){e.insertAdjacentHTML(t,goog.html.SafeHtml.unwrap(o))};goog.dom.safe.setInnerHtml=function(e,t){e.innerHTML=goog.html.SafeHtml.unwrap(t)};goog.dom.safe.setOuterHtml=function(e,t){e.outerHTML=goog.html.SafeHtml.unwrap(t)};goog.dom.safe.documentWrite=function(e,t){e.write(goog.html.SafeHtml.unwrap(t))};goog.dom.safe.setAnchorHref=function(e,t){var o;o=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitize(t);e.href=goog.html.SafeUrl.unwrap(o)};goog.dom.safe.setEmbedSrc=function(e,t){e.src=goog.html.TrustedResourceUrl.unwrap(t)};goog.dom.safe.setFrameSrc=function(e,t){e.src=goog.html.TrustedResourceUrl.unwrap(t)};goog.dom.safe.setIframeSrc=function(e,t){e.src=goog.html.TrustedResourceUrl.unwrap(t)};goog.dom.safe.setLinkHrefAndRel=function(e,t,o){e.rel=o;goog.string.caseInsensitiveContains(o,"stylesheet")?(goog.asserts.assert(t instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),e.href=goog.html.TrustedResourceUrl.unwrap(t)):e.href=t instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(t):t instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(t):goog.html.SafeUrl.sanitize(t).getTypedStringValue()};goog.dom.safe.setObjectData=function(e,t){e.data=goog.html.TrustedResourceUrl.unwrap(t)};goog.dom.safe.setScriptSrc=function(e,t){e.src=goog.html.TrustedResourceUrl.unwrap(t)};goog.dom.safe.setLocationHref=function(e,t){var o;o=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitize(t);e.href=goog.html.SafeUrl.unwrap(o)};goog.dom.safe.openInWindow=function(e,t,o,r,n){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitize(e);return(t||window).open(goog.html.SafeUrl.unwrap(e),o?goog.string.Const.unwrap(o):"",r,n)};goog.math.Coordinate=function(e,t){this.x=goog.isDef(e)?e:0;this.y=goog.isDef(t)?t:0};goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)};goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"});goog.math.Coordinate.equals=function(e,t){return e==t?!0:e&&t?e.x==t.x&&e.y==t.y:!1};goog.math.Coordinate.distance=function(e,t){var o=e.x-t.x,r=e.y-t.y;return Math.sqrt(o*o+r*r)};goog.math.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};goog.math.Coordinate.azimuth=function(e){return goog.math.angle(0,0,e.x,e.y)};goog.math.Coordinate.squaredDistance=function(e,t){var o=e.x-t.x,r=e.y-t.y;return o*o+r*r};goog.math.Coordinate.difference=function(e,t){return new goog.math.Coordinate(e.x-t.x,e.y-t.y)};goog.math.Coordinate.sum=function(e,t){return new goog.math.Coordinate(e.x+t.x,e.y+t.y)};goog.math.Coordinate.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};goog.math.Coordinate.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};goog.math.Coordinate.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};goog.math.Coordinate.prototype.translate=function(e,t){e instanceof goog.math.Coordinate?(this.x+=e.x,this.y+=e.y):(this.x+=e,goog.isNumber(t)&&(this.y+=t));return this};goog.math.Coordinate.prototype.scale=function(e,t){var o=goog.isNumber(t)?t:e;this.x*=e;this.y*=o;return this};goog.math.Coordinate.prototype.rotateRadians=function(e,t){var o=t||new goog.math.Coordinate(0,0),r=this.x,n=this.y,i=Math.cos(e),s=Math.sin(e);this.x=(r-o.x)*i-(n-o.y)*s+o.x;this.y=(r-o.x)*s+(n-o.y)*i+o.y};goog.math.Coordinate.prototype.rotateDegrees=function(e,t){this.rotateRadians(goog.math.toRadians(e),t)};goog.math.Size=function(e,t){this.width=e;this.height=t};goog.math.Size.equals=function(e,t){return e==t?!0:e&&t?e.width==t.width&&e.height==t.height:!1};goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)};goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"});goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)};goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)};goog.math.Size.prototype.area=function(){return this.width*this.height};goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)};goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height};goog.math.Size.prototype.isEmpty=function(){return!this.area()};goog.math.Size.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Size.prototype.fitsInside=function(e){return this.width<=e.width&&this.height<=e.height};goog.math.Size.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Size.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Size.prototype.scale=function(e,t){var o=goog.isNumber(t)?t:e;this.width*=e;this.height*=o;return this};goog.math.Size.prototype.scaleToCover=function(e){e=this.aspectRatio()<=e.aspectRatio()?e.width/this.width:e.height/this.height;return this.scale(e)};goog.math.Size.prototype.scaleToFit=function(e){e=this.aspectRatio()>e.aspectRatio()?e.width/this.width:e.height/this.height;return this.scale(e)};goog.dom.ASSUME_QUIRKS_MODE=!1;goog.dom.ASSUME_STANDARDS_MODE=!0;goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE;goog.dom.getDomHelper=function(e){return e?new goog.dom.DomHelper(goog.dom.getOwnerDocument(e)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)};goog.dom.getDocument=function(){return document};goog.dom.getElement=function(e){return goog.dom.getElementHelper_(document,e)};goog.dom.getElementHelper_=function(e,t){return goog.isString(t)?e.getElementById(t):t};goog.dom.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(document,e)};goog.dom.getRequiredElementHelper_=function(e,t){goog.asserts.assertString(t);var o=goog.dom.getElementHelper_(e,t);return o=goog.asserts.assertElement(o,"No element found with id: "+t)};goog.dom.$=goog.dom.getElement;goog.dom.getElementsByTagNameAndClass=function(e,t,o){return goog.dom.getElementsByTagNameAndClass_(document,e,t,o)};goog.dom.getElementsByClass=function(e,t){var o=t||document;return goog.dom.canUseQuerySelector_(o)?o.querySelectorAll("."+e):goog.dom.getElementsByTagNameAndClass_(document,"*",e,t)};goog.dom.getElementByClass=function(e,t){var o=t||document,r=null;return(r=o.getElementsByClassName?o.getElementsByClassName(e)[0]:goog.dom.canUseQuerySelector_(o)?o.querySelector("."+e):goog.dom.getElementsByTagNameAndClass_(document,"*",e,t)[0])||null};goog.dom.getRequiredElementByClass=function(e,t){var o=goog.dom.getElementByClass(e,t);return goog.asserts.assert(o,"No element found with className: "+e)};goog.dom.canUseQuerySelector_=function(e){return!(!e.querySelectorAll||!e.querySelector)};goog.dom.getElementsByTagNameAndClass_=function(e,t,o,r){e=r||e;t=t&&"*"!=t?t.toUpperCase():"";if(goog.dom.canUseQuerySelector_(e)&&(t||o))return e.querySelectorAll(t+(o?"."+o:""));
if(o&&e.getElementsByClassName){e=e.getElementsByClassName(o);if(t){r={};for(var n,i=0,s=0;n=e[s];s++)t==n.nodeName&&(r[i++]=n);r.length=i;return r}return e}e=e.getElementsByTagName(t||"*");if(o){r={};for(s=i=0;n=e[s];s++)t=n.className,"function"==typeof t.split&&goog.array.contains(t.split(/\s+/),o)&&(r[i++]=n);r.length=i;return r}return e};goog.dom.$$=goog.dom.getElementsByTagNameAndClass;goog.dom.setProperties=function(e,t){goog.object.forEach(t,function(t,o){"style"==o?e.style.cssText=t:"class"==o?e.className=t:"for"==o?e.htmlFor=t:goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(o)?e.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[o],t):goog.string.startsWith(o,"aria-")||goog.string.startsWith(o,"data-")?e.setAttribute(o,t):e[o]=t})};goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};goog.dom.getViewportSize=function(e){return goog.dom.getViewportSize_(e||window)};goog.dom.getViewportSize_=function(e){e=e.document;e=goog.dom.isCss1CompatMode_(e)?e.documentElement:e.body;return new goog.math.Size(e.clientWidth,e.clientHeight)};goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)};goog.dom.getDocumentHeight_=function(e){var t=e.document,o=0;if(t){var o=t.body,r=t.documentElement;if(!r||!o)return 0;e=goog.dom.getViewportSize_(e).height;if(goog.dom.isCss1CompatMode_(t)&&r.scrollHeight)o=r.scrollHeight!=e?r.scrollHeight:r.offsetHeight;else{var t=r.scrollHeight,n=r.offsetHeight;r.clientHeight!=n&&(t=o.scrollHeight,n=o.offsetHeight);o=t>e?t>n?t:n:n>t?t:n}}return o};goog.dom.getPageScroll=function(e){return goog.dom.getDomHelper((e||goog.global||window).document).getDocumentScroll()};goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)};goog.dom.getDocumentScroll_=function(e){var t=goog.dom.getDocumentScrollElement_(e);e=goog.dom.getWindow_(e);return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&e.pageYOffset!=t.scrollTop?new goog.math.Coordinate(t.scrollLeft,t.scrollTop):new goog.math.Coordinate(e.pageXOffset||t.scrollLeft,e.pageYOffset||t.scrollTop)};goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)};goog.dom.getDocumentScrollElement_=function(e){return e.scrollingElement?e.scrollingElement:!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(e)?e.documentElement:e.body||e.documentElement};goog.dom.getWindow=function(e){return e?goog.dom.getWindow_(e):window};goog.dom.getWindow_=function(e){return e.parentWindow||e.defaultView};goog.dom.createDom=function(){return goog.dom.createDom_(document,arguments)};goog.dom.createDom_=function(e,t){var o=t[0],r=t[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&r&&(r.name||r.type)){o=["<",o];r.name&&o.push(' name="',goog.string.htmlEscape(r.name),'"');if(r.type){o.push(' type="',goog.string.htmlEscape(r.type),'"');var n={};goog.object.extend(n,r);delete n.type;r=n}o.push(">");o=o.join("")}o=e.createElement(o);r&&(goog.isString(r)?o.className=r:goog.isArray(r)?o.className=r.join(" "):goog.dom.setProperties(o,r));2<t.length&&goog.dom.append_(e,o,t,2);return o};goog.dom.append_=function(e,t,o,r){function n(o){o&&t.appendChild(goog.isString(o)?e.createTextNode(o):o)}for(;r<o.length;r++){var i=o[r];goog.isArrayLike(i)&&!goog.dom.isNodeLike(i)?goog.array.forEach(goog.dom.isNodeList(i)?goog.array.toArray(i):i,n):n(i)}};goog.dom.$dom=goog.dom.createDom;goog.dom.createElement=function(e){return document.createElement(e)};goog.dom.createTextNode=function(e){return document.createTextNode(String(e))};goog.dom.createTable=function(e,t,o){return goog.dom.createTable_(document,e,t,!!o)};goog.dom.createTable_=function(e,t,o,r){for(var n=e.createElement(goog.dom.TagName.TABLE),i=n.appendChild(e.createElement(goog.dom.TagName.TBODY)),s=0;t>s;s++){for(var a=e.createElement(goog.dom.TagName.TR),g=0;o>g;g++){var l=e.createElement(goog.dom.TagName.TD);r&&goog.dom.setTextContent(l,goog.string.Unicode.NBSP);a.appendChild(l)}i.appendChild(a)}return n};goog.dom.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(document,e)};goog.dom.safeHtmlToNode_=function(e,t){var o=e.createElement(goog.dom.TagName.DIV);goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(goog.dom.safe.setInnerHtml(o,goog.html.SafeHtml.concat(goog.html.SafeHtml.create("br"),t)),o.removeChild(o.firstChild)):goog.dom.safe.setInnerHtml(o,t);return goog.dom.childrenToNode_(e,o)};goog.dom.htmlToDocumentFragment=function(e){return goog.dom.htmlToDocumentFragment_(document,e)};goog.dom.htmlToDocumentFragment_=function(e,t){var o=e.createElement(goog.dom.TagName.DIV);goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(o.innerHTML="<br>"+t,o.removeChild(o.firstChild)):o.innerHTML=t;return goog.dom.childrenToNode_(e,o)};goog.dom.childrenToNode_=function(e,t){if(1==t.childNodes.length)return t.removeChild(t.firstChild);for(var o=e.createDocumentFragment();t.firstChild;)o.appendChild(t.firstChild);return o};goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)};goog.dom.isCss1CompatMode_=function(e){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==e.compatMode};goog.dom.canHaveChildren=function(e){if(e.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(e.tagName){case goog.dom.TagName.APPLET:case goog.dom.TagName.AREA:case goog.dom.TagName.BASE:case goog.dom.TagName.BR:case goog.dom.TagName.COL:case goog.dom.TagName.COMMAND:case goog.dom.TagName.EMBED:case goog.dom.TagName.FRAME:case goog.dom.TagName.HR:case goog.dom.TagName.IMG:case goog.dom.TagName.INPUT:case goog.dom.TagName.IFRAME:case goog.dom.TagName.ISINDEX:case goog.dom.TagName.KEYGEN:case goog.dom.TagName.LINK:case goog.dom.TagName.NOFRAMES:case goog.dom.TagName.NOSCRIPT:case goog.dom.TagName.META:case goog.dom.TagName.OBJECT:case goog.dom.TagName.PARAM:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SOURCE:case goog.dom.TagName.STYLE:case goog.dom.TagName.TRACK:case goog.dom.TagName.WBR:return!1}return!0};goog.dom.appendChild=function(e,t){e.appendChild(t)};goog.dom.append=function(e){goog.dom.append_(goog.dom.getOwnerDocument(e),e,arguments,1)};goog.dom.removeChildren=function(e){for(var t;t=e.firstChild;)e.removeChild(t)};goog.dom.insertSiblingBefore=function(e,t){t.parentNode&&t.parentNode.insertBefore(e,t)};goog.dom.insertSiblingAfter=function(e,t){t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)};goog.dom.insertChildAt=function(e,t,o){e.insertBefore(t,e.childNodes[o]||null)};goog.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null};goog.dom.replaceNode=function(e,t){var o=t.parentNode;o&&o.replaceChild(e,t)};goog.dom.flattenElement=function(e){var t,o=e.parentNode;if(o&&o.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(e.removeNode)return e.removeNode(!1);for(;t=e.firstChild;)o.insertBefore(t,e);return goog.dom.removeNode(e)}};goog.dom.getChildren=function(e){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&void 0!=e.children?e.children:goog.array.filter(e.childNodes,function(e){return e.nodeType==goog.dom.NodeType.ELEMENT})};goog.dom.getFirstElementChild=function(e){return goog.isDef(e.firstElementChild)?e.firstElementChild:goog.dom.getNextElementNode_(e.firstChild,!0)};goog.dom.getLastElementChild=function(e){return goog.isDef(e.lastElementChild)?e.lastElementChild:goog.dom.getNextElementNode_(e.lastChild,!1)};goog.dom.getNextElementSibling=function(e){return goog.isDef(e.nextElementSibling)?e.nextElementSibling:goog.dom.getNextElementNode_(e.nextSibling,!0)};goog.dom.getPreviousElementSibling=function(e){return goog.isDef(e.previousElementSibling)?e.previousElementSibling:goog.dom.getNextElementNode_(e.previousSibling,!1)};goog.dom.getNextElementNode_=function(e,t){for(;e&&e.nodeType!=goog.dom.NodeType.ELEMENT;)e=t?e.nextSibling:e.previousSibling;return e};goog.dom.getNextNode=function(e){if(!e)return null;if(e.firstChild)return e.firstChild;for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null};goog.dom.getPreviousNode=function(e){if(!e)return null;if(!e.previousSibling)return e.parentNode;for(e=e.previousSibling;e&&e.lastChild;)e=e.lastChild;return e};goog.dom.isNodeLike=function(e){return goog.isObject(e)&&0<e.nodeType};goog.dom.isElement=function(e){return goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT};goog.dom.isWindow=function(e){return goog.isObject(e)&&e.window==e};goog.dom.getParentElement=function(e){var t;if(goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY&&!(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10")&&goog.global.SVGElement&&e instanceof goog.global.SVGElement)&&(t=e.parentElement))return t;t=e.parentNode;return goog.dom.isElement(t)?t:null};goog.dom.contains=function(e,t){if(e.contains&&t.nodeType==goog.dom.NodeType.ELEMENT)return e==t||e.contains(t);if("undefined"!=typeof e.compareDocumentPosition)return e==t||Boolean(16&e.compareDocumentPosition(t));for(;t&&e!=t;)t=t.parentNode;return t==e};goog.dom.compareNodeOrder=function(e,t){if(e==t)return 0;if(e.compareDocumentPosition)return 2&e.compareDocumentPosition(t)?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(e.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(t.nodeType==goog.dom.NodeType.DOCUMENT)return 1}if("sourceIndex"in e||e.parentNode&&"sourceIndex"in e.parentNode){var o=e.nodeType==goog.dom.NodeType.ELEMENT,r=t.nodeType==goog.dom.NodeType.ELEMENT;if(o&&r)return e.sourceIndex-t.sourceIndex;var n=e.parentNode,i=t.parentNode;return n==i?goog.dom.compareSiblingOrder_(e,t):!o&&goog.dom.contains(n,t)?-1*goog.dom.compareParentsDescendantNodeIe_(e,t):!r&&goog.dom.contains(i,e)?goog.dom.compareParentsDescendantNodeIe_(t,e):(o?e.sourceIndex:n.sourceIndex)-(r?t.sourceIndex:i.sourceIndex)}r=goog.dom.getOwnerDocument(e);o=r.createRange();o.selectNode(e);o.collapse(!0);r=r.createRange();r.selectNode(t);r.collapse(!0);return o.compareBoundaryPoints(goog.global.Range.START_TO_END,r)};goog.dom.compareParentsDescendantNodeIe_=function(e,t){var o=e.parentNode;if(o==t)return-1;for(var r=t;r.parentNode!=o;)r=r.parentNode;return goog.dom.compareSiblingOrder_(r,e)};goog.dom.compareSiblingOrder_=function(e,t){for(var o=t;o=o.previousSibling;)if(o==e)return-1;return 1};goog.dom.findCommonAncestor=function(){var e,t=arguments.length;if(!t)return null;if(1==t)return arguments[0];var o=[],r=1/0;for(e=0;t>e;e++){for(var n=[],i=arguments[e];i;)n.unshift(i),i=i.parentNode;o.push(n);r=Math.min(r,n.length)}n=null;for(e=0;r>e;e++){for(var i=o[0][e],s=1;t>s;s++)if(i!=o[s][e])return n;n=i}return n};goog.dom.getOwnerDocument=function(e){goog.asserts.assert(e,"Node cannot be null or undefined.");return e.nodeType==goog.dom.NodeType.DOCUMENT?e:e.ownerDocument||e.document};goog.dom.getFrameContentDocument=function(e){return e.contentDocument||e.contentWindow.document};goog.dom.getFrameContentWindow=function(e){return e.contentWindow||goog.dom.getWindow(goog.dom.getFrameContentDocument(e))};goog.dom.setTextContent=function(e,t){goog.asserts.assert(null!=e,"goog.dom.setTextContent expects a non-null value for node");if("textContent"in e)e.textContent=t;else if(e.nodeType==goog.dom.NodeType.TEXT)e.data=t;else if(e.firstChild&&e.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;e.lastChild!=e.firstChild;)e.removeChild(e.lastChild);e.firstChild.data=t}else{goog.dom.removeChildren(e);var o=goog.dom.getOwnerDocument(e);e.appendChild(o.createTextNode(String(t)))}};goog.dom.getOuterHtml=function(e){if("outerHTML"in e)return e.outerHTML;var t=goog.dom.getOwnerDocument(e).createElement(goog.dom.TagName.DIV);t.appendChild(e.cloneNode(!0));return t.innerHTML};goog.dom.findNode=function(e,t){var o=[];return goog.dom.findNodes_(e,t,o,!0)?o[0]:void 0};goog.dom.findNodes=function(e,t){var o=[];goog.dom.findNodes_(e,t,o,!1);return o};goog.dom.findNodes_=function(e,t,o,r){if(null!=e)for(e=e.firstChild;e;){if(t(e)&&(o.push(e),r)||goog.dom.findNodes_(e,t,o,r))return!0;e=e.nextSibling}return!1};goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};goog.dom.isFocusableTabIndex=function(e){return goog.dom.hasSpecifiedTabIndex_(e)&&goog.dom.isTabIndexFocusable_(e)};goog.dom.setFocusableTabIndex=function(e,t){t?e.tabIndex=0:(e.tabIndex=-1,e.removeAttribute("tabIndex"))};goog.dom.isFocusable=function(e){var t;return(t=goog.dom.nativelySupportsFocus_(e)?!e.disabled&&(!goog.dom.hasSpecifiedTabIndex_(e)||goog.dom.isTabIndexFocusable_(e)):goog.dom.isFocusableTabIndex(e))&&goog.userAgent.IE?goog.dom.hasNonZeroBoundingRect_(e):t};goog.dom.hasSpecifiedTabIndex_=function(e){e=e.getAttributeNode("tabindex");return goog.isDefAndNotNull(e)&&e.specified};goog.dom.isTabIndexFocusable_=function(e){e=e.tabIndex;return goog.isNumber(e)&&e>=0&&32768>e};goog.dom.nativelySupportsFocus_=function(e){return e.tagName==goog.dom.TagName.A||e.tagName==goog.dom.TagName.INPUT||e.tagName==goog.dom.TagName.TEXTAREA||e.tagName==goog.dom.TagName.SELECT||e.tagName==goog.dom.TagName.BUTTON};goog.dom.hasNonZeroBoundingRect_=function(e){e=goog.isFunction(e.getBoundingClientRect)?e.getBoundingClientRect():{height:e.offsetHeight,width:e.offsetWidth};return goog.isDefAndNotNull(e)&&0<e.height&&0<e.width};goog.dom.getTextContent=function(e){if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&"innerText"in e)e=goog.string.canonicalizeNewlines(e.innerText);else{var t=[];goog.dom.getTextContent_(e,t,!0);e=t.join("")}e=e.replace(/ \xAD /g," ").replace(/\xAD/g,"");e=e.replace(/\u200B/g,"");goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(e=e.replace(/ +/g," "));" "!=e&&(e=e.replace(/^\s*/,""));return e};goog.dom.getRawTextContent=function(e){var t=[];goog.dom.getTextContent_(e,t,!1);return t.join("")};goog.dom.getTextContent_=function(e,t,o){if(!(e.nodeName in goog.dom.TAGS_TO_IGNORE_))if(e.nodeType==goog.dom.NodeType.TEXT)t.push(o?String(e.nodeValue).replace(/(\r\n|\r|\n)/g,""):e.nodeValue);else if(e.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)t.push(goog.dom.PREDEFINED_TAG_VALUES_[e.nodeName]);else for(e=e.firstChild;e;)goog.dom.getTextContent_(e,t,o),e=e.nextSibling};goog.dom.getNodeTextLength=function(e){return goog.dom.getTextContent(e).length};goog.dom.getNodeTextOffset=function(e,t){for(var o=t||goog.dom.getOwnerDocument(e).body,r=[];e&&e!=o;){for(var n=e;n=n.previousSibling;)r.unshift(goog.dom.getTextContent(n));e=e.parentNode}return goog.string.trimLeft(r.join("")).replace(/ +/g," ").length};goog.dom.getNodeAtOffset=function(e,t,o){e=[e];for(var r=0,n=null;0<e.length&&t>r;)if(n=e.pop(),!(n.nodeName in goog.dom.TAGS_TO_IGNORE_))if(n.nodeType==goog.dom.NodeType.TEXT)var i=n.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," "),r=r+i.length;else if(n.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)r+=goog.dom.PREDEFINED_TAG_VALUES_[n.nodeName].length;else for(i=n.childNodes.length-1;i>=0;i--)e.push(n.childNodes[i]);goog.isObject(o)&&(o.remainder=n?n.nodeValue.length+t-r-1:0,o.node=n);return n};goog.dom.isNodeList=function(e){if(e&&"number"==typeof e.length){if(goog.isObject(e))return"function"==typeof e.item||"string"==typeof e.item;if(goog.isFunction(e))return"function"==typeof e.item}return!1};goog.dom.getAncestorByTagNameAndClass=function(e,t,o,r){if(!t&&!o)return null;var n=t?t.toUpperCase():null;return goog.dom.getAncestor(e,function(e){return(!n||e.nodeName==n)&&(!o||goog.isString(e.className)&&goog.array.contains(e.className.split(/\s+/),o))},!0,r)};goog.dom.getAncestorByClass=function(e,t,o){return goog.dom.getAncestorByTagNameAndClass(e,null,t,o)};goog.dom.getAncestor=function(e,t,o,r){o||(e=e.parentNode);o=null==r;for(var n=0;e&&(o||r>=n);){goog.asserts.assert("parentNode"!=e.name);if(t(e))return e;e=e.parentNode;n++}return null};goog.dom.getActiveElement=function(e){try{return e&&e.activeElement}catch(t){}return null};goog.dom.getPixelRatio=function(){var e=goog.dom.getWindow();return goog.isDef(e.devicePixelRatio)?e.devicePixelRatio:e.matchMedia?goog.dom.matchesPixelRatio_(.75)||goog.dom.matchesPixelRatio_(1.5)||goog.dom.matchesPixelRatio_(2)||goog.dom.matchesPixelRatio_(3)||1:1};goog.dom.matchesPixelRatio_=function(e){return goog.dom.getWindow().matchMedia("(-webkit-min-device-pixel-ratio: "+e+"),(min--moz-device-pixel-ratio: "+e+"),(min-resolution: "+e+"dppx)").matches?e:0};goog.dom.DomHelper=function(e){this.document_=e||goog.global.document||document};goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper;goog.dom.DomHelper.prototype.setDocument=function(e){this.document_=e};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.getElement=function(e){return goog.dom.getElementHelper_(this.document_,e)};goog.dom.DomHelper.prototype.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(this.document_,e)};goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement;goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(e,t,o){return goog.dom.getElementsByTagNameAndClass_(this.document_,e,t,o)};goog.dom.DomHelper.prototype.getElementsByClass=function(e,t){return goog.dom.getElementsByClass(e,t||this.document_)};goog.dom.DomHelper.prototype.getElementByClass=function(e,t){return goog.dom.getElementByClass(e,t||this.document_)};goog.dom.DomHelper.prototype.getRequiredElementByClass=function(e,t){return goog.dom.getRequiredElementByClass(e,t||this.document_)};goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties;goog.dom.DomHelper.prototype.getViewportSize=function(e){return goog.dom.getViewportSize(e||this.getWindow())};goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())};goog.dom.DomHelper.prototype.createDom=function(){return goog.dom.createDom_(this.document_,arguments)};goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom;goog.dom.DomHelper.prototype.createElement=function(e){return this.document_.createElement(e)};goog.dom.DomHelper.prototype.createTextNode=function(e){return this.document_.createTextNode(String(e))};goog.dom.DomHelper.prototype.createTable=function(e,t,o){return goog.dom.createTable_(this.document_,e,t,!!o)};goog.dom.DomHelper.prototype.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(this.document_,e)};goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(e){return goog.dom.htmlToDocumentFragment_(this.document_,e)};goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)};goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)};goog.dom.DomHelper.prototype.getActiveElement=function(e){return goog.dom.getActiveElement(e||this.document_)};goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild;goog.dom.DomHelper.prototype.append=goog.dom.append;goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren;goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren;goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore;goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter;goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt;goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode;goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode;goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement;goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren;goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild;goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild;goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling;goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling;goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode;goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode;goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike;goog.dom.DomHelper.prototype.isElement=goog.dom.isElement;goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow;goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement;goog.dom.DomHelper.prototype.contains=goog.dom.contains;goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder;goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor;goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument;goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument;goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow;goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent;goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml;goog.dom.DomHelper.prototype.findNode=goog.dom.findNode;goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes;goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex;goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex;goog.dom.DomHelper.prototype.isFocusable=goog.dom.isFocusable;goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent;goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength;goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset;goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset;goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList;goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass;goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass;goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor;goog.dom.classlist={};goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST=!1;goog.dom.classlist.get=function(e){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList)return e.classList;e=e.className;return goog.isString(e)&&e.match(/\S+/g)||[]};goog.dom.classlist.set=function(e,t){e.className=t};goog.dom.classlist.contains=function(e,t){return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList.contains(t):goog.array.contains(goog.dom.classlist.get(e),t)};goog.dom.classlist.add=function(e,t){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList.add(t):goog.dom.classlist.contains(e,t)||(e.className+=0<e.className.length?" "+t:t)};goog.dom.classlist.addAll=function(e,t){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList)goog.array.forEach(t,function(t){goog.dom.classlist.add(e,t)});else{var o={};goog.array.forEach(goog.dom.classlist.get(e),function(e){o[e]=!0});goog.array.forEach(t,function(e){o[e]=!0});e.className="";for(var r in o)e.className+=0<e.className.length?" "+r:r}};goog.dom.classlist.remove=function(e,t){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList.remove(t):goog.dom.classlist.contains(e,t)&&(e.className=goog.array.filter(goog.dom.classlist.get(e),function(e){return e!=t}).join(" "))};goog.dom.classlist.removeAll=function(e,t){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?goog.array.forEach(t,function(t){goog.dom.classlist.remove(e,t)}):e.className=goog.array.filter(goog.dom.classlist.get(e),function(e){return!goog.array.contains(t,e)}).join(" ")};goog.dom.classlist.enable=function(e,t,o){o?goog.dom.classlist.add(e,t):goog.dom.classlist.remove(e,t)};goog.dom.classlist.enableAll=function(e,t,o){(o?goog.dom.classlist.addAll:goog.dom.classlist.removeAll)(e,t)};goog.dom.classlist.swap=function(e,t,o){return goog.dom.classlist.contains(e,t)?(goog.dom.classlist.remove(e,t),goog.dom.classlist.add(e,o),!0):!1};goog.dom.classlist.toggle=function(e,t){var o=!goog.dom.classlist.contains(e,t);goog.dom.classlist.enable(e,t,o);return o};goog.dom.classlist.addRemove=function(e,t,o){goog.dom.classlist.remove(e,t);goog.dom.classlist.add(e,o)};goog.dom.vendor={};goog.dom.vendor.getVendorJsPrefix=function(){return goog.userAgent.WEBKIT?"Webkit":goog.userAgent.GECKO?"Moz":goog.userAgent.IE?"ms":goog.userAgent.OPERA?"O":null};goog.dom.vendor.getVendorPrefix=function(){return goog.userAgent.WEBKIT?"-webkit":goog.userAgent.GECKO?"-moz":goog.userAgent.IE?"-ms":goog.userAgent.OPERA?"-o":null};goog.dom.vendor.getPrefixedPropertyName=function(e,t){if(t&&e in t)return e;var o=goog.dom.vendor.getVendorJsPrefix();return o?(o=o.toLowerCase(),o+=goog.string.toTitleCase(e),!goog.isDef(t)||o in t?o:null):null};goog.dom.vendor.getPrefixedEventType=function(e){return((goog.dom.vendor.getVendorJsPrefix()||"")+e).toLowerCase()};goog.math.Box=function(e,t,o,r){this.top=e;this.right=t;this.bottom=o;this.left=r};goog.math.Box.boundingBox=function(){for(var e=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),t=1;t<arguments.length;t++)e.expandToIncludeCoordinate(arguments[t]);return e};goog.math.Box.prototype.getWidth=function(){return this.right-this.left};goog.math.Box.prototype.getHeight=function(){return this.bottom-this.top};goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)};goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"});goog.math.Box.prototype.contains=function(e){return goog.math.Box.contains(this,e)};goog.math.Box.prototype.expand=function(e,t,o,r){goog.isObject(e)?(this.top-=e.top,this.right+=e.right,this.bottom+=e.bottom,this.left-=e.left):(this.top-=e,this.right+=t,this.bottom+=o,this.left-=r);return this};goog.math.Box.prototype.expandToInclude=function(e){this.left=Math.min(this.left,e.left);this.top=Math.min(this.top,e.top);this.right=Math.max(this.right,e.right);this.bottom=Math.max(this.bottom,e.bottom)};goog.math.Box.prototype.expandToIncludeCoordinate=function(e){this.top=Math.min(this.top,e.y);this.right=Math.max(this.right,e.x);this.bottom=Math.max(this.bottom,e.y);this.left=Math.min(this.left,e.x)};goog.math.Box.equals=function(e,t){return e==t?!0:e&&t?e.top==t.top&&e.right==t.right&&e.bottom==t.bottom&&e.left==t.left:!1};goog.math.Box.contains=function(e,t){return e&&t?t instanceof goog.math.Box?t.left>=e.left&&t.right<=e.right&&t.top>=e.top&&t.bottom<=e.bottom:t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom:!1};goog.math.Box.relativePositionX=function(e,t){return t.x<e.left?t.x-e.left:t.x>e.right?t.x-e.right:0};goog.math.Box.relativePositionY=function(e,t){return t.y<e.top?t.y-e.top:t.y>e.bottom?t.y-e.bottom:0};goog.math.Box.distance=function(e,t){var o=goog.math.Box.relativePositionX(e,t),r=goog.math.Box.relativePositionY(e,t);return Math.sqrt(o*o+r*r)};goog.math.Box.intersects=function(e,t){return e.left<=t.right&&t.left<=e.right&&e.top<=t.bottom&&t.top<=e.bottom};goog.math.Box.intersectsWithPadding=function(e,t,o){return e.left<=t.right+o&&t.left<=e.right+o&&e.top<=t.bottom+o&&t.top<=e.bottom+o};goog.math.Box.prototype.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};goog.math.Box.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};goog.math.Box.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};goog.math.Box.prototype.translate=function(e,t){e instanceof goog.math.Coordinate?(this.left+=e.x,this.right+=e.x,this.top+=e.y,this.bottom+=e.y):(this.left+=e,this.right+=e,goog.isNumber(t)&&(this.top+=t,this.bottom+=t));return this};goog.math.Box.prototype.scale=function(e,t){var o=goog.isNumber(t)?t:e;this.left*=e;this.right*=e;this.top*=o;this.bottom*=o;return this};goog.math.Rect=function(e,t,o,r){this.left=e;this.top=t;this.width=o;this.height=r};goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)};goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)};goog.math.Rect.createFromPositionAndSize=function(e,t){return new goog.math.Rect(e.x,e.y,t.width,t.height)};goog.math.Rect.createFromBox=function(e){return new goog.math.Rect(e.left,e.top,e.right-e.left,e.bottom-e.top)};goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"});goog.math.Rect.equals=function(e,t){return e==t?!0:e&&t?e.left==t.left&&e.width==t.width&&e.top==t.top&&e.height==t.height:!1};goog.math.Rect.prototype.intersection=function(e){var t=Math.max(this.left,e.left),o=Math.min(this.left+this.width,e.left+e.width);if(o>=t){var r=Math.max(this.top,e.top);e=Math.min(this.top+this.height,e.top+e.height);if(e>=r)return this.left=t,this.top=r,this.width=o-t,this.height=e-r,!0}return!1};goog.math.Rect.intersection=function(e,t){var o=Math.max(e.left,t.left),r=Math.min(e.left+e.width,t.left+t.width);if(r>=o){var n=Math.max(e.top,t.top),i=Math.min(e.top+e.height,t.top+t.height);if(i>=n)return new goog.math.Rect(o,n,r-o,i-n)}return null};goog.math.Rect.intersects=function(e,t){return e.left<=t.left+t.width&&t.left<=e.left+e.width&&e.top<=t.top+t.height&&t.top<=e.top+e.height};goog.math.Rect.prototype.intersects=function(e){return goog.math.Rect.intersects(this,e)};goog.math.Rect.difference=function(e,t){var o=goog.math.Rect.intersection(e,t);if(!o||!o.height||!o.width)return[e.clone()];var o=[],r=e.top,n=e.height,i=e.left+e.width,s=e.top+e.height,a=t.left+t.width,g=t.top+t.height;t.top>e.top&&(o.push(new goog.math.Rect(e.left,e.top,e.width,t.top-e.top)),r=t.top,n-=t.top-e.top);s>g&&(o.push(new goog.math.Rect(e.left,g,e.width,s-g)),n=g-r);t.left>e.left&&o.push(new goog.math.Rect(e.left,r,t.left-e.left,n));i>a&&o.push(new goog.math.Rect(a,r,i-a,n));return o};goog.math.Rect.prototype.difference=function(e){return goog.math.Rect.difference(this,e)};goog.math.Rect.prototype.boundingRect=function(e){var t=Math.max(this.left+this.width,e.left+e.width),o=Math.max(this.top+this.height,e.top+e.height);this.left=Math.min(this.left,e.left);this.top=Math.min(this.top,e.top);this.width=t-this.left;this.height=o-this.top};goog.math.Rect.boundingRect=function(e,t){if(!e||!t)return null;var o=e.clone();o.boundingRect(t);return o};goog.math.Rect.prototype.contains=function(e){return e instanceof goog.math.Rect?this.left<=e.left&&this.left+this.width>=e.left+e.width&&this.top<=e.top&&this.top+this.height>=e.top+e.height:e.x>=this.left&&e.x<=this.left+this.width&&e.y>=this.top&&e.y<=this.top+this.height};goog.math.Rect.prototype.squaredDistance=function(e){var t=e.x<this.left?this.left-e.x:Math.max(e.x-(this.left+this.width),0);e=e.y<this.top?this.top-e.y:Math.max(e.y-(this.top+this.height),0);return t*t+e*e};goog.math.Rect.prototype.distance=function(e){return Math.sqrt(this.squaredDistance(e))};goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)};goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)};goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)};goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)};goog.math.Rect.prototype.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Rect.prototype.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);
this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Rect.prototype.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Rect.prototype.translate=function(e,t){e instanceof goog.math.Coordinate?(this.left+=e.x,this.top+=e.y):(this.left+=e,goog.isNumber(t)&&(this.top+=t));return this};goog.math.Rect.prototype.scale=function(e,t){var o=goog.isNumber(t)?t:e;this.left*=e;this.width*=e;this.top*=o;this.height*=o;return this};goog.style={};goog.style.setStyle=function(e,t,o){if(goog.isString(t))goog.style.setStyle_(e,o,t);else for(var r in t)goog.style.setStyle_(e,t[r],r)};goog.style.setStyle_=function(e,t,o){(o=goog.style.getVendorJsStyleName_(e,o))&&(e.style[o]=t)};goog.style.styleNameCache_={};goog.style.getVendorJsStyleName_=function(e,t){var o=goog.style.styleNameCache_[t];if(!o){var r=goog.string.toCamelCase(t),o=r;void 0===e.style[r]&&(r=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(r),void 0!==e.style[r]&&(o=r));goog.style.styleNameCache_[t]=o}return o};goog.style.getVendorStyleName_=function(e,t){var o=goog.string.toCamelCase(t);return void 0===e.style[o]&&(o=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(o),void 0!==e.style[o])?goog.dom.vendor.getVendorPrefix()+"-"+t:t};goog.style.getStyle=function(e,t){var o=e.style[goog.string.toCamelCase(t)];return"undefined"!=typeof o?o:e.style[goog.style.getVendorJsStyleName_(e,t)]||""};goog.style.getComputedStyle=function(e,t){var o=goog.dom.getOwnerDocument(e);return o.defaultView&&o.defaultView.getComputedStyle&&(o=o.defaultView.getComputedStyle(e,null))?o[t]||o.getPropertyValue(t)||"":""};goog.style.getCascadedStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:null};goog.style.getStyle_=function(e,t){return goog.style.getComputedStyle(e,t)||goog.style.getCascadedStyle(e,t)||e.style&&e.style[t]};goog.style.getComputedBoxSizing=function(e){return goog.style.getStyle_(e,"boxSizing")||goog.style.getStyle_(e,"MozBoxSizing")||goog.style.getStyle_(e,"WebkitBoxSizing")||null};goog.style.getComputedPosition=function(e){return goog.style.getStyle_(e,"position")};goog.style.getBackgroundColor=function(e){return goog.style.getStyle_(e,"backgroundColor")};goog.style.getComputedOverflowX=function(e){return goog.style.getStyle_(e,"overflowX")};goog.style.getComputedOverflowY=function(e){return goog.style.getStyle_(e,"overflowY")};goog.style.getComputedZIndex=function(e){return goog.style.getStyle_(e,"zIndex")};goog.style.getComputedTextAlign=function(e){return goog.style.getStyle_(e,"textAlign")};goog.style.getComputedCursor=function(e){return goog.style.getStyle_(e,"cursor")};goog.style.getComputedTransform=function(e){var t=goog.style.getVendorStyleName_(e,"transform");return goog.style.getStyle_(e,t)||goog.style.getStyle_(e,"transform")};goog.style.setPosition=function(e,t,o){var r;t instanceof goog.math.Coordinate?(r=t.x,t=t.y):(r=t,t=o);e.style.left=goog.style.getPixelStyleValue_(r,!1);e.style.top=goog.style.getPixelStyleValue_(t,!1)};goog.style.getPosition=function(e){return new goog.math.Coordinate(e.offsetLeft,e.offsetTop)};goog.style.getClientViewportElement=function(e){e=e?goog.dom.getOwnerDocument(e):goog.dom.getDocument();return!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||goog.dom.getDomHelper(e).isCss1CompatMode()?e.documentElement:e.body};goog.style.getViewportPageOffset=function(e){var t=e.body;e=e.documentElement;return new goog.math.Coordinate(t.scrollLeft||e.scrollLeft,t.scrollTop||e.scrollTop)};goog.style.getBoundingClientRect_=function(e){var t;try{t=e.getBoundingClientRect()}catch(o){return{left:0,top:0,right:0,bottom:0}}goog.userAgent.IE&&e.ownerDocument.body&&(e=e.ownerDocument,t.left-=e.documentElement.clientLeft+e.body.clientLeft,t.top-=e.documentElement.clientTop+e.body.clientTop);return t};goog.style.getOffsetParent=function(e){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8))return e.offsetParent;var t=goog.dom.getOwnerDocument(e),o=goog.style.getStyle_(e,"position"),r="fixed"==o||"absolute"==o;for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(e.nodeType==goog.dom.NodeType.DOCUMENT_FRAGMENT&&e.host&&(e=e.host),o=goog.style.getStyle_(e,"position"),r=r&&"static"==o&&e!=t.documentElement&&e!=t.body,!r&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight||"fixed"==o||"absolute"==o||"relative"==o))return e;return null};goog.style.getVisibleRectForElement=function(e){for(var t=new goog.math.Box(0,1/0,1/0,0),o=goog.dom.getDomHelper(e),r=o.getDocument().body,n=o.getDocument().documentElement,i=o.getDocumentScrollElement();e=goog.style.getOffsetParent(e);)if(!(goog.userAgent.IE&&0==e.clientWidth||goog.userAgent.WEBKIT&&0==e.clientHeight&&e==r)&&e!=r&&e!=n&&"visible"!=goog.style.getStyle_(e,"overflow")){var s=goog.style.getPageOffset(e),a=goog.style.getClientLeftTop(e);s.x+=a.x;s.y+=a.y;t.top=Math.max(t.top,s.y);t.right=Math.min(t.right,s.x+e.clientWidth);t.bottom=Math.min(t.bottom,s.y+e.clientHeight);t.left=Math.max(t.left,s.x)}r=i.scrollLeft;i=i.scrollTop;t.left=Math.max(t.left,r);t.top=Math.max(t.top,i);o=o.getViewportSize();t.right=Math.min(t.right,r+o.width);t.bottom=Math.min(t.bottom,i+o.height);return 0<=t.top&&0<=t.left&&t.bottom>t.top&&t.right>t.left?t:null};goog.style.getContainerOffsetToScrollInto=function(e,t,o){var r=goog.style.getPageOffset(e),n=goog.style.getPageOffset(t),i=goog.style.getBorderBox(t),s=r.x-n.x-i.left,r=r.y-n.y-i.top,a=t.clientWidth-e.offsetWidth;e=t.clientHeight-e.offsetHeight;var g=t.scrollLeft,l=t.scrollTop;(t==goog.dom.getDocument().body||t==goog.dom.getDocument().documentElement)&&(g=n.x+i.left,l=n.y+i.top,goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(10)&&(g+=i.left,l+=i.top));o?(g+=s-a/2,l+=r-e/2):(g+=Math.min(s,Math.max(s-a,0)),l+=Math.min(r,Math.max(r-e,0)));return new goog.math.Coordinate(g,l)};goog.style.scrollIntoContainerView=function(e,t,o){e=goog.style.getContainerOffsetToScrollInto(e,t,o);t.scrollLeft=e.x;t.scrollTop=e.y};goog.style.getClientLeftTop=function(e){return new goog.math.Coordinate(e.clientLeft,e.clientTop)};goog.style.getPageOffset=function(e){var t=goog.dom.getOwnerDocument(e);goog.asserts.assertObject(e,"Parameter is required");var o=new goog.math.Coordinate(0,0),r=goog.style.getClientViewportElement(t);if(e==r)return o;e=goog.style.getBoundingClientRect_(e);t=goog.dom.getDomHelper(t).getDocumentScroll();o.x=e.left+t.x;o.y=e.top+t.y;return o};goog.style.getPageOffsetLeft=function(e){return goog.style.getPageOffset(e).x};goog.style.getPageOffsetTop=function(e){return goog.style.getPageOffset(e).y};goog.style.getFramedPageOffset=function(e,t){var o=new goog.math.Coordinate(0,0),r=goog.dom.getWindow(goog.dom.getOwnerDocument(e)),n=e;do{var i=r==t?goog.style.getPageOffset(n):goog.style.getClientPositionForElement_(goog.asserts.assert(n));o.x+=i.x;o.y+=i.y}while(r&&r!=t&&r!=r.parent&&(n=r.frameElement)&&(r=r.parent));return o};goog.style.translateRectForAnotherFrame=function(e,t,o){if(t.getDocument()!=o.getDocument()){var r=t.getDocument().body;o=goog.style.getFramedPageOffset(r,o.getWindow());o=goog.math.Coordinate.difference(o,goog.style.getPageOffset(r));!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||t.isCss1CompatMode()||(o=goog.math.Coordinate.difference(o,t.getDocumentScroll()));e.left+=o.x;e.top+=o.y}};goog.style.getRelativePosition=function(e,t){var o=goog.style.getClientPosition(e),r=goog.style.getClientPosition(t);return new goog.math.Coordinate(o.x-r.x,o.y-r.y)};goog.style.getClientPositionForElement_=function(e){e=goog.style.getBoundingClientRect_(e);return new goog.math.Coordinate(e.left,e.top)};goog.style.getClientPosition=function(e){goog.asserts.assert(e);if(e.nodeType==goog.dom.NodeType.ELEMENT)return goog.style.getClientPositionForElement_(e);e=e.changedTouches?e.changedTouches[0]:e;return new goog.math.Coordinate(e.clientX,e.clientY)};goog.style.setPageOffset=function(e,t,o){var r=goog.style.getPageOffset(e);t instanceof goog.math.Coordinate&&(o=t.y,t=t.x);goog.style.setPosition(e,e.offsetLeft+(t-r.x),e.offsetTop+(o-r.y))};goog.style.setSize=function(e,t,o){if(t instanceof goog.math.Size)o=t.height,t=t.width;else if(void 0==o)throw Error("missing height argument");goog.style.setWidth(e,t);goog.style.setHeight(e,o)};goog.style.getPixelStyleValue_=function(e,t){"number"==typeof e&&(e=(t?Math.round(e):e)+"px");return e};goog.style.setHeight=function(e,t){e.style.height=goog.style.getPixelStyleValue_(t,!0)};goog.style.setWidth=function(e,t){e.style.width=goog.style.getPixelStyleValue_(t,!0)};goog.style.getSize=function(e){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,e)};goog.style.evaluateWithTemporaryDisplay_=function(e,t){if("none"!=goog.style.getStyle_(t,"display"))return e(t);var o=t.style,r=o.display,n=o.visibility,i=o.position;o.visibility="hidden";o.position="absolute";o.display="inline";var s=e(t);o.display=r;o.position=i;o.visibility=n;return s};goog.style.getSizeWithDisplay_=function(e){var t=e.offsetWidth,o=e.offsetHeight,r=goog.userAgent.WEBKIT&&!t&&!o;return goog.isDef(t)&&!r||!e.getBoundingClientRect?new goog.math.Size(t,o):(e=goog.style.getBoundingClientRect_(e),new goog.math.Size(e.right-e.left,e.bottom-e.top))};goog.style.getTransformedSize=function(e){if(!e.getBoundingClientRect)return null;e=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,e);return new goog.math.Size(e.right-e.left,e.bottom-e.top)};goog.style.getBounds=function(e){var t=goog.style.getPageOffset(e);e=goog.style.getSize(e);return new goog.math.Rect(t.x,t.y,e.width,e.height)};goog.style.toCamelCase=function(e){return goog.string.toCamelCase(String(e))};goog.style.toSelectorCase=function(e){return goog.string.toSelectorCase(e)};goog.style.getOpacity=function(e){var t=e.style;e="";"opacity"in t?e=t.opacity:"MozOpacity"in t?e=t.MozOpacity:"filter"in t&&(t=t.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(e=String(t[1]/100));return""==e?e:Number(e)};goog.style.setOpacity=function(e,t){var o=e.style;"opacity"in o?o.opacity=t:"MozOpacity"in o?o.MozOpacity=t:"filter"in o&&(o.filter=""===t?"":"alpha(opacity="+100*t+")")};goog.style.setTransparentBackgroundImage=function(e,t){var o=e.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?o.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+t+'", sizingMethod="crop")':(o.backgroundImage="url("+t+")",o.backgroundPosition="top left",o.backgroundRepeat="no-repeat")};goog.style.clearTransparentBackgroundImage=function(e){e=e.style;"filter"in e?e.filter="":e.backgroundImage="none"};goog.style.showElement=function(e,t){goog.style.setElementShown(e,t)};goog.style.setElementShown=function(e,t){e.style.display=t?"":"none"};goog.style.isElementShown=function(e){return"none"!=e.style.display};goog.style.installStyles=function(e,t){var o=goog.dom.getDomHelper(t),r=null,n=o.getDocument();goog.userAgent.IE&&n.createStyleSheet?(r=n.createStyleSheet(),goog.style.setStyles(r,e)):(n=o.getElementsByTagNameAndClass(goog.dom.TagName.HEAD)[0],n||(r=o.getElementsByTagNameAndClass(goog.dom.TagName.BODY)[0],n=o.createDom(goog.dom.TagName.HEAD),r.parentNode.insertBefore(n,r)),r=o.createDom(goog.dom.TagName.STYLE),goog.style.setStyles(r,e),o.appendChild(n,r));return r};goog.style.uninstallStyles=function(e){goog.dom.removeNode(e.ownerNode||e.owningElement||e)};goog.style.setStyles=function(e,t){goog.userAgent.IE&&goog.isDef(e.cssText)?e.cssText=t:e.innerHTML=t};goog.style.setPreWrap=function(e){e=e.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(e.whiteSpace="pre",e.wordWrap="break-word"):e.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"};goog.style.setInlineBlock=function(e){e=e.style;e.position="relative";goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(e.zoom="1",e.display="inline"):e.display="inline-block"};goog.style.isRightToLeft=function(e){return"rtl"==goog.style.getStyle_(e,"direction")};goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT?"WebkitUserSelect":null;goog.style.isUnselectable=function(e){return goog.style.unselectableStyle_?"none"==e.style[goog.style.unselectableStyle_].toLowerCase():goog.userAgent.IE||goog.userAgent.OPERA?"on"==e.getAttribute("unselectable"):!1};goog.style.setUnselectable=function(e,t,o){o=o?null:e.getElementsByTagName("*");var r=goog.style.unselectableStyle_;if(r){if(t=t?"none":"",e.style&&(e.style[r]=t),o){e=0;for(var n;n=o[e];e++)n.style&&(n.style[r]=t)}}else if((goog.userAgent.IE||goog.userAgent.OPERA)&&(t=t?"on":"",e.setAttribute("unselectable",t),o))for(e=0;n=o[e];e++)n.setAttribute("unselectable",t)};goog.style.getBorderBoxSize=function(e){return new goog.math.Size(e.offsetWidth,e.offsetHeight)};goog.style.setBorderBoxSize=function(e,t){var o=goog.dom.getOwnerDocument(e),r=goog.dom.getDomHelper(o).isCss1CompatMode();if(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||r&&goog.userAgent.isVersionOrHigher("8"))goog.style.setBoxSizingSize_(e,t,"border-box");else if(o=e.style,r){var r=goog.style.getPaddingBox(e),n=goog.style.getBorderBox(e);o.pixelWidth=t.width-n.left-r.left-r.right-n.right;o.pixelHeight=t.height-n.top-r.top-r.bottom-n.bottom}else o.pixelWidth=t.width,o.pixelHeight=t.height};goog.style.getContentBoxSize=function(e){var t=goog.dom.getOwnerDocument(e),o=goog.userAgent.IE&&e.currentStyle;if(o&&goog.dom.getDomHelper(t).isCss1CompatMode()&&"auto"!=o.width&&"auto"!=o.height&&!o.boxSizing)return t=goog.style.getIePixelValue_(e,o.width,"width","pixelWidth"),e=goog.style.getIePixelValue_(e,o.height,"height","pixelHeight"),new goog.math.Size(t,e);o=goog.style.getBorderBoxSize(e);t=goog.style.getPaddingBox(e);e=goog.style.getBorderBox(e);return new goog.math.Size(o.width-e.left-t.left-t.right-e.right,o.height-e.top-t.top-t.bottom-e.bottom)};goog.style.setContentBoxSize=function(e,t){var o=goog.dom.getOwnerDocument(e),r=goog.dom.getDomHelper(o).isCss1CompatMode();if(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||r&&goog.userAgent.isVersionOrHigher("8"))goog.style.setBoxSizingSize_(e,t,"content-box");else if(o=e.style,r)o.pixelWidth=t.width,o.pixelHeight=t.height;else{var r=goog.style.getPaddingBox(e),n=goog.style.getBorderBox(e);o.pixelWidth=t.width+n.left+r.left+r.right+n.right;o.pixelHeight=t.height+n.top+r.top+r.bottom+n.bottom}};goog.style.setBoxSizingSize_=function(e,t,o){e=e.style;goog.userAgent.GECKO?e.MozBoxSizing=o:goog.userAgent.WEBKIT?e.WebkitBoxSizing=o:e.boxSizing=o;e.width=Math.max(t.width,0)+"px";e.height=Math.max(t.height,0)+"px"};goog.style.getIePixelValue_=function(e,t,o,r){if(/^\d+px?$/.test(t))return parseInt(t,10);var n=e.style[o],i=e.runtimeStyle[o];e.runtimeStyle[o]=e.currentStyle[o];e.style[o]=t;t=e.style[r];e.style[o]=n;e.runtimeStyle[o]=i;return t};goog.style.getIePixelDistance_=function(e,t){var o=goog.style.getCascadedStyle(e,t);return o?goog.style.getIePixelValue_(e,o,"left","pixelLeft"):0};goog.style.getBox_=function(e,t){if(goog.userAgent.IE){var o=goog.style.getIePixelDistance_(e,t+"Left"),r=goog.style.getIePixelDistance_(e,t+"Right"),n=goog.style.getIePixelDistance_(e,t+"Top"),i=goog.style.getIePixelDistance_(e,t+"Bottom");return new goog.math.Box(n,r,i,o)}o=goog.style.getComputedStyle(e,t+"Left");r=goog.style.getComputedStyle(e,t+"Right");n=goog.style.getComputedStyle(e,t+"Top");i=goog.style.getComputedStyle(e,t+"Bottom");return new goog.math.Box(parseFloat(n),parseFloat(r),parseFloat(i),parseFloat(o))};goog.style.getPaddingBox=function(e){return goog.style.getBox_(e,"padding")};goog.style.getMarginBox=function(e){return goog.style.getBox_(e,"margin")};goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6};goog.style.getIePixelBorder_=function(e,t){if("none"==goog.style.getCascadedStyle(e,t+"Style"))return 0;var o=goog.style.getCascadedStyle(e,t+"Width");return o in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[o]:goog.style.getIePixelValue_(e,o,"left","pixelLeft")};goog.style.getBorderBox=function(e){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){var t=goog.style.getIePixelBorder_(e,"borderLeft"),o=goog.style.getIePixelBorder_(e,"borderRight"),r=goog.style.getIePixelBorder_(e,"borderTop");e=goog.style.getIePixelBorder_(e,"borderBottom");return new goog.math.Box(r,o,e,t)}t=goog.style.getComputedStyle(e,"borderLeftWidth");o=goog.style.getComputedStyle(e,"borderRightWidth");r=goog.style.getComputedStyle(e,"borderTopWidth");e=goog.style.getComputedStyle(e,"borderBottomWidth");return new goog.math.Box(parseFloat(r),parseFloat(o),parseFloat(e),parseFloat(t))};goog.style.getFontFamily=function(e){var t=goog.dom.getOwnerDocument(e),o="";if(t.body.createTextRange&&goog.dom.contains(t,e)){t=t.body.createTextRange();t.moveToElementText(e);try{o=t.queryCommandValue("FontName")}catch(r){o=""}}o||(o=goog.style.getStyle_(e,"fontFamily"));e=o.split(",");1<e.length&&(o=e[0]);return goog.string.stripQuotes(o,"\"'")};goog.style.lengthUnitRegex_=/[^\d]+$/;goog.style.getLengthUnits=function(e){return(e=e.match(goog.style.lengthUnitRegex_))&&e[0]||null};goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,"in":1,mm:1,pc:1,pt:1};goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1};goog.style.getFontSize=function(e){var t=goog.style.getStyle_(e,"fontSize"),o=goog.style.getLengthUnits(t);if(t&&"px"==o)return parseInt(t,10);if(goog.userAgent.IE){if(o in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(e,t,"left","pixelLeft");if(e.parentNode&&e.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&o in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_)return e=e.parentNode,o=goog.style.getStyle_(e,"fontSize"),goog.style.getIePixelValue_(e,t==o?"1em":t,"left","pixelLeft")}o=goog.dom.createDom(goog.dom.TagName.SPAN,{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"});goog.dom.appendChild(e,o);t=o.offsetHeight;goog.dom.removeNode(o);return t};goog.style.parseStyleAttribute=function(e){var t={};goog.array.forEach(e.split(/\s*;\s*/),function(e){e=e.split(/\s*:\s*/);2==e.length&&(t[goog.string.toCamelCase(e[0].toLowerCase())]=e[1])});return t};goog.style.toStyleAttribute=function(e){var t=[];goog.object.forEach(e,function(e,o){t.push(goog.string.toSelectorCase(o),":",e,";")});return t.join("")};goog.style.setFloat=function(e,t){e.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=t};goog.style.getFloat=function(e){return e.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""};goog.style.getScrollbarWidth=function(e){var t=goog.dom.createElement(goog.dom.TagName.DIV);e&&(t.className=e);t.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";e=goog.dom.createElement(goog.dom.TagName.DIV);goog.style.setSize(e,"200px","200px");t.appendChild(e);goog.dom.appendChild(goog.dom.getDocument().body,t);e=t.offsetWidth-t.clientWidth;goog.dom.removeNode(t);return e};goog.style.MATRIX_TRANSLATION_REGEX_=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;goog.style.getCssTranslation=function(e){e=goog.style.getComputedTransform(e);return e&&(e=e.match(goog.style.MATRIX_TRANSLATION_REGEX_))?new goog.math.Coordinate(parseFloat(e[1]),parseFloat(e[2])):new goog.math.Coordinate(0,0)};ol.MapEventType={POSTRENDER:"postrender",MOVEEND:"moveend"};ol.MapEvent=function(e,t,o){goog.events.Event.call(this,e);this.map=t;this.frameState=goog.isDef(o)?o:null};goog.inherits(ol.MapEvent,goog.events.Event);ol.control={};ol.control.Control=function(e){ol.Object.call(this);this.element=goog.isDef(e.element)?e.element:null;this.map_=this.target_=null;this.listenerKeys=[];this.render=goog.isDef(e.render)?e.render:goog.nullFunction;goog.isDef(e.target)&&this.setTarget(e.target)};goog.inherits(ol.control.Control,ol.Object);ol.control.Control.prototype.disposeInternal=function(){goog.dom.removeNode(this.element);ol.control.Control.superClass_.disposeInternal.call(this)};ol.control.Control.prototype.getMap=function(){return this.map_};ol.control.Control.prototype.setMap=function(e){goog.isNull(this.map_)||goog.dom.removeNode(this.element);goog.array.isEmpty(this.listenerKeys)||(goog.array.forEach(this.listenerKeys,goog.events.unlistenByKey),this.listenerKeys.length=0);this.map_=e;if(!goog.isNull(this.map_)){var t=goog.isNull(this.target_)?e.getOverlayContainerStopEvent():this.target_;goog.dom.appendChild(t,this.element);this.render!==goog.nullFunction&&this.listenerKeys.push(goog.events.listen(e,ol.MapEventType.POSTRENDER,this.render,!1,this));e.render()}};ol.control.Control.prototype.setTarget=function(e){this.target_=goog.dom.getElement(e)};ol.css={};ol.css.CLASS_HIDDEN="ol-hidden";ol.css.CLASS_UNSELECTABLE="ol-unselectable";ol.css.CLASS_UNSUPPORTED="ol-unsupported";ol.css.CLASS_CONTROL="ol-control";ol.structs={};ol.structs.LRUCache=function(){this.count_=0;this.entries_={};this.newest_=this.oldest_=null};ol.structs.LRUCache.prototype.assertValid=function(){if(0===this.count_)goog.asserts.assert(goog.object.isEmpty(this.entries_),"entries must be an empty object (count = 0)"),goog.asserts.assert(goog.isNull(this.oldest_),"oldest must be null (count = 0)"),goog.asserts.assert(goog.isNull(this.newest_),"newest must be null (count = 0)");else{goog.asserts.assert(goog.object.getCount(this.entries_)==this.count_,"number of entries matches count");goog.asserts.assert(!goog.isNull(this.oldest_),"we have an oldest entry");goog.asserts.assert(goog.isNull(this.oldest_.older),"no entry is older than oldest");goog.asserts.assert(!goog.isNull(this.newest_),"we have a newest entry");goog.asserts.assert(goog.isNull(this.newest_.newer),"no entry is newer than newest");var e,t,o=null;e=0;for(t=this.oldest_;!goog.isNull(t);t=t.newer)goog.asserts.assert(t.older===o,"entry.older links to correct older"),o=t,++e;goog.asserts.assert(e==this.count_,"iterated correct amount of times");o=null;e=0;for(t=this.newest_;!goog.isNull(t);t=t.older)goog.asserts.assert(t.newer===o,"entry.newer links to correct newer"),o=t,++e;goog.asserts.assert(e==this.count_,"iterated correct amount of times")}};ol.structs.LRUCache.prototype.clear=function(){this.count_=0;this.entries_={};this.newest_=this.oldest_=null};ol.structs.LRUCache.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)};ol.structs.LRUCache.prototype.forEach=function(e,t){for(var o=this.oldest_;!goog.isNull(o);)e.call(t,o.value_,o.key_,this),o=o.newer};ol.structs.LRUCache.prototype.get=function(e){var t=this.entries_[e];goog.asserts.assert(goog.isDef(t),"an entry exists for key %s",e);if(t===this.newest_)return t.value_;t===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(t.newer.older=t.older,t.older.newer=t.newer);t.newer=null;t.older=this.newest_;this.newest_=this.newest_.newer=t;return t.value_};ol.structs.LRUCache.prototype.getCount=function(){return this.count_};ol.structs.LRUCache.prototype.getKeys=function(){var e,t=Array(this.count_),o=0;for(e=this.newest_;!goog.isNull(e);e=e.older)t[o++]=e.key_;goog.asserts.assert(o==this.count_,"iterated correct number of times");return t};ol.structs.LRUCache.prototype.getValues=function(){var e,t=Array(this.count_),o=0;for(e=this.newest_;!goog.isNull(e);e=e.older)t[o++]=e.value_;goog.asserts.assert(o==this.count_,"iterated correct number of times");return t};ol.structs.LRUCache.prototype.peekLast=function(){goog.asserts.assert(!goog.isNull(this.oldest_),"oldest must not be null");return this.oldest_.value_};ol.structs.LRUCache.prototype.peekLastKey=function(){goog.asserts.assert(!goog.isNull(this.oldest_),"oldest must not be null");return this.oldest_.key_};ol.structs.LRUCache.prototype.pop=function(){goog.asserts.assert(!goog.isNull(this.oldest_),"oldest must not be null");goog.asserts.assert(!goog.isNull(this.newest_),"newest must not be null");var e=this.oldest_;goog.asserts.assert(e.key_ in this.entries_,"oldest is indexed in entries");delete this.entries_[e.key_];goog.isNull(e.newer)||(e.newer.older=null);this.oldest_=e.newer;goog.isNull(this.oldest_)&&(this.newest_=null);--this.count_;return e.value_};ol.structs.LRUCache.prototype.set=function(e,t){goog.asserts.assert(!(e in{}),'key is not a standard property of objects (e.g. "__proto__")');goog.asserts.assert(!(e in this.entries_),"key is not used already");var o={key_:e,newer:null,older:this.newest_,value_:t};goog.isNull(this.newest_)?this.oldest_=o:this.newest_.newer=o;this.newest_=o;this.entries_[e]=o;++this.count_};ol.TileCache=function(e){ol.structs.LRUCache.call(this);this.highWaterMark_=goog.isDef(e)?e:ol.DEFAULT_TILE_CACHE_HIGH_WATER_MARK};goog.inherits(ol.TileCache,ol.structs.LRUCache);ol.TileCache.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark_};ol.TileCache.prototype.expireCache=function(e){for(var t,o;this.canExpireCache()&&!(t=this.peekLast(),o=t.tileCoord[0].toString(),o in e&&e[o].contains(t.tileCoord));)this.pop().dispose()};ol.TileCache.prototype.pruneTileRange=function(e){for(var t,o=this.getCount();o--;)t=this.peekLastKey(),e.contains(ol.tilecoord.createFromString(t))?this.pop().dispose():this.get(t)};ol.TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};ol.Tile=function(e,t){goog.events.EventTarget.call(this);this.tileCoord=e;this.state=t};goog.inherits(ol.Tile,goog.events.EventTarget);ol.Tile.prototype.changed=function(){this.dispatchEvent(goog.events.EventType.CHANGE)};ol.Tile.prototype.getKey=function(){return goog.getUid(this).toString()};ol.Tile.prototype.getTileCoord=function(){return this.tileCoord};ol.Tile.prototype.getState=function(){return this.state};ol.source={};ol.source.State={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};ol.source.Source=function(e){ol.Object.call(this);this.projection_=ol.proj.get(e.projection);this.attributions_=goog.isDef(e.attributions)?e.attributions:null;this.logo_=e.logo;this.state_=goog.isDef(e.state)?e.state:ol.source.State.READY;this.wrapX_=goog.isDef(e.wrapX)?e.wrapX:!1};goog.inherits(ol.source.Source,ol.Object);ol.source.Source.prototype.forEachFeatureAtCoordinate=goog.nullFunction;ol.source.Source.prototype.getAttributions=function(){return this.attributions_};ol.source.Source.prototype.getLogo=function(){return this.logo_};ol.source.Source.prototype.getProjection=function(){return this.projection_};ol.source.Source.prototype.getState=function(){return this.state_};ol.source.Source.prototype.getWrapX=function(){return this.wrapX_};ol.source.Source.prototype.setAttributions=function(e){this.attributions_=e;this.changed()};ol.source.Source.prototype.setLogo=function(e){this.logo_=e};ol.source.Source.prototype.setState=function(e){this.state_=e;this.changed()};ol.source.Source.prototype.setProjection=function(e){this.projection_=e};ol.tilegrid={};ol.tilegrid.TileGrid=function(e){this.minZoom=goog.isDef(e.minZoom)?e.minZoom:0;this.resolutions_=e.resolutions;goog.asserts.assert(goog.array.isSorted(this.resolutions_,function(e,t){return t-e},!0),"resolutions must be sorted in descending order");this.maxZoom=this.resolutions_.length-1;this.origin_=goog.isDef(e.origin)?e.origin:null;this.origins_=null;goog.isDef(e.origins)&&(this.origins_=e.origins,goog.asserts.assert(this.origins_.length==this.resolutions_.length,"number of origins and resolutions must be equal"));var t=e.extent;goog.isDef(t)&&goog.isNull(this.origin_)&&goog.isNull(this.origins_)&&(this.origin_=ol.extent.getTopLeft(t));goog.asserts.assert(goog.isNull(this.origin_)&&!goog.isNull(this.origins_)||!goog.isNull(this.origin_)&&goog.isNull(this.origins_),"either origin or origins must be configured, never both");this.tileSizes_=null;goog.isDef(e.tileSizes)&&(this.tileSizes_=e.tileSizes,goog.asserts.assert(this.tileSizes_.length==this.resolutions_.length,"number of tileSizes and resolutions must be equal"));this.tileSize_=goog.isDef(e.tileSize)?e.tileSize:goog.isNull(this.tileSizes_)?ol.DEFAULT_TILE_SIZE:null;goog.asserts.assert(goog.isNull(this.tileSize_)&&!goog.isNull(this.tileSizes_)||!goog.isNull(this.tileSize_)&&goog.isNull(this.tileSizes_),"either tileSize or tileSizes must be configured, never both");this.extent_=goog.isDef(t)?t:null;this.fullTileRanges_=null;goog.isDef(e.sizes)?(goog.asserts.assert(e.sizes.length==this.resolutions_.length,"number of sizes and resolutions must be equal"),this.fullTileRanges_=goog.array.map(e.sizes,function(e,o){goog.asserts.assert(0!==e[0],"width must not be 0");goog.asserts.assert(0!==e[1],"height must not be 0");var r=new ol.TileRange(Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1));this.minZoom<=o&&o<=this.maxZoom&&goog.isDef(t)&&goog.asserts.assert(r.containsTileRange(this.getTileRangeForExtentAndZ(t,o)),"extent tile range must not exceed tilegrid width and height");return r},this)):goog.isDefAndNotNull(t)&&this.calculateTileRanges_(t);this.tmpSize_=[0,0]};ol.tilegrid.TileGrid.tmpTileCoord_=[0,0,0];ol.tilegrid.TileGrid.prototype.forEachTileCoordParentTileRange=function(e,t,o,r,n){n=this.getTileCoordExtent(e,n);for(e=e[0]-1;e>=this.minZoom;){if(t.call(o,e,this.getTileRangeForExtentAndZ(n,e,r)))return!0;--e}return!1};ol.tilegrid.TileGrid.prototype.getExtent=function(){return this.extent_};ol.tilegrid.TileGrid.prototype.getMaxZoom=function(){return this.maxZoom};ol.tilegrid.TileGrid.prototype.getMinZoom=function(){return this.minZoom};ol.tilegrid.TileGrid.prototype.getOrigin=function(e){return goog.isNull(this.origin_)?(goog.asserts.assert(!goog.isNull(this.origins_),"origins cannot be null if origin is null"),goog.asserts.assert(this.minZoom<=e&&e<=this.maxZoom,"given z is not in allowed range (%s <= %s <= %s)",this.minZoom,e,this.maxZoom),this.origins_[e]):this.origin_};ol.tilegrid.TileGrid.prototype.getResolution=function(e){goog.asserts.assert(this.minZoom<=e&&e<=this.maxZoom,"given z is not in allowed range (%s <= %s <= %s)",this.minZoom,e,this.maxZoom);return this.resolutions_[e]};ol.tilegrid.TileGrid.prototype.getResolutions=function(){return this.resolutions_};ol.tilegrid.TileGrid.prototype.getTileCoordChildTileRange=function(e,t,o){return e[0]<this.maxZoom?(o=this.getTileCoordExtent(e,o),this.getTileRangeForExtentAndZ(o,e[0]+1,t)):null};ol.tilegrid.TileGrid.prototype.getTileRangeExtent=function(e,t,o){var r=this.getOrigin(e),n=this.getResolution(e);e=ol.size.toSize(this.getTileSize(e),this.tmpSize_);return ol.extent.createOrUpdate(r[0]+t.minX*e[0]*n,r[1]+t.minY*e[1]*n,r[0]+(t.maxX+1)*e[0]*n,r[1]+(t.maxY+1)*e[1]*n,o)};ol.tilegrid.TileGrid.prototype.getTileRangeForExtentAndResolution=function(e,t,o){var r=ol.tilegrid.TileGrid.tmpTileCoord_;this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r);var n=r[1],i=r[2];this.getTileCoordForXYAndResolution_(e[2],e[3],t,!0,r);return ol.TileRange.createOrUpdate(n,r[1],i,r[2],o)};ol.tilegrid.TileGrid.prototype.getTileRangeForExtentAndZ=function(e,t,o){t=this.getResolution(t);return this.getTileRangeForExtentAndResolution(e,t,o)};ol.tilegrid.TileGrid.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]),o=this.getResolution(e[0]),r=ol.size.toSize(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*o,t[1]+(e[2]+.5)*r[1]*o]};ol.tilegrid.TileGrid.prototype.getTileCoordExtent=function(e,t){var o=this.getOrigin(e[0]),r=this.getResolution(e[0]),n=ol.size.toSize(this.getTileSize(e[0]),this.tmpSize_),i=o[0]+e[1]*n[0]*r,o=o[1]+e[2]*n[1]*r;return ol.extent.createOrUpdate(i,o,i+n[0]*r,o+n[1]*r,t)};ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndResolution=function(e,t,o){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,o)};ol.tilegrid.TileGrid.prototype.getTileCoordForXYAndResolution_=function(e,t,o,r,n){var i=this.getZForResolution(o),s=o/this.getResolution(i),a=this.getOrigin(i),g=ol.size.toSize(this.getTileSize(i),this.tmpSize_);e=s*Math.floor((e-a[0])/o+(r?.5:0))/g[0];t=s*Math.floor((t-a[1])/o+(r?0:.5))/g[1];r?(e=Math.ceil(e)-1,t=Math.ceil(t)-1):(e=Math.floor(e),t=Math.floor(t));return ol.tilecoord.createOrUpdate(i,e,t,n)};ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndZ=function(e,t,o){t=this.getResolution(t);
return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,o)};ol.tilegrid.TileGrid.prototype.getTileCoordResolution=function(e){goog.asserts.assert(this.minZoom<=e[0]&&e[0]<=this.maxZoom,"z of given tilecoord is not in allowed range (%s <= %s <= %s",this.minZoom,e[0],this.maxZoom);return this.resolutions_[e[0]]};ol.tilegrid.TileGrid.prototype.getTileSize=function(e){return goog.isNull(this.tileSize_)?(goog.asserts.assert(!goog.isNull(this.tileSizes_),"tileSizes cannot be null if tileSize is null"),goog.asserts.assert(this.minZoom<=e&&e<=this.maxZoom,"z is not in allowed range (%s <= %s <= %s",this.minZoom,e,this.maxZoom),this.tileSizes_[e]):this.tileSize_};ol.tilegrid.TileGrid.prototype.getFullTileRange=function(e){if(goog.isNull(this.fullTileRanges_))return null;goog.asserts.assert(this.minZoom<=e&&e<=this.maxZoom,"z is not in allowed range (%s <= %s <= %s",this.minZoom,e,this.maxZoom);return this.fullTileRanges_[e]};ol.tilegrid.TileGrid.prototype.getZForResolution=function(e){e=ol.array.linearFindNearest(this.resolutions_,e,0);return goog.math.clamp(e,this.minZoom,this.maxZoom)};ol.tilegrid.TileGrid.prototype.calculateTileRanges_=function(e){for(var t=this.resolutions_.length,o=Array(t),r=this.minZoom;t>r;++r)o[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=o};ol.tilegrid.getForProjection=function(e){var t=e.getDefaultTileGrid();goog.isNull(t)&&(t=ol.tilegrid.createForProjection(e),e.setDefaultTileGrid(t));return t};ol.tilegrid.createForExtent=function(e,t,o,r){r=goog.isDef(r)?r:ol.extent.Corner.TOP_LEFT;t=ol.tilegrid.resolutionsFromExtent(e,t,o);return new ol.tilegrid.TileGrid({extent:e,origin:ol.extent.getCorner(e,r),resolutions:t,tileSize:o})};ol.tilegrid.createXYZ=function(e){var t={};goog.object.extend(t,goog.isDef(e)?e:{});goog.isDef(t.extent)||(t.extent=ol.proj.get("EPSG:3857").getExtent());t.resolutions=ol.tilegrid.resolutionsFromExtent(t.extent,t.maxZoom,t.tileSize);delete t.maxZoom;return new ol.tilegrid.TileGrid(t)};ol.tilegrid.resolutionsFromExtent=function(e,t,o){t=goog.isDef(t)?t:ol.DEFAULT_MAX_ZOOM;var r=ol.extent.getHeight(e);e=ol.extent.getWidth(e);o=ol.size.toSize(goog.isDef(o)?o:ol.DEFAULT_TILE_SIZE);o=Math.max(e/o[0],r/o[1]);t+=1;r=Array(t);for(e=0;t>e;++e)r[e]=o/Math.pow(2,e);return r};ol.tilegrid.createForProjection=function(e,t,o,r){e=ol.tilegrid.extentFromProjection(e);return ol.tilegrid.createForExtent(e,t,o,r)};ol.tilegrid.extentFromProjection=function(e){e=ol.proj.get(e);var t=e.getExtent();goog.isNull(t)&&(e=180*ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]/e.getMetersPerUnit(),t=ol.extent.createOrUpdate(-e,-e,e,e));return t};ol.source.Tile=function(e){ol.source.Source.call(this,{attributions:e.attributions,extent:e.extent,logo:e.logo,projection:e.projection,state:e.state,wrapX:e.wrapX});this.opaque_=goog.isDef(e.opaque)?e.opaque:!1;this.tilePixelRatio_=goog.isDef(e.tilePixelRatio)?e.tilePixelRatio:1;this.tileGrid=goog.isDef(e.tileGrid)?e.tileGrid:null;this.tileCache=new ol.TileCache;this.tmpSize=[0,0]};goog.inherits(ol.source.Tile,ol.source.Source);ol.source.Tile.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()};ol.source.Tile.prototype.expireCache=function(e){this.tileCache.expireCache(e)};ol.source.Tile.prototype.forEachLoadedTile=function(e,t,o){for(var r,n,i=!0,s=t.minX;s<=t.maxX;++s)for(var a=t.minY;a<=t.maxY;++a)r=this.getKeyZXY(e,s,a),n=!1,this.tileCache.containsKey(r)&&(r=this.tileCache.get(r),(n=r.getState()===ol.TileState.LOADED)&&(n=!1!==o(r))),n||(i=!1);return i};ol.source.Tile.prototype.getGutter=function(){return 0};ol.source.Tile.prototype.getKeyZXY=ol.tilecoord.getKeyZXY;ol.source.Tile.prototype.getOpaque=function(){return this.opaque_};ol.source.Tile.prototype.getResolutions=function(){return this.tileGrid.getResolutions()};ol.source.Tile.prototype.getTileGrid=function(){return this.tileGrid};ol.source.Tile.prototype.getTileGridForProjection=function(e){return goog.isNull(this.tileGrid)?ol.tilegrid.getForProjection(e):this.tileGrid};ol.source.Tile.prototype.getTilePixelSize=function(e,t,o){t=this.getTileGridForProjection(o);return ol.size.scale(ol.size.toSize(t.getTileSize(e),this.tmpSize),this.tilePixelRatio_,this.tmpSize)};ol.source.Tile.prototype.getTileCoordForTileUrlFunction=function(e,t){var o=goog.isDef(t)?t:this.getProjection(),r=this.getTileGridForProjection(o);goog.asserts.assert(!goog.isNull(r),"tile grid needed");this.getWrapX()&&o.isGlobal()&&(e=ol.tilecoord.wrapX(e,r,o));return ol.tilecoord.withinExtentAndZ(e,r)?e:null};ol.source.Tile.prototype.useTile=goog.nullFunction;ol.source.TileEvent=function(e,t){goog.events.Event.call(this,e);this.tile=t};goog.inherits(ol.source.TileEvent,goog.events.Event);ol.source.TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};ol.control.Attribution=function(e){e=goog.isDef(e)?e:{};this.ulElement_=goog.dom.createElement(goog.dom.TagName.UL);this.logoLi_=goog.dom.createElement(goog.dom.TagName.LI);goog.dom.appendChild(this.ulElement_,this.logoLi_);goog.style.setElementShown(this.logoLi_,!1);this.collapsed_=goog.isDef(e.collapsed)?e.collapsed:!0;this.collapsible_=goog.isDef(e.collapsible)?e.collapsible:!0;this.collapsible_||(this.collapsed_=!1);var t=goog.isDef(e.className)?e.className:"ol-attribution",o=goog.isDef(e.tipLabel)?e.tipLabel:"Attributions",r=goog.isDef(e.collapseLabel)?e.collapseLabel:"\xbb";this.collapseLabel_=goog.isString(r)?goog.dom.createDom(goog.dom.TagName.SPAN,{},r):r;r=goog.isDef(e.label)?e.label:"i";this.label_=goog.isString(r)?goog.dom.createDom(goog.dom.TagName.SPAN,{},r):r;o=goog.dom.createDom(goog.dom.TagName.BUTTON,{type:"button",title:o},this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_);goog.events.listen(o,goog.events.EventType.CLICK,this.handleClick_,!1,this);goog.events.listen(o,[goog.events.EventType.MOUSEOUT,goog.events.EventType.FOCUSOUT],function(){this.blur()},!1);t=goog.dom.createDom(goog.dom.TagName.DIV,t+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),this.ulElement_,o);o=goog.isDef(e.render)?e.render:ol.control.Attribution.render;ol.control.Control.call(this,{element:t,render:o,target:e.target});this.renderedVisible_=!0;this.attributionElements_={};this.attributionElementRenderedVisible_={};this.logoElements_={}};goog.inherits(ol.control.Attribution,ol.control.Control);ol.control.Attribution.prototype.getSourceAttributions=function(e){var t,o,r,n,i,s,a,g,l,u,c=e.layerStatesArray,h=goog.object.clone(e.attributions),d={},m=e.viewState.projection;goog.asserts.assert(!goog.isNull(m),"projection cannot be null");t=0;for(o=c.length;o>t;t++)if(s=c[t].layer.getSource(),!goog.isNull(s)&&(u=goog.getUid(s).toString(),l=s.getAttributions(),!goog.isNull(l)))for(r=0,n=l.length;n>r;r++)if(a=l[r],g=goog.getUid(a).toString(),!(g in h)){i=e.usedTiles[u];if(goog.isDef(i)){goog.asserts.assertInstanceof(s,ol.source.Tile,"source should be an ol.source.Tile");var p=s.getTileGridForProjection(m);goog.asserts.assert(!goog.isNull(p),"tileGrid cannot be null");i=a.intersectsAnyTileRange(i,p,m)}else i=!1;i?(g in d&&delete d[g],h[g]=a):d[g]=a}return[h,d]};ol.control.Attribution.render=function(e){this.updateElement_(e.frameState)};ol.control.Attribution.prototype.updateElement_=function(e){if(goog.isNull(e))this.renderedVisible_&&(goog.style.setElementShown(this.element,!1),this.renderedVisible_=!1);else{var t,o,r=this.getSourceAttributions(e),n=r[0],r=r[1];for(o in this.attributionElements_)o in n?(this.attributionElementRenderedVisible_[o]||(goog.style.setElementShown(this.attributionElements_[o],!0),this.attributionElementRenderedVisible_[o]=!0),delete n[o]):o in r?(this.attributionElementRenderedVisible_[o]&&(goog.style.setElementShown(this.attributionElements_[o],!1),delete this.attributionElementRenderedVisible_[o]),delete r[o]):(goog.dom.removeNode(this.attributionElements_[o]),delete this.attributionElements_[o],delete this.attributionElementRenderedVisible_[o]);for(o in n)t=goog.dom.createElement(goog.dom.TagName.LI),t.innerHTML=n[o].getHTML(),goog.dom.appendChild(this.ulElement_,t),this.attributionElements_[o]=t,this.attributionElementRenderedVisible_[o]=!0;for(o in r)t=goog.dom.createElement(goog.dom.TagName.LI),t.innerHTML=r[o].getHTML(),goog.style.setElementShown(t,!1),goog.dom.appendChild(this.ulElement_,t),this.attributionElements_[o]=t;n=!goog.object.isEmpty(this.attributionElementRenderedVisible_)||!goog.object.isEmpty(e.logos);this.renderedVisible_!=n&&(goog.style.setElementShown(this.element,n),this.renderedVisible_=n);n&&goog.object.isEmpty(this.attributionElementRenderedVisible_)?goog.dom.classlist.add(this.element,"ol-logo-only"):goog.dom.classlist.remove(this.element,"ol-logo-only");this.insertLogos_(e)}};ol.control.Attribution.prototype.insertLogos_=function(e){var t;e=e.logos;var o=this.logoElements_;for(t in o)t in e||(goog.dom.removeNode(o[t]),delete o[t]);var r,n;for(n in e)n in o||(t=new Image,t.src=n,r=e[n],""===r?r=t:(r=goog.dom.createDom(goog.dom.TagName.A,{href:r}),r.appendChild(t)),goog.dom.appendChild(this.logoLi_,r),o[n]=r);goog.style.setElementShown(this.logoLi_,!goog.object.isEmpty(e))};ol.control.Attribution.prototype.handleClick_=function(e){e.preventDefault();this.handleToggle_()};ol.control.Attribution.prototype.handleToggle_=function(){goog.dom.classlist.toggle(this.element,"ol-collapsed");this.collapsed_?goog.dom.replaceNode(this.collapseLabel_,this.label_):goog.dom.replaceNode(this.label_,this.collapseLabel_);this.collapsed_=!this.collapsed_};ol.control.Attribution.prototype.getCollapsible=function(){return this.collapsible_};ol.control.Attribution.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,goog.dom.classlist.toggle(this.element,"ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())};ol.control.Attribution.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()};ol.control.Attribution.prototype.getCollapsed=function(){return this.collapsed_};ol.control.Rotate=function(e){e=goog.isDef(e)?e:{};var t=goog.isDef(e.className)?e.className:"ol-rotate",o=goog.isDef(e.label)?e.label:"\u21e7";this.label_=null;goog.isString(o)?this.label_=goog.dom.createDom(goog.dom.TagName.SPAN,"ol-compass",o):(this.label_=o,goog.dom.classlist.add(this.label_,"ol-compass"));o=goog.isDef(e.tipLabel)?e.tipLabel:"Reset rotation";o=goog.dom.createDom(goog.dom.TagName.BUTTON,{"class":t+"-reset",type:"button",title:o},this.label_);goog.events.listen(o,goog.events.EventType.CLICK,ol.control.Rotate.prototype.handleClick_,!1,this);t=goog.dom.createDom(goog.dom.TagName.DIV,t+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL,o);o=goog.isDef(e.render)?e.render:ol.control.Rotate.render;ol.control.Control.call(this,{element:t,render:o,target:e.target});this.duration_=goog.isDef(e.duration)?e.duration:250;this.autoHide_=goog.isDef(e.autoHide)?e.autoHide:!0;this.rotation_=void 0;this.autoHide_&&goog.dom.classlist.add(this.element,ol.css.CLASS_HIDDEN)};goog.inherits(ol.control.Rotate,ol.control.Control);ol.control.Rotate.prototype.handleClick_=function(e){e.preventDefault();this.resetNorth_()};ol.control.Rotate.prototype.resetNorth_=function(){var e=this.getMap(),t=e.getView();if(!goog.isNull(t)){for(var o=t.getRotation();o<-Math.PI;)o+=2*Math.PI;for(;o>Math.PI;)o-=2*Math.PI;goog.isDef(o)&&(0<this.duration_&&e.beforeRender(ol.animation.rotate({rotation:o,duration:this.duration_,easing:ol.easing.easeOut})),t.setRotation(0))}};ol.control.Rotate.render=function(e){e=e.frameState;if(!goog.isNull(e)){e=e.viewState.rotation;if(e!=this.rotation_){var t="rotate("+goog.math.toDegrees(e)+"deg)";this.autoHide_&&goog.dom.classlist.enable(this.element,ol.css.CLASS_HIDDEN,0===e);this.label_.style.msTransform=t;this.label_.style.webkitTransform=t;this.label_.style.transform=t}this.rotation_=e}};ol.control.Zoom=function(e){e=goog.isDef(e)?e:{};var t=goog.isDef(e.className)?e.className:"ol-zoom",o=goog.isDef(e.delta)?e.delta:1,r=goog.isDef(e.zoomInLabel)?e.zoomInLabel:"+",n=goog.isDef(e.zoomOutLabel)?e.zoomOutLabel:"\u2212",i=goog.isDef(e.zoomInTipLabel)?e.zoomInTipLabel:"Zoom in",s=goog.isDef(e.zoomOutTipLabel)?e.zoomOutTipLabel:"Zoom out",r=goog.dom.createDom(goog.dom.TagName.BUTTON,{"class":t+"-in",type:"button",title:i},r);goog.events.listen(r,goog.events.EventType.CLICK,goog.partial(ol.control.Zoom.prototype.handleClick_,o),!1,this);n=goog.dom.createDom(goog.dom.TagName.BUTTON,{"class":t+"-out",type:"button",title:s},n);goog.events.listen(n,goog.events.EventType.CLICK,goog.partial(ol.control.Zoom.prototype.handleClick_,-o),!1,this);goog.events.listen(n,[goog.events.EventType.MOUSEOUT,goog.events.EventType.FOCUSOUT],function(){this.blur()},!1);t=goog.dom.createDom(goog.dom.TagName.DIV,t+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL,r,n);ol.control.Control.call(this,{element:t,target:e.target});this.duration_=goog.isDef(e.duration)?e.duration:250};goog.inherits(ol.control.Zoom,ol.control.Control);ol.control.Zoom.prototype.handleClick_=function(e,t){t.preventDefault();this.zoomByDelta_(e)};ol.control.Zoom.prototype.zoomByDelta_=function(e){var t=this.getMap(),o=t.getView();if(!goog.isNull(o)){var r=o.getResolution();goog.isDef(r)&&(0<this.duration_&&t.beforeRender(ol.animation.zoom({resolution:r,duration:this.duration_,easing:ol.easing.easeOut})),e=o.constrainResolution(r,e),o.setResolution(e))}};ol.control.defaults=function(e){e=goog.isDef(e)?e:{};var t=new ol.Collection;(goog.isDef(e.zoom)?e.zoom:1)&&t.push(new ol.control.Zoom(e.zoomOptions));(goog.isDef(e.rotate)?e.rotate:1)&&t.push(new ol.control.Rotate(e.rotateOptions));(goog.isDef(e.attribution)?e.attribution:1)&&t.push(new ol.control.Attribution(e.attributionOptions));return t};goog.async={};goog.async.AnimationDelay=function(e,t,o){goog.Disposable.call(this);this.id_=null;this.usingListeners_=!1;this.listener_=e;this.handler_=o;this.win_=t||window;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.AnimationDelay,goog.Disposable);goog.async.AnimationDelay.TIMEOUT=20;goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_="MozBeforePaint";goog.async.AnimationDelay.prototype.start=function(){this.stop();this.usingListeners_=!1;var e=this.getRaf_(),t=this.getCancelRaf_();e&&!t&&this.win_.mozRequestAnimationFrame?(this.id_=goog.events.listen(this.win_,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_,this.callback_),this.win_.mozRequestAnimationFrame(null),this.usingListeners_=!0):this.id_=e&&t?e.call(this.win_,this.callback_):this.win_.setTimeout(goog.functions.lock(this.callback_),goog.async.AnimationDelay.TIMEOUT)};goog.async.AnimationDelay.prototype.stop=function(){if(this.isActive()){var e=this.getRaf_(),t=this.getCancelRaf_();e&&!t&&this.win_.mozRequestAnimationFrame?goog.events.unlistenByKey(this.id_):e&&t?t.call(this.win_,this.id_):this.win_.clearTimeout(this.id_)}this.id_=null};goog.async.AnimationDelay.prototype.fire=function(){this.stop();this.doAction_()};goog.async.AnimationDelay.prototype.fireIfActive=function(){this.isActive()&&this.fire()};goog.async.AnimationDelay.prototype.isActive=function(){return null!=this.id_};goog.async.AnimationDelay.prototype.doAction_=function(){this.usingListeners_&&this.id_&&goog.events.unlistenByKey(this.id_);this.id_=null;this.listener_.call(this.handler_,goog.now())};goog.async.AnimationDelay.prototype.disposeInternal=function(){this.stop();goog.async.AnimationDelay.superClass_.disposeInternal.call(this)};goog.async.AnimationDelay.prototype.getRaf_=function(){var e=this.win_;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||null};goog.async.AnimationDelay.prototype.getCancelRaf_=function(){var e=this.win_;return e.cancelAnimationFrame||e.cancelRequestAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||null};goog.async.throwException=function(e){goog.global.setTimeout(function(){throw e},0)};goog.async.nextTick=function(e,t,o){var r=e;t&&(r=goog.bind(e,t));r=goog.async.nextTick.wrapCallback_(r);!goog.isFunction(goog.global.setImmediate)||!o&&goog.global.Window&&goog.global.Window.prototype&&goog.global.Window.prototype.setImmediate==goog.global.setImmediate?(goog.async.nextTick.setImmediate_||(goog.async.nextTick.setImmediate_=goog.async.nextTick.getSetImmediateEmulator_()),goog.async.nextTick.setImmediate_(r)):goog.global.setImmediate(r)};goog.async.nextTick.getSetImmediateEmulator_=function(){var e=goog.global.MessageChannel;"undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!goog.labs.userAgent.engine.isPresto()&&(e=function(){var e=document.createElement(goog.dom.TagName.IFRAME);e.style.display="none";e.src="";document.documentElement.appendChild(e);var t=e.contentWindow,e=t.document;e.open();e.write("");e.close();var o="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host,e=goog.bind(function(e){"*"!=r&&e.origin!=r||e.data!=o||this.port1.onmessage()},this);t.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){t.postMessage(o,r)}}});if("undefined"!=typeof e&&!goog.labs.userAgent.browser.isIE()){var t=new e,o={},r=o;t.port1.onmessage=function(){if(goog.isDef(o.next)){o=o.next;var e=o.cb;o.cb=null;e()}};return function(e){r.next={cb:e};r=r.next;t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement(goog.dom.TagName.SCRIPT)?function(e){var t=document.createElement(goog.dom.TagName.SCRIPT);t.onreadystatechange=function(){t.onreadystatechange=null;t.parentNode.removeChild(t);t=null;e();e=null};document.documentElement.appendChild(t)}:function(e){goog.global.setTimeout(e,0)}};goog.async.nextTick.wrapCallback_=goog.functions.identity;goog.debug.entryPointRegistry.register(function(e){goog.async.nextTick.wrapCallback_=e});goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="";this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0;goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeScript.fromConstant=function(e){e=goog.string.Const.unwrap(e);return 0===e.length?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)};goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_};goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"});goog.html.SafeScript.unwrap=function(e){if(e instanceof goog.html.SafeScript&&e.constructor===goog.html.SafeScript&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_)return e.privateDoNotAccessOrElseSafeScriptWrappedValue_;goog.asserts.fail("expected object of type SafeScript, got '"+e+"'");return"type_error:SafeScript"};goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(e)};goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){this.privateDoNotAccessOrElseSafeScriptWrappedValue_=e;return this};goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("");goog.html.uncheckedconversions={};goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(e,t,o){goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification");return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,o||null)};goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(e,t){goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification");goog.asserts.assert(!goog.string.isEmpty(goog.string.Const.unwrap(e)),"must provide non-empty justification");return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)};goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(e,t){goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification");return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)};goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(e,t){goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification");return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)};goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(e,t){goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification");return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)};goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(e,t){goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification");return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)};goog.structs={};goog.structs.getCount=function(e){return"function"==typeof e.getCount?e.getCount():goog.isArrayLike(e)||goog.isString(e)?e.length:goog.object.getCount(e)};goog.structs.getValues=function(e){if("function"==typeof e.getValues)return e.getValues();if(goog.isString(e))return e.split("");if(goog.isArrayLike(e)){for(var t=[],o=e.length,r=0;o>r;r++)t.push(e[r]);return t}return goog.object.getValues(e)};goog.structs.getKeys=function(e){if("function"==typeof e.getKeys)return e.getKeys();if("function"!=typeof e.getValues){if(goog.isArrayLike(e)||goog.isString(e)){var t=[];e=e.length;for(var o=0;e>o;o++)t.push(o);return t}return goog.object.getKeys(e)}};goog.structs.contains=function(e,t){return"function"==typeof e.contains?e.contains(t):"function"==typeof e.containsValue?e.containsValue(t):goog.isArrayLike(e)||goog.isString(e)?goog.array.contains(e,t):goog.object.containsValue(e,t)};goog.structs.isEmpty=function(e){return"function"==typeof e.isEmpty?e.isEmpty():goog.isArrayLike(e)||goog.isString(e)?goog.array.isEmpty(e):goog.object.isEmpty(e)};goog.structs.clear=function(e){"function"==typeof e.clear?e.clear():goog.isArrayLike(e)?goog.array.clear(e):goog.object.clear(e)};goog.structs.forEach=function(e,t,o){if("function"==typeof e.forEach)e.forEach(t,o);else if(goog.isArrayLike(e)||goog.isString(e))goog.array.forEach(e,t,o);else for(var r=goog.structs.getKeys(e),n=goog.structs.getValues(e),i=n.length,s=0;i>s;s++)t.call(o,n[s],r&&r[s],e)};goog.structs.filter=function(e,t,o){if("function"==typeof e.filter)return e.filter(t,o);if(goog.isArrayLike(e)||goog.isString(e))return goog.array.filter(e,t,o);var r,n=goog.structs.getKeys(e),i=goog.structs.getValues(e),s=i.length;if(n){r={};for(var a=0;s>a;a++)t.call(o,i[a],n[a],e)&&(r[n[a]]=i[a])}else for(r=[],a=0;s>a;a++)t.call(o,i[a],void 0,e)&&r.push(i[a]);return r};goog.structs.map=function(e,t,o){if("function"==typeof e.map)return e.map(t,o);if(goog.isArrayLike(e)||goog.isString(e))return goog.array.map(e,t,o);var r,n=goog.structs.getKeys(e),i=goog.structs.getValues(e),s=i.length;if(n){r={};for(var a=0;s>a;a++)r[n[a]]=t.call(o,i[a],n[a],e)}else for(r=[],a=0;s>a;a++)r[a]=t.call(o,i[a],void 0,e);return r};goog.structs.some=function(e,t,o){if("function"==typeof e.some)return e.some(t,o);if(goog.isArrayLike(e)||goog.isString(e))return goog.array.some(e,t,o);for(var r=goog.structs.getKeys(e),n=goog.structs.getValues(e),i=n.length,s=0;i>s;s++)if(t.call(o,n[s],r&&r[s],e))return!0;return!1};goog.structs.every=function(e,t,o){if("function"==typeof e.every)return e.every(t,o);if(goog.isArrayLike(e)||goog.isString(e))return goog.array.every(e,t,o);for(var r=goog.structs.getKeys(e),n=goog.structs.getValues(e),i=n.length,s=0;i>s;s++)if(!t.call(o,n[s],r&&r[s],e))return!1;return!0};goog.structs.Collection=function(){};goog.iter={};goog.iter.StopIteration="StopIteration"in goog.global?goog.global.StopIteration:{message:"StopIteration",stack:""};goog.iter.Iterator=function(){};goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration};goog.iter.Iterator.prototype.__iterator__=function(){return this};goog.iter.toIterator=function(e){if(e instanceof goog.iter.Iterator)return e;if("function"==typeof e.__iterator__)return e.__iterator__(!1);if(goog.isArrayLike(e)){var t=0,o=new goog.iter.Iterator;o.next=function(){for(;;){if(t>=e.length)throw goog.iter.StopIteration;if(t in e)return e[t++];t++}};return o}throw Error("Not implemented")};goog.iter.forEach=function(e,t,o){if(goog.isArrayLike(e))try{goog.array.forEach(e,t,o)}catch(r){if(r!==goog.iter.StopIteration)throw r}else{e=goog.iter.toIterator(e);try{for(;;)t.call(o,e.next(),void 0,e)}catch(n){if(n!==goog.iter.StopIteration)throw n}}};goog.iter.filter=function(e,t,o){var r=goog.iter.toIterator(e);e=new goog.iter.Iterator;e.next=function(){for(;;){var e=r.next();if(t.call(o,e,void 0,r))return e}};return e};goog.iter.filterFalse=function(e,t,o){return goog.iter.filter(e,goog.functions.not(t),o)};goog.iter.range=function(e,t,o){var r=0,n=e,i=o||1;1<arguments.length&&(r=e,n=t);if(0==i)throw Error("Range step argument must not be zero");var s=new goog.iter.Iterator;s.next=function(){if(i>0&&r>=n||0>i&&n>=r)throw goog.iter.StopIteration;var e=r;r+=i;return e};return s};goog.iter.join=function(e,t){return goog.iter.toArray(e).join(t)};goog.iter.map=function(e,t,o){var r=goog.iter.toIterator(e);e=new goog.iter.Iterator;e.next=function(){var e=r.next();return t.call(o,e,void 0,r)};return e};goog.iter.reduce=function(e,t,o,r){var n=o;goog.iter.forEach(e,function(e){n=t.call(r,n,e)});return n};goog.iter.some=function(e,t,o){e=goog.iter.toIterator(e);try{for(;;)if(t.call(o,e.next(),void 0,e))return!0}catch(r){if(r!==goog.iter.StopIteration)throw r}return!1};goog.iter.every=function(e,t,o){e=goog.iter.toIterator(e);try{for(;;)if(!t.call(o,e.next(),void 0,e))return!1}catch(r){if(r!==goog.iter.StopIteration)throw r}return!0};goog.iter.chain=function(){return goog.iter.chainFromIterable(arguments)};goog.iter.chainFromIterable=function(e){var t=goog.iter.toIterator(e);e=new goog.iter.Iterator;var o=null;e.next=function(){for(;;){if(null==o){var e=t.next();o=goog.iter.toIterator(e)}try{return o.next()}catch(r){if(r!==goog.iter.StopIteration)throw r;o=null}}};return e};goog.iter.dropWhile=function(e,t,o){var r=goog.iter.toIterator(e);e=new goog.iter.Iterator;var n=!0;e.next=function(){for(;;){var e=r.next();if(!n||!t.call(o,e,void 0,r))return n=!1,e}};return e};goog.iter.takeWhile=function(e,t,o){var r=goog.iter.toIterator(e);e=new goog.iter.Iterator;e.next=function(){var e=r.next();if(t.call(o,e,void 0,r))return e;throw goog.iter.StopIteration};return e};goog.iter.toArray=function(e){if(goog.isArrayLike(e))return goog.array.toArray(e);e=goog.iter.toIterator(e);var t=[];goog.iter.forEach(e,function(e){t.push(e)});return t};goog.iter.equals=function(e,t,o){e=goog.iter.zipLongest({},e,t);var r=o||goog.array.defaultCompareEquality;return goog.iter.every(e,function(e){return r(e[0],e[1])})};goog.iter.nextOrValue=function(e,t){try{return goog.iter.toIterator(e).next()}catch(o){if(o!=goog.iter.StopIteration)throw o;return t}};goog.iter.product=function(){if(goog.array.some(arguments,function(e){return!e.length})||!arguments.length)return new goog.iter.Iterator;var e=new goog.iter.Iterator,t=arguments,o=goog.array.repeat(0,t.length);e.next=function(){if(o){for(var e=goog.array.map(o,function(e,o){return t[o][e]}),r=o.length-1;r>=0;r--){goog.asserts.assert(o);if(o[r]<t[r].length-1){o[r]++;break}if(0==r){o=null;break}o[r]=0}return e}throw goog.iter.StopIteration};return e};goog.iter.cycle=function(e){var t=goog.iter.toIterator(e),o=[],r=0;e=new goog.iter.Iterator;var n=!1;e.next=function(){var e=null;if(!n)try{return e=t.next(),o.push(e),e}catch(i){if(i!=goog.iter.StopIteration||goog.array.isEmpty(o))throw i;n=!0}e=o[r];r=(r+1)%o.length;return e};return e};goog.iter.count=function(e,t){var o=e||0,r=goog.isDef(t)?t:1,n=new goog.iter.Iterator;n.next=function(){var e=o;o+=r;return e};return n};goog.iter.repeat=function(e){var t=new goog.iter.Iterator;t.next=goog.functions.constant(e);return t};goog.iter.accumulate=function(e){var t=goog.iter.toIterator(e),o=0;e=new goog.iter.Iterator;e.next=function(){return o+=t.next()};return e};goog.iter.zip=function(){var e=arguments,t=new goog.iter.Iterator;if(0<e.length){var o=goog.array.map(e,goog.iter.toIterator);t.next=function(){return goog.array.map(o,function(e){return e.next()})}}return t};goog.iter.zipLongest=function(e){var t=goog.array.slice(arguments,1),o=new goog.iter.Iterator;if(0<t.length){var r=goog.array.map(t,goog.iter.toIterator);o.next=function(){var t=!1,o=goog.array.map(r,function(o){var r;try{r=o.next(),t=!0}catch(n){if(n!==goog.iter.StopIteration)throw n;r=e}return r});if(!t)throw goog.iter.StopIteration;return o}}return o};goog.iter.compress=function(e,t){var o=goog.iter.toIterator(t);return goog.iter.filter(e,function(){return!!o.next()})};goog.iter.GroupByIterator_=function(e,t){this.iterator=goog.iter.toIterator(e);this.keyFunc=t||goog.functions.identity};goog.inherits(goog.iter.GroupByIterator_,goog.iter.Iterator);goog.iter.GroupByIterator_.prototype.next=function(){for(;this.currentKey==this.targetKey;)this.currentValue=this.iterator.next(),this.currentKey=this.keyFunc(this.currentValue);this.targetKey=this.currentKey;return[this.currentKey,this.groupItems_(this.targetKey)]};goog.iter.GroupByIterator_.prototype.groupItems_=function(e){for(var t=[];this.currentKey==e;){t.push(this.currentValue);try{this.currentValue=this.iterator.next()}catch(o){if(o!==goog.iter.StopIteration)throw o;break}this.currentKey=this.keyFunc(this.currentValue)}return t};goog.iter.groupBy=function(e,t){return new goog.iter.GroupByIterator_(e,t)};goog.iter.starMap=function(e,t,o){var r=goog.iter.toIterator(e);e=new goog.iter.Iterator;e.next=function(){var e=goog.iter.toArray(r.next());return t.apply(o,goog.array.concat(e,void 0,r))};return e};goog.iter.tee=function(e,t){var o=goog.iter.toIterator(e),r=goog.isNumber(t)?t:2,n=goog.array.map(goog.array.range(r),function(){return[]}),i=function(){var e=o.next();goog.array.forEach(n,function(t){t.push(e)})};return goog.array.map(n,function(e){var t=new goog.iter.Iterator;t.next=function(){goog.array.isEmpty(e)&&i();goog.asserts.assert(!goog.array.isEmpty(e));return e.shift()};return t})};goog.iter.enumerate=function(e,t){return goog.iter.zip(goog.iter.count(t),e)};goog.iter.limit=function(e,t){goog.asserts.assert(goog.math.isInt(t)&&t>=0);var o=goog.iter.toIterator(e),r=new goog.iter.Iterator,n=t;r.next=function(){if(0<n--)return o.next();throw goog.iter.StopIteration};return r};goog.iter.consume=function(e,t){goog.asserts.assert(goog.math.isInt(t)&&t>=0);for(var o=goog.iter.toIterator(e);0<t--;)goog.iter.nextOrValue(o,null);return o};goog.iter.slice=function(e,t,o){goog.asserts.assert(goog.math.isInt(t)&&t>=0);e=goog.iter.consume(e,t);goog.isNumber(o)&&(goog.asserts.assert(goog.math.isInt(o)&&o>=t),e=goog.iter.limit(e,o-t));return e};goog.iter.hasDuplicates_=function(e){var t=[];goog.array.removeDuplicates(e,t);
return e.length!=t.length};goog.iter.permutations=function(e,t){var o=goog.iter.toArray(e),r=goog.isNumber(t)?t:o.length,o=goog.array.repeat(o,r),o=goog.iter.product.apply(void 0,o);return goog.iter.filter(o,function(e){return!goog.iter.hasDuplicates_(e)})};goog.iter.combinations=function(e,t){function o(e){return r[e]}var r=goog.iter.toArray(e),n=goog.iter.range(r.length),n=goog.iter.permutations(n,t),i=goog.iter.filter(n,function(e){return goog.array.isSorted(e)}),n=new goog.iter.Iterator;n.next=function(){return goog.array.map(i.next(),o)};return n};goog.iter.combinationsWithReplacement=function(e,t){function o(e){return r[e]}var r=goog.iter.toArray(e),n=goog.array.range(r.length),n=goog.array.repeat(n,t),n=goog.iter.product.apply(void 0,n),i=goog.iter.filter(n,function(e){return goog.array.isSorted(e)}),n=new goog.iter.Iterator;n.next=function(){return goog.array.map(i.next(),o)};return n};goog.structs.Map=function(e){this.map_={};this.keys_=[];this.version_=this.count_=0;var t=arguments.length;if(t>1){if(t%2)throw Error("Uneven number of arguments");for(var o=0;t>o;o+=2)this.set(arguments[o],arguments[o+1])}else e&&this.addAll(e)};goog.structs.Map.prototype.getCount=function(){return this.count_};goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();for(var e=[],t=0;t<this.keys_.length;t++)e.push(this.map_[this.keys_[t]]);return e};goog.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return this.keys_.concat()};goog.structs.Map.prototype.containsKey=function(e){return goog.structs.Map.hasKey_(this.map_,e)};goog.structs.Map.prototype.containsValue=function(e){for(var t=0;t<this.keys_.length;t++){var o=this.keys_[t];if(goog.structs.Map.hasKey_(this.map_,o)&&this.map_[o]==e)return!0}return!1};goog.structs.Map.prototype.equals=function(e,t){if(this===e)return!0;if(this.count_!=e.getCount())return!1;var o=t||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var r,n=0;r=this.keys_[n];n++)if(!o(this.get(r),e.get(r)))return!1;return!0};goog.structs.Map.defaultEquals=function(e,t){return e===t};goog.structs.Map.prototype.isEmpty=function(){return 0==this.count_};goog.structs.Map.prototype.clear=function(){this.map_={};this.version_=this.count_=this.keys_.length=0};goog.structs.Map.prototype.remove=function(e){return goog.structs.Map.hasKey_(this.map_,e)?(delete this.map_[e],this.count_--,this.version_++,this.keys_.length>2*this.count_&&this.cleanupKeysArray_(),!0):!1};goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){for(var e=0,t=0;e<this.keys_.length;){var o=this.keys_[e];goog.structs.Map.hasKey_(this.map_,o)&&(this.keys_[t++]=o);e++}this.keys_.length=t}if(this.count_!=this.keys_.length){for(var r={},t=e=0;e<this.keys_.length;)o=this.keys_[e],goog.structs.Map.hasKey_(r,o)||(this.keys_[t++]=o,r[o]=1),e++;this.keys_.length=t}};goog.structs.Map.prototype.get=function(e,t){return goog.structs.Map.hasKey_(this.map_,e)?this.map_[e]:t};goog.structs.Map.prototype.set=function(e,t){goog.structs.Map.hasKey_(this.map_,e)||(this.count_++,this.keys_.push(e),this.version_++);this.map_[e]=t};goog.structs.Map.prototype.addAll=function(e){var t;e instanceof goog.structs.Map?(t=e.getKeys(),e=e.getValues()):(t=goog.object.getKeys(e),e=goog.object.getValues(e));for(var o=0;o<t.length;o++)this.set(t[o],e[o])};goog.structs.Map.prototype.forEach=function(e,t){for(var o=this.getKeys(),r=0;r<o.length;r++){var n=o[r],i=this.get(n);e.call(t,i,n,this)}};goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)};goog.structs.Map.prototype.transpose=function(){for(var e=new goog.structs.Map,t=0;t<this.keys_.length;t++){var o=this.keys_[t];e.set(this.map_[o],o)}return e};goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();for(var e={},t=0;t<this.keys_.length;t++){var o=this.keys_[t];e[o]=this.map_[o]}return e};goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(!0)};goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(!1)};goog.structs.Map.prototype.__iterator__=function(e){this.cleanupKeysArray_();var t=0,o=this.version_,r=this,n=new goog.iter.Iterator;n.next=function(){if(o!=r.version_)throw Error("The map has changed since the iterator was created");if(t>=r.keys_.length)throw goog.iter.StopIteration;var n=r.keys_[t++];return e?n:r.map_[n]};return n};goog.structs.Map.hasKey_=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};goog.structs.Set=function(e){this.map_=new goog.structs.Map;e&&this.addAll(e)};goog.structs.Set.getKey_=function(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+goog.getUid(e):t.substr(0,1)+e};goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()};goog.structs.Set.prototype.add=function(e){this.map_.set(goog.structs.Set.getKey_(e),e)};goog.structs.Set.prototype.addAll=function(e){e=goog.structs.getValues(e);for(var t=e.length,o=0;t>o;o++)this.add(e[o])};goog.structs.Set.prototype.removeAll=function(e){e=goog.structs.getValues(e);for(var t=e.length,o=0;t>o;o++)this.remove(e[o])};goog.structs.Set.prototype.remove=function(e){return this.map_.remove(goog.structs.Set.getKey_(e))};goog.structs.Set.prototype.clear=function(){this.map_.clear()};goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};goog.structs.Set.prototype.contains=function(e){return this.map_.containsKey(goog.structs.Set.getKey_(e))};goog.structs.Set.prototype.containsAll=function(e){return goog.structs.every(e,this.contains,this)};goog.structs.Set.prototype.intersection=function(e){var t=new goog.structs.Set;e=goog.structs.getValues(e);for(var o=0;o<e.length;o++){var r=e[o];this.contains(r)&&t.add(r)}return t};goog.structs.Set.prototype.difference=function(e){var t=this.clone();t.removeAll(e);return t};goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()};goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)};goog.structs.Set.prototype.equals=function(e){return this.getCount()==goog.structs.getCount(e)&&this.isSubsetOf(e)};goog.structs.Set.prototype.isSubsetOf=function(e){var t=goog.structs.getCount(e);if(this.getCount()>t)return!1;!(e instanceof goog.structs.Set)&&t>5&&(e=new goog.structs.Set(e));return goog.structs.every(this,function(t){return goog.structs.contains(e,t)})};goog.structs.Set.prototype.__iterator__=function(){return this.map_.__iterator__(!1)};goog.debug.LOGGING_ENABLED=goog.DEBUG;goog.debug.catchErrors=function(e,t,o){o=o||goog.global;var r=o.onerror,n=!!t;goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("535.3")&&(n=!n);o.onerror=function(t,o,i,s,a){r&&r(t,o,i,s,a);e({message:t,fileName:o,line:i,col:s,error:a});return n}};goog.debug.expose=function(e,t){if("undefined"==typeof e)return"undefined";if(null==e)return"NULL";var o,r=[];for(o in e)if(t||!goog.isFunction(e[o])){var n=o+" = ";try{n+=e[o]}catch(i){n+="*** "+i+" ***"}r.push(n)}return r.join("\n")};goog.debug.deepExpose=function(e,t){var o=[],r=function(e,n,i){var s=n+"  ";i=new goog.structs.Set(i);try{if(goog.isDef(e))if(goog.isNull(e))o.push("NULL");else if(goog.isString(e))o.push('"'+e.replace(/\n/g,"\n"+n)+'"');else if(goog.isFunction(e))o.push(String(e).replace(/\n/g,"\n"+n));else if(goog.isObject(e))if(i.contains(e))o.push("*** reference loop detected ***");else{i.add(e);o.push("{");for(var a in e)(t||!goog.isFunction(e[a]))&&(o.push("\n"),o.push(s),o.push(a+" = "),r(e[a],s,i));o.push("\n"+n+"}")}else o.push(e);else o.push("undefined")}catch(g){o.push("*** "+g+" ***")}};r(e,"",new goog.structs.Set);return o.join("")};goog.debug.exposeArray=function(e){for(var t=[],o=0;o<e.length;o++)t.push(goog.isArray(e[o])?goog.debug.exposeArray(e[o]):e[o]);return"[ "+t.join(", ")+" ]"};goog.debug.exposeException=function(e,t){var o=goog.debug.exposeExceptionAsHtml(e,t);return goog.html.SafeHtml.unwrap(o)};goog.debug.exposeExceptionAsHtml=function(e,t){try{var o=goog.debug.normalizeErrorObject(e),r=goog.debug.createViewSourceUrl_(o.fileName);return goog.html.SafeHtml.concat(goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Message: "+o.message+"\nUrl: "),goog.html.SafeHtml.create("a",{href:r,target:"_new"},o.fileName),goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("\nLine: "+o.lineNumber+"\n\nBrowser stack:\n"+o.stack+"-> [end]\n\nJS stack traversal:\n"+goog.debug.getStacktrace(t)+"-> "))}catch(n){return goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Exception trying to expose exception! You win, we lose. "+n)}};goog.debug.createViewSourceUrl_=function(e){goog.isDefAndNotNull(e)||(e="");if(!/^https?:\/\//i.test(e))return goog.html.SafeUrl.fromConstant(goog.string.Const.from("sanitizedviewsrc"));e=goog.html.SafeUrl.sanitize(e);return goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("view-source scheme plus HTTP/HTTPS URL"),"view-source:"+goog.html.SafeUrl.unwrap(e))};goog.debug.normalizeErrorObject=function(e){var t=goog.getObjectByName("window.location.href");if(goog.isString(e))return{message:e,name:"Unknown error",lineNumber:"Not available",fileName:t,stack:"Not available"};var o,r,n=!1;try{o=e.lineNumber||e.line||"Not available"}catch(i){o="Not available",n=!0}try{r=e.fileName||e.filename||e.sourceURL||goog.global.$googDebugFname||t}catch(s){r="Not available",n=!0}return!n&&e.lineNumber&&e.fileName&&e.stack&&e.message&&e.name?e:{message:e.message||"Not available",name:e.name||"UnknownError",lineNumber:o,fileName:r,stack:e.stack||"Not available"}};goog.debug.enhanceError=function(e,t){var o;"string"==typeof e?(o=Error(e),Error.captureStackTrace&&Error.captureStackTrace(o,goog.debug.enhanceError)):o=e;o.stack||(o.stack=goog.debug.getStacktrace(goog.debug.enhanceError));if(t){for(var r=0;o["message"+r];)++r;o["message"+r]=String(t)}return o};goog.debug.getStacktraceSimple=function(e){if(goog.STRICT_MODE_COMPATIBLE){var t=goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);if(t)return t}for(var t=[],o=arguments.callee.caller,r=0;o&&(!e||e>r);){t.push(goog.debug.getFunctionName(o));t.push("()\n");try{o=o.caller}catch(n){t.push("[exception trying to get caller]\n");break}r++;if(r>=goog.debug.MAX_STACK_DEPTH){t.push("[...long stack...]");break}}t.push(e&&r>=e?"[...reached max depth limit...]":"[end]");return t.join("")};goog.debug.MAX_STACK_DEPTH=50;goog.debug.getNativeStackTrace_=function(e){var t=Error();if(Error.captureStackTrace)return Error.captureStackTrace(t,e),String(t.stack);try{throw t}catch(o){t=o}return(e=t.stack)?String(e):null};goog.debug.getStacktrace=function(e){var t;goog.STRICT_MODE_COMPATIBLE&&(t=goog.debug.getNativeStackTrace_(e||goog.debug.getStacktrace));t||(t=goog.debug.getStacktraceHelper_(e||arguments.callee.caller,[]));return t};goog.debug.getStacktraceHelper_=function(e,t){var o=[];if(goog.array.contains(t,e))o.push("[...circular reference...]");else if(e&&t.length<goog.debug.MAX_STACK_DEPTH){o.push(goog.debug.getFunctionName(e)+"(");for(var r=e.arguments,n=0;r&&n<r.length;n++){n>0&&o.push(", ");var i;i=r[n];switch(typeof i){case"object":i=i?"object":"null";break;case"string":break;case"number":i=String(i);break;case"boolean":i=i?"true":"false";break;case"function":i=(i=goog.debug.getFunctionName(i))?i:"[fn]";break;default:i=typeof i}40<i.length&&(i=i.substr(0,40)+"...");o.push(i)}t.push(e);o.push(")\n");try{o.push(goog.debug.getStacktraceHelper_(e.caller,t))}catch(s){o.push("[exception trying to get caller]\n")}}else o.push(e?"[...long stack...]":"[end]");return o.join("")};goog.debug.setFunctionResolver=function(e){goog.debug.fnNameResolver_=e};goog.debug.getFunctionName=function(e){if(goog.debug.fnNameCache_[e])return goog.debug.fnNameCache_[e];if(goog.debug.fnNameResolver_){var t=goog.debug.fnNameResolver_(e);if(t)return goog.debug.fnNameCache_[e]=t}e=String(e);goog.debug.fnNameCache_[e]||(t=/function ([^\(]+)/.exec(e),goog.debug.fnNameCache_[e]=t?t[1]:"[Anonymous]");return goog.debug.fnNameCache_[e]};goog.debug.makeWhitespaceVisible=function(e){return e.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")};goog.debug.runtimeType=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e};goog.debug.fnNameCache_={};goog.debug.LogRecord=function(e,t,o,r,n){this.reset(e,t,o,r,n)};goog.debug.LogRecord.prototype.sequenceNumber_=0;goog.debug.LogRecord.prototype.exception_=null;goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS=!0;goog.debug.LogRecord.nextSequenceNumber_=0;goog.debug.LogRecord.prototype.reset=function(e,t,o,r,n){goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS&&(this.sequenceNumber_="number"==typeof n?n:goog.debug.LogRecord.nextSequenceNumber_++);this.time_=r||goog.now();this.level_=e;this.msg_=t;this.loggerName_=o;delete this.exception_};goog.debug.LogRecord.prototype.getLoggerName=function(){return this.loggerName_};goog.debug.LogRecord.prototype.getException=function(){return this.exception_};goog.debug.LogRecord.prototype.setException=function(e){this.exception_=e};goog.debug.LogRecord.prototype.setLoggerName=function(e){this.loggerName_=e};goog.debug.LogRecord.prototype.getLevel=function(){return this.level_};goog.debug.LogRecord.prototype.setLevel=function(e){this.level_=e};goog.debug.LogRecord.prototype.getMessage=function(){return this.msg_};goog.debug.LogRecord.prototype.setMessage=function(e){this.msg_=e};goog.debug.LogRecord.prototype.getMillis=function(){return this.time_};goog.debug.LogRecord.prototype.setMillis=function(e){this.time_=e};goog.debug.LogRecord.prototype.getSequenceNumber=function(){return this.sequenceNumber_};goog.debug.LogBuffer=function(){goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(),"Cannot use goog.debug.LogBuffer without defining goog.debug.LogBuffer.CAPACITY.");this.clear()};goog.debug.LogBuffer.getInstance=function(){goog.debug.LogBuffer.instance_||(goog.debug.LogBuffer.instance_=new goog.debug.LogBuffer);return goog.debug.LogBuffer.instance_};goog.debug.LogBuffer.CAPACITY=0;goog.debug.LogBuffer.prototype.addRecord=function(e,t,o){var r=(this.curIndex_+1)%goog.debug.LogBuffer.CAPACITY;this.curIndex_=r;if(this.isFull_)return r=this.buffer_[r],r.reset(e,t,o),r;this.isFull_=r==goog.debug.LogBuffer.CAPACITY-1;return this.buffer_[r]=new goog.debug.LogRecord(e,t,o)};goog.debug.LogBuffer.isBufferingEnabled=function(){return 0<goog.debug.LogBuffer.CAPACITY};goog.debug.LogBuffer.prototype.clear=function(){this.buffer_=Array(goog.debug.LogBuffer.CAPACITY);this.curIndex_=-1;this.isFull_=!1};goog.debug.LogBuffer.prototype.forEachRecord=function(e){var t=this.buffer_;if(t[0]){var o=this.curIndex_,r=this.isFull_?o:-1;do r=(r+1)%goog.debug.LogBuffer.CAPACITY,e(t[r]);while(r!=o)}};goog.debug.Logger=function(e){this.name_=e;this.handlers_=this.children_=this.level_=this.parent_=null};goog.debug.Logger.ROOT_LOGGER_NAME="";goog.debug.Logger.ENABLE_HIERARCHY=!0;goog.debug.Logger.ENABLE_HIERARCHY||(goog.debug.Logger.rootHandlers_=[]);goog.debug.Logger.Level=function(e,t){this.name=e;this.value=t};goog.debug.Logger.Level.prototype.toString=function(){return this.name};goog.debug.Logger.Level.OFF=new goog.debug.Logger.Level("OFF",1/0);goog.debug.Logger.Level.SHOUT=new goog.debug.Logger.Level("SHOUT",1200);goog.debug.Logger.Level.SEVERE=new goog.debug.Logger.Level("SEVERE",1e3);goog.debug.Logger.Level.WARNING=new goog.debug.Logger.Level("WARNING",900);goog.debug.Logger.Level.INFO=new goog.debug.Logger.Level("INFO",800);goog.debug.Logger.Level.CONFIG=new goog.debug.Logger.Level("CONFIG",700);goog.debug.Logger.Level.FINE=new goog.debug.Logger.Level("FINE",500);goog.debug.Logger.Level.FINER=new goog.debug.Logger.Level("FINER",400);goog.debug.Logger.Level.FINEST=new goog.debug.Logger.Level("FINEST",300);goog.debug.Logger.Level.ALL=new goog.debug.Logger.Level("ALL",0);goog.debug.Logger.Level.PREDEFINED_LEVELS=[goog.debug.Logger.Level.OFF,goog.debug.Logger.Level.SHOUT,goog.debug.Logger.Level.SEVERE,goog.debug.Logger.Level.WARNING,goog.debug.Logger.Level.INFO,goog.debug.Logger.Level.CONFIG,goog.debug.Logger.Level.FINE,goog.debug.Logger.Level.FINER,goog.debug.Logger.Level.FINEST,goog.debug.Logger.Level.ALL];goog.debug.Logger.Level.predefinedLevelsCache_=null;goog.debug.Logger.Level.createPredefinedLevelsCache_=function(){goog.debug.Logger.Level.predefinedLevelsCache_={};for(var e,t=0;e=goog.debug.Logger.Level.PREDEFINED_LEVELS[t];t++)goog.debug.Logger.Level.predefinedLevelsCache_[e.value]=e,goog.debug.Logger.Level.predefinedLevelsCache_[e.name]=e};goog.debug.Logger.Level.getPredefinedLevel=function(e){goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_();return goog.debug.Logger.Level.predefinedLevelsCache_[e]||null};goog.debug.Logger.Level.getPredefinedLevelByValue=function(e){goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_();if(e in goog.debug.Logger.Level.predefinedLevelsCache_)return goog.debug.Logger.Level.predefinedLevelsCache_[e];for(var t=0;t<goog.debug.Logger.Level.PREDEFINED_LEVELS.length;++t){var o=goog.debug.Logger.Level.PREDEFINED_LEVELS[t];if(o.value<=e)return o}return null};goog.debug.Logger.getLogger=function(e){return goog.debug.LogManager.getLogger(e)};goog.debug.Logger.logToProfilers=function(e){goog.global.console&&(goog.global.console.timeStamp?goog.global.console.timeStamp(e):goog.global.console.markTimeline&&goog.global.console.markTimeline(e));goog.global.msWriteProfilerMark&&goog.global.msWriteProfilerMark(e)};goog.debug.Logger.prototype.getName=function(){return this.name_};goog.debug.Logger.prototype.addHandler=function(e){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?(this.handlers_||(this.handlers_=[]),this.handlers_.push(e)):(goog.asserts.assert(!this.name_,"Cannot call addHandler on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootHandlers_.push(e)))};goog.debug.Logger.prototype.removeHandler=function(e){if(goog.debug.LOGGING_ENABLED){var t=goog.debug.Logger.ENABLE_HIERARCHY?this.handlers_:goog.debug.Logger.rootHandlers_;return!!t&&goog.array.remove(t,e)}return!1};goog.debug.Logger.prototype.getParent=function(){return this.parent_};goog.debug.Logger.prototype.getChildren=function(){this.children_||(this.children_={});return this.children_};goog.debug.Logger.prototype.setLevel=function(e){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?this.level_=e:(goog.asserts.assert(!this.name_,"Cannot call setLevel() on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootLevel_=e))};goog.debug.Logger.prototype.getLevel=function(){return goog.debug.LOGGING_ENABLED?this.level_:goog.debug.Logger.Level.OFF};goog.debug.Logger.prototype.getEffectiveLevel=function(){if(!goog.debug.LOGGING_ENABLED)return goog.debug.Logger.Level.OFF;if(!goog.debug.Logger.ENABLE_HIERARCHY)return goog.debug.Logger.rootLevel_;if(this.level_)return this.level_;if(this.parent_)return this.parent_.getEffectiveLevel();goog.asserts.fail("Root logger has no level set.");return null};goog.debug.Logger.prototype.isLoggable=function(e){return goog.debug.LOGGING_ENABLED&&e.value>=this.getEffectiveLevel().value};goog.debug.Logger.prototype.log=function(e,t,o){goog.debug.LOGGING_ENABLED&&this.isLoggable(e)&&(goog.isFunction(t)&&(t=t()),this.doLogRecord_(this.getLogRecord(e,t,o)))};goog.debug.Logger.prototype.getLogRecord=function(e,t,o){e=goog.debug.LogBuffer.isBufferingEnabled()?goog.debug.LogBuffer.getInstance().addRecord(e,t,this.name_):new goog.debug.LogRecord(e,String(t),this.name_);o&&e.setException(o);return e};goog.debug.Logger.prototype.shout=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SHOUT,e,t)};goog.debug.Logger.prototype.severe=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SEVERE,e,t)};goog.debug.Logger.prototype.warning=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.WARNING,e,t)};goog.debug.Logger.prototype.info=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.INFO,e,t)};goog.debug.Logger.prototype.config=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.CONFIG,e,t)};goog.debug.Logger.prototype.fine=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINE,e,t)};goog.debug.Logger.prototype.finer=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINER,e,t)};goog.debug.Logger.prototype.finest=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINEST,e,t)};goog.debug.Logger.prototype.logRecord=function(e){goog.debug.LOGGING_ENABLED&&this.isLoggable(e.getLevel())&&this.doLogRecord_(e)};goog.debug.Logger.prototype.doLogRecord_=function(e){goog.debug.Logger.logToProfilers("log:"+e.getMessage());if(goog.debug.Logger.ENABLE_HIERARCHY)for(var t=this;t;)t.callPublish_(e),t=t.getParent();else for(var o,t=0;o=goog.debug.Logger.rootHandlers_[t++];)o(e)};goog.debug.Logger.prototype.callPublish_=function(e){if(this.handlers_)for(var t,o=0;t=this.handlers_[o];o++)t(e)};goog.debug.Logger.prototype.setParent_=function(e){this.parent_=e};goog.debug.Logger.prototype.addChild_=function(e,t){this.getChildren()[e]=t};goog.debug.LogManager={};goog.debug.LogManager.loggers_={};goog.debug.LogManager.rootLogger_=null;goog.debug.LogManager.initialize=function(){goog.debug.LogManager.rootLogger_||(goog.debug.LogManager.rootLogger_=new goog.debug.Logger(goog.debug.Logger.ROOT_LOGGER_NAME),goog.debug.LogManager.loggers_[goog.debug.Logger.ROOT_LOGGER_NAME]=goog.debug.LogManager.rootLogger_,goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG))};goog.debug.LogManager.getLoggers=function(){return goog.debug.LogManager.loggers_};goog.debug.LogManager.getRoot=function(){goog.debug.LogManager.initialize();return goog.debug.LogManager.rootLogger_};goog.debug.LogManager.getLogger=function(e){goog.debug.LogManager.initialize();return goog.debug.LogManager.loggers_[e]||goog.debug.LogManager.createLogger_(e)};goog.debug.LogManager.createFunctionForCatchErrors=function(e){return function(t){(e||goog.debug.LogManager.getRoot()).severe("Error: "+t.message+" ("+t.fileName+" @ Line: "+t.line+")")}};goog.debug.LogManager.createLogger_=function(e){var t=new goog.debug.Logger(e);if(goog.debug.Logger.ENABLE_HIERARCHY){var o=e.lastIndexOf("."),r=e.substr(0,o),o=e.substr(o+1),r=goog.debug.LogManager.getLogger(r);r.addChild_(o,t);t.setParent_(r)}return goog.debug.LogManager.loggers_[e]=t};goog.debug.RelativeTimeProvider=function(){this.relativeTimeStart_=goog.now()};goog.debug.RelativeTimeProvider.defaultInstance_=new goog.debug.RelativeTimeProvider;goog.debug.RelativeTimeProvider.prototype.set=function(e){this.relativeTimeStart_=e};goog.debug.RelativeTimeProvider.prototype.reset=function(){this.set(goog.now())};goog.debug.RelativeTimeProvider.prototype.get=function(){return this.relativeTimeStart_};goog.debug.RelativeTimeProvider.getDefaultInstance=function(){return goog.debug.RelativeTimeProvider.defaultInstance_};goog.debug.Formatter=function(e){this.prefix_=e||"";this.startTimeProvider_=goog.debug.RelativeTimeProvider.getDefaultInstance()};goog.debug.Formatter.prototype.appendNewline=!0;goog.debug.Formatter.prototype.showAbsoluteTime=!0;goog.debug.Formatter.prototype.showRelativeTime=!0;goog.debug.Formatter.prototype.showLoggerName=!0;goog.debug.Formatter.prototype.showExceptionText=!1;goog.debug.Formatter.prototype.showSeverityLevel=!1;goog.debug.Formatter.prototype.setStartTimeProvider=function(e){this.startTimeProvider_=e};goog.debug.Formatter.prototype.getStartTimeProvider=function(){return this.startTimeProvider_};goog.debug.Formatter.prototype.resetRelativeTimeStart=function(){this.startTimeProvider_.reset()};goog.debug.Formatter.getDateTimeStamp_=function(e){e=new Date(e.getMillis());return goog.debug.Formatter.getTwoDigitString_(e.getFullYear()-2e3)+goog.debug.Formatter.getTwoDigitString_(e.getMonth()+1)+goog.debug.Formatter.getTwoDigitString_(e.getDate())+" "+goog.debug.Formatter.getTwoDigitString_(e.getHours())+":"+goog.debug.Formatter.getTwoDigitString_(e.getMinutes())+":"+goog.debug.Formatter.getTwoDigitString_(e.getSeconds())+"."+goog.debug.Formatter.getTwoDigitString_(Math.floor(e.getMilliseconds()/10))};goog.debug.Formatter.getTwoDigitString_=function(e){return 10>e?"0"+e:String(e)};goog.debug.Formatter.getRelativeTime_=function(e,t){var o=(e.getMillis()-t)/1e3,r=o.toFixed(3),n=0;if(1>o)n=2;else for(;100>o;)n++,o*=10;for(;0<n--;)r=" "+r;return r};goog.debug.HtmlFormatter=function(e){goog.debug.Formatter.call(this,e)};goog.inherits(goog.debug.HtmlFormatter,goog.debug.Formatter);goog.debug.HtmlFormatter.prototype.showExceptionText=!0;goog.debug.HtmlFormatter.prototype.formatRecord=function(e){return e?this.formatRecordAsHtml(e).getTypedStringValue():""};goog.debug.HtmlFormatter.prototype.formatRecordAsHtml=function(e){if(!e)return goog.html.SafeHtml.EMPTY;var t;switch(e.getLevel().value){case goog.debug.Logger.Level.SHOUT.value:t="dbg-sh";break;case goog.debug.Logger.Level.SEVERE.value:t="dbg-sev";break;case goog.debug.Logger.Level.WARNING.value:t="dbg-w";break;case goog.debug.Logger.Level.INFO.value:t="dbg-i";break;default:t="dbg-f"}var o=[];o.push(this.prefix_," ");this.showAbsoluteTime&&o.push("[",goog.debug.Formatter.getDateTimeStamp_(e),"] ");this.showRelativeTime&&o.push("[",goog.debug.Formatter.getRelativeTime_(e,this.startTimeProvider_.get()),"s] ");this.showLoggerName&&o.push("[",e.getLoggerName(),"] ");this.showSeverityLevel&&o.push("[",e.getLevel().name,"] ");var o=goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(o.join("")),r=goog.html.SafeHtml.EMPTY;this.showExceptionText&&e.getException()&&(r=goog.html.SafeHtml.concat(goog.html.SafeHtml.create("br"),goog.debug.exposeExceptionAsHtml(e.getException())));e=goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(e.getMessage());t=goog.html.SafeHtml.create("span",{"class":t},goog.html.SafeHtml.concat(e,r));return this.appendNewline?goog.html.SafeHtml.concat(o,t,goog.html.SafeHtml.create("br")):goog.html.SafeHtml.concat(o,t)};goog.debug.TextFormatter=function(e){goog.debug.Formatter.call(this,e)};goog.inherits(goog.debug.TextFormatter,goog.debug.Formatter);goog.debug.TextFormatter.prototype.formatRecord=function(e){var t=[];t.push(this.prefix_," ");this.showAbsoluteTime&&t.push("[",goog.debug.Formatter.getDateTimeStamp_(e),"] ");this.showRelativeTime&&t.push("[",goog.debug.Formatter.getRelativeTime_(e,this.startTimeProvider_.get()),"s] ");this.showLoggerName&&t.push("[",e.getLoggerName(),"] ");this.showSeverityLevel&&t.push("[",e.getLevel().name,"] ");t.push(e.getMessage());this.showExceptionText&&(e=e.getException())&&t.push("\n",e instanceof Error?e.message:e.toString());this.appendNewline&&t.push("\n");return t.join("")};goog.debug.TextFormatter.prototype.formatRecordAsHtml=function(e){return goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(goog.debug.TextFormatter.prototype.formatRecord(e))};goog.debug.Console=function(){this.publishHandler_=goog.bind(this.addLogRecord,this);this.formatter_=new goog.debug.TextFormatter;this.formatter_.showAbsoluteTime=!1;this.formatter_.showExceptionText=!1;this.isCapturing_=this.formatter_.appendNewline=!1;this.logBuffer_="";this.filteredLoggers_={}};goog.debug.Console.prototype.getFormatter=function(){return this.formatter_};goog.debug.Console.prototype.setCapturing=function(e){if(e!=this.isCapturing_){var t=goog.debug.LogManager.getRoot();e?t.addHandler(this.publishHandler_):(t.removeHandler(this.publishHandler_),this.logBuffer="");this.isCapturing_=e}};goog.debug.Console.prototype.addLogRecord=function(e){if(!this.filteredLoggers_[e.getLoggerName()]){var t=this.formatter_.formatRecord(e),o=goog.debug.Console.console_;if(o)switch(e.getLevel()){case goog.debug.Logger.Level.SHOUT:goog.debug.Console.logToConsole_(o,"info",t);break;case goog.debug.Logger.Level.SEVERE:goog.debug.Console.logToConsole_(o,"error",t);break;case goog.debug.Logger.Level.WARNING:goog.debug.Console.logToConsole_(o,"warn",t);break;default:goog.debug.Console.logToConsole_(o,"debug",t)}else this.logBuffer_+=t}};goog.debug.Console.prototype.addFilter=function(e){this.filteredLoggers_[e]=!0};goog.debug.Console.prototype.removeFilter=function(e){delete this.filteredLoggers_[e]};goog.debug.Console.instance=null;goog.debug.Console.console_=goog.global.console;goog.debug.Console.setConsole=function(e){goog.debug.Console.console_=e};goog.debug.Console.autoInstall=function(){goog.debug.Console.instance||(goog.debug.Console.instance=new goog.debug.Console);goog.global.location&&-1!=goog.global.location.href.indexOf("Debug=true")&&goog.debug.Console.instance.setCapturing(!0)};goog.debug.Console.show=function(){alert(goog.debug.Console.instance.logBuffer_)};goog.debug.Console.logToConsole_=function(e,t,o){e[t]?e[t](o):e.log(o)};goog.dom.ViewportSizeMonitor=function(e){goog.events.EventTarget.call(this);this.window_=e||window;this.listenerKey_=goog.events.listen(this.window_,goog.events.EventType.RESIZE,this.handleResize_,!1,this);this.size_=goog.dom.getViewportSize(this.window_)};goog.inherits(goog.dom.ViewportSizeMonitor,goog.events.EventTarget);goog.dom.ViewportSizeMonitor.getInstanceForWindow=function(e){e=e||window;var t=goog.getUid(e);return goog.dom.ViewportSizeMonitor.windowInstanceMap_[t]=goog.dom.ViewportSizeMonitor.windowInstanceMap_[t]||new goog.dom.ViewportSizeMonitor(e)};goog.dom.ViewportSizeMonitor.removeInstanceForWindow=function(e){e=goog.getUid(e||window);goog.dispose(goog.dom.ViewportSizeMonitor.windowInstanceMap_[e]);delete goog.dom.ViewportSizeMonitor.windowInstanceMap_[e]};goog.dom.ViewportSizeMonitor.windowInstanceMap_={};goog.dom.ViewportSizeMonitor.prototype.getSize=function(){return this.size_?this.size_.clone():null};goog.dom.ViewportSizeMonitor.prototype.disposeInternal=function(){goog.dom.ViewportSizeMonitor.superClass_.disposeInternal.call(this);this.listenerKey_&&(goog.events.unlistenByKey(this.listenerKey_),this.listenerKey_=null);this.size_=this.window_=null};goog.dom.ViewportSizeMonitor.prototype.handleResize_=function(e){e=goog.dom.getViewportSize(this.window_);goog.math.Size.equals(e,this.size_)||(this.size_=e,this.dispatchEvent(goog.events.EventType.RESIZE))};goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};goog.events.KeyCodes.isTextModifyingKeyEvent=function(e){if(e.altKey&&!e.ctrlKey||e.metaKey||e.keyCode>=goog.events.KeyCodes.F1&&e.keyCode<=goog.events.KeyCodes.F12)return!1;switch(e.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.VK_NONAME:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;
case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;default:return e.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||e.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}};goog.events.KeyCodes.firesKeyPressEvent=function(e,t,o,r,n){if(!(goog.userAgent.IE||goog.userAgent.EDGE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525")))return!0;if(goog.userAgent.MAC&&n)return goog.events.KeyCodes.isCharacterKey(e);if(n&&!r)return!1;goog.isNumber(t)&&(t=goog.events.KeyCodes.normalizeKeyCode(t));if(!o&&(t==goog.events.KeyCodes.CTRL||t==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&t==goog.events.KeyCodes.META))return!1;if((goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&r&&o)switch(e){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return!1}if(goog.userAgent.IE&&r&&t==e)return!1;switch(e){case goog.events.KeyCodes.ENTER:return!0;case goog.events.KeyCodes.ESC:return!(goog.userAgent.WEBKIT||goog.userAgent.EDGE)}return goog.events.KeyCodes.isCharacterKey(e)};goog.events.KeyCodes.isCharacterKey=function(e){if(e>=goog.events.KeyCodes.ZERO&&e<=goog.events.KeyCodes.NINE||e>=goog.events.KeyCodes.NUM_ZERO&&e<=goog.events.KeyCodes.NUM_MULTIPLY||e>=goog.events.KeyCodes.A&&e<=goog.events.KeyCodes.Z||(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&0==e)return!0;switch(e){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.AT_SIGN:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return!0;default:return!1}};goog.events.KeyCodes.normalizeKeyCode=function(e){return goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(e):goog.userAgent.MAC&&goog.userAgent.WEBKIT?goog.events.KeyCodes.normalizeMacWebKitKeyCode(e):e};goog.events.KeyCodes.normalizeGeckoKeyCode=function(e){switch(e){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.FF_DASH:return goog.events.KeyCodes.DASH;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return e}};goog.events.KeyCodes.normalizeMacWebKitKeyCode=function(e){switch(e){case goog.events.KeyCodes.MAC_WK_CMD_RIGHT:return goog.events.KeyCodes.META;default:return e}};goog.events.KeyHandler=function(e,t){goog.events.EventTarget.call(this);e&&this.attach(e,t)};goog.inherits(goog.events.KeyHandler,goog.events.EventTarget);goog.events.KeyHandler.prototype.element_=null;goog.events.KeyHandler.prototype.keyPressKey_=null;goog.events.KeyHandler.prototype.keyDownKey_=null;goog.events.KeyHandler.prototype.keyUpKey_=null;goog.events.KeyHandler.prototype.lastKey_=-1;goog.events.KeyHandler.prototype.keyCode_=-1;goog.events.KeyHandler.prototype.altKey_=!1;goog.events.KeyHandler.EventType={KEY:"key"};goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.USES_KEYDOWN_=goog.userAgent.IE||goog.userAgent.EDGE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525");goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO;goog.events.KeyHandler.prototype.handleKeyDown_=function(e){(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!e.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!e.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!e.metaKey)&&this.resetState();-1==this.lastKey_&&(e.ctrlKey&&e.keyCode!=goog.events.KeyCodes.CTRL?this.lastKey_=goog.events.KeyCodes.CTRL:e.altKey&&e.keyCode!=goog.events.KeyCodes.ALT?this.lastKey_=goog.events.KeyCodes.ALT:e.metaKey&&e.keyCode!=goog.events.KeyCodes.META&&(this.lastKey_=goog.events.KeyCodes.META));goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(e.keyCode,this.lastKey_,e.shiftKey,e.ctrlKey,e.altKey)?this.handleEvent(e):(this.keyCode_=goog.events.KeyCodes.normalizeKeyCode(e.keyCode),goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(this.altKey_=e.altKey))};goog.events.KeyHandler.prototype.resetState=function(){this.keyCode_=this.lastKey_=-1};goog.events.KeyHandler.prototype.handleKeyup_=function(e){this.resetState();this.altKey_=e.altKey};goog.events.KeyHandler.prototype.handleEvent=function(e){var t,o,r=e.getBrowserEvent(),n=r.altKey;goog.userAgent.IE&&e.type==goog.events.EventType.KEYPRESS?(t=this.keyCode_,o=t!=goog.events.KeyCodes.ENTER&&t!=goog.events.KeyCodes.ESC?r.keyCode:0):(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&e.type==goog.events.EventType.KEYPRESS?(t=this.keyCode_,o=0<=r.charCode&&63232>r.charCode&&goog.events.KeyCodes.isCharacterKey(t)?r.charCode:0):goog.userAgent.OPERA&&!goog.userAgent.WEBKIT?(t=this.keyCode_,o=goog.events.KeyCodes.isCharacterKey(t)?r.keyCode:0):(t=r.keyCode||this.keyCode_,o=r.charCode||0,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(n=this.altKey_),goog.userAgent.MAC&&o==goog.events.KeyCodes.QUESTION_MARK&&t==goog.events.KeyCodes.WIN_KEY&&(t=goog.events.KeyCodes.SLASH));var i=t=goog.events.KeyCodes.normalizeKeyCode(t),s=r.keyIdentifier;t?t>=63232&&t in goog.events.KeyHandler.safariKey_?i=goog.events.KeyHandler.safariKey_[t]:25==t&&e.shiftKey&&(i=9):s&&s in goog.events.KeyHandler.keyIdentifier_&&(i=goog.events.KeyHandler.keyIdentifier_[s]);e=i==this.lastKey_;this.lastKey_=i;r=new goog.events.KeyEvent(i,o,e,r);r.altKey=n;this.dispatchEvent(r)};goog.events.KeyHandler.prototype.getElement=function(){return this.element_};goog.events.KeyHandler.prototype.attach=function(e,t){this.keyUpKey_&&this.detach();this.element_=e;this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,t);this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,t,this);this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,t,this)};goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null);this.element_=null;this.keyCode_=this.lastKey_=-1};goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this);this.detach()};goog.events.KeyEvent=function(e,t,o,r){goog.events.BrowserEvent.call(this,r);this.type=goog.events.KeyHandler.EventType.KEY;this.keyCode=e;this.charCode=t;this.repeat=o};goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent);goog.events.MouseWheelHandler=function(e,t){goog.events.EventTarget.call(this);this.element_=e;var o=goog.dom.isElement(this.element_)?this.element_:this.element_?this.element_.body:null;this.isRtl_=!!o&&goog.style.isRightToLeft(o);this.listenKey_=goog.events.listen(this.element_,goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel",this,t)};goog.inherits(goog.events.MouseWheelHandler,goog.events.EventTarget);goog.events.MouseWheelHandler.EventType={MOUSEWHEEL:"mousewheel"};goog.events.MouseWheelHandler.prototype.setMaxDeltaX=function(e){this.maxDeltaX_=e};goog.events.MouseWheelHandler.prototype.setMaxDeltaY=function(e){this.maxDeltaY_=e};goog.events.MouseWheelHandler.prototype.handleEvent=function(e){var t=0,o=0,r=0;e=e.getBrowserEvent();if("mousewheel"==e.type){o=1;(goog.userAgent.IE||goog.userAgent.WEBKIT&&(goog.userAgent.WINDOWS||goog.userAgent.isVersionOrHigher("532.0")))&&(o=40);r=goog.events.MouseWheelHandler.smartScale_(-e.wheelDelta,o);goog.isDef(e.wheelDeltaX)?(t=goog.events.MouseWheelHandler.smartScale_(-e.wheelDeltaX,o),o=goog.events.MouseWheelHandler.smartScale_(-e.wheelDeltaY,o)):o=r}else r=e.detail,r>100?r=3:-100>r&&(r=-3),goog.isDef(e.axis)&&e.axis===e.HORIZONTAL_AXIS?t=r:o=r;goog.isNumber(this.maxDeltaX_)&&(t=goog.math.clamp(t,-this.maxDeltaX_,this.maxDeltaX_));goog.isNumber(this.maxDeltaY_)&&(o=goog.math.clamp(o,-this.maxDeltaY_,this.maxDeltaY_));this.isRtl_&&(t=-t);t=new goog.events.MouseWheelEvent(r,e,t,o);this.dispatchEvent(t)};goog.events.MouseWheelHandler.smartScale_=function(e,t){return goog.userAgent.WEBKIT&&(goog.userAgent.MAC||goog.userAgent.LINUX)&&0!=e%t?e:e/t};goog.events.MouseWheelHandler.prototype.disposeInternal=function(){goog.events.MouseWheelHandler.superClass_.disposeInternal.call(this);goog.events.unlistenByKey(this.listenKey_);this.listenKey_=null};goog.events.MouseWheelEvent=function(e,t,o,r){goog.events.BrowserEvent.call(this,t);this.type=goog.events.MouseWheelHandler.EventType.MOUSEWHEEL;this.detail=e;this.deltaX=o;this.deltaY=r};goog.inherits(goog.events.MouseWheelEvent,goog.events.BrowserEvent);goog.log={};goog.log.ENABLED=goog.debug.LOGGING_ENABLED;goog.log.ROOT_LOGGER_NAME=goog.debug.Logger.ROOT_LOGGER_NAME;goog.log.Logger=goog.debug.Logger;goog.log.Level=goog.debug.Logger.Level;goog.log.LogRecord=goog.debug.LogRecord;goog.log.getLogger=function(e,t){if(goog.log.ENABLED){var o=goog.debug.LogManager.getLogger(e);t&&o&&o.setLevel(t);return o}return null};goog.log.addHandler=function(e,t){goog.log.ENABLED&&e&&e.addHandler(t)};goog.log.removeHandler=function(e,t){return goog.log.ENABLED&&e?e.removeHandler(t):!1};goog.log.log=function(e,t,o,r){goog.log.ENABLED&&e&&e.log(t,o,r)};goog.log.error=function(e,t,o){goog.log.ENABLED&&e&&e.severe(t,o)};goog.log.warning=function(e,t,o){goog.log.ENABLED&&e&&e.warning(t,o)};goog.log.info=function(e,t,o){goog.log.ENABLED&&e&&e.info(t,o)};goog.log.fine=function(e,t,o){goog.log.ENABLED&&e&&e.fine(t,o)};ol.pointer={};ol.pointer.PointerEvent=function(e,t,o){goog.events.Event.call(this,e);this.browserEvent=t;e=goog.isDef(o)?o:{};this.buttons=this.getButtons_(e);this.pressure=this.getPressure_(e,this.buttons);this.bubbles=goog.object.get(e,"bubbles",!1);this.cancelable=goog.object.get(e,"cancelable",!1);this.view=goog.object.get(e,"view",null);this.detail=goog.object.get(e,"detail",null);this.screenX=goog.object.get(e,"screenX",0);this.screenY=goog.object.get(e,"screenY",0);this.clientX=goog.object.get(e,"clientX",0);this.clientY=goog.object.get(e,"clientY",0);this.ctrlKey=goog.object.get(e,"ctrlKey",!1);this.altKey=goog.object.get(e,"altKey",!1);this.shiftKey=goog.object.get(e,"shiftKey",!1);this.metaKey=goog.object.get(e,"metaKey",!1);this.button=goog.object.get(e,"button",0);this.relatedTarget=goog.object.get(e,"relatedTarget",null);this.pointerId=goog.object.get(e,"pointerId",0);this.width=goog.object.get(e,"width",0);this.height=goog.object.get(e,"height",0);this.tiltX=goog.object.get(e,"tiltX",0);this.tiltY=goog.object.get(e,"tiltY",0);this.pointerType=goog.object.get(e,"pointerType","");this.hwTimestamp=goog.object.get(e,"hwTimestamp",0);this.isPrimary=goog.object.get(e,"isPrimary",!1);t.preventDefault&&(this.preventDefault=function(){t.preventDefault()})};goog.inherits(ol.pointer.PointerEvent,goog.events.Event);ol.pointer.PointerEvent.prototype.getButtons_=function(e){if(e.buttons||ol.pointer.PointerEvent.HAS_BUTTONS)e=e.buttons;else switch(e.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e};ol.pointer.PointerEvent.prototype.getPressure_=function(e,t){var o=0;return o=e.pressure?e.pressure:t?.5:0};ol.pointer.PointerEvent.HAS_BUTTONS=!1;!function(){try{var e=new MouseEvent("click",{buttons:1});ol.pointer.PointerEvent.HAS_BUTTONS=1===e.buttons}catch(t){}}();ol.dom={};ol.dom.createCanvasContext2D=function(e,t){var o=goog.dom.createElement(goog.dom.TagName.CANVAS);goog.isDef(e)&&(o.width=e);goog.isDef(t)&&(o.height=t);return o.getContext("2d")};ol.dom.BrowserFeature={USE_MS_MATRIX_TRANSFORM:ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE,USE_MS_ALPHA_FILTER:ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE};ol.dom.canUseCssTransform=function(){var e;return function(){if(!goog.isDef(e))if(goog.asserts.assert(!goog.isNull(document.body),"document.body should not be null"),goog.global.getComputedStyle){var t,o=goog.dom.createElement(goog.dom.TagName.P),r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};goog.dom.appendChild(document.body,o);for(var n in r)n in o.style&&(o.style[n]="translate(1px,1px)",t=goog.global.getComputedStyle(o).getPropertyValue(r[n]));goog.dom.removeNode(o);e=t&&"none"!==t}else e=!1;return e}}();ol.dom.canUseCssTransform3D=function(){var e;return function(){if(!goog.isDef(e))if(goog.asserts.assert(!goog.isNull(document.body),"document.body should not be null"),goog.global.getComputedStyle){var t,o=goog.dom.createElement(goog.dom.TagName.P),r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};goog.dom.appendChild(document.body,o);for(var n in r)n in o.style&&(o.style[n]="translate3d(1px,1px,1px)",t=goog.global.getComputedStyle(o).getPropertyValue(r[n]));goog.dom.removeNode(o);e=t&&"none"!==t}else e=!1;return e}}();ol.dom.setTransform=function(e,t){var o=e.style;o.WebkitTransform=t;o.MozTransform=t;o.OTransform=t;o.msTransform=t;o.transform=t;goog.userAgent.IE&&!ol.IS_LEGACY_IE&&(e.style.transformOrigin="0 0")};ol.dom.setOpacity=function(e,t){if(ol.dom.BrowserFeature.USE_MS_ALPHA_FILTER){var o,r,n=e.currentStyle.filter;"8.0"==goog.userAgent.VERSION?(o=/progid:DXImageTransform\.Microsoft\.Alpha\(.*?\)/i,r="progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*t+")"):(o=/alpha\(.*?\)/i,r="alpha(opacity="+100*t+")");o=n.replace(o,r);o===n&&(o+=" "+r);e.style.filter=o;"auto"===e.currentStyle.zIndex&&(e.style.zIndex=0)}else e.style.opacity=t};ol.dom.setIEMatrix_=function(e,t){var o=e.currentStyle.filter,r=o.replace(/progid:DXImageTransform.Microsoft.Matrix\(.*?\)/i,t);r===o&&(r=" "+t);e.style.filter=r;"auto"===e.currentStyle.zIndex&&(e.style.zIndex=0)};ol.dom.transformElement2D=function(e,t,o,r){if(ol.dom.canUseCssTransform3D()){if(goog.isDef(o)){var n=Array(16);for(r=0;16>r;++r)n[r]=t[r].toFixed(o);o=n.join(",")}else o=t.join(",");ol.dom.setTransform(e,"matrix3d("+o+")")}else if(ol.dom.canUseCssTransform()){t=[goog.vec.Mat4.getElement(t,0,0),goog.vec.Mat4.getElement(t,1,0),goog.vec.Mat4.getElement(t,0,1),goog.vec.Mat4.getElement(t,1,1),goog.vec.Mat4.getElement(t,0,3),goog.vec.Mat4.getElement(t,1,3)];if(goog.isDef(o)){n=Array(6);for(r=0;6>r;++r)n[r]=t[r].toFixed(o);o=n.join(",")}else o=t.join(",");ol.dom.setTransform(e,"matrix("+o+")")}else if(ol.dom.BrowserFeature.USE_MS_MATRIX_TRANSFORM){var n=goog.vec.Mat4.getElement(t,0,0),i=goog.vec.Mat4.getElement(t,0,1),s=goog.vec.Mat4.getElement(t,1,0),a=goog.vec.Mat4.getElement(t,1,1),g=goog.vec.Mat4.getElement(t,0,3);t=goog.vec.Mat4.getElement(t,1,3);var l;l='progid:DXImageTransform.Microsoft.Matrix(sizingMethod="auto expand",M11='+n.toFixed(o||20);l+=",M12="+i.toFixed(o||20);l+=",M21="+s.toFixed(o||20);l+=",M22="+a.toFixed(o||20);l+=")";ol.dom.setIEMatrix_(e,l);t/=a;r.style.left=Math.round(g/n)+"px";r.style.top=Math.round(t)+"px"}else e.style.left=Math.round(goog.vec.Mat4.getElement(t,0,3))+"px",e.style.top=Math.round(goog.vec.Mat4.getElement(t,1,3))+"px"};ol.dom.outerWidth=function(e){var t=e.offsetWidth;e=e.currentStyle||window.getComputedStyle(e);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10)};ol.dom.outerHeight=function(e){var t=e.offsetHeight;e=e.currentStyle||window.getComputedStyle(e);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10)};ol.webgl={};ol.webgl.CONTEXT_IDS_=["experimental-webgl","webgl","webkit-3d","moz-webgl"];ol.webgl.WebGLContextEventType={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};ol.webgl.getContext=function(e,t){var o,r,n=ol.webgl.CONTEXT_IDS_.length;for(r=0;n>r;++r)try{if(o=e.getContext(ol.webgl.CONTEXT_IDS_[r],t),!goog.isNull(o))return o}catch(i){}return null};ol.has={};ol.has.DEVICE_PIXEL_RATIO=goog.global.devicePixelRatio||1;ol.has.CANVAS_LINE_DASH=!1;ol.has.CANVAS=ol.ENABLE_CANVAS&&function(){if(!("HTMLCanvasElement"in goog.global))return!1;try{var e=ol.dom.createCanvasContext2D();if(goog.isNull(e))return!1;goog.isDef(e.setLineDash)&&(ol.has.CANVAS_LINE_DASH=!0);return!0}catch(t){return!1}}();ol.has.DEVICE_ORIENTATION="DeviceOrientationEvent"in goog.global;ol.has.DOM=ol.ENABLE_DOM;ol.has.GEOLOCATION="geolocation"in goog.global.navigator;ol.has.TOUCH=ol.ASSUME_TOUCH||"ontouchstart"in goog.global;ol.has.POINTER="PointerEvent"in goog.global;ol.has.MSPOINTER=!!goog.global.navigator.msPointerEnabled;!function(){if(ol.ENABLE_WEBGL){var e,t=!1,o=[];if("WebGLRenderingContext"in goog.global)try{var r=goog.dom.createElement(goog.dom.TagName.CANVAS),n=ol.webgl.getContext(r,{failIfMajorPerformanceCaveat:!0});goog.isNull(n)||(t=!0,e=n.getParameter(n.MAX_TEXTURE_SIZE),o=n.getSupportedExtensions())}catch(i){}ol.has.WEBGL=t;ol.WEBGL_EXTENSIONS=o;ol.WEBGL_MAX_TEXTURE_SIZE=e}}();ol.pointer.EventSource=function(e,t){this.dispatcher=e;this.mapping_=t};ol.pointer.EventSource.prototype.getEvents=function(){return goog.object.getKeys(this.mapping_)};ol.pointer.EventSource.prototype.getMapping=function(){return this.mapping_};ol.pointer.EventSource.prototype.getHandlerForEvent=function(e){return this.mapping_[e]};ol.pointer.MouseSource=function(e){ol.pointer.EventSource.call(this,e,{mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout});this.pointerMap=e.pointerMap;this.lastTouches=[]};goog.inherits(ol.pointer.MouseSource,ol.pointer.EventSource);ol.pointer.MouseSource.POINTER_ID=1;ol.pointer.MouseSource.POINTER_TYPE="mouse";ol.pointer.MouseSource.DEDUP_DIST=25;ol.pointer.MouseSource.prototype.isEventSimulatedFromTouch_=function(e){var t=this.lastTouches,o=e.clientX;e=e.clientY;for(var r,n=0,i=t.length;i>n&&(r=t[n]);n++){var s=Math.abs(o-r[0]),a=Math.abs(e-r[1]);if(s<=ol.pointer.MouseSource.DEDUP_DIST&&a<=ol.pointer.MouseSource.DEDUP_DIST)return!0}return!1};ol.pointer.MouseSource.prepareEvent=function(e,t){var o=t.cloneEvent(e,e.getBrowserEvent()),r=o.preventDefault;o.preventDefault=function(){e.preventDefault();r()};o.pointerId=ol.pointer.MouseSource.POINTER_ID;o.isPrimary=!0;o.pointerType=ol.pointer.MouseSource.POINTER_TYPE;return o};ol.pointer.MouseSource.prototype.mousedown=function(e){if(!this.isEventSimulatedFromTouch_(e)){goog.object.containsKey(this.pointerMap,ol.pointer.MouseSource.POINTER_ID.toString())&&this.cancel(e);var t=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()]=e;this.dispatcher.down(t,e)}};ol.pointer.MouseSource.prototype.mousemove=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.dispatcher.move(t,e)}};ol.pointer.MouseSource.prototype.mouseup=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()];t&&t.button===e.button&&(t=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher),this.dispatcher.up(t,e),this.cleanupMouse())}};ol.pointer.MouseSource.prototype.mouseover=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.dispatcher.enterOver(t,e)}};ol.pointer.MouseSource.prototype.mouseout=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.dispatcher.leaveOut(t,e)}};ol.pointer.MouseSource.prototype.cancel=function(e){var t=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.dispatcher.cancel(t,e);this.cleanupMouse()};ol.pointer.MouseSource.prototype.cleanupMouse=function(){goog.object.remove(this.pointerMap,ol.pointer.MouseSource.POINTER_ID.toString())};ol.pointer.MsSource=function(e){ol.pointer.EventSource.call(this,e,{MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture});this.pointerMap=e.pointerMap;this.POINTER_TYPES=["","unavailable","touch","pen","mouse"]};goog.inherits(ol.pointer.MsSource,ol.pointer.EventSource);ol.pointer.MsSource.prototype.prepareEvent_=function(e){var t=e;goog.isNumber(e.getBrowserEvent().pointerType)&&(t=this.dispatcher.cloneEvent(e,e.getBrowserEvent()),t.pointerType=this.POINTER_TYPES[e.getBrowserEvent().pointerType]);return t};ol.pointer.MsSource.prototype.cleanup=function(e){goog.object.remove(this.pointerMap,e)};ol.pointer.MsSource.prototype.msPointerDown=function(e){this.pointerMap[e.getBrowserEvent().pointerId]=e;var t=this.prepareEvent_(e);this.dispatcher.down(t,e)};ol.pointer.MsSource.prototype.msPointerMove=function(e){var t=this.prepareEvent_(e);this.dispatcher.move(t,e)};ol.pointer.MsSource.prototype.msPointerUp=function(e){var t=this.prepareEvent_(e);this.dispatcher.up(t,e);this.cleanup(e.getBrowserEvent().pointerId)};ol.pointer.MsSource.prototype.msPointerOut=function(e){var t=this.prepareEvent_(e);this.dispatcher.leaveOut(t,e)};ol.pointer.MsSource.prototype.msPointerOver=function(e){var t=this.prepareEvent_(e);this.dispatcher.enterOver(t,e)};ol.pointer.MsSource.prototype.msPointerCancel=function(e){var t=this.prepareEvent_(e);this.dispatcher.cancel(t,e);this.cleanup(e.getBrowserEvent().pointerId)};ol.pointer.MsSource.prototype.msLostPointerCapture=function(e){e=this.dispatcher.makeEvent("lostpointercapture",e.getBrowserEvent(),e);this.dispatcher.dispatchEvent(e)};ol.pointer.MsSource.prototype.msGotPointerCapture=function(e){e=this.dispatcher.makeEvent("gotpointercapture",e.getBrowserEvent(),e);this.dispatcher.dispatchEvent(e)};ol.pointer.NativeSource=function(e){ol.pointer.EventSource.call(this,e,{pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture})};goog.inherits(ol.pointer.NativeSource,ol.pointer.EventSource);ol.pointer.NativeSource.prototype.pointerDown=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.pointerMove=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.pointerUp=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.pointerOut=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.pointerOver=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.pointerCancel=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.lostPointerCapture=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.gotPointerCapture=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.TouchSource=function(e,t){ol.pointer.EventSource.call(this,e,{touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel});this.pointerMap=e.pointerMap;this.mouseSource=t;this.firstTouchId_=void 0;this.clickCount_=0;this.resetId_=void 0};goog.inherits(ol.pointer.TouchSource,ol.pointer.EventSource);ol.pointer.TouchSource.DEDUP_TIMEOUT=2500;ol.pointer.TouchSource.CLICK_COUNT_TIMEOUT=200;ol.pointer.TouchSource.POINTER_TYPE="touch";ol.pointer.TouchSource.prototype.isPrimaryTouch_=function(e){return this.firstTouchId_===e.identifier};ol.pointer.TouchSource.prototype.setPrimaryTouch_=function(e){var t=goog.object.getCount(this.pointerMap);(0===t||1===t&&goog.object.containsKey(this.pointerMap,ol.pointer.MouseSource.POINTER_ID.toString()))&&(this.firstTouchId_=e.identifier,this.cancelResetClickCount_())};ol.pointer.TouchSource.prototype.removePrimaryPointer_=function(e){e.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())};ol.pointer.TouchSource.prototype.resetClickCount_=function(){this.resetId_=goog.global.setTimeout(goog.bind(this.resetClickCountHandler_,this),ol.pointer.TouchSource.CLICK_COUNT_TIMEOUT)};ol.pointer.TouchSource.prototype.resetClickCountHandler_=function(){this.clickCount_=0;this.resetId_=void 0};ol.pointer.TouchSource.prototype.cancelResetClickCount_=function(){goog.isDef(this.resetId_)&&goog.global.clearTimeout(this.resetId_)};ol.pointer.TouchSource.prototype.touchToPointer_=function(e,t){var o=this.dispatcher.cloneEvent(e,t);o.pointerId=t.identifier+2;o.bubbles=!0;o.cancelable=!0;o.detail=this.clickCount_;o.button=0;o.buttons=1;o.width=t.webkitRadiusX||t.radiusX||0;o.height=t.webkitRadiusY||t.radiusY||0;o.pressure=t.webkitForce||t.force||.5;o.isPrimary=this.isPrimaryTouch_(t);o.pointerType=ol.pointer.TouchSource.POINTER_TYPE;o.clientX=t.clientX;o.clientY=t.clientY;o.screenX=t.screenX;o.screenY=t.screenY;return o};ol.pointer.TouchSource.prototype.processTouches_=function(e,t){function o(){e.preventDefault()}var r,n,i=Array.prototype.slice.call(e.getBrowserEvent().changedTouches),s=i.length;for(r=0;s>r;++r)n=this.touchToPointer_(e,i[r]),n.preventDefault=o,t.call(this,e,n)};ol.pointer.TouchSource.prototype.findTouch_=function(e,t){for(var o,r=e.length,n=0;r>n;n++)if(o=e[n],o.identifier===t)return!0;return!1};ol.pointer.TouchSource.prototype.vacuumTouches_=function(e){var t=e.getBrowserEvent().touches,o=goog.object.getKeys(this.pointerMap),r=o.length;if(r>=t.length){var n,i,s,a=[];for(n=0;r>n;++n)i=o[n],s=this.pointerMap[i],i==ol.pointer.MouseSource.POINTER_ID||this.findTouch_(t,i-2)||a.push(s.out);for(n=0;n<a.length;++n)this.cancelOut_(e,a[n])}};ol.pointer.TouchSource.prototype.touchstart=function(e){this.vacuumTouches_(e);this.setPrimaryTouch_(e.getBrowserEvent().changedTouches[0]);this.dedupSynthMouse_(e);this.clickCount_++;this.processTouches_(e,this.overDown_)};ol.pointer.TouchSource.prototype.overDown_=function(e,t){this.pointerMap[t.pointerId]={target:t.target,out:t,outTarget:t.target};this.dispatcher.over(t,e);this.dispatcher.enter(t,e);this.dispatcher.down(t,e)};ol.pointer.TouchSource.prototype.touchmove=function(e){e.preventDefault();this.processTouches_(e,this.moveOverOut_)};ol.pointer.TouchSource.prototype.moveOverOut_=function(e,t){var o=this.pointerMap[t.pointerId];if(o){var r=o.out,n=o.outTarget;this.dispatcher.move(t,e);r&&n!==t.target&&(r.relatedTarget=t.target,t.relatedTarget=n,r.target=n,t.target?(this.dispatcher.leaveOut(r,e),this.dispatcher.enterOver(t,e)):(t.target=n,t.relatedTarget=null,this.cancelOut_(e,t)));o.out=t;o.outTarget=t.target}};ol.pointer.TouchSource.prototype.touchend=function(e){this.dedupSynthMouse_(e);this.processTouches_(e,this.upOut_)};ol.pointer.TouchSource.prototype.upOut_=function(e,t){this.dispatcher.up(t,e);this.dispatcher.out(t,e);this.dispatcher.leave(t,e);this.cleanUpPointer_(t)};ol.pointer.TouchSource.prototype.touchcancel=function(e){this.processTouches_(e,this.cancelOut_)};ol.pointer.TouchSource.prototype.cancelOut_=function(e,t){this.dispatcher.cancel(t,e);this.dispatcher.out(t,e);this.dispatcher.leave(t,e);this.cleanUpPointer_(t)};ol.pointer.TouchSource.prototype.cleanUpPointer_=function(e){goog.object.remove(this.pointerMap,e.pointerId);this.removePrimaryPointer_(e)};ol.pointer.TouchSource.prototype.dedupSynthMouse_=function(e){var t=this.mouseSource.lastTouches;e=e.getBrowserEvent().changedTouches[0];if(this.isPrimaryTouch_(e)){var o=[e.clientX,e.clientY];t.push(o);goog.global.setTimeout(function(){goog.array.remove(t,o)},ol.pointer.TouchSource.DEDUP_TIMEOUT)}};ol.pointer.PointerEventHandler=function(e){goog.events.EventTarget.call(this);this.element_=e;this.pointerMap={};this.eventMap_={};this.eventSourceList_=[];this.registerSources()};goog.inherits(ol.pointer.PointerEventHandler,goog.events.EventTarget);ol.pointer.PointerEventHandler.prototype.registerSources=function(){if(ol.has.POINTER)this.registerSource("native",new ol.pointer.NativeSource(this));else if(ol.has.MSPOINTER)this.registerSource("ms",new ol.pointer.MsSource(this));else{var e=new ol.pointer.MouseSource(this);this.registerSource("mouse",e);ol.has.TOUCH&&this.registerSource("touch",new ol.pointer.TouchSource(this,e))}this.register_()};ol.pointer.PointerEventHandler.prototype.registerSource=function(e,t){var o=t.getEvents();o&&(goog.array.forEach(o,function(e){var o=t.getHandlerForEvent(e);o&&(this.eventMap_[e]=goog.bind(o,t))},this),this.eventSourceList_.push(t))};ol.pointer.PointerEventHandler.prototype.register_=function(){for(var e,t=this.eventSourceList_.length,o=0;t>o;o++)e=this.eventSourceList_[o],this.addEvents_(e.getEvents())};ol.pointer.PointerEventHandler.prototype.unregister_=function(){for(var e,t=this.eventSourceList_.length,o=0;t>o;o++)e=this.eventSourceList_[o],this.removeEvents_(e.getEvents())};ol.pointer.PointerEventHandler.prototype.eventHandler_=function(e){var t=this.eventMap_[e.type];t&&t(e)};ol.pointer.PointerEventHandler.prototype.addEvents_=function(e){goog.array.forEach(e,function(e){goog.events.listen(this.element_,e,this.eventHandler_,!1,this)},this)};ol.pointer.PointerEventHandler.prototype.removeEvents_=function(e){goog.array.forEach(e,function(e){goog.events.unlisten(this.element_,e,this.eventHandler_,!1,this)},this)};ol.pointer.PointerEventHandler.prototype.cloneEvent=function(e,t){for(var o,r={},n=0,i=ol.pointer.CLONE_PROPS.length;i>n;n++)o=ol.pointer.CLONE_PROPS[n][0],r[o]=e[o]||t[o]||ol.pointer.CLONE_PROPS[n][1];return r};ol.pointer.PointerEventHandler.prototype.down=function(e,t){this.fireEvent(ol.pointer.EventType.POINTERDOWN,e,t)};ol.pointer.PointerEventHandler.prototype.move=function(e,t){this.fireEvent(ol.pointer.EventType.POINTERMOVE,e,t)};ol.pointer.PointerEventHandler.prototype.up=function(e,t){this.fireEvent(ol.pointer.EventType.POINTERUP,e,t)};ol.pointer.PointerEventHandler.prototype.enter=function(e,t){e.bubbles=!1;
this.fireEvent(ol.pointer.EventType.POINTERENTER,e,t)};ol.pointer.PointerEventHandler.prototype.leave=function(e,t){e.bubbles=!1;this.fireEvent(ol.pointer.EventType.POINTERLEAVE,e,t)};ol.pointer.PointerEventHandler.prototype.over=function(e,t){e.bubbles=!0;this.fireEvent(ol.pointer.EventType.POINTEROVER,e,t)};ol.pointer.PointerEventHandler.prototype.out=function(e,t){e.bubbles=!0;this.fireEvent(ol.pointer.EventType.POINTEROUT,e,t)};ol.pointer.PointerEventHandler.prototype.cancel=function(e,t){this.fireEvent(ol.pointer.EventType.POINTERCANCEL,e,t)};ol.pointer.PointerEventHandler.prototype.leaveOut=function(e,t){this.out(e,t);this.contains_(e.target,e.relatedTarget)||this.leave(e,t)};ol.pointer.PointerEventHandler.prototype.enterOver=function(e,t){this.over(e,t);this.contains_(e.target,e.relatedTarget)||this.enter(e,t)};ol.pointer.PointerEventHandler.prototype.contains_=function(e,t){return goog.isNull(t)?!1:goog.dom.contains(e,t)};ol.pointer.PointerEventHandler.prototype.makeEvent=function(e,t,o){return new ol.pointer.PointerEvent(e,o,t)};ol.pointer.PointerEventHandler.prototype.fireEvent=function(e,t,o){e=this.makeEvent(e,t,o);this.dispatchEvent(e)};ol.pointer.PointerEventHandler.prototype.fireNativeEvent=function(e){e=this.makeEvent(e.type,e.getBrowserEvent(),e);this.dispatchEvent(e)};ol.pointer.PointerEventHandler.prototype.wrapMouseEvent=function(e,t){return this.makeEvent(e,ol.pointer.MouseSource.prepareEvent(t,this),t)};ol.pointer.PointerEventHandler.prototype.disposeInternal=function(){this.unregister_();ol.pointer.PointerEventHandler.superClass_.disposeInternal.call(this)};ol.pointer.EventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};ol.pointer.CLONE_PROPS=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];ol.MapBrowserEvent=function(e,t,o,r,n){ol.MapEvent.call(this,e,t,n);this.browserEvent=o;this.originalEvent=o.getBrowserEvent();this.pixel=t.getEventPixel(this.originalEvent);this.coordinate=t.getCoordinateFromPixel(this.pixel);this.dragging=goog.isDef(r)?r:!1};goog.inherits(ol.MapBrowserEvent,ol.MapEvent);ol.MapBrowserEvent.prototype.preventDefault=function(){ol.MapBrowserEvent.superClass_.preventDefault.call(this);this.browserEvent.preventDefault()};ol.MapBrowserEvent.prototype.stopPropagation=function(){ol.MapBrowserEvent.superClass_.stopPropagation.call(this);this.browserEvent.stopPropagation()};ol.MapBrowserPointerEvent=function(e,t,o,r,n){ol.MapBrowserEvent.call(this,e,t,o.browserEvent,r,n);this.pointerEvent=o};goog.inherits(ol.MapBrowserPointerEvent,ol.MapBrowserEvent);ol.MapBrowserEventHandler=function(e){goog.events.EventTarget.call(this);this.map_=e;this.clickTimeoutId_=0;this.dragging_=!1;this.pointerdownListenerKey_=this.dragListenerKeys_=null;ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE&&(this.ieDblclickListenerKey_=null);this.down_=null;e=this.map_.getViewport();this.activePointers_=0;this.trackedTouches_={};this.pointerEventHandler_=new ol.pointer.PointerEventHandler(e);this.documentPointerEventHandler_=null;this.pointerdownListenerKey_=goog.events.listen(this.pointerEventHandler_,ol.pointer.EventType.POINTERDOWN,this.handlePointerDown_,!1,this);this.relayedListenerKey_=goog.events.listen(this.pointerEventHandler_,ol.pointer.EventType.POINTERMOVE,this.relayEvent_,!1,this);ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE&&(this.ieDblclickListenerKey_=goog.events.listen(e,goog.events.EventType.DBLCLICK,this.emulateClickLegacyIE_,!1,this))};goog.inherits(ol.MapBrowserEventHandler,goog.events.EventTarget);ol.MapBrowserEventHandler.prototype.emulateClickLegacyIE_=function(e){e=this.pointerEventHandler_.wrapMouseEvent(ol.MapBrowserEvent.EventType.POINTERUP,e);this.emulateClick_(e)};ol.MapBrowserEventHandler.prototype.emulateClick_=function(e){var t;t=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.CLICK,this.map_,e);this.dispatchEvent(t);0!==this.clickTimeoutId_?(goog.global.clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,t=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=goog.global.setTimeout(goog.bind(function(){this.clickTimeoutId_=0;var t=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.SINGLECLICK,this.map_,e);this.dispatchEvent(t)},this),250)};ol.MapBrowserEventHandler.prototype.updateActivePointers_=function(e){e.type==ol.MapBrowserEvent.EventType.POINTERUP||e.type==ol.MapBrowserEvent.EventType.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==ol.MapBrowserEvent.EventType.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0);this.activePointers_=goog.object.getCount(this.trackedTouches_)};ol.MapBrowserEventHandler.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var t=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.POINTERUP,this.map_,e);this.dispatchEvent(t);!this.dragging_&&this.isMouseActionButton_(e)&&(goog.asserts.assert(!goog.isNull(this.down_),"this.down_ should not be null"),this.emulateClick_(this.down_));goog.asserts.assert(0<=this.activePointers_,"this.activePointers_ should be equal to or larger than 0");0===this.activePointers_&&(goog.array.forEach(this.dragListenerKeys_,goog.events.unlistenByKey),this.dragListenerKeys_=null,this.dragging_=!1,this.down_=null,goog.dispose(this.documentPointerEventHandler_),this.documentPointerEventHandler_=null)};ol.MapBrowserEventHandler.prototype.isMouseActionButton_=function(e){return ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE?1==e.button:0===e.button};ol.MapBrowserEventHandler.prototype.handlePointerDown_=function(e){this.updateActivePointers_(e);var t=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.POINTERDOWN,this.map_,e);this.dispatchEvent(t);this.down_=e;goog.isNull(this.dragListenerKeys_)&&(this.documentPointerEventHandler_=new ol.pointer.PointerEventHandler(document),this.dragListenerKeys_=[goog.events.listen(this.documentPointerEventHandler_,ol.MapBrowserEvent.EventType.POINTERMOVE,this.handlePointerMove_,!1,this),goog.events.listen(this.documentPointerEventHandler_,ol.MapBrowserEvent.EventType.POINTERUP,this.handlePointerUp_,!1,this),goog.events.listen(this.pointerEventHandler_,ol.MapBrowserEvent.EventType.POINTERCANCEL,this.handlePointerUp_,!1,this)])};ol.MapBrowserEventHandler.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.dragging_=!0;var t=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(t)}e.preventDefault()};ol.MapBrowserEventHandler.prototype.relayEvent_=function(e){var t=!goog.isNull(this.down_)&&this.isMoving_(e);this.dispatchEvent(new ol.MapBrowserPointerEvent(e.type,this.map_,e,t))};ol.MapBrowserEventHandler.prototype.isMoving_=function(e){return e.clientX!=this.down_.clientX||e.clientY!=this.down_.clientY};ol.MapBrowserEventHandler.prototype.disposeInternal=function(){goog.isNull(this.relayedListenerKey_)||(goog.events.unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null);goog.isNull(this.pointerdownListenerKey_)||(goog.events.unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null);goog.isNull(this.dragListenerKeys_)||(goog.array.forEach(this.dragListenerKeys_,goog.events.unlistenByKey),this.dragListenerKeys_=null);goog.isNull(this.documentPointerEventHandler_)||(goog.dispose(this.documentPointerEventHandler_),this.documentPointerEventHandler_=null);goog.isNull(this.pointerEventHandler_)||(goog.dispose(this.pointerEventHandler_),this.pointerEventHandler_=null);ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE&&!goog.isNull(this.ieDblclickListenerKey_)&&(goog.events.unlistenByKey(this.ieDblclickListenerKey_),this.ieDblclickListenerKey_=null);ol.MapBrowserEventHandler.superClass_.disposeInternal.call(this)};ol.MapBrowserEvent.EventType={SINGLECLICK:"singleclick",CLICK:goog.events.EventType.CLICK,DBLCLICK:goog.events.EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};ol.layer={};ol.layer.LayerProperty={BRIGHTNESS:"brightness",CONTRAST:"contrast",HUE:"hue",OPACITY:"opacity",SATURATION:"saturation",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"};ol.layer.Base=function(e){ol.Object.call(this);var t=goog.object.clone(e);t[ol.layer.LayerProperty.BRIGHTNESS]=goog.isDef(e.brightness)?e.brightness:0;t[ol.layer.LayerProperty.CONTRAST]=goog.isDef(e.contrast)?e.contrast:1;t[ol.layer.LayerProperty.HUE]=goog.isDef(e.hue)?e.hue:0;t[ol.layer.LayerProperty.OPACITY]=goog.isDef(e.opacity)?e.opacity:1;t[ol.layer.LayerProperty.SATURATION]=goog.isDef(e.saturation)?e.saturation:1;t[ol.layer.LayerProperty.VISIBLE]=goog.isDef(e.visible)?e.visible:!0;t[ol.layer.LayerProperty.Z_INDEX]=goog.isDef(e.zIndex)?e.zIndex:0;t[ol.layer.LayerProperty.MAX_RESOLUTION]=goog.isDef(e.maxResolution)?e.maxResolution:1/0;t[ol.layer.LayerProperty.MIN_RESOLUTION]=goog.isDef(e.minResolution)?e.minResolution:0;this.setProperties(t)};goog.inherits(ol.layer.Base,ol.Object);ol.layer.Base.prototype.getBrightness=function(){return this.get(ol.layer.LayerProperty.BRIGHTNESS)};ol.layer.Base.prototype.getContrast=function(){return this.get(ol.layer.LayerProperty.CONTRAST)};ol.layer.Base.prototype.getHue=function(){return this.get(ol.layer.LayerProperty.HUE)};ol.layer.Base.prototype.getLayerState=function(){var e=this.getBrightness(),t=this.getContrast(),o=this.getHue(),r=this.getOpacity(),n=this.getSaturation(),i=this.getSourceState(),s=this.getVisible(),a=this.getExtent(),g=this.getZIndex(),l=this.getMaxResolution(),u=this.getMinResolution();return{layer:this,brightness:goog.math.clamp(e,-1,1),contrast:Math.max(t,0),hue:o,opacity:goog.math.clamp(r,0,1),saturation:Math.max(n,0),sourceState:i,visible:s,managed:!0,extent:a,zIndex:g,maxResolution:l,minResolution:Math.max(u,0)}};ol.layer.Base.prototype.getExtent=function(){return this.get(ol.layer.LayerProperty.EXTENT)};ol.layer.Base.prototype.getMaxResolution=function(){return this.get(ol.layer.LayerProperty.MAX_RESOLUTION)};ol.layer.Base.prototype.getMinResolution=function(){return this.get(ol.layer.LayerProperty.MIN_RESOLUTION)};ol.layer.Base.prototype.getOpacity=function(){return this.get(ol.layer.LayerProperty.OPACITY)};ol.layer.Base.prototype.getSaturation=function(){return this.get(ol.layer.LayerProperty.SATURATION)};ol.layer.Base.prototype.getVisible=function(){return this.get(ol.layer.LayerProperty.VISIBLE)};ol.layer.Base.prototype.getZIndex=function(){return this.get(ol.layer.LayerProperty.Z_INDEX)};ol.layer.Base.prototype.setBrightness=function(e){this.set(ol.layer.LayerProperty.BRIGHTNESS,e)};ol.layer.Base.prototype.setContrast=function(e){this.set(ol.layer.LayerProperty.CONTRAST,e)};ol.layer.Base.prototype.setHue=function(e){this.set(ol.layer.LayerProperty.HUE,e)};ol.layer.Base.prototype.setExtent=function(e){this.set(ol.layer.LayerProperty.EXTENT,e)};ol.layer.Base.prototype.setMaxResolution=function(e){this.set(ol.layer.LayerProperty.MAX_RESOLUTION,e)};ol.layer.Base.prototype.setMinResolution=function(e){this.set(ol.layer.LayerProperty.MIN_RESOLUTION,e)};ol.layer.Base.prototype.setOpacity=function(e){this.set(ol.layer.LayerProperty.OPACITY,e)};ol.layer.Base.prototype.setSaturation=function(e){this.set(ol.layer.LayerProperty.SATURATION,e)};ol.layer.Base.prototype.setVisible=function(e){this.set(ol.layer.LayerProperty.VISIBLE,e)};ol.layer.Base.prototype.setZIndex=function(e){this.set(ol.layer.LayerProperty.Z_INDEX,e)};ol.render={};ol.render.VectorContext=function(){};ol.render.EventType={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"};ol.render.Event=function(e,t,o,r,n,i){goog.events.Event.call(this,e,t);this.vectorContext=o;this.frameState=r;this.context=n;this.glContext=i};goog.inherits(ol.render.Event,goog.events.Event);ol.layer.Layer=function(e){var t=goog.object.clone(e);delete t.source;ol.layer.Base.call(this,t);this.sourceChangeKey_=this.mapRenderKey_=this.mapPrecomposeKey_=null;goog.isDef(e.map)&&this.setMap(e.map);goog.events.listen(this,ol.Object.getChangeEventType(ol.layer.LayerProperty.SOURCE),this.handleSourcePropertyChange_,!1,this);e=goog.isDef(e.source)?e.source:null;this.setSource(e)};goog.inherits(ol.layer.Layer,ol.layer.Base);ol.layer.Layer.visibleAtResolution=function(e,t){return e.visible&&t>=e.minResolution&&t<e.maxResolution};ol.layer.Layer.prototype.getLayersArray=function(e){e=goog.isDef(e)?e:[];e.push(this);return e};ol.layer.Layer.prototype.getLayerStatesArray=function(e){e=goog.isDef(e)?e:[];e.push(this.getLayerState());return e};ol.layer.Layer.prototype.getSource=function(){var e=this.get(ol.layer.LayerProperty.SOURCE);return goog.isDef(e)?e:null};ol.layer.Layer.prototype.getSourceState=function(){var e=this.getSource();return goog.isNull(e)?ol.source.State.UNDEFINED:e.getState()};ol.layer.Layer.prototype.handleSourceChange_=function(){this.changed()};ol.layer.Layer.prototype.handleSourcePropertyChange_=function(){goog.isNull(this.sourceChangeKey_)||(goog.events.unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();goog.isNull(e)||(this.sourceChangeKey_=goog.events.listen(e,goog.events.EventType.CHANGE,this.handleSourceChange_,!1,this));this.changed()};ol.layer.Layer.prototype.setMap=function(e){goog.events.unlistenByKey(this.mapPrecomposeKey_);this.mapPrecomposeKey_=null;goog.isNull(e)&&this.changed();goog.events.unlistenByKey(this.mapRenderKey_);this.mapRenderKey_=null;goog.isNull(e)||(this.mapPrecomposeKey_=goog.events.listen(e,ol.render.EventType.PRECOMPOSE,function(e){var t=this.getLayerState();t.managed=!1;t.zIndex=1/0;e.frameState.layerStatesArray.push(t);e.frameState.layerStates[goog.getUid(this)]=t},!1,this),this.mapRenderKey_=goog.events.listen(this,goog.events.EventType.CHANGE,e.render,!1,e),this.changed())};ol.layer.Layer.prototype.setSource=function(e){this.set(ol.layer.LayerProperty.SOURCE,e)};ol.ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3};ol.ImageBase=function(e,t,o,r,n){goog.events.EventTarget.call(this);this.attributions_=n;this.extent=e;this.pixelRatio_=o;this.resolution=t;this.state=r};goog.inherits(ol.ImageBase,goog.events.EventTarget);ol.ImageBase.prototype.changed=function(){this.dispatchEvent(goog.events.EventType.CHANGE)};ol.ImageBase.prototype.getAttributions=function(){return this.attributions_};ol.ImageBase.prototype.getExtent=function(){return this.extent};ol.ImageBase.prototype.getPixelRatio=function(){return this.pixelRatio_};ol.ImageBase.prototype.getResolution=function(){goog.asserts.assert(goog.isDef(this.resolution),"resolution not yet set");return this.resolution};ol.ImageBase.prototype.getState=function(){return this.state};ol.vec={};ol.vec.Mat4={};ol.vec.Mat4.makeTransform2D=function(e,t,o,r,n,i,s,a){goog.vec.Mat4.makeIdentity(e);0===t&&0===o||goog.vec.Mat4.translate(e,t,o,0);1==r&&1==n||goog.vec.Mat4.scale(e,r,n,1);0!==i&&goog.vec.Mat4.rotateZ(e,i);0===s&&0===a||goog.vec.Mat4.translate(e,s,a,0);return e};ol.vec.Mat4.equals2D=function(e,t){return goog.vec.Mat4.getElement(e,0,0)==goog.vec.Mat4.getElement(t,0,0)&&goog.vec.Mat4.getElement(e,1,0)==goog.vec.Mat4.getElement(t,1,0)&&goog.vec.Mat4.getElement(e,0,1)==goog.vec.Mat4.getElement(t,0,1)&&goog.vec.Mat4.getElement(e,1,1)==goog.vec.Mat4.getElement(t,1,1)&&goog.vec.Mat4.getElement(e,0,3)==goog.vec.Mat4.getElement(t,0,3)&&goog.vec.Mat4.getElement(e,1,3)==goog.vec.Mat4.getElement(t,1,3)};ol.vec.Mat4.multVec2=function(e,t,o){var r=goog.vec.Mat4.getElement(e,0,0),n=goog.vec.Mat4.getElement(e,1,0),i=goog.vec.Mat4.getElement(e,0,1),s=goog.vec.Mat4.getElement(e,1,1),a=goog.vec.Mat4.getElement(e,0,3);e=goog.vec.Mat4.getElement(e,1,3);var g=t[0];t=t[1];o[0]=r*g+i*t+a;o[1]=n*g+s*t+e;return o};ol.renderer={};ol.renderer.Layer=function(e){ol.Observable.call(this);this.layer_=e};goog.inherits(ol.renderer.Layer,ol.Observable);ol.renderer.Layer.prototype.forEachFeatureAtCoordinate=goog.nullFunction;ol.renderer.Layer.prototype.forEachLayerAtPixel=function(e,t,o,r){e=e.slice();ol.vec.Mat4.multVec2(t.pixelToCoordinateMatrix,e,e);return this.forEachFeatureAtCoordinate(e,t,goog.functions.TRUE,this)?o.call(r,this.layer_):void 0};ol.renderer.Layer.prototype.hasFeatureAtCoordinate=goog.functions.FALSE;ol.renderer.Layer.prototype.createLoadedTileFinder=function(e,t){return function(o,r){return e.forEachLoadedTile(o,r,function(e){t[o]||(t[o]={});t[o][e.tileCoord.toString()]=e})}};ol.renderer.Layer.prototype.getLayer=function(){return this.layer_};ol.renderer.Layer.prototype.handleImageChange_=function(e){e.target.getState()===ol.ImageState.LOADED&&this.renderIfReadyAndVisible()};ol.renderer.Layer.prototype.loadImage=function(e){var t=e.getState();t!=ol.ImageState.LOADED&&t!=ol.ImageState.ERROR&&(goog.asserts.assert(t==ol.ImageState.IDLE||t==ol.ImageState.LOADING,'imageState is "idle" or "loading"'),goog.events.listen(e,goog.events.EventType.CHANGE,this.handleImageChange_,!1,this));t==ol.ImageState.IDLE&&(e.load(),t=e.getState(),goog.asserts.assert(t==ol.ImageState.LOADING,'imageState is "loading"'));return t==ol.ImageState.LOADED};ol.renderer.Layer.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();e.getVisible()&&e.getSourceState()==ol.source.State.READY&&this.changed()};ol.renderer.Layer.prototype.scheduleExpireCache=function(e,t){t.canExpireCache()&&e.postRenderFunctions.push(goog.partial(function(e,t,o){t=goog.getUid(e).toString();e.expireCache(o.usedTiles[t])},t))};ol.renderer.Layer.prototype.updateAttributions=function(e,t){if(goog.isDefAndNotNull(t)){var o,r,n;r=0;for(n=t.length;n>r;++r)o=t[r],e[goog.getUid(o).toString()]=o}};ol.renderer.Layer.prototype.updateLogos=function(e,t){var o=t.getLogo();goog.isDef(o)&&(goog.isString(o)?e.logos[o]="":goog.isObject(o)&&(goog.asserts.assertString(o.href,"logo.href is a string"),goog.asserts.assertString(o.src,"logo.src is a string"),e.logos[o.src]=o.href))};ol.renderer.Layer.prototype.updateUsedTiles=function(e,t,o,r){t=goog.getUid(t).toString();o=o.toString();t in e?o in e[t]?e[t][o].extend(r):e[t][o]=r:(e[t]={},e[t][o]=r)};ol.renderer.Layer.prototype.snapCenterToPixel=function(e,t,o){return[t*(Math.round(e[0]/t)+o[0]%2/2),t*(Math.round(e[1]/t)+o[1]%2/2)]};ol.renderer.Layer.prototype.manageTilePyramid=function(e,t,o,r,n,i,s,a,g,l){var u=goog.getUid(t).toString();u in e.wantedTiles||(e.wantedTiles[u]={});var c=e.wantedTiles[u];e=e.tileQueue;var h,d,m,p,f,_,y=o.getMinZoom();for(_=s;_>=y;--_)for(d=o.getTileRangeForExtentAndZ(i,_,d),m=o.getResolution(_),p=d.minX;p<=d.maxX;++p)for(f=d.minY;f<=d.maxY;++f)a>=s-_?(h=t.getTile(_,p,f,r,n),h.getState()==ol.TileState.IDLE&&(c[ol.tilecoord.toString(h.tileCoord)]=!0,e.isKeyQueued(h.getKey())||e.enqueue([h,u,o.getTileCoordCenter(h.tileCoord),m])),goog.isDef(g)&&g.call(l,h)):t.useTile(_,p,f)};ol.style={};ol.style.ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3};ol.style.Image=function(e){this.opacity_=e.opacity;this.rotateWithView_=e.rotateWithView;this.rotation_=e.rotation;this.scale_=e.scale;this.snapToPixel_=e.snapToPixel};ol.style.Image.prototype.getOpacity=function(){return this.opacity_};ol.style.Image.prototype.getRotateWithView=function(){return this.rotateWithView_};ol.style.Image.prototype.getRotation=function(){return this.rotation_};ol.style.Image.prototype.getScale=function(){return this.scale_};ol.style.Image.prototype.getSnapToPixel=function(){return this.snapToPixel_};ol.style.Image.prototype.setOpacity=function(e){this.opacity_=e};ol.style.Image.prototype.setRotateWithView=function(e){this.rotateWithView_=e};ol.style.Image.prototype.setRotation=function(e){this.rotation_=e};ol.style.Image.prototype.setScale=function(e){this.scale_=e};ol.style.Image.prototype.setSnapToPixel=function(e){this.snapToPixel_=e};ol.style.IconAnchorUnits={FRACTION:"fraction",PIXELS:"pixels"};ol.style.IconOrigin={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};ol.style.Icon=function(e){e=goog.isDef(e)?e:{};this.anchor_=goog.isDef(e.anchor)?e.anchor:[.5,.5];this.normalizedAnchor_=null;this.anchorOrigin_=goog.isDef(e.anchorOrigin)?e.anchorOrigin:ol.style.IconOrigin.TOP_LEFT;this.anchorXUnits_=goog.isDef(e.anchorXUnits)?e.anchorXUnits:ol.style.IconAnchorUnits.FRACTION;this.anchorYUnits_=goog.isDef(e.anchorYUnits)?e.anchorYUnits:ol.style.IconAnchorUnits.FRACTION;var t=goog.isDef(e.crossOrigin)?e.crossOrigin:null,o=goog.isDef(e.img)?e.img:null,r=goog.isDef(e.imgSize)?e.imgSize:null,n=e.src;goog.asserts.assert(!(goog.isDef(n)&&!goog.isNull(o)),"image and src can not provided at the same time");goog.asserts.assert(!goog.isDef(n)||goog.isDef(n)&&goog.isNull(r),"imgSize should not be set when src is provided");goog.asserts.assert(goog.isNull(o)||!goog.isNull(o)&&!goog.isNull(r),"imgSize must be set when image is provided");goog.isDef(n)&&0!==n.length||goog.isNull(o)||(n=o.src);goog.asserts.assert(goog.isDef(n)&&0<n.length,"must provide a defined and non-empty src or image");var i=goog.isDef(e.src)?ol.style.ImageState.IDLE:ol.style.ImageState.LOADED;this.iconImage_=ol.style.IconImage_.get(o,n,r,t,i);this.offset_=goog.isDef(e.offset)?e.offset:[0,0];this.offsetOrigin_=goog.isDef(e.offsetOrigin)?e.offsetOrigin:ol.style.IconOrigin.TOP_LEFT;this.origin_=null;this.size_=goog.isDef(e.size)?e.size:null;t=goog.isDef(e.opacity)?e.opacity:1;o=goog.isDef(e.rotateWithView)?e.rotateWithView:!1;r=goog.isDef(e.rotation)?e.rotation:0;n=goog.isDef(e.scale)?e.scale:1;e=goog.isDef(e.snapToPixel)?e.snapToPixel:!0;ol.style.Image.call(this,{opacity:t,rotation:r,scale:n,snapToPixel:e,rotateWithView:o})};goog.inherits(ol.style.Icon,ol.style.Image);ol.style.Icon.prototype.getAnchor=function(){if(!goog.isNull(this.normalizedAnchor_))return this.normalizedAnchor_;var e=this.anchor_,t=this.getSize();if(this.anchorXUnits_==ol.style.IconAnchorUnits.FRACTION||this.anchorYUnits_==ol.style.IconAnchorUnits.FRACTION){if(goog.isNull(t))return null;e=this.anchor_.slice();this.anchorXUnits_==ol.style.IconAnchorUnits.FRACTION&&(e[0]*=t[0]);this.anchorYUnits_==ol.style.IconAnchorUnits.FRACTION&&(e[1]*=t[1])}if(this.anchorOrigin_!=ol.style.IconOrigin.TOP_LEFT){if(goog.isNull(t))return null;e===this.anchor_&&(e=this.anchor_.slice());(this.anchorOrigin_==ol.style.IconOrigin.TOP_RIGHT||this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT)&&(e[0]=-e[0]+t[0]);(this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_LEFT||this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT)&&(e[1]=-e[1]+t[1])}return this.normalizedAnchor_=e};ol.style.Icon.prototype.getImage=function(e){return this.iconImage_.getImage(e)};ol.style.Icon.prototype.getImageSize=function(){return this.iconImage_.getSize()};ol.style.Icon.prototype.getHitDetectionImageSize=function(){return this.getImageSize()};ol.style.Icon.prototype.getImageState=function(){return this.iconImage_.getImageState()};ol.style.Icon.prototype.getHitDetectionImage=function(e){return this.iconImage_.getHitDetectionImage(e)};ol.style.Icon.prototype.getOrigin=function(){if(!goog.isNull(this.origin_))return this.origin_;var e=this.offset_;if(this.offsetOrigin_!=ol.style.IconOrigin.TOP_LEFT){var t=this.getSize(),o=this.iconImage_.getSize();if(goog.isNull(t)||goog.isNull(o))return null;e=e.slice();(this.offsetOrigin_==ol.style.IconOrigin.TOP_RIGHT||this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT)&&(e[0]=o[0]-t[0]-e[0]);(this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_LEFT||this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT)&&(e[1]=o[1]-t[1]-e[1])}return this.origin_=e};ol.style.Icon.prototype.getSrc=function(){return this.iconImage_.getSrc()};ol.style.Icon.prototype.getSize=function(){return goog.isNull(this.size_)?this.iconImage_.getSize():this.size_};ol.style.Icon.prototype.listenImageChange=function(e,t){return goog.events.listen(this.iconImage_,goog.events.EventType.CHANGE,e,!1,t)};ol.style.Icon.prototype.load=function(){this.iconImage_.load()};ol.style.Icon.prototype.unlistenImageChange=function(e,t){goog.events.unlisten(this.iconImage_,goog.events.EventType.CHANGE,e,!1,t)};ol.style.IconImage_=function(e,t,o,r,n){goog.events.EventTarget.call(this);this.hitDetectionImage_=null;this.image_=goog.isNull(e)?new Image:e;goog.isNull(r)||(this.image_.crossOrigin=r);this.imageListenerKeys_=null;this.imageState_=n;this.size_=o;this.src_=t;this.tainting_=!1};goog.inherits(ol.style.IconImage_,goog.events.EventTarget);ol.style.IconImage_.get=function(e,t,o,r,n){var i=ol.style.IconImageCache.getInstance(),s=i.get(t,r);goog.isNull(s)&&(s=new ol.style.IconImage_(e,t,o,r,n),i.set(t,r,s));return s};ol.style.IconImage_.prototype.determineTainting_=function(){var e=ol.dom.createCanvasContext2D(1,1);e.drawImage(this.image_,0,0);try{e.getImageData(0,0,1,1)}catch(t){this.tainting_=!0}};ol.style.IconImage_.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(goog.events.EventType.CHANGE)};ol.style.IconImage_.prototype.handleImageError_=function(){this.imageState_=ol.style.ImageState.ERROR;this.unlistenImage_();this.dispatchChangeEvent_()};ol.style.IconImage_.prototype.handleImageLoad_=function(){this.imageState_=ol.style.ImageState.LOADED;this.size_=[this.image_.width,this.image_.height];this.unlistenImage_();this.determineTainting_();this.dispatchChangeEvent_()};ol.style.IconImage_.prototype.getImage=function(){return this.image_};ol.style.IconImage_.prototype.getImageState=function(){return this.imageState_};ol.style.IconImage_.prototype.getHitDetectionImage=function(e){if(goog.isNull(this.hitDetectionImage_))if(this.tainting_){e=this.size_[0];var t=this.size_[1],o=ol.dom.createCanvasContext2D(e,t);o.fillRect(0,0,e,t);this.hitDetectionImage_=o.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_};ol.style.IconImage_.prototype.getSize=function(){return this.size_};ol.style.IconImage_.prototype.getSrc=function(){return this.src_};ol.style.IconImage_.prototype.load=function(){if(this.imageState_==ol.style.ImageState.IDLE){goog.asserts.assert(goog.isDef(this.src_),"this.src_ must not be undefined");goog.asserts.assert(goog.isNull(this.imageListenerKeys_),"no listener keys existing");this.imageState_=ol.style.ImageState.LOADING;this.imageListenerKeys_=[goog.events.listenOnce(this.image_,goog.events.EventType.ERROR,this.handleImageError_,!1,this),goog.events.listenOnce(this.image_,goog.events.EventType.LOAD,this.handleImageLoad_,!1,this)];try{this.image_.src=this.src_}catch(e){this.handleImageError_()}}};ol.style.IconImage_.prototype.unlistenImage_=function(){goog.asserts.assert(!goog.isNull(this.imageListenerKeys_),"we must have listeners registered");goog.array.forEach(this.imageListenerKeys_,goog.events.unlistenByKey);this.imageListenerKeys_=null};ol.style.IconImageCache=function(){this.cache_={};this.cacheSize_=0;this.maxCacheSize_=32};goog.addSingletonGetter(ol.style.IconImageCache);ol.style.IconImageCache.getKey=function(e,t){goog.asserts.assert(goog.isDef(t),"argument crossOrigin must be defined");return t+":"+e};ol.style.IconImageCache.prototype.clear=function(){this.cache_={};this.cacheSize_=0};ol.style.IconImageCache.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var e,t,o=0;for(e in this.cache_)t=this.cache_[e],0!==(3&o++)||goog.events.hasListener(t)||(delete this.cache_[e],--this.cacheSize_)}};ol.style.IconImageCache.prototype.get=function(e,t){var o=ol.style.IconImageCache.getKey(e,t);return o in this.cache_?this.cache_[o]:null};ol.style.IconImageCache.prototype.set=function(e,t,o){e=ol.style.IconImageCache.getKey(e,t);this.cache_[e]=o;++this.cacheSize_};ol.RendererType={CANVAS:"canvas",DOM:"dom",WEBGL:"webgl"};ol.renderer.Map=function(e,t){goog.Disposable.call(this);this.map_=t;this.layerRenderers_={};this.layerRendererListeners_={}};goog.inherits(ol.renderer.Map,goog.Disposable);ol.renderer.Map.prototype.calculateMatrices2D=function(e){var t=e.viewState,o=e.coordinateToPixelMatrix;goog.asserts.assert(!goog.isNull(o),"frameState has non-null coordinateToPixelMatrix");ol.vec.Mat4.makeTransform2D(o,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]);e=goog.vec.Mat4.invert(o,e.pixelToCoordinateMatrix);goog.asserts.assert(e,"matrix could be inverted")};ol.renderer.Map.prototype.disposeInternal=function(){goog.object.forEach(this.layerRenderers_,goog.dispose);ol.renderer.Map.superClass_.disposeInternal.call(this)};ol.renderer.Map.expireIconCache_=function(){ol.style.IconImageCache.getInstance().expire()};ol.renderer.Map.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,n,i){var s,a=t.viewState,g=a.resolution,l=a.projection,a=e;if(l.canWrapX()){s=l.getExtent();var l=ol.extent.getWidth(s),u=e[0];(u<s[0]||u>s[2])&&(a=Math.ceil((s[0]-u)/l),a=[u+l*a,e[1]])}l=t.layerStatesArray;for(u=l.length-1;u>=0;--u){s=l[u];var c=s.layer;if((!s.managed||ol.layer.Layer.visibleAtResolution(s,g)&&n.call(i,c))&&(s=this.getLayerRenderer(c).forEachFeatureAtCoordinate(c.getSource().getWrapX()?a:e,t,o,r)))return s}};ol.renderer.Map.prototype.forEachLayerAtPixel=function(e,t,o,r,n,i){var s,a,g=t.viewState.resolution,l=t.layerStatesArray;for(a=l.length-1;a>=0;--a){s=l[a];var u=s.layer;if(ol.layer.Layer.visibleAtResolution(s,g)&&n.call(i,u)&&(s=this.getLayerRenderer(u).forEachLayerAtPixel(e,t,o,r)))return s}};ol.renderer.Map.prototype.hasFeatureAtCoordinate=function(e,t,o,r){e=this.forEachFeatureAtCoordinate(e,t,goog.functions.TRUE,this,o,r);return goog.isDef(e)};ol.renderer.Map.prototype.getLayerRenderer=function(e){var t=goog.getUid(e).toString();if(t in this.layerRenderers_)return this.layerRenderers_[t];e=this.createLayerRenderer(e);this.layerRenderers_[t]=e;this.layerRendererListeners_[t]=goog.events.listen(e,goog.events.EventType.CHANGE,this.handleLayerRendererChange_,!1,this);return e};ol.renderer.Map.prototype.getLayerRendererByKey=function(e){goog.asserts.assert(e in this.layerRenderers_,"given layerKey (%s) exists in layerRenderers",e);return this.layerRenderers_[e]};ol.renderer.Map.prototype.getLayerRenderers=function(){return this.layerRenderers_};ol.renderer.Map.prototype.getMap=function(){return this.map_};ol.renderer.Map.prototype.handleLayerRendererChange_=function(){this.map_.render()};ol.renderer.Map.prototype.removeLayerRendererByKey_=function(e){goog.asserts.assert(e in this.layerRenderers_,"given layerKey (%s) exists in layerRenderers",e);var t=this.layerRenderers_[e];delete this.layerRenderers_[e];goog.asserts.assert(e in this.layerRendererListeners_,"given layerKey (%s) exists in layerRendererListeners",e);goog.events.unlistenByKey(this.layerRendererListeners_[e]);delete this.layerRendererListeners_[e];return t};ol.renderer.Map.prototype.renderFrame=goog.nullFunction;ol.renderer.Map.prototype.removeUnusedLayerRenderers_=function(e,t){for(var o in this.layerRenderers_)!goog.isNull(t)&&o in t.layerStates||goog.dispose(this.removeLayerRendererByKey_(o))};ol.renderer.Map.prototype.scheduleExpireIconCache=function(e){e.postRenderFunctions.push(ol.renderer.Map.expireIconCache_)};ol.renderer.Map.prototype.scheduleRemoveUnusedLayerRenderers=function(e){for(var t in this.layerRenderers_)if(!(t in e.layerStates)){e.postRenderFunctions.push(goog.bind(this.removeUnusedLayerRenderers_,this));break}};ol.renderer.Map.sortByZIndex=function(e,t){return e.zIndex-t.zIndex};ol.structs.PriorityQueue=function(e,t){this.priorityFunction_=e;this.keyFunction_=t;this.elements_=[];this.priorities_=[];this.queuedElements_={}};ol.structs.PriorityQueue.DROP=1/0;ol.structs.PriorityQueue.prototype.assertValid=function(){var e=this.priorities_,t=this.elements_.length;
goog.asserts.assert(e.length==t);var o,r;for(o=0;(t>>1)-1>o;++o)r=e[o],goog.asserts.assert(r<=e[this.getLeftChildIndex_(o)],"priority smaller than or equal to priority of left child (%s <= %s)",r,e[this.getLeftChildIndex_(o)]),goog.asserts.assert(r<=e[this.getRightChildIndex_(o)],"priority smaller than or equal to priority of right child (%s <= %s)",r,e[this.getRightChildIndex_(o)])};ol.structs.PriorityQueue.prototype.clear=function(){this.elements_.length=0;this.priorities_.length=0;goog.object.clear(this.queuedElements_)};ol.structs.PriorityQueue.prototype.dequeue=function(){var e=this.elements_;goog.asserts.assert(0<e.length,"must have elements in order to be able to dequeue");var t=this.priorities_,o=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));e=this.keyFunction_(o);goog.asserts.assert(e in this.queuedElements_,"key %s is not listed as queued",e);delete this.queuedElements_[e];return o};ol.structs.PriorityQueue.prototype.enqueue=function(e){goog.asserts.assert(!(this.keyFunction_(e)in this.queuedElements_),"key %s is already listed as queued",this.keyFunction_(e));var t=this.priorityFunction_(e);t!=ol.structs.PriorityQueue.DROP&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1))};ol.structs.PriorityQueue.prototype.getCount=function(){return this.elements_.length};ol.structs.PriorityQueue.prototype.getLeftChildIndex_=function(e){return 2*e+1};ol.structs.PriorityQueue.prototype.getRightChildIndex_=function(e){return 2*e+2};ol.structs.PriorityQueue.prototype.getParentIndex_=function(e){return e-1>>1};ol.structs.PriorityQueue.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)};ol.structs.PriorityQueue.prototype.isEmpty=function(){return 0===this.elements_.length};ol.structs.PriorityQueue.prototype.isKeyQueued=function(e){return e in this.queuedElements_};ol.structs.PriorityQueue.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))};ol.structs.PriorityQueue.prototype.siftUp_=function(e){for(var t=this.elements_,o=this.priorities_,r=t.length,n=t[e],i=o[e],s=e;r>>1>e;){var a=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),a=r>g&&o[g]<o[a]?g:a;t[e]=t[a];o[e]=o[a];e=a}t[e]=n;o[e]=i;this.siftDown_(s,e)};ol.structs.PriorityQueue.prototype.siftDown_=function(e,t){for(var o=this.elements_,r=this.priorities_,n=o[t],i=r[t];t>e;){var s=this.getParentIndex_(t);if(!(r[s]>i))break;o[t]=o[s],r[t]=r[s],t=s}o[t]=n;r[t]=i};ol.structs.PriorityQueue.prototype.reprioritize=function(){var e,t,o,r=this.priorityFunction_,n=this.elements_,i=this.priorities_,s=0,a=n.length;for(t=0;a>t;++t)e=n[t],o=r(e),o==ol.structs.PriorityQueue.DROP?delete this.queuedElements_[this.keyFunction_(e)]:(i[s]=o,n[s++]=e);n.length=s;i.length=s;this.heapify_()};ol.TileQueue=function(e,t){ol.structs.PriorityQueue.call(this,function(t){return e.apply(null,t)},function(e){return e[0].getKey()});this.tileChangeCallback_=t;this.tilesLoading_=0};goog.inherits(ol.TileQueue,ol.structs.PriorityQueue);ol.TileQueue.prototype.getTilesLoading=function(){return this.tilesLoading_};ol.TileQueue.prototype.handleTileChange=function(e){e=e.target;var t=e.getState();(t===ol.TileState.LOADED||t===ol.TileState.ERROR||t===ol.TileState.EMPTY)&&(goog.events.unlisten(e,goog.events.EventType.CHANGE,this.handleTileChange,!1,this),--this.tilesLoading_,this.tileChangeCallback_())};ol.TileQueue.prototype.loadMoreTiles=function(e,t){for(var o,r=0;this.tilesLoading_<e&&t>r&&0<this.getCount();)o=this.dequeue()[0],o.getState()===ol.TileState.IDLE&&(goog.events.listen(o,goog.events.EventType.CHANGE,this.handleTileChange,!1,this),o.load(),++this.tilesLoading_,++r)};ol.Kinetic=function(e,t,o){this.decay_=e;this.minVelocity_=t;this.delay_=o;this.points_=[];this.initialVelocity_=this.angle_=0};ol.Kinetic.prototype.begin=function(){this.initialVelocity_=this.angle_=this.points_.length=0};ol.Kinetic.prototype.update=function(e,t){this.points_.push(e,t,goog.now())};ol.Kinetic.prototype.end=function(){if(6>this.points_.length)return!1;var e=goog.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;for(var o=t-3;o>0&&this.points_[o+2]>e;)o-=3;var e=this.points_[t+2]-this.points_[o+2],r=this.points_[t]-this.points_[o],t=this.points_[t+1]-this.points_[o+1];this.angle_=Math.atan2(t,r);this.initialVelocity_=Math.sqrt(r*r+t*t)/e;return this.initialVelocity_>this.minVelocity_};ol.Kinetic.prototype.pan=function(e){var t=this.decay_,o=this.initialVelocity_,r=this.minVelocity_-o,n=this.getDuration_();return ol.animation.pan({source:e,duration:n,easing:function(e){return o*(Math.exp(t*e*n)-1)/r}})};ol.Kinetic.prototype.getDuration_=function(){return Math.log(this.minVelocity_/this.initialVelocity_)/this.decay_};ol.Kinetic.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_};ol.Kinetic.prototype.getAngle=function(){return this.angle_};ol.interaction={};ol.interaction.InteractionProperty={ACTIVE:"active"};ol.interaction.Interaction=function(e){ol.Object.call(this);this.map_=null;this.setActive(!0);this.handleEvent=e.handleEvent};goog.inherits(ol.interaction.Interaction,ol.Object);ol.interaction.Interaction.prototype.getActive=function(){return this.get(ol.interaction.InteractionProperty.ACTIVE)};ol.interaction.Interaction.prototype.getMap=function(){return this.map_};ol.interaction.Interaction.prototype.setActive=function(e){this.set(ol.interaction.InteractionProperty.ACTIVE,e)};ol.interaction.Interaction.prototype.setMap=function(e){this.map_=e};ol.interaction.Interaction.pan=function(e,t,o,r){var n=t.getCenter();goog.isDef(n)&&(goog.isDef(r)&&r>0&&e.beforeRender(ol.animation.pan({source:n,duration:r,easing:ol.easing.linear})),e=t.constrainCenter([n[0]+o[0],n[1]+o[1]]),t.setCenter(e))};ol.interaction.Interaction.rotate=function(e,t,o,r,n){o=t.constrainRotation(o,0);ol.interaction.Interaction.rotateWithoutConstraints(e,t,o,r,n)};ol.interaction.Interaction.rotateWithoutConstraints=function(e,t,o,r,n){if(goog.isDefAndNotNull(o)){var i=t.getRotation(),s=t.getCenter();goog.isDef(i)&&goog.isDef(s)&&goog.isDef(n)&&n>0&&(e.beforeRender(ol.animation.rotate({rotation:i,duration:n,easing:ol.easing.easeOut})),goog.isDef(r)&&e.beforeRender(ol.animation.pan({source:s,duration:n,easing:ol.easing.easeOut})));t.rotate(o,r)}};ol.interaction.Interaction.zoom=function(e,t,o,r,n,i){o=t.constrainResolution(o,0,i);ol.interaction.Interaction.zoomWithoutConstraints(e,t,o,r,n)};ol.interaction.Interaction.zoomByDelta=function(e,t,o,r,n){var i=t.getResolution();o=t.constrainResolution(i,o,0);ol.interaction.Interaction.zoomWithoutConstraints(e,t,o,r,n)};ol.interaction.Interaction.zoomWithoutConstraints=function(e,t,o,r,n){if(goog.isDefAndNotNull(o)){var i=t.getResolution(),s=t.getCenter();goog.isDef(i)&&goog.isDef(s)&&goog.isDef(n)&&n>0&&(e.beforeRender(ol.animation.zoom({resolution:i,duration:n,easing:ol.easing.easeOut})),goog.isDef(r)&&e.beforeRender(ol.animation.pan({source:s,duration:n,easing:ol.easing.easeOut})));goog.isDefAndNotNull(r)&&(e=t.calculateCenterZoom(o,r),t.setCenter(e));t.setResolution(o)}};ol.interaction.DoubleClickZoom=function(e){e=goog.isDef(e)?e:{};this.delta_=goog.isDef(e.delta)?e.delta:1;ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.DoubleClickZoom.handleEvent});this.duration_=goog.isDef(e.duration)?e.duration:250};goog.inherits(ol.interaction.DoubleClickZoom,ol.interaction.Interaction);ol.interaction.DoubleClickZoom.handleEvent=function(e){var t=!1,o=e.browserEvent;if(e.type==ol.MapBrowserEvent.EventType.DBLCLICK){var t=e.map,r=e.coordinate,o=o.shiftKey?-this.delta_:this.delta_,n=t.getView();goog.asserts.assert(!goog.isNull(n),"view should not be null");ol.interaction.Interaction.zoomByDelta(t,n,o,r,this.duration_);e.preventDefault();t=!0}return!t};ol.events={};ol.events.condition={};ol.events.condition.altKeyOnly=function(e){e=e.browserEvent;return e.altKey&&!e.platformModifierKey&&!e.shiftKey};ol.events.condition.altShiftKeysOnly=function(e){e=e.browserEvent;return e.altKey&&!e.platformModifierKey&&e.shiftKey};ol.events.condition.always=goog.functions.TRUE;ol.events.condition.click=function(e){return e.type==ol.MapBrowserEvent.EventType.CLICK};ol.events.condition.never=goog.functions.FALSE;ol.events.condition.pointerMove=function(e){return"pointermove"==e.type};ol.events.condition.singleClick=function(e){return e.type==ol.MapBrowserEvent.EventType.SINGLECLICK};ol.events.condition.doubleClick=function(e){return e.type==ol.MapBrowserEvent.EventType.DBLCLICK};ol.events.condition.noModifierKeys=function(e){e=e.browserEvent;return!e.altKey&&!e.platformModifierKey&&!e.shiftKey};ol.events.condition.platformModifierKeyOnly=function(e){e=e.browserEvent;return!e.altKey&&e.platformModifierKey&&!e.shiftKey};ol.events.condition.shiftKeyOnly=function(e){e=e.browserEvent;return!e.altKey&&!e.platformModifierKey&&e.shiftKey};ol.events.condition.targetNotEditable=function(e){e=e.browserEvent.target;goog.asserts.assertInstanceof(e,Element,"target should be an Element");e=e.tagName;return e!==goog.dom.TagName.INPUT&&e!==goog.dom.TagName.SELECT&&e!==goog.dom.TagName.TEXTAREA};ol.events.condition.mouseOnly=function(e){goog.asserts.assertInstanceof(e,ol.MapBrowserPointerEvent,"mapBrowserEvent should be an instance of ol.MapBrowserPointerEvent");return 1==e.pointerEvent.pointerId};ol.interaction.Pointer=function(e){e=goog.isDef(e)?e:{};var t=goog.isDef(e.handleEvent)?e.handleEvent:ol.interaction.Pointer.handleEvent;ol.interaction.Interaction.call(this,{handleEvent:t});this.handleDownEvent_=goog.isDef(e.handleDownEvent)?e.handleDownEvent:ol.interaction.Pointer.handleDownEvent;this.handleDragEvent_=goog.isDef(e.handleDragEvent)?e.handleDragEvent:ol.interaction.Pointer.handleDragEvent;this.handleMoveEvent_=goog.isDef(e.handleMoveEvent)?e.handleMoveEvent:ol.interaction.Pointer.handleMoveEvent;this.handleUpEvent_=goog.isDef(e.handleUpEvent)?e.handleUpEvent:ol.interaction.Pointer.handleUpEvent;this.handlingDownUpSequence=!1;this.trackedPointers_={};this.targetPointers=[]};goog.inherits(ol.interaction.Pointer,ol.interaction.Interaction);ol.interaction.Pointer.centroid=function(e){for(var t=e.length,o=0,r=0,n=0;t>n;n++)o+=e[n].clientX,r+=e[n].clientY;return[o/t,r/t]};ol.interaction.Pointer.prototype.isPointerDraggingEvent_=function(e){e=e.type;return e===ol.MapBrowserEvent.EventType.POINTERDOWN||e===ol.MapBrowserEvent.EventType.POINTERDRAG||e===ol.MapBrowserEvent.EventType.POINTERUP};ol.interaction.Pointer.prototype.updateTrackedPointers_=function(e){if(this.isPointerDraggingEvent_(e)){var t=e.pointerEvent;e.type==ol.MapBrowserEvent.EventType.POINTERUP?delete this.trackedPointers_[t.pointerId]:e.type==ol.MapBrowserEvent.EventType.POINTERDOWN?this.trackedPointers_[t.pointerId]=t:t.pointerId in this.trackedPointers_&&(this.trackedPointers_[t.pointerId]=t);this.targetPointers=goog.object.getValues(this.trackedPointers_)}};ol.interaction.Pointer.handleDragEvent=goog.nullFunction;ol.interaction.Pointer.handleUpEvent=goog.functions.FALSE;ol.interaction.Pointer.handleDownEvent=goog.functions.FALSE;ol.interaction.Pointer.handleMoveEvent=goog.nullFunction;ol.interaction.Pointer.handleEvent=function(e){if(!(e instanceof ol.MapBrowserPointerEvent))return!0;var t=!1;this.updateTrackedPointers_(e);this.handlingDownUpSequence&&(e.type==ol.MapBrowserEvent.EventType.POINTERDRAG?this.handleDragEvent_(e):e.type==ol.MapBrowserEvent.EventType.POINTERUP&&(this.handlingDownUpSequence=this.handleUpEvent_(e)));e.type==ol.MapBrowserEvent.EventType.POINTERDOWN?(this.handlingDownUpSequence=e=this.handleDownEvent_(e),t=this.shouldStopEvent(e)):e.type==ol.MapBrowserEvent.EventType.POINTERMOVE&&this.handleMoveEvent_(e);return!t};ol.interaction.Pointer.prototype.shouldStopEvent=goog.functions.identity;ol.interaction.DragPan=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.DragPan.handleDownEvent_,handleDragEvent:ol.interaction.DragPan.handleDragEvent_,handleUpEvent:ol.interaction.DragPan.handleUpEvent_});e=goog.isDef(e)?e:{};this.kinetic_=e.kinetic;this.lastCentroid=this.kineticPreRenderFn_=null;this.condition_=goog.isDef(e.condition)?e.condition:ol.events.condition.noModifierKeys;this.noKinetic_=!1};goog.inherits(ol.interaction.DragPan,ol.interaction.Pointer);ol.interaction.DragPan.handleDragEvent_=function(e){goog.asserts.assert(1<=this.targetPointers.length,"the length of this.targetPointers should be more than 1");var t=ol.interaction.Pointer.centroid(this.targetPointers);this.kinetic_&&this.kinetic_.update(t[0],t[1]);if(!goog.isNull(this.lastCentroid)){var o=this.lastCentroid[0]-t[0],r=t[1]-this.lastCentroid[1];e=e.map;var n=e.getView(),i=n.getState(),o=[o,r];ol.coordinate.scale(o,i.resolution);ol.coordinate.rotate(o,i.rotation);ol.coordinate.add(o,i.center);o=n.constrainCenter(o);e.render();n.setCenter(o)}this.lastCentroid=t};ol.interaction.DragPan.handleUpEvent_=function(e){e=e.map;var t=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),n=t.getCenter();goog.asserts.assert(goog.isDef(n),"center should be defined");this.kineticPreRenderFn_=this.kinetic_.pan(n);e.beforeRender(this.kineticPreRenderFn_);n=e.getPixelFromCoordinate(n);o=e.getCoordinateFromPixel([n[0]-o*Math.cos(r),n[1]-o*Math.sin(r)]);o=t.constrainCenter(o);t.setCenter(o)}t.setHint(ol.ViewHint.INTERACTING,-1);e.render();return!1}this.lastCentroid=null;return!0};ol.interaction.DragPan.handleDownEvent_=function(e){if(0<this.targetPointers.length&&this.condition_(e)){var t=e.map,o=t.getView();this.lastCentroid=null;this.handlingDownUpSequence||o.setHint(ol.ViewHint.INTERACTING,1);t.render();!goog.isNull(this.kineticPreRenderFn_)&&t.removePreRenderFunction(this.kineticPreRenderFn_)&&(o.setCenter(e.frameState.viewState.center),this.kineticPreRenderFn_=null);this.kinetic_&&this.kinetic_.begin();this.noKinetic_=1<this.targetPointers.length;return!0}return!1};ol.interaction.DragPan.prototype.shouldStopEvent=goog.functions.FALSE;ol.interaction.DragRotate=function(e){e=goog.isDef(e)?e:{};ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.DragRotate.handleDownEvent_,handleDragEvent:ol.interaction.DragRotate.handleDragEvent_,handleUpEvent:ol.interaction.DragRotate.handleUpEvent_});this.condition_=goog.isDef(e.condition)?e.condition:ol.events.condition.altShiftKeysOnly;this.lastAngle_=void 0;this.duration_=goog.isDef(e.duration)?e.duration:250};goog.inherits(ol.interaction.DragRotate,ol.interaction.Pointer);ol.interaction.DragRotate.handleDragEvent_=function(e){if(ol.events.condition.mouseOnly(e)){var t=e.map,o=t.getSize();e=e.pixel;o=Math.atan2(o[1]/2-e[1],e[0]-o[0]/2);if(goog.isDef(this.lastAngle_)){e=o-this.lastAngle_;var r=t.getView(),n=r.getRotation();t.render();ol.interaction.Interaction.rotateWithoutConstraints(t,r,n-e)}this.lastAngle_=o}};ol.interaction.DragRotate.handleUpEvent_=function(e){if(!ol.events.condition.mouseOnly(e))return!0;e=e.map;var t=e.getView();t.setHint(ol.ViewHint.INTERACTING,-1);var o=t.getRotation();ol.interaction.Interaction.rotate(e,t,o,void 0,this.duration_);return!1};ol.interaction.DragRotate.handleDownEvent_=function(e){return ol.events.condition.mouseOnly(e)&&e.browserEvent.isMouseActionButton()&&this.condition_(e)?(e=e.map,e.getView().setHint(ol.ViewHint.INTERACTING,1),e.render(),this.lastAngle_=void 0,!0):!1};ol.interaction.DragRotate.prototype.shouldStopEvent=goog.functions.FALSE;ol.render.Box=function(e){this.geometry_=this.endPixel_=this.startPixel_=this.postComposeListenerKey_=this.map_=null;this.style_=e};goog.inherits(ol.render.Box,goog.Disposable);ol.render.Box.prototype.createGeometry_=function(){goog.asserts.assert(!goog.isNull(this.startPixel_),"this.startPixel_ should not be null");goog.asserts.assert(!goog.isNull(this.endPixel_),"this.endPixel_ should not be null");goog.asserts.assert(!goog.isNull(this.map_),"this.map_ should not be null");var e=this.startPixel_,t=this.endPixel_,e=goog.array.map([e,[e[0],t[1]],t,[t[0],e[1]]],this.map_.getCoordinateFromPixel,this.map_);e[4]=e[0].slice();return new ol.geom.Polygon([e])};ol.render.Box.prototype.disposeInternal=function(){this.setMap(null)};ol.render.Box.prototype.handleMapPostCompose_=function(e){var t=this.geometry_;goog.asserts.assert(goog.isDefAndNotNull(t),"geometry should be defined");var o=this.style_;goog.asserts.assert(!goog.isNull(o),"style should not be null");e.vectorContext.drawAsync(1/0,function(e){e.setFillStrokeStyle(o.getFill(),o.getStroke());e.setTextStyle(o.getText());e.drawPolygonGeometry(t,null)})};ol.render.Box.prototype.getGeometry=function(){return this.geometry_};ol.render.Box.prototype.requestMapRenderFrame_=function(){goog.isNull(this.map_)||goog.isNull(this.startPixel_)||goog.isNull(this.endPixel_)||this.map_.render()};ol.render.Box.prototype.setMap=function(e){goog.isNull(this.postComposeListenerKey_)||(goog.events.unlistenByKey(this.postComposeListenerKey_),this.postComposeListenerKey_=null,this.map_.render(),this.map_=null);this.map_=e;goog.isNull(this.map_)||(this.postComposeListenerKey_=goog.events.listen(e,ol.render.EventType.POSTCOMPOSE,this.handleMapPostCompose_,!1,this),this.requestMapRenderFrame_())};ol.render.Box.prototype.setPixels=function(e,t){this.startPixel_=e;this.endPixel_=t;this.geometry_=this.createGeometry_();this.requestMapRenderFrame_()};ol.DRAG_BOX_HYSTERESIS_PIXELS_SQUARED=ol.DRAG_BOX_HYSTERESIS_PIXELS*ol.DRAG_BOX_HYSTERESIS_PIXELS;ol.DragBoxEventType={BOXSTART:"boxstart",BOXEND:"boxend"};ol.DragBoxEvent=function(e,t){goog.events.Event.call(this,e);this.coordinate=t};goog.inherits(ol.DragBoxEvent,goog.events.Event);ol.interaction.DragBox=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.DragBox.handleDownEvent_,handleDragEvent:ol.interaction.DragBox.handleDragEvent_,handleUpEvent:ol.interaction.DragBox.handleUpEvent_});e=goog.isDef(e)?e:{};var t=goog.isDef(e.style)?e.style:null;this.box_=new ol.render.Box(t);this.startPixel_=null;this.condition_=goog.isDef(e.condition)?e.condition:ol.events.condition.always};goog.inherits(ol.interaction.DragBox,ol.interaction.Pointer);ol.interaction.DragBox.handleDragEvent_=function(e){ol.events.condition.mouseOnly(e)&&this.box_.setPixels(this.startPixel_,e.pixel)};ol.interaction.DragBox.prototype.getGeometry=function(){return this.box_.getGeometry()};ol.interaction.DragBox.prototype.onBoxEnd=goog.nullFunction;ol.interaction.DragBox.handleUpEvent_=function(e){if(!ol.events.condition.mouseOnly(e))return!0;this.box_.setMap(null);var t=e.pixel[0]-this.startPixel_[0],o=e.pixel[1]-this.startPixel_[1];t*t+o*o>=ol.DRAG_BOX_HYSTERESIS_PIXELS_SQUARED&&(this.onBoxEnd(e),this.dispatchEvent(new ol.DragBoxEvent(ol.DragBoxEventType.BOXEND,e.coordinate)));return!1};ol.interaction.DragBox.handleDownEvent_=function(e){return ol.events.condition.mouseOnly(e)&&e.browserEvent.isMouseActionButton()&&this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ol.DragBoxEvent(ol.DragBoxEventType.BOXSTART,e.coordinate)),!0):!1};goog.crypt={};goog.crypt.stringToByteArray=function(e){for(var t=[],o=0,r=0;r<e.length;r++){for(var n=e.charCodeAt(r);n>255;)t[o++]=255&n,n>>=8;t[o++]=n}return t};goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",o=0;o<e.length;o+=8192)var r=goog.array.slice(e,o,o+8192),t=t+String.fromCharCode.apply(null,r);return t};goog.crypt.byteArrayToHex=function(e){return goog.array.map(e,function(e){e=e.toString(16);return 1<e.length?e:"0"+e}).join("")};goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],o=0;o<e.length;o+=2)t.push(parseInt(e.substring(o,o+2),16));return t};goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],o=0,r=0;r<e.length;r++){var n=e.charCodeAt(r);128>n?t[o++]=n:(2048>n?t[o++]=n>>6|192:(t[o++]=n>>12|224,t[o++]=n>>6&63|128),t[o++]=63&n|128)}return t};goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],o=0,r=0;o<e.length;){var n=e[o++];if(128>n)t[r++]=String.fromCharCode(n);else if(n>191&&224>n){var i=e[o++];t[r++]=String.fromCharCode((31&n)<<6|63&i)}else{var i=e[o++],s=e[o++];t[r++]=String.fromCharCode((15&n)<<12|(63&i)<<6|63&s)}}return t.join("")};goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var o=[],r=0;r<e.length;r++)o.push(e[r]^t[r]);return o};goog.crypt.Hash=function(){this.blockSize=-1};goog.crypt.Md5=function(){goog.crypt.Hash.call(this);this.blockSize=64;this.chain_=Array(4);this.block_=Array(this.blockSize);this.totalLength_=this.blockLength_=0;this.reset()};goog.inherits(goog.crypt.Md5,goog.crypt.Hash);goog.crypt.Md5.prototype.reset=function(){this.chain_[0]=1732584193;this.chain_[1]=4023233417;this.chain_[2]=2562383102;this.chain_[3]=271733878;this.totalLength_=this.blockLength_=0};goog.crypt.Md5.prototype.compress_=function(e,t){t||(t=0);var o=Array(16);if(goog.isString(e))for(var r=0;16>r;++r)o[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)o[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var r=this.chain_[0],n=this.chain_[1],i=this.chain_[2],s=this.chain_[3],a=0,a=r+(s^n&(i^s))+o[0]+3614090360&4294967295,r=n+(a<<7&4294967295|a>>>25),a=s+(i^r&(n^i))+o[1]+3905402710&4294967295,s=r+(a<<12&4294967295|a>>>20),a=i+(n^s&(r^n))+o[2]+606105819&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(r^i&(s^r))+o[3]+3250441966&4294967295,n=i+(a<<22&4294967295|a>>>10),a=r+(s^n&(i^s))+o[4]+4118548399&4294967295,r=n+(a<<7&4294967295|a>>>25),a=s+(i^r&(n^i))+o[5]+1200080426&4294967295,s=r+(a<<12&4294967295|a>>>20),a=i+(n^s&(r^n))+o[6]+2821735955&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(r^i&(s^r))+o[7]+4249261313&4294967295,n=i+(a<<22&4294967295|a>>>10),a=r+(s^n&(i^s))+o[8]+1770035416&4294967295,r=n+(a<<7&4294967295|a>>>25),a=s+(i^r&(n^i))+o[9]+2336552879&4294967295,s=r+(a<<12&4294967295|a>>>20),a=i+(n^s&(r^n))+o[10]+4294925233&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(r^i&(s^r))+o[11]+2304563134&4294967295,n=i+(a<<22&4294967295|a>>>10),a=r+(s^n&(i^s))+o[12]+1804603682&4294967295,r=n+(a<<7&4294967295|a>>>25),a=s+(i^r&(n^i))+o[13]+4254626195&4294967295,s=r+(a<<12&4294967295|a>>>20),a=i+(n^s&(r^n))+o[14]+2792965006&4294967295,i=s+(a<<17&4294967295|a>>>15),a=n+(r^i&(s^r))+o[15]+1236535329&4294967295,n=i+(a<<22&4294967295|a>>>10),a=r+(i^s&(n^i))+o[1]+4129170786&4294967295,r=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(r^n))+o[6]+3225465664&4294967295,s=r+(a<<9&4294967295|a>>>23),a=i+(r^n&(s^r))+o[11]+643717713&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^r&(i^s))+o[0]+3921069994&4294967295,n=i+(a<<20&4294967295|a>>>12),a=r+(i^s&(n^i))+o[5]+3593408605&4294967295,r=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(r^n))+o[10]+38016083&4294967295,s=r+(a<<9&4294967295|a>>>23),a=i+(r^n&(s^r))+o[15]+3634488961&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^r&(i^s))+o[4]+3889429448&4294967295,n=i+(a<<20&4294967295|a>>>12),a=r+(i^s&(n^i))+o[9]+568446438&4294967295,r=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(r^n))+o[14]+3275163606&4294967295,s=r+(a<<9&4294967295|a>>>23),a=i+(r^n&(s^r))+o[3]+4107603335&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^r&(i^s))+o[8]+1163531501&4294967295,n=i+(a<<20&4294967295|a>>>12),a=r+(i^s&(n^i))+o[13]+2850285829&4294967295,r=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(r^n))+o[2]+4243563512&4294967295,s=r+(a<<9&4294967295|a>>>23),a=i+(r^n&(s^r))+o[7]+1735328473&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^r&(i^s))+o[12]+2368359562&4294967295,n=i+(a<<20&4294967295|a>>>12),a=r+(n^i^s)+o[5]+4294588738&4294967295,r=n+(a<<4&4294967295|a>>>28),a=s+(r^n^i)+o[8]+2272392833&4294967295,s=r+(a<<11&4294967295|a>>>21),a=i+(s^r^n)+o[11]+1839030562&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^r)+o[14]+4259657740&4294967295,n=i+(a<<23&4294967295|a>>>9),a=r+(n^i^s)+o[1]+2763975236&4294967295,r=n+(a<<4&4294967295|a>>>28),a=s+(r^n^i)+o[4]+1272893353&4294967295,s=r+(a<<11&4294967295|a>>>21),a=i+(s^r^n)+o[7]+4139469664&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^r)+o[10]+3200236656&4294967295,n=i+(a<<23&4294967295|a>>>9),a=r+(n^i^s)+o[13]+681279174&4294967295,r=n+(a<<4&4294967295|a>>>28),a=s+(r^n^i)+o[0]+3936430074&4294967295,s=r+(a<<11&4294967295|a>>>21),a=i+(s^r^n)+o[3]+3572445317&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^r)+o[6]+76029189&4294967295,n=i+(a<<23&4294967295|a>>>9),a=r+(n^i^s)+o[9]+3654602809&4294967295,r=n+(a<<4&4294967295|a>>>28),a=s+(r^n^i)+o[12]+3873151461&4294967295,s=r+(a<<11&4294967295|a>>>21),a=i+(s^r^n)+o[15]+530742520&4294967295,i=s+(a<<16&4294967295|a>>>16),a=n+(i^s^r)+o[2]+3299628645&4294967295,n=i+(a<<23&4294967295|a>>>9),a=r+(i^(n|~s))+o[0]+4096336452&4294967295,r=n+(a<<6&4294967295|a>>>26),a=s+(n^(r|~i))+o[7]+1126891415&4294967295,s=r+(a<<10&4294967295|a>>>22),a=i+(r^(s|~n))+o[14]+2878612391&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~r))+o[5]+4237533241&4294967295,n=i+(a<<21&4294967295|a>>>11),a=r+(i^(n|~s))+o[12]+1700485571&4294967295,r=n+(a<<6&4294967295|a>>>26),a=s+(n^(r|~i))+o[3]+2399980690&4294967295,s=r+(a<<10&4294967295|a>>>22),a=i+(r^(s|~n))+o[10]+4293915773&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~r))+o[1]+2240044497&4294967295,n=i+(a<<21&4294967295|a>>>11),a=r+(i^(n|~s))+o[8]+1873313359&4294967295,r=n+(a<<6&4294967295|a>>>26),a=s+(n^(r|~i))+o[15]+4264355552&4294967295,s=r+(a<<10&4294967295|a>>>22),a=i+(r^(s|~n))+o[6]+2734768916&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~r))+o[13]+1309151649&4294967295,n=i+(a<<21&4294967295|a>>>11),a=r+(i^(n|~s))+o[4]+4149444226&4294967295,r=n+(a<<6&4294967295|a>>>26),a=s+(n^(r|~i))+o[11]+3174756917&4294967295,s=r+(a<<10&4294967295|a>>>22),a=i+(r^(s|~n))+o[2]+718787259&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~r))+o[9]+3951481745&4294967295;this.chain_[0]=this.chain_[0]+r&4294967295;this.chain_[1]=this.chain_[1]+(i+(a<<21&4294967295|a>>>11))&4294967295;this.chain_[2]=this.chain_[2]+i&4294967295;this.chain_[3]=this.chain_[3]+s&4294967295};goog.crypt.Md5.prototype.update=function(e,t){goog.isDef(t)||(t=e.length);for(var o=t-this.blockSize,r=this.block_,n=this.blockLength_,i=0;t>i;){if(0==n)for(;o>=i;)this.compress_(e,i),i+=this.blockSize;if(goog.isString(e)){for(;t>i;)if(r[n++]=e.charCodeAt(i++),n==this.blockSize){this.compress_(r);n=0;break}}else for(;t>i;)if(r[n++]=e[i++],n==this.blockSize){this.compress_(r);n=0;break}}this.blockLength_=n;this.totalLength_+=t};goog.crypt.Md5.prototype.digest=function(){var e=Array((56>this.blockLength_?this.blockSize:2*this.blockSize)-this.blockLength_);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;for(var o=8*this.totalLength_,t=e.length-8;t<e.length;++t)e[t]=255&o,o/=256;this.update(e);e=Array(16);for(t=o=0;4>t;++t)for(var r=0;32>r;r+=8)e[o++]=this.chain_[t]>>>r&255;return e};ol.structs.IHasChecksum=function(){};ol.structs.IHasChecksum.prototype.getChecksum=function(){};ol.style.Stroke=function(e){e=goog.isDef(e)?e:{};this.color_=goog.isDef(e.color)?e.color:null;this.lineCap_=e.lineCap;this.lineDash_=goog.isDef(e.lineDash)?e.lineDash:null;this.lineJoin_=e.lineJoin;this.miterLimit_=e.miterLimit;this.width_=e.width;this.checksum_=void 0};ol.style.Stroke.prototype.getColor=function(){return this.color_};ol.style.Stroke.prototype.getLineCap=function(){return this.lineCap_};ol.style.Stroke.prototype.getLineDash=function(){return this.lineDash_};ol.style.Stroke.prototype.getLineJoin=function(){return this.lineJoin_};ol.style.Stroke.prototype.getMiterLimit=function(){return this.miterLimit_};ol.style.Stroke.prototype.getWidth=function(){return this.width_};ol.style.Stroke.prototype.setColor=function(e){this.color_=e;this.checksum_=void 0};ol.style.Stroke.prototype.setLineCap=function(e){this.lineCap_=e;this.checksum_=void 0};ol.style.Stroke.prototype.setLineDash=function(e){this.lineDash_=e;this.checksum_=void 0};ol.style.Stroke.prototype.setLineJoin=function(e){this.lineJoin_=e;this.checksum_=void 0};ol.style.Stroke.prototype.setMiterLimit=function(e){this.miterLimit_=e;this.checksum_=void 0};ol.style.Stroke.prototype.setWidth=function(e){this.width_=e;this.checksum_=void 0};ol.style.Stroke.prototype.getChecksum=function(){if(!goog.isDef(this.checksum_)){var e="s"+(goog.isNull(this.color_)?"-":ol.color.asString(this.color_))+","+(goog.isDef(this.lineCap_)?this.lineCap_.toString():"-")+","+(goog.isNull(this.lineDash_)?"-":this.lineDash_.toString())+","+(goog.isDef(this.lineJoin_)?this.lineJoin_:"-")+","+(goog.isDef(this.miterLimit_)?this.miterLimit_.toString():"-")+","+(goog.isDef(this.width_)?this.width_.toString():"-"),t=new goog.crypt.Md5;t.update(e);this.checksum_=goog.crypt.byteArrayToString(t.digest())}return this.checksum_};ol.render.canvas={};ol.render.canvas.defaultFont="10px sans-serif";ol.render.canvas.defaultFillStyle=[0,0,0,1];ol.render.canvas.defaultLineCap="round";ol.render.canvas.defaultLineDash=[];ol.render.canvas.defaultLineJoin="round";ol.render.canvas.defaultMiterLimit=10;ol.render.canvas.defaultStrokeStyle=[0,0,0,1];ol.render.canvas.defaultTextAlign="center";ol.render.canvas.defaultTextBaseline="middle";ol.render.canvas.defaultLineWidth=1;ol.style.Fill=function(e){e=goog.isDef(e)?e:{};this.color_=goog.isDef(e.color)?e.color:null;this.checksum_=void 0};ol.style.Fill.prototype.getColor=function(){return this.color_};ol.style.Fill.prototype.setColor=function(e){this.color_=e;this.checksum_=void 0};ol.style.Fill.prototype.getChecksum=function(){goog.isDef(this.checksum_)||(this.checksum_="f"+(goog.isNull(this.color_)?"-":ol.color.asString(this.color_)));return this.checksum_};ol.style.Circle=function(e){e=goog.isDef(e)?e:{};this.hitDetectionCanvas_=this.canvas_=this.checksums_=null;this.fill_=goog.isDef(e.fill)?e.fill:null;this.stroke_=goog.isDef(e.stroke)?e.stroke:null;this.radius_=e.radius;this.origin_=[0,0];this.hitDetectionImageSize_=this.imageSize_=this.size_=this.anchor_=null;this.render_(e.atlasManager);e=goog.isDef(e.snapToPixel)?e.snapToPixel:!0;ol.style.Image.call(this,{opacity:1,rotateWithView:!1,rotation:0,scale:1,snapToPixel:e})};goog.inherits(ol.style.Circle,ol.style.Image);ol.style.Circle.prototype.getAnchor=function(){return this.anchor_};ol.style.Circle.prototype.getFill=function(){return this.fill_};ol.style.Circle.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_};ol.style.Circle.prototype.getImage=function(){return this.canvas_};ol.style.Circle.prototype.getImageState=function(){return ol.style.ImageState.LOADED};ol.style.Circle.prototype.getImageSize=function(){return this.imageSize_};ol.style.Circle.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_};ol.style.Circle.prototype.getOrigin=function(){return this.origin_};ol.style.Circle.prototype.getRadius=function(){return this.radius_};ol.style.Circle.prototype.getSize=function(){return this.size_};ol.style.Circle.prototype.getStroke=function(){return this.stroke_};ol.style.Circle.prototype.listenImageChange=goog.nullFunction;ol.style.Circle.prototype.load=goog.nullFunction;ol.style.Circle.prototype.unlistenImageChange=goog.nullFunction;ol.style.Circle.prototype.render_=function(e){var t,o=null,r=0;goog.isNull(this.stroke_)||(t=ol.color.asString(this.stroke_.getColor()),r=this.stroke_.getWidth(),goog.isDef(r)||(r=ol.render.canvas.defaultLineWidth),o=this.stroke_.getLineDash(),ol.has.CANVAS_LINE_DASH||(o=null));var n=2*(this.radius_+r)+1,o={strokeStyle:t,strokeWidth:r,size:n,lineDash:o};if(goog.isDef(e)){n=Math.round(n);t=goog.isNull(this.fill_);var i;t&&(i=goog.bind(this.drawHitDetectionCanvas_,this,o));r=this.getChecksum();i=e.add(r,n,n,goog.bind(this.draw_,this,o),i);goog.asserts.assert(null!==i,"circle radius is too large");this.canvas_=i.image;this.origin_=[i.offsetX,i.offsetY];e=i.image.width;t?(this.hitDetectionCanvas_=i.hitImage,this.hitDetectionImageSize_=[i.hitImage.width,i.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])
}else this.canvas_=goog.dom.createElement(goog.dom.TagName.CANVAS),this.canvas_.height=n,this.canvas_.width=n,e=n=this.canvas_.width,i=this.canvas_.getContext("2d"),this.draw_(o,i,0,0),this.createHitDetectionCanvas_(o);this.anchor_=[n/2,n/2];this.size_=[n,n];this.imageSize_=[e,e]};ol.style.Circle.prototype.draw_=function(e,t,o,r){t.setTransform(1,0,0,1,0,0);t.translate(o,r);t.beginPath();t.arc(e.size/2,e.size/2,this.radius_,0,2*Math.PI,!0);goog.isNull(this.fill_)||(t.fillStyle=ol.color.asString(this.fill_.getColor()),t.fill());goog.isNull(this.stroke_)||(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,goog.isNull(e.lineDash)||t.setLineDash(e.lineDash),t.stroke());t.closePath()};ol.style.Circle.prototype.createHitDetectionCanvas_=function(e){this.hitDetectionImageSize_=[e.size,e.size];if(goog.isNull(this.fill_)){var t=this.hitDetectionCanvas_=goog.dom.createElement(goog.dom.TagName.CANVAS);t.height=e.size;t.width=e.size;t=t.getContext("2d");this.drawHitDetectionCanvas_(e,t,0,0)}else this.hitDetectionCanvas_=this.canvas_};ol.style.Circle.prototype.drawHitDetectionCanvas_=function(e,t,o,r){t.setTransform(1,0,0,1,0,0);t.translate(o,r);t.beginPath();t.arc(e.size/2,e.size/2,this.radius_,0,2*Math.PI,!0);t.fillStyle=ol.render.canvas.defaultFillStyle;t.fill();goog.isNull(this.stroke_)||(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,goog.isNull(e.lineDash)||t.setLineDash(e.lineDash),t.stroke());t.closePath()};ol.style.Circle.prototype.getChecksum=function(){var e=goog.isNull(this.stroke_)?"-":this.stroke_.getChecksum(),t=goog.isNull(this.fill_)?"-":this.fill_.getChecksum();(goog.isNull(this.checksums_)||e!=this.checksums_[1]||t!=this.checksums_[2]||this.radius_!=this.checksums_[3])&&(this.checksums_=["c"+e+t+(goog.isDef(this.radius_)?this.radius_.toString():"-"),e,t,this.radius_]);return this.checksums_[0]};ol.style.Style=function(e){e=goog.isDef(e)?e:{};this.geometry_=null;this.geometryFunction_=ol.style.defaultGeometryFunction;goog.isDef(e.geometry)&&this.setGeometry(e.geometry);this.fill_=goog.isDef(e.fill)?e.fill:null;this.image_=goog.isDef(e.image)?e.image:null;this.stroke_=goog.isDef(e.stroke)?e.stroke:null;this.text_=goog.isDef(e.text)?e.text:null;this.zIndex_=e.zIndex};ol.style.Style.prototype.getGeometry=function(){return this.geometry_};ol.style.Style.prototype.getGeometryFunction=function(){return this.geometryFunction_};ol.style.Style.prototype.getFill=function(){return this.fill_};ol.style.Style.prototype.getImage=function(){return this.image_};ol.style.Style.prototype.getStroke=function(){return this.stroke_};ol.style.Style.prototype.getText=function(){return this.text_};ol.style.Style.prototype.getZIndex=function(){return this.zIndex_};ol.style.Style.prototype.setGeometry=function(e){goog.isFunction(e)?this.geometryFunction_=e:goog.isString(e)?this.geometryFunction_=function(t){t=t.get(e);goog.isDefAndNotNull(t)&&goog.asserts.assertInstanceof(t,ol.geom.Geometry,"feature geometry must be an ol.geom.Geometry instance");return t}:goog.isNull(e)?this.geometryFunction_=ol.style.defaultGeometryFunction:goog.isDef(e)&&(goog.asserts.assertInstanceof(e,ol.geom.Geometry,"geometry must be an ol.geom.Geometry instance"),this.geometryFunction_=function(){return e});this.geometry_=e};ol.style.Style.prototype.setZIndex=function(e){this.zIndex_=e};ol.style.createStyleFunction=function(e){goog.isFunction(e)||(goog.isArray(e)||(goog.asserts.assertInstanceof(e,ol.style.Style,"obj geometry must be an ol.style.Style instance"),e=[e]),e=goog.functions.constant(e));return e};ol.style.defaultStyle_=null;ol.style.defaultStyleFunction=function(){if(goog.isNull(ol.style.defaultStyle_)){var e=new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),t=new ol.style.Stroke({color:"#3399CC",width:1.25});ol.style.defaultStyle_=[new ol.style.Style({image:new ol.style.Circle({fill:e,stroke:t,radius:5}),fill:e,stroke:t})]}return ol.style.defaultStyle_};ol.style.createDefaultEditingStyles=function(){var e={},t=[255,255,255,1],o=[0,153,255,1];e[ol.geom.GeometryType.POLYGON]=[new ol.style.Style({fill:new ol.style.Fill({color:[255,255,255,.5]})})];e[ol.geom.GeometryType.MULTI_POLYGON]=e[ol.geom.GeometryType.POLYGON];e[ol.geom.GeometryType.LINE_STRING]=[new ol.style.Style({stroke:new ol.style.Stroke({color:t,width:5})}),new ol.style.Style({stroke:new ol.style.Stroke({color:o,width:3})})];e[ol.geom.GeometryType.MULTI_LINE_STRING]=e[ol.geom.GeometryType.LINE_STRING];e[ol.geom.GeometryType.CIRCLE]=e[ol.geom.GeometryType.POLYGON].concat(e[ol.geom.GeometryType.LINE_STRING]);e[ol.geom.GeometryType.POINT]=[new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:o}),stroke:new ol.style.Stroke({color:t,width:1.5})}),zIndex:1/0})];e[ol.geom.GeometryType.MULTI_POINT]=e[ol.geom.GeometryType.POINT];e[ol.geom.GeometryType.GEOMETRY_COLLECTION]=e[ol.geom.GeometryType.POLYGON].concat(e[ol.geom.GeometryType.LINE_STRING],e[ol.geom.GeometryType.POINT]);return e};ol.style.defaultGeometryFunction=function(e){goog.asserts.assert(!goog.isNull(e),"feature must not be null");return e.getGeometry()};ol.interaction.DragZoom=function(e){var t=goog.isDef(e)?e:{};e=goog.isDef(t.condition)?t.condition:ol.events.condition.shiftKeyOnly;this.duration_=goog.isDef(t.duration)?t.duration:200;t=goog.isDef(t.style)?t.style:new ol.style.Style({stroke:new ol.style.Stroke({color:[0,0,255,1]})});ol.interaction.DragBox.call(this,{condition:e,style:t})};goog.inherits(ol.interaction.DragZoom,ol.interaction.DragBox);ol.interaction.DragZoom.prototype.onBoxEnd=function(){var e=this.getMap(),t=e.getView();goog.asserts.assert(!goog.isNull(t),"view should not be null");var o=e.getSize();goog.asserts.assert(goog.isDef(o),"size should be defined");var r=this.getGeometry().getExtent(),o=t.constrainResolution(t.getResolutionForExtent(r,o)),n=t.getResolution();goog.asserts.assert(goog.isDef(n),"res should be defined");var i=t.getCenter();goog.asserts.assert(goog.isDef(i),"center should be defined");e.beforeRender(ol.animation.zoom({resolution:n,duration:this.duration_,easing:ol.easing.easeOut}));e.beforeRender(ol.animation.pan({source:i,duration:this.duration_,easing:ol.easing.easeOut}));t.setCenter(ol.extent.getCenter(r));t.setResolution(o)};ol.interaction.KeyboardPan=function(e){ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.KeyboardPan.handleEvent});e=goog.isDef(e)?e:{};this.condition_=goog.isDef(e.condition)?e.condition:goog.functions.and(ol.events.condition.noModifierKeys,ol.events.condition.targetNotEditable);this.duration_=goog.isDef(e.duration)?e.duration:100;this.pixelDelta_=goog.isDef(e.pixelDelta)?e.pixelDelta:128};goog.inherits(ol.interaction.KeyboardPan,ol.interaction.Interaction);ol.interaction.KeyboardPan.handleEvent=function(e){var t=!1;if(e.type==goog.events.KeyHandler.EventType.KEY){var o=e.browserEvent.keyCode;if(this.condition_(e)&&(o==goog.events.KeyCodes.DOWN||o==goog.events.KeyCodes.LEFT||o==goog.events.KeyCodes.RIGHT||o==goog.events.KeyCodes.UP)){var t=e.map,r=t.getView();goog.asserts.assert(!goog.isNull(r),"view should not be null");var n=r.getResolution()*this.pixelDelta_,i=0,s=0;o==goog.events.KeyCodes.DOWN?s=-n:o==goog.events.KeyCodes.LEFT?i=-n:o==goog.events.KeyCodes.RIGHT?i=n:s=n;o=[i,s];ol.coordinate.rotate(o,r.getRotation());ol.interaction.Interaction.pan(t,r,o,this.duration_);e.preventDefault();t=!0}}return!t};ol.interaction.KeyboardZoom=function(e){ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.KeyboardZoom.handleEvent});e=goog.isDef(e)?e:{};this.condition_=goog.isDef(e.condition)?e.condition:ol.events.condition.targetNotEditable;this.delta_=goog.isDef(e.delta)?e.delta:1;this.duration_=goog.isDef(e.duration)?e.duration:100};goog.inherits(ol.interaction.KeyboardZoom,ol.interaction.Interaction);ol.interaction.KeyboardZoom.handleEvent=function(e){var t=!1;if(e.type==goog.events.KeyHandler.EventType.KEY){var o=e.browserEvent.charCode;if(this.condition_(e)&&(43==o||45==o)){t=e.map;o=43==o?this.delta_:-this.delta_;t.render();var r=t.getView();goog.asserts.assert(!goog.isNull(r),"view should not be null");ol.interaction.Interaction.zoomByDelta(t,r,o,void 0,this.duration_);e.preventDefault();t=!0}}return!t};ol.interaction.MouseWheelZoom=function(e){ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.MouseWheelZoom.handleEvent});e=goog.isDef(e)?e:{};this.delta_=0;this.duration_=goog.isDef(e.duration)?e.duration:250;this.lastAnchor_=null;this.timeoutId_=this.startTime_=void 0};goog.inherits(ol.interaction.MouseWheelZoom,ol.interaction.Interaction);ol.interaction.MouseWheelZoom.handleEvent=function(e){var t=!1;if(e.type==goog.events.MouseWheelHandler.EventType.MOUSEWHEEL){var t=e.map,o=e.browserEvent;goog.asserts.assertInstanceof(o,goog.events.MouseWheelEvent,"mouseWheelEvent should be of type MouseWheelEvent");this.lastAnchor_=e.coordinate;this.delta_+=o.deltaY;goog.isDef(this.startTime_)||(this.startTime_=goog.now());o=Math.max(ol.MOUSEWHEELZOOM_TIMEOUT_DURATION-(goog.now()-this.startTime_),0);goog.global.clearTimeout(this.timeoutId_);this.timeoutId_=goog.global.setTimeout(goog.bind(this.doZoom_,this,t),o);e.preventDefault();t=!0}return!t};ol.interaction.MouseWheelZoom.prototype.doZoom_=function(e){var t=ol.MOUSEWHEELZOOM_MAXDELTA,t=goog.math.clamp(this.delta_,-t,t),o=e.getView();goog.asserts.assert(!goog.isNull(o),"view should not be null");e.render();ol.interaction.Interaction.zoomByDelta(e,o,-t,this.lastAnchor_,this.duration_);this.delta_=0;this.lastAnchor_=null;this.timeoutId_=this.startTime_=void 0};ol.interaction.PinchRotate=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.PinchRotate.handleDownEvent_,handleDragEvent:ol.interaction.PinchRotate.handleDragEvent_,handleUpEvent:ol.interaction.PinchRotate.handleUpEvent_});e=goog.isDef(e)?e:{};this.anchor_=null;this.lastAngle_=void 0;this.rotating_=!1;this.rotationDelta_=0;this.threshold_=goog.isDef(e.threshold)?e.threshold:.3;this.duration_=goog.isDef(e.duration)?e.duration:250};goog.inherits(ol.interaction.PinchRotate,ol.interaction.Pointer);ol.interaction.PinchRotate.handleDragEvent_=function(e){goog.asserts.assert(2<=this.targetPointers.length,"length of this.targetPointers should be greater than or equal to 2");var t=0,o=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-o.clientY,r.clientX-o.clientX);goog.isDef(this.lastAngle_)&&(t=o-this.lastAngle_,this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0));this.lastAngle_=o;e=e.map;o=goog.style.getClientPosition(e.getViewport());r=ol.interaction.Pointer.centroid(this.targetPointers);r[0]-=o.x;r[1]-=o.y;this.anchor_=e.getCoordinateFromPixel(r);this.rotating_&&(o=e.getView(),r=o.getRotation(),e.render(),ol.interaction.Interaction.rotateWithoutConstraints(e,o,r+t,this.anchor_))};ol.interaction.PinchRotate.handleUpEvent_=function(e){if(2>this.targetPointers.length){e=e.map;var t=e.getView();t.setHint(ol.ViewHint.INTERACTING,-1);if(this.rotating_){var o=t.getRotation();ol.interaction.Interaction.rotate(e,t,o,this.anchor_,this.duration_)}return!1}return!0};ol.interaction.PinchRotate.handleDownEvent_=function(e){return 2<=this.targetPointers.length?(e=e.map,this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(ol.ViewHint.INTERACTING,1),e.render(),!0):!1};ol.interaction.PinchRotate.prototype.shouldStopEvent=goog.functions.FALSE;ol.interaction.PinchZoom=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.PinchZoom.handleDownEvent_,handleDragEvent:ol.interaction.PinchZoom.handleDragEvent_,handleUpEvent:ol.interaction.PinchZoom.handleUpEvent_});e=goog.isDef(e)?e:{};this.anchor_=null;this.duration_=goog.isDef(e.duration)?e.duration:400;this.lastDistance_=void 0;this.lastScaleDelta_=1};goog.inherits(ol.interaction.PinchZoom,ol.interaction.Pointer);ol.interaction.PinchZoom.handleDragEvent_=function(e){goog.asserts.assert(2<=this.targetPointers.length,"length of this.targetPointers should be 2 or more");var t=1,o=this.targetPointers[0],r=this.targetPointers[1],n=o.clientX-r.clientX,o=o.clientY-r.clientY,n=Math.sqrt(n*n+o*o);goog.isDef(this.lastDistance_)&&(t=this.lastDistance_/n);this.lastDistance_=n;1!=t&&(this.lastScaleDelta_=t);e=e.map;var n=e.getView(),o=n.getResolution(),r=goog.style.getClientPosition(e.getViewport()),i=ol.interaction.Pointer.centroid(this.targetPointers);i[0]-=r.x;i[1]-=r.y;this.anchor_=e.getCoordinateFromPixel(i);e.render();ol.interaction.Interaction.zoomWithoutConstraints(e,n,o*t,this.anchor_)};ol.interaction.PinchZoom.handleUpEvent_=function(e){if(2>this.targetPointers.length){e=e.map;var t=e.getView();t.setHint(ol.ViewHint.INTERACTING,-1);var o=t.getResolution();ol.interaction.Interaction.zoom(e,t,o,this.anchor_,this.duration_,this.lastScaleDelta_-1);return!1}return!0};ol.interaction.PinchZoom.handleDownEvent_=function(e){return 2<=this.targetPointers.length?(e=e.map,this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(ol.ViewHint.INTERACTING,1),e.render(),!0):!1};ol.interaction.PinchZoom.prototype.shouldStopEvent=goog.functions.FALSE;ol.interaction.defaults=function(e){e=goog.isDef(e)?e:{};var t=new ol.Collection,o=new ol.Kinetic(-.005,.05,100);(goog.isDef(e.altShiftDragRotate)?e.altShiftDragRotate:1)&&t.push(new ol.interaction.DragRotate);(goog.isDef(e.doubleClickZoom)?e.doubleClickZoom:1)&&t.push(new ol.interaction.DoubleClickZoom({delta:e.zoomDelta,duration:e.zoomDuration}));(goog.isDef(e.dragPan)?e.dragPan:1)&&t.push(new ol.interaction.DragPan({kinetic:o}));(goog.isDef(e.pinchRotate)?e.pinchRotate:1)&&t.push(new ol.interaction.PinchRotate);(goog.isDef(e.pinchZoom)?e.pinchZoom:1)&&t.push(new ol.interaction.PinchZoom({duration:e.zoomDuration}));(goog.isDef(e.keyboard)?e.keyboard:1)&&(t.push(new ol.interaction.KeyboardPan),t.push(new ol.interaction.KeyboardZoom({delta:e.zoomDelta,duration:e.zoomDuration})));(goog.isDef(e.mouseWheelZoom)?e.mouseWheelZoom:1)&&t.push(new ol.interaction.MouseWheelZoom({duration:e.zoomDuration}));(goog.isDef(e.shiftDragZoom)?e.shiftDragZoom:1)&&t.push(new ol.interaction.DragZoom);return t};ol.layer.GroupProperty={LAYERS:"layers"};ol.layer.Group=function(e){var t=goog.isDef(e)?e:{};e=goog.object.clone(t);delete e.layers;t=t.layers;ol.layer.Base.call(this,e);this.layersListenerKeys_=[];this.listenerKeys_={};goog.events.listen(this,ol.Object.getChangeEventType(ol.layer.GroupProperty.LAYERS),this.handleLayersChanged_,!1,this);goog.isDefAndNotNull(t)?goog.isArray(t)?t=new ol.Collection(t.slice()):goog.asserts.assertInstanceof(t,ol.Collection,"layers should be an ol.Collection"):t=new ol.Collection;this.setLayers(t)};goog.inherits(ol.layer.Group,ol.layer.Base);ol.layer.Group.prototype.handleLayerChange_=function(){this.getVisible()&&this.changed()};ol.layer.Group.prototype.handleLayersChanged_=function(e){goog.array.forEach(this.layersListenerKeys_,goog.events.unlistenByKey);this.layersListenerKeys_.length=0;e=this.getLayers();this.layersListenerKeys_.push(goog.events.listen(e,ol.CollectionEventType.ADD,this.handleLayersAdd_,!1,this),goog.events.listen(e,ol.CollectionEventType.REMOVE,this.handleLayersRemove_,!1,this));goog.object.forEach(this.listenerKeys_,function(e){goog.array.forEach(e,goog.events.unlistenByKey)});goog.object.clear(this.listenerKeys_);e=e.getArray();var t,o,r;t=0;for(o=e.length;o>t;t++)r=e[t],this.listenerKeys_[goog.getUid(r).toString()]=[goog.events.listen(r,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,!1,this),goog.events.listen(r,goog.events.EventType.CHANGE,this.handleLayerChange_,!1,this)];this.changed()};ol.layer.Group.prototype.handleLayersAdd_=function(e){e=e.element;var t=goog.getUid(e).toString();goog.asserts.assert(!(t in this.listenerKeys_),"listeners already registered");this.listenerKeys_[t]=[goog.events.listen(e,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,!1,this),goog.events.listen(e,goog.events.EventType.CHANGE,this.handleLayerChange_,!1,this)];this.changed()};ol.layer.Group.prototype.handleLayersRemove_=function(e){e=goog.getUid(e.element).toString();goog.asserts.assert(e in this.listenerKeys_,"no listeners to unregister");goog.array.forEach(this.listenerKeys_[e],goog.events.unlistenByKey);delete this.listenerKeys_[e];this.changed()};ol.layer.Group.prototype.getLayers=function(){return this.get(ol.layer.GroupProperty.LAYERS)};ol.layer.Group.prototype.setLayers=function(e){this.set(ol.layer.GroupProperty.LAYERS,e)};ol.layer.Group.prototype.getLayersArray=function(e){var t=goog.isDef(e)?e:[];this.getLayers().forEach(function(e){e.getLayersArray(t)});return t};ol.layer.Group.prototype.getLayerStatesArray=function(e){var t=goog.isDef(e)?e:[],o=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});e=this.getLayerState();var r,n;for(r=t.length;r>o;o++)n=t[o],n.brightness=goog.math.clamp(n.brightness+e.brightness,-1,1),n.contrast*=e.contrast,n.hue+=e.hue,n.opacity*=e.opacity,n.saturation*=e.saturation,n.visible=n.visible&&e.visible,n.maxResolution=Math.min(n.maxResolution,e.maxResolution),n.minResolution=Math.max(n.minResolution,e.minResolution),goog.isDef(e.extent)&&(n.extent=goog.isDef(n.extent)?ol.extent.getIntersection(n.extent,e.extent):e.extent);return t};ol.layer.Group.prototype.getSourceState=function(){return ol.source.State.READY};ol.proj.EPSG3857={};ol.proj.EPSG3857_=function(e){ol.proj.Projection.call(this,{code:e,units:ol.proj.Units.METERS,extent:ol.proj.EPSG3857.EXTENT,global:!0,worldExtent:ol.proj.EPSG3857.WORLD_EXTENT})};goog.inherits(ol.proj.EPSG3857_,ol.proj.Projection);ol.proj.EPSG3857_.prototype.getPointResolution=function(e,t){return e/ol.math.cosh(t[1]/ol.proj.EPSG3857.RADIUS)};ol.proj.EPSG3857.RADIUS=6378137;ol.proj.EPSG3857.HALF_SIZE=Math.PI*ol.proj.EPSG3857.RADIUS;ol.proj.EPSG3857.EXTENT=[-ol.proj.EPSG3857.HALF_SIZE,-ol.proj.EPSG3857.HALF_SIZE,ol.proj.EPSG3857.HALF_SIZE,ol.proj.EPSG3857.HALF_SIZE];ol.proj.EPSG3857.WORLD_EXTENT=[-180,-85,180,85];ol.proj.EPSG3857.CODES="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ");ol.proj.EPSG3857.PROJECTIONS=goog.array.map(ol.proj.EPSG3857.CODES,function(e){return new ol.proj.EPSG3857_(e)});ol.proj.EPSG3857.fromEPSG4326=function(e,t,o){var r=e.length;o=o>1?o:2;goog.isDef(t)||(t=o>2?e.slice():Array(r));goog.asserts.assert(0===t.length%o,"modulus of output.length with dimension should be 0");for(var n=0;r>n;n+=o)t[n]=ol.proj.EPSG3857.RADIUS*Math.PI*e[n]/180,t[n+1]=ol.proj.EPSG3857.RADIUS*Math.log(Math.tan(Math.PI*(e[n+1]+90)/360));return t};ol.proj.EPSG3857.toEPSG4326=function(e,t,o){var r=e.length;o=o>1?o:2;goog.isDef(t)||(t=o>2?e.slice():Array(r));goog.asserts.assert(0===t.length%o,"modulus of output.length with dimension should be 0");for(var n=0;r>n;n+=o)t[n]=180*e[n]/(ol.proj.EPSG3857.RADIUS*Math.PI),t[n+1]=360*Math.atan(Math.exp(e[n+1]/ol.proj.EPSG3857.RADIUS))/Math.PI-90;return t};ol.proj.EPSG4326={};ol.proj.EPSG4326_=function(e,t){ol.proj.Projection.call(this,{code:e,units:ol.proj.Units.DEGREES,extent:ol.proj.EPSG4326.EXTENT,axisOrientation:t,global:!0,worldExtent:ol.proj.EPSG4326.EXTENT})};goog.inherits(ol.proj.EPSG4326_,ol.proj.Projection);ol.proj.EPSG4326_.prototype.getPointResolution=function(e){return e};ol.proj.EPSG4326.EXTENT=[-180,-90,180,90];ol.proj.EPSG4326.PROJECTIONS=[new ol.proj.EPSG4326_("CRS:84"),new ol.proj.EPSG4326_("EPSG:4326","neu"),new ol.proj.EPSG4326_("urn:ogc:def:crs:EPSG::4326","neu"),new ol.proj.EPSG4326_("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new ol.proj.EPSG4326_("urn:ogc:def:crs:OGC:1.3:CRS84"),new ol.proj.EPSG4326_("urn:ogc:def:crs:OGC:2:84"),new ol.proj.EPSG4326_("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ol.proj.EPSG4326_("urn:x-ogc:def:crs:EPSG:4326","neu")];ol.proj.common={};ol.proj.common.add=function(){ol.proj.addEquivalentProjections(ol.proj.EPSG3857.PROJECTIONS);ol.proj.addEquivalentProjections(ol.proj.EPSG4326.PROJECTIONS);ol.proj.addEquivalentTransforms(ol.proj.EPSG4326.PROJECTIONS,ol.proj.EPSG3857.PROJECTIONS,ol.proj.EPSG3857.fromEPSG4326,ol.proj.EPSG3857.toEPSG4326)};ol.layer.Image=function(e){e=goog.isDef(e)?e:{};ol.layer.Layer.call(this,e)};goog.inherits(ol.layer.Image,ol.layer.Layer);ol.layer.TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};ol.layer.Tile=function(e){e=goog.isDef(e)?e:{};var t=goog.object.clone(e);delete t.preload;delete t.useInterimTilesOnError;ol.layer.Layer.call(this,t);this.setPreload(goog.isDef(e.preload)?e.preload:0);this.setUseInterimTilesOnError(goog.isDef(e.useInterimTilesOnError)?e.useInterimTilesOnError:!0)};goog.inherits(ol.layer.Tile,ol.layer.Layer);ol.layer.Tile.prototype.getPreload=function(){return this.get(ol.layer.TileProperty.PRELOAD)};ol.layer.Tile.prototype.setPreload=function(e){this.set(ol.layer.TileProperty.PRELOAD,e)};ol.layer.Tile.prototype.getUseInterimTilesOnError=function(){return this.get(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR)};ol.layer.Tile.prototype.setUseInterimTilesOnError=function(e){this.set(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR,e)};ol.layer.VectorProperty={RENDER_ORDER:"renderOrder"};ol.layer.Vector=function(e){e=goog.isDef(e)?e:{};goog.asserts.assert(!goog.isDef(e.renderOrder)||goog.isNull(e.renderOrder)||goog.isFunction(e.renderOrder),"renderOrder must be a comparator function");var t=goog.object.clone(e);delete t.style;delete t.renderBuffer;delete t.updateWhileAnimating;delete t.updateWhileInteracting;ol.layer.Layer.call(this,t);this.renderBuffer_=goog.isDef(e.renderBuffer)?e.renderBuffer:100;this.style_=null;this.styleFunction_=void 0;this.setStyle(e.style);this.updateWhileAnimating_=goog.isDef(e.updateWhileAnimating)?e.updateWhileAnimating:!1;this.updateWhileInteracting_=goog.isDef(e.updateWhileInteracting)?e.updateWhileInteracting:!1};goog.inherits(ol.layer.Vector,ol.layer.Layer);ol.layer.Vector.prototype.getRenderBuffer=function(){return this.renderBuffer_};ol.layer.Vector.prototype.getRenderOrder=function(){return this.get(ol.layer.VectorProperty.RENDER_ORDER)};ol.layer.Vector.prototype.getStyle=function(){return this.style_};ol.layer.Vector.prototype.getStyleFunction=function(){return this.styleFunction_};ol.layer.Vector.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_};ol.layer.Vector.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_};ol.layer.Vector.prototype.setRenderOrder=function(e){goog.asserts.assert(!goog.isDef(e)||goog.isNull(e)||goog.isFunction(e),"renderOrder must be a comparator function");this.set(ol.layer.VectorProperty.RENDER_ORDER,e)};ol.layer.Vector.prototype.setStyle=function(e){this.style_=goog.isDef(e)?e:ol.style.defaultStyleFunction;this.styleFunction_=goog.isNull(e)?void 0:ol.style.createStyleFunction(this.style_);this.changed()};ol.render.canvas.Immediate=function(e,t,o,r,n){this.callbacksByZIndex_={};this.context_=e;this.pixelRatio_=t;this.extent_=o;this.transform_=r;this.viewRotation_=n;this.image_=this.strokeState_=this.fillState_=this.contextTextState_=this.contextStrokeState_=this.contextFillState_=null;this.imageOriginY_=this.imageOriginX_=this.imageOpacity_=this.imageHeight_=this.imageAnchorY_=this.imageAnchorX_=0;this.imageRotateWithView_=!1;this.imageScale_=this.imageRotation_=0;this.imageSnapToPixel_=!1;this.imageWidth_=0;this.text_="";this.textScale_=this.textRotation_=this.textOffsetY_=this.textOffsetX_=0;this.textState_=this.textStrokeState_=this.textFillState_=null;this.pixelCoordinates_=[];this.tmpLocalTransform_=goog.vec.Mat4.createNumber()};ol.render.canvas.Immediate.prototype.drawImages_=function(e,t,o,r){if(!goog.isNull(this.image_)){goog.asserts.assert(0===t,"offset should be 0");goog.asserts.assert(o==e.length,"end should be equal to the length of flatCoordinates");e=ol.geom.flat.transform.transform2D(e,t,o,2,this.transform_,this.pixelCoordinates_);t=this.context_;o=this.tmpLocalTransform_;r=t.globalAlpha;1!=this.imageOpacity_&&(t.globalAlpha=r*this.imageOpacity_);var n=this.imageRotation_;this.imageRotateWithView_&&(n+=this.viewRotation_);var i,s;i=0;for(s=e.length;s>i;i+=2){var a=e[i]-this.imageAnchorX_,g=e[i+1]-this.imageAnchorY_;this.imageSnapToPixel_&&(a=a+.5|0,g=g+.5|0);if(0!==n||1!=this.imageScale_){var l=a+this.imageAnchorX_,u=g+this.imageAnchorY_;ol.vec.Mat4.makeTransform2D(o,l,u,this.imageScale_,this.imageScale_,n,-l,-u);t.setTransform(goog.vec.Mat4.getElement(o,0,0),goog.vec.Mat4.getElement(o,1,0),goog.vec.Mat4.getElement(o,0,1),goog.vec.Mat4.getElement(o,1,1),goog.vec.Mat4.getElement(o,0,3),goog.vec.Mat4.getElement(o,1,3))}t.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,a,g,this.imageWidth_,this.imageHeight_)}0===n&&1==this.imageScale_||t.setTransform(1,0,0,1,0,0);1!=this.imageOpacity_&&(t.globalAlpha=r)}};ol.render.canvas.Immediate.prototype.drawText_=function(e,t,o,r){if(!goog.isNull(this.textState_)&&""!==this.text_){goog.isNull(this.textFillState_)||this.setContextFillState_(this.textFillState_);goog.isNull(this.textStrokeState_)||this.setContextStrokeState_(this.textStrokeState_);this.setContextTextState_(this.textState_);goog.asserts.assert(0===t,"offset should be 0");goog.asserts.assert(o==e.length,"end should be equal to the length of flatCoordinates");e=ol.geom.flat.transform.transform2D(e,t,o,r,this.transform_,this.pixelCoordinates_);for(var n=this.context_;o>t;t+=r){var i=e[t]+this.textOffsetX_,s=e[t+1]+this.textOffsetY_;if(0!==this.textRotation_||1!=this.textScale_){var a=ol.vec.Mat4.makeTransform2D(this.tmpLocalTransform_,i,s,this.textScale_,this.textScale_,this.textRotation_,-i,-s);n.setTransform(goog.vec.Mat4.getElement(a,0,0),goog.vec.Mat4.getElement(a,1,0),goog.vec.Mat4.getElement(a,0,1),goog.vec.Mat4.getElement(a,1,1),goog.vec.Mat4.getElement(a,0,3),goog.vec.Mat4.getElement(a,1,3))}goog.isNull(this.textStrokeState_)||n.strokeText(this.text_,i,s);goog.isNull(this.textFillState_)||n.fillText(this.text_,i,s)}0===this.textRotation_&&1==this.textScale_||n.setTransform(1,0,0,1,0,0)}};ol.render.canvas.Immediate.prototype.moveToLineTo_=function(e,t,o,r,n){var i=this.context_;e=ol.geom.flat.transform.transform2D(e,t,o,r,this.transform_,this.pixelCoordinates_);i.moveTo(e[0],e[1]);for(t=2;t<e.length;t+=2)i.lineTo(e[t],e[t+1]);n&&i.lineTo(e[0],e[1]);return o};ol.render.canvas.Immediate.prototype.drawRings_=function(e,t,o,r){var n,i,s=this.context_;n=0;for(i=o.length;i>n;++n)t=this.moveToLineTo_(e,t,o[n],r,!0),s.closePath();return t};ol.render.canvas.Immediate.prototype.drawAsync=function(e,t){var o=e.toString(),r=this.callbacksByZIndex_[o];goog.isDef(r)?r.push(t):this.callbacksByZIndex_[o]=[t]};ol.render.canvas.Immediate.prototype.drawCircleGeometry=function(e){if(ol.extent.intersects(this.extent_,e.getExtent())){if(!goog.isNull(this.fillState_)||!goog.isNull(this.strokeState_)){goog.isNull(this.fillState_)||this.setContextFillState_(this.fillState_);goog.isNull(this.strokeState_)||this.setContextStrokeState_(this.strokeState_);var t=ol.geom.transformSimpleGeometry2D(e,this.transform_,this.pixelCoordinates_),o=t[2]-t[0],r=t[3]-t[1],o=Math.sqrt(o*o+r*r),r=this.context_;r.beginPath();r.arc(t[0],t[1],o,0,2*Math.PI);goog.isNull(this.fillState_)||r.fill();goog.isNull(this.strokeState_)||r.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}};ol.render.canvas.Immediate.prototype.drawFeature=function(e,t){var o=t.getGeometryFunction()(e);if(goog.isDefAndNotNull(o)&&ol.extent.intersects(this.extent_,o.getExtent())){var r=t.getZIndex();goog.isDef(r)||(r=0);this.drawAsync(r,function(e){e.setFillStrokeStyle(t.getFill(),t.getStroke());e.setImageStyle(t.getImage());e.setTextStyle(t.getText());var r=ol.render.canvas.Immediate.GEOMETRY_RENDERERS_[o.getType()];goog.asserts.assert(goog.isDef(r),"renderGeometry should be defined");r.call(e,o,null)})}};ol.render.canvas.Immediate.prototype.drawGeometryCollectionGeometry=function(e,t){var o,r,n=e.getGeometriesArray();o=0;for(r=n.length;r>o;++o){var i=n[o],s=ol.render.canvas.Immediate.GEOMETRY_RENDERERS_[i.getType()];goog.asserts.assert(goog.isDef(s),"geometryRenderer should be defined");s.call(this,i,t)}};ol.render.canvas.Immediate.prototype.drawPointGeometry=function(e){var t=e.getFlatCoordinates(),o=e.getStride();goog.isNull(this.image_)||this.drawImages_(t,0,t.length,o);""!==this.text_&&this.drawText_(t,0,t.length,o)};ol.render.canvas.Immediate.prototype.drawMultiPointGeometry=function(e){var t=e.getFlatCoordinates(),o=e.getStride();goog.isNull(this.image_)||this.drawImages_(t,0,t.length,o);""!==this.text_&&this.drawText_(t,0,t.length,o)};ol.render.canvas.Immediate.prototype.drawLineStringGeometry=function(e){if(ol.extent.intersects(this.extent_,e.getExtent())){if(!goog.isNull(this.strokeState_)){this.setContextStrokeState_(this.strokeState_);var t=this.context_,o=e.getFlatCoordinates();t.beginPath();this.moveToLineTo_(o,0,o.length,e.getStride(),!1);t.stroke()}""!==this.text_&&(t=e.getFlatMidpoint(),this.drawText_(t,0,2,2))}};ol.render.canvas.Immediate.prototype.drawMultiLineStringGeometry=function(e){var t=e.getExtent();if(ol.extent.intersects(this.extent_,t)){if(!goog.isNull(this.strokeState_)){this.setContextStrokeState_(this.strokeState_);var t=this.context_,o=e.getFlatCoordinates(),r=0,n=e.getEnds(),i=e.getStride();t.beginPath();var s,a;s=0;for(a=n.length;a>s;++s)r=this.moveToLineTo_(o,r,n[s],i,!1);t.stroke()}""!==this.text_&&(t=e.getFlatMidpoints(),this.drawText_(t,0,t.length,2))}};ol.render.canvas.Immediate.prototype.drawPolygonGeometry=function(e){if(ol.extent.intersects(this.extent_,e.getExtent())){if(!goog.isNull(this.strokeState_)||!goog.isNull(this.fillState_)){goog.isNull(this.fillState_)||this.setContextFillState_(this.fillState_);goog.isNull(this.strokeState_)||this.setContextStrokeState_(this.strokeState_);var t=this.context_;t.beginPath();this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride());goog.isNull(this.fillState_)||t.fill();goog.isNull(this.strokeState_)||t.stroke()}""!==this.text_&&(t=e.getFlatInteriorPoint(),this.drawText_(t,0,2,2))}};ol.render.canvas.Immediate.prototype.drawMultiPolygonGeometry=function(e){if(ol.extent.intersects(this.extent_,e.getExtent())){if(!goog.isNull(this.strokeState_)||!goog.isNull(this.fillState_)){goog.isNull(this.fillState_)||this.setContextFillState_(this.fillState_);goog.isNull(this.strokeState_)||this.setContextStrokeState_(this.strokeState_);var t,o,r=this.context_,n=e.getOrientedFlatCoordinates(),i=0,s=e.getEndss(),a=e.getStride();t=0;for(o=s.length;o>t;++t){var g=s[t];r.beginPath();i=this.drawRings_(n,i,g,a);goog.isNull(this.fillState_)||r.fill();goog.isNull(this.strokeState_)||r.stroke()}}""!==this.text_&&(r=e.getFlatInteriorPoints(),this.drawText_(r,0,r.length,2))}};ol.render.canvas.Immediate.prototype.flush=function(){var e=goog.array.map(goog.object.getKeys(this.callbacksByZIndex_),Number);goog.array.sort(e);var t,o,r,n,i;t=0;for(o=e.length;o>t;++t)for(r=this.callbacksByZIndex_[e[t].toString()],n=0,i=r.length;i>n;++n)r[n](this)};ol.render.canvas.Immediate.prototype.setContextFillState_=function(e){var t=this.context_,o=this.contextFillState_;goog.isNull(o)?(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle}):o.fillStyle!=e.fillStyle&&(o.fillStyle=t.fillStyle=e.fillStyle)};ol.render.canvas.Immediate.prototype.setContextStrokeState_=function(e){var t=this.context_,o=this.contextStrokeState_;goog.isNull(o)?(t.lineCap=e.lineCap,ol.has.CANVAS_LINE_DASH&&t.setLineDash(e.lineDash),t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle}):(o.lineCap!=e.lineCap&&(o.lineCap=t.lineCap=e.lineCap),ol.has.CANVAS_LINE_DASH&&!goog.array.equals(o.lineDash,e.lineDash)&&t.setLineDash(o.lineDash=e.lineDash),o.lineJoin!=e.lineJoin&&(o.lineJoin=t.lineJoin=e.lineJoin),o.lineWidth!=e.lineWidth&&(o.lineWidth=t.lineWidth=e.lineWidth),o.miterLimit!=e.miterLimit&&(o.miterLimit=t.miterLimit=e.miterLimit),o.strokeStyle!=e.strokeStyle&&(o.strokeStyle=t.strokeStyle=e.strokeStyle))
};ol.render.canvas.Immediate.prototype.setContextTextState_=function(e){var t=this.context_,o=this.contextTextState_;goog.isNull(o)?(t.font=e.font,t.textAlign=e.textAlign,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:e.textAlign,textBaseline:e.textBaseline}):(o.font!=e.font&&(o.font=t.font=e.font),o.textAlign!=e.textAlign&&(o.textAlign=t.textAlign=e.textAlign),o.textBaseline!=e.textBaseline&&(o.textBaseline=t.textBaseline=e.textBaseline))};ol.render.canvas.Immediate.prototype.setFillStrokeStyle=function(e,t){if(goog.isNull(e))this.fillState_=null;else{var o=e.getColor();this.fillState_={fillStyle:ol.color.asString(goog.isNull(o)?ol.render.canvas.defaultFillStyle:o)}}if(goog.isNull(t))this.strokeState_=null;else{var o=t.getColor(),r=t.getLineCap(),n=t.getLineDash(),i=t.getLineJoin(),s=t.getWidth(),a=t.getMiterLimit();this.strokeState_={lineCap:goog.isDef(r)?r:ol.render.canvas.defaultLineCap,lineDash:goog.isDefAndNotNull(n)?n:ol.render.canvas.defaultLineDash,lineJoin:goog.isDef(i)?i:ol.render.canvas.defaultLineJoin,lineWidth:this.pixelRatio_*(goog.isDef(s)?s:ol.render.canvas.defaultLineWidth),miterLimit:goog.isDef(a)?a:ol.render.canvas.defaultMiterLimit,strokeStyle:ol.color.asString(goog.isNull(o)?ol.render.canvas.defaultStrokeStyle:o)}}};ol.render.canvas.Immediate.prototype.setImageStyle=function(e){if(goog.isNull(e))this.image_=null;else{var t=e.getAnchor(),o=e.getImage(1),r=e.getOrigin(),n=e.getSize();goog.asserts.assert(!goog.isNull(t),"imageAnchor should not be null");goog.asserts.assert(!goog.isNull(o),"imageImage should not be null");goog.asserts.assert(!goog.isNull(r),"imageOrigin should not be null");goog.asserts.assert(!goog.isNull(n),"imageSize should not be null");this.imageAnchorX_=t[0];this.imageAnchorY_=t[1];this.imageHeight_=n[1];this.image_=o;this.imageOpacity_=e.getOpacity();this.imageOriginX_=r[0];this.imageOriginY_=r[1];this.imageRotateWithView_=e.getRotateWithView();this.imageRotation_=e.getRotation();this.imageScale_=e.getScale();this.imageSnapToPixel_=e.getSnapToPixel();this.imageWidth_=n[0]}};ol.render.canvas.Immediate.prototype.setTextStyle=function(e){if(goog.isNull(e))this.text_="";else{var t=e.getFill();goog.isNull(t)?this.textFillState_=null:(t=t.getColor(),this.textFillState_={fillStyle:ol.color.asString(goog.isNull(t)?ol.render.canvas.defaultFillStyle:t)});var o=e.getStroke();if(goog.isNull(o))this.textStrokeState_=null;else{var t=o.getColor(),r=o.getLineCap(),n=o.getLineDash(),i=o.getLineJoin(),s=o.getWidth(),o=o.getMiterLimit();this.textStrokeState_={lineCap:goog.isDef(r)?r:ol.render.canvas.defaultLineCap,lineDash:goog.isDefAndNotNull(n)?n:ol.render.canvas.defaultLineDash,lineJoin:goog.isDef(i)?i:ol.render.canvas.defaultLineJoin,lineWidth:goog.isDef(s)?s:ol.render.canvas.defaultLineWidth,miterLimit:goog.isDef(o)?o:ol.render.canvas.defaultMiterLimit,strokeStyle:ol.color.asString(goog.isNull(t)?ol.render.canvas.defaultStrokeStyle:t)}}var t=e.getFont(),r=e.getOffsetX(),n=e.getOffsetY(),i=e.getRotation(),s=e.getScale(),o=e.getText(),a=e.getTextAlign();e=e.getTextBaseline();this.textState_={font:goog.isDef(t)?t:ol.render.canvas.defaultFont,textAlign:goog.isDef(a)?a:ol.render.canvas.defaultTextAlign,textBaseline:goog.isDef(e)?e:ol.render.canvas.defaultTextBaseline};this.text_=goog.isDef(o)?o:"";this.textOffsetX_=goog.isDef(r)?this.pixelRatio_*r:0;this.textOffsetY_=goog.isDef(n)?this.pixelRatio_*n:0;this.textRotation_=goog.isDef(i)?i:0;this.textScale_=this.pixelRatio_*(goog.isDef(s)?s:1)}};ol.render.canvas.Immediate.GEOMETRY_RENDERERS_={Point:ol.render.canvas.Immediate.prototype.drawPointGeometry,LineString:ol.render.canvas.Immediate.prototype.drawLineStringGeometry,Polygon:ol.render.canvas.Immediate.prototype.drawPolygonGeometry,MultiPoint:ol.render.canvas.Immediate.prototype.drawMultiPointGeometry,MultiLineString:ol.render.canvas.Immediate.prototype.drawMultiLineStringGeometry,MultiPolygon:ol.render.canvas.Immediate.prototype.drawMultiPolygonGeometry,GeometryCollection:ol.render.canvas.Immediate.prototype.drawGeometryCollectionGeometry,Circle:ol.render.canvas.Immediate.prototype.drawCircleGeometry};ol.renderer.canvas={};ol.renderer.canvas.Layer=function(e){ol.renderer.Layer.call(this,e);this.transform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.renderer.canvas.Layer,ol.renderer.Layer);ol.renderer.canvas.Layer.prototype.composeFrame=function(e,t,o){this.dispatchPreComposeEvent(o,e);var r=this.getImage();if(!goog.isNull(r)){var n=t.extent,i=goog.isDef(n);if(i){goog.asserts.assert(goog.isDef(n),"layerState extent is defined");var s=e.pixelRatio,a=ol.extent.getTopLeft(n),g=ol.extent.getTopRight(n),l=ol.extent.getBottomRight(n),n=ol.extent.getBottomLeft(n);ol.vec.Mat4.multVec2(e.coordinateToPixelMatrix,a,a);ol.vec.Mat4.multVec2(e.coordinateToPixelMatrix,g,g);ol.vec.Mat4.multVec2(e.coordinateToPixelMatrix,l,l);ol.vec.Mat4.multVec2(e.coordinateToPixelMatrix,n,n);o.save();o.beginPath();o.moveTo(a[0]*s,a[1]*s);o.lineTo(g[0]*s,g[1]*s);o.lineTo(l[0]*s,l[1]*s);o.lineTo(n[0]*s,n[1]*s);o.clip()}a=this.getImageTransform();s=o.globalAlpha;o.globalAlpha=t.opacity;0===e.viewState.rotation?(t=goog.vec.Mat4.getElement(a,0,3),g=goog.vec.Mat4.getElement(a,1,3),l=r.width*goog.vec.Mat4.getElement(a,0,0),a=r.height*goog.vec.Mat4.getElement(a,1,1),o.drawImage(r,0,0,+r.width,+r.height,Math.round(t),Math.round(g),Math.round(l),Math.round(a))):(o.setTransform(goog.vec.Mat4.getElement(a,0,0),goog.vec.Mat4.getElement(a,1,0),goog.vec.Mat4.getElement(a,0,1),goog.vec.Mat4.getElement(a,1,1),goog.vec.Mat4.getElement(a,0,3),goog.vec.Mat4.getElement(a,1,3)),o.drawImage(r,0,0),o.setTransform(1,0,0,1,0,0));o.globalAlpha=s;i&&o.restore()}this.dispatchPostComposeEvent(o,e)};ol.renderer.canvas.Layer.prototype.dispatchComposeEvent_=function(e,t,o,r){var n=this.getLayer();n.hasListener(e)&&(r=goog.isDef(r)?r:this.getTransform(o,0),r=new ol.render.canvas.Immediate(t,o.pixelRatio,o.extent,r,o.viewState.rotation),e=new ol.render.Event(e,n,r,o,t,null),n.dispatchEvent(e),r.flush())};ol.renderer.canvas.Layer.prototype.dispatchPostComposeEvent=function(e,t,o){this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,e,t,o)};ol.renderer.canvas.Layer.prototype.dispatchPreComposeEvent=function(e,t,o){this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,e,t,o)};ol.renderer.canvas.Layer.prototype.dispatchRenderEvent=function(e,t,o){this.dispatchComposeEvent_(ol.render.EventType.RENDER,e,t,o)};ol.renderer.canvas.Layer.prototype.getTransform=function(e,t){var o=e.viewState,r=e.pixelRatio;return ol.vec.Mat4.makeTransform2D(this.transform_,r*e.size[0]/2,r*e.size[1]/2,r/o.resolution,-r/o.resolution,-o.rotation,-o.center[0]+t,-o.center[1])};ol.renderer.canvas.Layer.prototype.getPixelOnCanvas=function(e,t){var o=[0,0];ol.vec.Mat4.multVec2(t,e,o);return o};ol.renderer.canvas.Layer.testCanvasSize=function(){var e=null,t=null;return function(o){if(goog.isNull(e)){e=ol.dom.createCanvasContext2D(1,1);t=e.createImageData(1,1);var r=t.data;r[0]=42;r[1]=84;r[2]=126;r[3]=255}var r=e.canvas,n=o[0]<=r.width&&o[1]<=r.height;n||(r.width=o[0],r.height=o[1],r=o[0]-1,o=o[1]-1,e.putImageData(t,r,o),o=e.getImageData(r,o,1,1),n=goog.array.equals(t.data,o.data));return n}}();ol.render.ReplayType={IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};ol.render.REPLAY_ORDER=[ol.render.ReplayType.POLYGON,ol.render.ReplayType.LINE_STRING,ol.render.ReplayType.IMAGE,ol.render.ReplayType.TEXT];ol.render.IReplayGroup=function(){};ol.render.IReplayGroup.prototype.getReplay=function(){};ol.render.IReplayGroup.prototype.isEmpty=function(){};ol.render.canvas.Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,DRAW_IMAGE:4,DRAW_TEXT:5,END_GEOMETRY:6,FILL:7,MOVE_TO_LINE_TO:8,SET_FILL_STYLE:9,SET_STROKE_STYLE:10,SET_TEXT_STYLE:11,STROKE:12};ol.render.canvas.Replay=function(e,t,o){ol.render.VectorContext.call(this);this.tolerance=e;this.maxExtent=t;this.bufferedMaxExtent_=null;this.maxLineWidth=0;this.resolution=o;this.beginGeometryInstruction2_=this.beginGeometryInstruction1_=null;this.instructions=[];this.coordinates=[];this.renderedTransform_=goog.vec.Mat4.createNumber();this.hitDetectionInstructions=[];this.pixelCoordinates_=[];this.tmpLocalTransform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.render.canvas.Replay,ol.render.VectorContext);ol.render.canvas.Replay.prototype.appendFlatCoordinates=function(e,t,o,r,n){var i,s,a,g=this.coordinates.length,l=this.getBufferedMaxExtent(),u=[e[t],e[t+1]],c=[0/0,0/0],h=!0;for(i=t+r;o>i;i+=r)c[0]=e[i],c[1]=e[i+1],a=ol.extent.coordinateRelationship(l,c),a!==s?(h&&(this.coordinates[g++]=u[0],this.coordinates[g++]=u[1]),this.coordinates[g++]=c[0],this.coordinates[g++]=c[1],h=!1):a===ol.extent.Relationship.INTERSECTING?(this.coordinates[g++]=c[0],this.coordinates[g++]=c[1],h=!1):h=!0,u[0]=c[0],u[1]=c[1],s=a;i===t+r&&(this.coordinates[g++]=u[0],this.coordinates[g++]=u[1]);n&&(this.coordinates[g++]=e[t],this.coordinates[g++]=e[t+1]);return g};ol.render.canvas.Replay.prototype.beginGeometry=function(e,t){this.beginGeometryInstruction1_=[ol.render.canvas.Instruction.BEGIN_GEOMETRY,t,0];this.instructions.push(this.beginGeometryInstruction1_);this.beginGeometryInstruction2_=[ol.render.canvas.Instruction.BEGIN_GEOMETRY,t,0];this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)};ol.render.canvas.Replay.prototype.replay_=function(e,t,o,r,n,i,s,a){var g;ol.vec.Mat4.equals2D(o,this.renderedTransform_)?g=this.pixelCoordinates_:(g=ol.geom.flat.transform.transform2D(this.coordinates,0,this.coordinates.length,2,o,this.pixelCoordinates_),goog.vec.Mat4.setFromArray(this.renderedTransform_,o),goog.asserts.assert(g===this.pixelCoordinates_,"pixelCoordinates should be the same as this.pixelCoordinates_"));o=0;for(var l,u=i.length,c=0,h=this.tmpLocalTransform_;u>o;){var d,m,p,f,_=i[o];switch(_[0]){case ol.render.canvas.Instruction.BEGIN_GEOMETRY:c=_[1];l=goog.getUid(c).toString();goog.isDef(n[l])||!goog.isDefAndNotNull(c.getGeometry())?o=_[2]:goog.isDef(a)&&!ol.extent.intersects(a,c.getGeometry().getExtent())?o=_[2]:++o;break;case ol.render.canvas.Instruction.BEGIN_PATH:e.beginPath();++o;break;case ol.render.canvas.Instruction.CIRCLE:goog.asserts.assert(goog.isNumber(_[1]),"second instruction should be a number");c=_[1];l=g[c];var y=g[c+1],E=g[c+2]-l,c=g[c+3]-y,c=Math.sqrt(E*E+c*c);e.arc(l,y,c,0,2*Math.PI,!0);++o;break;case ol.render.canvas.Instruction.CLOSE_PATH:e.closePath();++o;break;case ol.render.canvas.Instruction.DRAW_IMAGE:goog.asserts.assert(goog.isNumber(_[1]),"second instruction should be a number");c=_[1];goog.asserts.assert(goog.isNumber(_[2]),"third instruction should be a number");l=_[2];d=_[3];p=_[4]*t;var S=_[5]*t,v=_[6];m=_[7];var T=_[8],b=_[9],y=_[11],E=_[12],R=_[13],C=_[14];for(_[10]&&(y+=r);l>c;c+=2){_=g[c]-p;f=g[c+1]-S;R&&(_=_+.5|0,f=f+.5|0);if(1!=E||0!==y){var A=_+p,N=f+S;ol.vec.Mat4.makeTransform2D(h,A,N,E,E,y,-A,-N);e.setTransform(goog.vec.Mat4.getElement(h,0,0),goog.vec.Mat4.getElement(h,1,0),goog.vec.Mat4.getElement(h,0,1),goog.vec.Mat4.getElement(h,1,1),goog.vec.Mat4.getElement(h,0,3),goog.vec.Mat4.getElement(h,1,3))}A=e.globalAlpha;1!=m&&(e.globalAlpha=A*m);e.drawImage(d,T,b,C,v,_,f,C*t,v*t);1!=m&&(e.globalAlpha=A);1==E&&0===y||e.setTransform(1,0,0,1,0,0)}++o;break;case ol.render.canvas.Instruction.DRAW_TEXT:goog.asserts.assert(goog.isNumber(_[1]),"2nd instruction should be a number");c=_[1];goog.asserts.assert(goog.isNumber(_[2]),"3rd instruction should be a number");l=_[2];goog.asserts.assert(goog.isString(_[3]),"4th instruction should be a string");p=_[3];goog.asserts.assert(goog.isNumber(_[4]),"5th instruction should be a number");S=_[4]*t;goog.asserts.assert(goog.isNumber(_[5]),"6th instruction should be a number");v=_[5]*t;goog.asserts.assert(goog.isNumber(_[6]),"7th instruction should be a number");y=_[6];goog.asserts.assert(goog.isNumber(_[7]),"8th instruction should be a number");E=_[7]*t;goog.asserts.assert(goog.isBoolean(_[8]),"9th instruction should be a boolean");d=_[8];goog.asserts.assert(goog.isBoolean(_[9]),"10th instruction should be a boolean");for(m=_[9];l>c;c+=2){_=g[c]+S;f=g[c+1]+v;(1!=E||0!==y)&&(ol.vec.Mat4.makeTransform2D(h,_,f,E,E,y,-_,-f),e.setTransform(goog.vec.Mat4.getElement(h,0,0),goog.vec.Mat4.getElement(h,1,0),goog.vec.Mat4.getElement(h,0,1),goog.vec.Mat4.getElement(h,1,1),goog.vec.Mat4.getElement(h,0,3),goog.vec.Mat4.getElement(h,1,3)));m&&e.strokeText(p,_,f);d&&e.fillText(p,_,f);1==E&&0===y||e.setTransform(1,0,0,1,0,0)}++o;break;case ol.render.canvas.Instruction.END_GEOMETRY:if(goog.isDef(s)&&(c=_[1],c=s(c)))return c;++o;break;case ol.render.canvas.Instruction.FILL:e.fill();++o;break;case ol.render.canvas.Instruction.MOVE_TO_LINE_TO:goog.asserts.assert(goog.isNumber(_[1]),"2nd instruction should be a number");c=_[1];goog.asserts.assert(goog.isNumber(_[2]),"3rd instruction should be a number");l=_[2];e.moveTo(g[c],g[c+1]);for(c+=2;l>c;c+=2)e.lineTo(g[c],g[c+1]);++o;break;case ol.render.canvas.Instruction.SET_FILL_STYLE:goog.asserts.assert(goog.isString(_[1]),"2nd instruction should be a string");e.fillStyle=_[1];++o;break;case ol.render.canvas.Instruction.SET_STROKE_STYLE:goog.asserts.assert(goog.isString(_[1]),"2nd instruction should be a string");goog.asserts.assert(goog.isNumber(_[2]),"3rd instruction should be a number");goog.asserts.assert(goog.isString(_[3]),"4rd instruction should be a string");goog.asserts.assert(goog.isString(_[4]),"5th instruction should be a string");goog.asserts.assert(goog.isNumber(_[5]),"6th instruction should be a number");goog.asserts.assert(!goog.isNull(_[6]),"7th instruction should not be null");c=goog.isDef(_[7])?_[7]:!0;l=_[2];e.strokeStyle=_[1];e.lineWidth=c?l*t:l;e.lineCap=_[3];e.lineJoin=_[4];e.miterLimit=_[5];ol.has.CANVAS_LINE_DASH&&e.setLineDash(_[6]);++o;break;case ol.render.canvas.Instruction.SET_TEXT_STYLE:goog.asserts.assert(goog.isString(_[1]),"2nd instruction should be a string");goog.asserts.assert(goog.isString(_[2]),"3rd instruction should be a string");goog.asserts.assert(goog.isString(_[3]),"4th instruction should be a string");e.font=_[1];e.textAlign=_[2];e.textBaseline=_[3];++o;break;case ol.render.canvas.Instruction.STROKE:e.stroke();++o;break;default:goog.asserts.fail("Unknown canvas render instruction"),++o}}goog.asserts.assert(o==i.length,"all instructions should be consumed")};ol.render.canvas.Replay.prototype.replay=function(e,t,o,r,n){this.replay_(e,t,o,r,n,this.instructions,void 0)};ol.render.canvas.Replay.prototype.replayHitDetection=function(e,t,o,r,n,i){return this.replay_(e,1,t,o,r,this.hitDetectionInstructions,n,i)};ol.render.canvas.Replay.prototype.reverseHitDetectionInstructions_=function(){var e=this.hitDetectionInstructions;e.reverse();var t,o,r,n=e.length,i=-1;for(t=0;n>t;++t)o=e[t],r=o[0],r==ol.render.canvas.Instruction.END_GEOMETRY?(goog.asserts.assert(-1==i,"begin should be -1"),i=t):r==ol.render.canvas.Instruction.BEGIN_GEOMETRY&&(o[2]=t,goog.asserts.assert(i>=0,"begin should be larger than or equal to 0"),ol.array.reverseSubArray(this.hitDetectionInstructions,i,t),i=-1)};ol.render.canvas.Replay.prototype.endGeometry=function(e,t){goog.asserts.assert(!goog.isNull(this.beginGeometryInstruction1_),"this.beginGeometryInstruction1_ should not be null");this.beginGeometryInstruction1_[2]=this.instructions.length;this.beginGeometryInstruction1_=null;goog.asserts.assert(!goog.isNull(this.beginGeometryInstruction2_),"this.beginGeometryInstruction2_ should not be null");this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length;this.beginGeometryInstruction2_=null;var o=[ol.render.canvas.Instruction.END_GEOMETRY,t];this.instructions.push(o);this.hitDetectionInstructions.push(o)};ol.render.canvas.Replay.prototype.finish=goog.nullFunction;ol.render.canvas.Replay.prototype.getBufferedMaxExtent=function(){return this.maxExtent};ol.render.canvas.ImageReplay=function(e,t,o){ol.render.canvas.Replay.call(this,e,t,o);this.image_=this.hitDetectionImage_=null;this.width_=this.snapToPixel_=this.scale_=this.rotation_=this.rotateWithView_=this.originY_=this.originX_=this.opacity_=this.height_=this.anchorY_=this.anchorX_=void 0};goog.inherits(ol.render.canvas.ImageReplay,ol.render.canvas.Replay);ol.render.canvas.ImageReplay.prototype.drawCoordinates_=function(e,t,o,r){return this.appendFlatCoordinates(e,t,o,r,!1)};ol.render.canvas.ImageReplay.prototype.drawPointGeometry=function(e,t){if(!goog.isNull(this.image_)){goog.asserts.assert(goog.isDef(this.anchorX_),"this.anchorX_ should be defined");goog.asserts.assert(goog.isDef(this.anchorY_),"this.anchorY_ should be defined");goog.asserts.assert(goog.isDef(this.height_),"this.height_ should be defined");goog.asserts.assert(goog.isDef(this.opacity_),"this.opacity_ should be defined");goog.asserts.assert(goog.isDef(this.originX_),"this.originX_ should be defined");goog.asserts.assert(goog.isDef(this.originY_),"this.originY_ should be defined");goog.asserts.assert(goog.isDef(this.rotateWithView_),"this.rotateWithView_ should be defined");goog.asserts.assert(goog.isDef(this.rotation_),"this.rotation_ should be defined");goog.asserts.assert(goog.isDef(this.scale_),"this.scale_ should be defined");goog.asserts.assert(goog.isDef(this.width_),"this.width_ should be defined");this.beginGeometry(e,t);var o=e.getFlatCoordinates(),r=e.getStride(),n=this.coordinates.length,o=this.drawCoordinates_(o,0,o.length,r);this.instructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,n,o,this.image_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,n,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(e,t)}};ol.render.canvas.ImageReplay.prototype.drawMultiPointGeometry=function(e,t){if(!goog.isNull(this.image_)){goog.asserts.assert(goog.isDef(this.anchorX_),"this.anchorX_ should be defined");goog.asserts.assert(goog.isDef(this.anchorY_),"this.anchorY_ should be defined");goog.asserts.assert(goog.isDef(this.height_),"this.height_ should be defined");goog.asserts.assert(goog.isDef(this.opacity_),"this.opacity_ should be defined");goog.asserts.assert(goog.isDef(this.originX_),"this.originX_ should be defined");goog.asserts.assert(goog.isDef(this.originY_),"this.originY_ should be defined");goog.asserts.assert(goog.isDef(this.rotateWithView_),"this.rotateWithView_ should be defined");goog.asserts.assert(goog.isDef(this.rotation_),"this.rotation_ should be defined");goog.asserts.assert(goog.isDef(this.scale_),"this.scale_ should be defined");goog.asserts.assert(goog.isDef(this.width_),"this.width_ should be defined");this.beginGeometry(e,t);var o=e.getFlatCoordinates(),r=e.getStride(),n=this.coordinates.length,o=this.drawCoordinates_(o,0,o.length,r);this.instructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,n,o,this.image_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,n,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(e,t)}};ol.render.canvas.ImageReplay.prototype.finish=function(){this.reverseHitDetectionInstructions_();this.anchorY_=this.anchorX_=void 0;this.image_=this.hitDetectionImage_=null;this.width_=this.snapToPixel_=this.rotation_=this.rotateWithView_=this.originY_=this.originX_=this.opacity_=this.scale_=this.height_=void 0};ol.render.canvas.ImageReplay.prototype.setImageStyle=function(e){goog.asserts.assert(!goog.isNull(e),"imageStyle should not be null");var t=e.getAnchor();goog.asserts.assert(!goog.isNull(t),"anchor should not be null");var o=e.getSize();goog.asserts.assert(!goog.isNull(o),"size should not be null");var r=e.getHitDetectionImage(1);goog.asserts.assert(!goog.isNull(r),"hitDetectionImage should not be null");var n=e.getImage(1);goog.asserts.assert(!goog.isNull(n),"image should not be null");var i=e.getOrigin();goog.asserts.assert(!goog.isNull(i),"origin should not be null");this.anchorX_=t[0];this.anchorY_=t[1];this.hitDetectionImage_=r;this.image_=n;this.height_=o[1];this.opacity_=e.getOpacity();this.originX_=i[0];this.originY_=i[1];this.rotateWithView_=e.getRotateWithView();this.rotation_=e.getRotation();this.scale_=e.getScale();this.snapToPixel_=e.getSnapToPixel();this.width_=o[0]};ol.render.canvas.LineStringReplay=function(e,t,o){ol.render.canvas.Replay.call(this,e,t,o);this.state_={currentStrokeStyle:void 0,currentLineCap:void 0,currentLineDash:null,currentLineJoin:void 0,currentLineWidth:void 0,currentMiterLimit:void 0,lastStroke:0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}};goog.inherits(ol.render.canvas.LineStringReplay,ol.render.canvas.Replay);ol.render.canvas.LineStringReplay.prototype.drawFlatCoordinates_=function(e,t,o,r){var n=this.coordinates.length;e=this.appendFlatCoordinates(e,t,o,r,!1);n=[ol.render.canvas.Instruction.MOVE_TO_LINE_TO,n,e];this.instructions.push(n);this.hitDetectionInstructions.push(n);return o};ol.render.canvas.LineStringReplay.prototype.getBufferedMaxExtent=function(){goog.isNull(this.bufferedMaxExtent_)&&(this.bufferedMaxExtent_=ol.extent.clone(this.maxExtent),0<this.maxLineWidth&&ol.extent.buffer(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_));return this.bufferedMaxExtent_};ol.render.canvas.LineStringReplay.prototype.setStrokeStyle_=function(){var e=this.state_,t=e.strokeStyle,o=e.lineCap,r=e.lineDash,n=e.lineJoin,i=e.lineWidth,s=e.miterLimit;goog.asserts.assert(goog.isDef(t),"strokeStyle should be defined");goog.asserts.assert(goog.isDef(o),"lineCap should be defined");goog.asserts.assert(!goog.isNull(r),"lineDash should not be null");goog.asserts.assert(goog.isDef(n),"lineJoin should be defined");goog.asserts.assert(goog.isDef(i),"lineWidth should be defined");goog.asserts.assert(goog.isDef(s),"miterLimit should be defined");e.currentStrokeStyle==t&&e.currentLineCap==o&&goog.array.equals(e.currentLineDash,r)&&e.currentLineJoin==n&&e.currentLineWidth==i&&e.currentMiterLimit==s||(e.lastStroke!=this.coordinates.length&&(this.instructions.push([ol.render.canvas.Instruction.STROKE]),e.lastStroke=this.coordinates.length),this.instructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,t,i,o,n,s,r],[ol.render.canvas.Instruction.BEGIN_PATH]),e.currentStrokeStyle=t,e.currentLineCap=o,e.currentLineDash=r,e.currentLineJoin=n,e.currentLineWidth=i,e.currentMiterLimit=s)};ol.render.canvas.LineStringReplay.prototype.drawLineStringGeometry=function(e,t){var o=this.state_;goog.asserts.assert(!goog.isNull(o),"state should not be null");var r=o.lineWidth;goog.isDef(o.strokeStyle)&&goog.isDef(r)&&(this.setStrokeStyle_(),this.beginGeometry(e,t),this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash],[ol.render.canvas.Instruction.BEGIN_PATH]),o=e.getFlatCoordinates(),r=e.getStride(),this.drawFlatCoordinates_(o,0,o.length,r),this.hitDetectionInstructions.push([ol.render.canvas.Instruction.STROKE]),this.endGeometry(e,t))};ol.render.canvas.LineStringReplay.prototype.drawMultiLineStringGeometry=function(e,t){var o=this.state_;goog.asserts.assert(!goog.isNull(o),"state should not be null");var r=o.lineWidth;if(goog.isDef(o.strokeStyle)&&goog.isDef(r)){this.setStrokeStyle_();this.beginGeometry(e,t);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash],[ol.render.canvas.Instruction.BEGIN_PATH]);var n,i,o=e.getEnds(),r=e.getFlatCoordinates(),s=e.getStride(),a=0;n=0;for(i=o.length;i>n;++n)a=this.drawFlatCoordinates_(r,a,o[n],s);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.STROKE]);this.endGeometry(e,t)}};ol.render.canvas.LineStringReplay.prototype.finish=function(){var e=this.state_;goog.asserts.assert(!goog.isNull(e),"state should not be null");e.lastStroke!=this.coordinates.length&&this.instructions.push([ol.render.canvas.Instruction.STROKE]);this.reverseHitDetectionInstructions_();this.state_=null};ol.render.canvas.LineStringReplay.prototype.setFillStrokeStyle=function(e,t){goog.asserts.assert(!goog.isNull(this.state_),"this.state_ should not be null");goog.asserts.assert(goog.isNull(e),"fillStyle should be null");goog.asserts.assert(!goog.isNull(t),"strokeStyle should not be null");var o=t.getColor();this.state_.strokeStyle=ol.color.asString(goog.isNull(o)?ol.render.canvas.defaultStrokeStyle:o);o=t.getLineCap();this.state_.lineCap=goog.isDef(o)?o:ol.render.canvas.defaultLineCap;o=t.getLineDash();this.state_.lineDash=goog.isNull(o)?ol.render.canvas.defaultLineDash:o;o=t.getLineJoin();this.state_.lineJoin=goog.isDef(o)?o:ol.render.canvas.defaultLineJoin;o=t.getWidth();this.state_.lineWidth=goog.isDef(o)?o:ol.render.canvas.defaultLineWidth;o=t.getMiterLimit();this.state_.miterLimit=goog.isDef(o)?o:ol.render.canvas.defaultMiterLimit;this.state_.lineWidth>this.maxLineWidth&&(this.maxLineWidth=this.state_.lineWidth,this.bufferedMaxExtent_=null)};ol.render.canvas.PolygonReplay=function(e,t,o){ol.render.canvas.Replay.call(this,e,t,o);this.state_={currentFillStyle:void 0,currentStrokeStyle:void 0,currentLineCap:void 0,currentLineDash:null,currentLineJoin:void 0,currentLineWidth:void 0,currentMiterLimit:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}};goog.inherits(ol.render.canvas.PolygonReplay,ol.render.canvas.Replay);ol.render.canvas.PolygonReplay.prototype.drawFlatCoordinatess_=function(e,t,o,r){var n=this.state_,i=[ol.render.canvas.Instruction.BEGIN_PATH];this.instructions.push(i);this.hitDetectionInstructions.push(i);var s,i=0;for(s=o.length;s>i;++i){var a=o[i],g=this.coordinates.length;t=this.appendFlatCoordinates(e,t,a,r,!0);t=[ol.render.canvas.Instruction.MOVE_TO_LINE_TO,g,t];g=[ol.render.canvas.Instruction.CLOSE_PATH];this.instructions.push(t,g);this.hitDetectionInstructions.push(t,g);t=a}e=[ol.render.canvas.Instruction.FILL];this.hitDetectionInstructions.push(e);goog.isDef(n.fillStyle)&&this.instructions.push(e);goog.isDef(n.strokeStyle)&&(goog.asserts.assert(goog.isDef(n.lineWidth),"state.lineWidth should be defined"),n=[ol.render.canvas.Instruction.STROKE],this.instructions.push(n),this.hitDetectionInstructions.push(n));return t};ol.render.canvas.PolygonReplay.prototype.drawCircleGeometry=function(e,t){var o=this.state_;goog.asserts.assert(!goog.isNull(o),"state should not be null");var r=o.strokeStyle;if(goog.isDef(o.fillStyle)||goog.isDef(r)){goog.isDef(r)&&goog.asserts.assert(goog.isDef(o.lineWidth),"state.lineWidth should be defined");this.setFillStrokeStyles_();this.beginGeometry(e,t);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);goog.isDef(o.strokeStyle)&&this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash]);var n=e.getFlatCoordinates(),i=e.getStride(),r=this.coordinates.length;this.appendFlatCoordinates(n,0,n.length,i,!1);n=[ol.render.canvas.Instruction.BEGIN_PATH];r=[ol.render.canvas.Instruction.CIRCLE,r];this.instructions.push(n,r);this.hitDetectionInstructions.push(n,r);r=[ol.render.canvas.Instruction.FILL];this.hitDetectionInstructions.push(r);goog.isDef(o.fillStyle)&&this.instructions.push(r);goog.isDef(o.strokeStyle)&&(goog.asserts.assert(goog.isDef(o.lineWidth),"state.lineWidth should be defined"),o=[ol.render.canvas.Instruction.STROKE],this.instructions.push(o),this.hitDetectionInstructions.push(o));this.endGeometry(e,t)}};ol.render.canvas.PolygonReplay.prototype.drawPolygonGeometry=function(e,t){var o=this.state_;goog.asserts.assert(!goog.isNull(o),"state should not be null");var r=o.strokeStyle;if(goog.isDef(o.fillStyle)||goog.isDef(r)){goog.isDef(r)&&goog.asserts.assert(goog.isDef(o.lineWidth),"state.lineWidth should be defined");this.setFillStrokeStyles_();this.beginGeometry(e,t);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);goog.isDef(o.strokeStyle)&&this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash]);var o=e.getEnds(),r=e.getOrientedFlatCoordinates(),n=e.getStride();this.drawFlatCoordinatess_(r,0,o,n);this.endGeometry(e,t)}};ol.render.canvas.PolygonReplay.prototype.drawMultiPolygonGeometry=function(e,t){var o=this.state_;goog.asserts.assert(!goog.isNull(o),"state should not be null");var r=o.strokeStyle;if(goog.isDef(o.fillStyle)||goog.isDef(r)){goog.isDef(r)&&goog.asserts.assert(goog.isDef(o.lineWidth),"state.lineWidth should be defined");this.setFillStrokeStyles_();this.beginGeometry(e,t);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);goog.isDef(o.strokeStyle)&&this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash]);var n,i,o=e.getEndss(),r=e.getOrientedFlatCoordinates(),s=e.getStride(),a=0;n=0;for(i=o.length;i>n;++n)a=this.drawFlatCoordinatess_(r,a,o[n],s);this.endGeometry(e,t)}};ol.render.canvas.PolygonReplay.prototype.finish=function(){goog.asserts.assert(!goog.isNull(this.state_),"this.state_ should not be null");this.reverseHitDetectionInstructions_();this.state_=null;var e=this.tolerance;if(0!==e){var t,o,r=this.coordinates;t=0;for(o=r.length;o>t;++t)r[t]=ol.geom.flat.simplify.snap(r[t],e)}};ol.render.canvas.PolygonReplay.prototype.getBufferedMaxExtent=function(){goog.isNull(this.bufferedMaxExtent_)&&(this.bufferedMaxExtent_=ol.extent.clone(this.maxExtent),0<this.maxLineWidth&&ol.extent.buffer(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_));return this.bufferedMaxExtent_};ol.render.canvas.PolygonReplay.prototype.setFillStrokeStyle=function(e,t){goog.asserts.assert(!goog.isNull(this.state_),"this.state_ should not be null");goog.asserts.assert(!goog.isNull(e)||!goog.isNull(t),"fillStyle or strokeStyle should not be null");var o=this.state_;if(goog.isNull(e))o.fillStyle=void 0;else{var r=e.getColor();o.fillStyle=ol.color.asString(goog.isNull(r)?ol.render.canvas.defaultFillStyle:r)}goog.isNull(t)?(o.strokeStyle=void 0,o.lineCap=void 0,o.lineDash=null,o.lineJoin=void 0,o.lineWidth=void 0,o.miterLimit=void 0):(r=t.getColor(),o.strokeStyle=ol.color.asString(goog.isNull(r)?ol.render.canvas.defaultStrokeStyle:r),r=t.getLineCap(),o.lineCap=goog.isDef(r)?r:ol.render.canvas.defaultLineCap,r=t.getLineDash(),o.lineDash=goog.isNull(r)?ol.render.canvas.defaultLineDash:r.slice(),r=t.getLineJoin(),o.lineJoin=goog.isDef(r)?r:ol.render.canvas.defaultLineJoin,r=t.getWidth(),o.lineWidth=goog.isDef(r)?r:ol.render.canvas.defaultLineWidth,r=t.getMiterLimit(),o.miterLimit=goog.isDef(r)?r:ol.render.canvas.defaultMiterLimit,o.lineWidth>this.maxLineWidth&&(this.maxLineWidth=o.lineWidth,this.bufferedMaxExtent_=null))};ol.render.canvas.PolygonReplay.prototype.setFillStrokeStyles_=function(){var e=this.state_,t=e.fillStyle,o=e.strokeStyle,r=e.lineCap,n=e.lineDash,i=e.lineJoin,s=e.lineWidth,a=e.miterLimit;goog.isDef(t)&&e.currentFillStyle!=t&&(this.instructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,t]),e.currentFillStyle=e.fillStyle);goog.isDef(o)&&(goog.asserts.assert(goog.isDef(r),"lineCap should be defined"),goog.asserts.assert(!goog.isNull(n),"lineDash should not be null"),goog.asserts.assert(goog.isDef(i),"lineJoin should be defined"),goog.asserts.assert(goog.isDef(s),"lineWidth should be defined"),goog.asserts.assert(goog.isDef(a),"miterLimit should be defined"),e.currentStrokeStyle!=o||e.currentLineCap!=r||e.currentLineDash!=n||e.currentLineJoin!=i||e.currentLineWidth!=s||e.currentMiterLimit!=a)&&(this.instructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,o,s,r,i,a,n]),e.currentStrokeStyle=o,e.currentLineCap=r,e.currentLineDash=n,e.currentLineJoin=i,e.currentLineWidth=s,e.currentMiterLimit=a)
};ol.render.canvas.TextReplay=function(e,t,o){ol.render.canvas.Replay.call(this,e,t,o);this.replayTextState_=this.replayStrokeState_=this.replayFillState_=null;this.text_="";this.textScale_=this.textRotation_=this.textOffsetY_=this.textOffsetX_=0;this.textState_=this.textStrokeState_=this.textFillState_=null};goog.inherits(ol.render.canvas.TextReplay,ol.render.canvas.Replay);ol.render.canvas.TextReplay.prototype.drawText=function(e,t,o,r,n,i){if(!(""===this.text_||goog.isNull(this.textState_)||goog.isNull(this.textFillState_)&&goog.isNull(this.textStrokeState_))){goog.isNull(this.textFillState_)||this.setReplayFillState_(this.textFillState_);goog.isNull(this.textStrokeState_)||this.setReplayStrokeState_(this.textStrokeState_);this.setReplayTextState_(this.textState_);this.beginGeometry(n,i);var s=this.coordinates.length;e=this.appendFlatCoordinates(e,t,o,r,!1);t=!goog.isNull(this.textFillState_);o=!goog.isNull(this.textStrokeState_);s=[ol.render.canvas.Instruction.DRAW_TEXT,s,e,this.text_,this.textOffsetX_,this.textOffsetY_,this.textRotation_,this.textScale_,t,o];this.instructions.push(s);this.hitDetectionInstructions.push(s);this.endGeometry(n,i)}};ol.render.canvas.TextReplay.prototype.setReplayFillState_=function(e){var t=this.replayFillState_;if(goog.isNull(t)||t.fillStyle!=e.fillStyle){var o=[ol.render.canvas.Instruction.SET_FILL_STYLE,e.fillStyle];this.instructions.push(o);this.hitDetectionInstructions.push(o);goog.isNull(t)?this.replayFillState_={fillStyle:e.fillStyle}:t.fillStyle=e.fillStyle}};ol.render.canvas.TextReplay.prototype.setReplayStrokeState_=function(e){var t=this.replayStrokeState_;if(goog.isNull(t)||t.lineCap!=e.lineCap||t.lineDash!=e.lineDash||t.lineJoin!=e.lineJoin||t.lineWidth!=e.lineWidth||t.miterLimit!=e.miterLimit||t.strokeStyle!=e.strokeStyle){var o=[ol.render.canvas.Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,!1];this.instructions.push(o);this.hitDetectionInstructions.push(o);goog.isNull(t)?this.replayStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle}:(t.lineCap=e.lineCap,t.lineDash=e.lineDash,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle)}};ol.render.canvas.TextReplay.prototype.setReplayTextState_=function(e){var t=this.replayTextState_;if(goog.isNull(t)||t.font!=e.font||t.textAlign!=e.textAlign||t.textBaseline!=e.textBaseline){var o=[ol.render.canvas.Instruction.SET_TEXT_STYLE,e.font,e.textAlign,e.textBaseline];this.instructions.push(o);this.hitDetectionInstructions.push(o);goog.isNull(t)?this.replayTextState_={font:e.font,textAlign:e.textAlign,textBaseline:e.textBaseline}:(t.font=e.font,t.textAlign=e.textAlign,t.textBaseline=e.textBaseline)}};ol.render.canvas.TextReplay.prototype.setTextStyle=function(e){if(goog.isNull(e))this.text_="";else{var t=e.getFill();goog.isNull(t)?this.textFillState_=null:(t=t.getColor(),t=ol.color.asString(goog.isNull(t)?ol.render.canvas.defaultFillStyle:t),goog.isNull(this.textFillState_)?this.textFillState_={fillStyle:t}:this.textFillState_.fillStyle=t);var o=e.getStroke();if(goog.isNull(o))this.textStrokeState_=null;else{var t=o.getColor(),r=o.getLineCap(),n=o.getLineDash(),i=o.getLineJoin(),s=o.getWidth(),o=o.getMiterLimit(),r=goog.isDef(r)?r:ol.render.canvas.defaultLineCap,n=goog.isDefAndNotNull(n)?n.slice():ol.render.canvas.defaultLineDash,i=goog.isDef(i)?i:ol.render.canvas.defaultLineJoin,s=goog.isDef(s)?s:ol.render.canvas.defaultLineWidth,o=goog.isDef(o)?o:ol.render.canvas.defaultMiterLimit,t=ol.color.asString(goog.isNull(t)?ol.render.canvas.defaultStrokeStyle:t);if(goog.isNull(this.textStrokeState_))this.textStrokeState_={lineCap:r,lineDash:n,lineJoin:i,lineWidth:s,miterLimit:o,strokeStyle:t};else{var a=this.textStrokeState_;a.lineCap=r;a.lineDash=n;a.lineJoin=i;a.lineWidth=s;a.miterLimit=o;a.strokeStyle=t}}var g=e.getFont(),t=e.getOffsetX(),r=e.getOffsetY(),n=e.getRotation(),s=e.getScale(),o=e.getText(),i=e.getTextAlign(),a=e.getTextBaseline();e=goog.isDef(g)?g:ol.render.canvas.defaultFont;i=goog.isDef(i)?i:ol.render.canvas.defaultTextAlign;a=goog.isDef(a)?a:ol.render.canvas.defaultTextBaseline;goog.isNull(this.textState_)?this.textState_={font:e,textAlign:i,textBaseline:a}:(g=this.textState_,g.font=e,g.textAlign=i,g.textBaseline=a);this.text_=goog.isDef(o)?o:"";this.textOffsetX_=goog.isDef(t)?t:0;this.textOffsetY_=goog.isDef(r)?r:0;this.textRotation_=goog.isDef(n)?n:0;this.textScale_=goog.isDef(s)?s:1}};ol.render.canvas.ReplayGroup=function(e,t,o,r){this.tolerance_=e;this.maxExtent_=t;this.resolution_=o;this.renderBuffer_=r;this.replaysByZIndex_={};this.hitDetectionContext_=ol.dom.createCanvasContext2D(1,1);this.hitDetectionTransform_=goog.vec.Mat4.createNumber()};ol.render.canvas.ReplayGroup.prototype.finish=function(){for(var e in this.replaysByZIndex_){var t,o=this.replaysByZIndex_[e];for(t in o)o[t].finish()}};ol.render.canvas.ReplayGroup.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,n){var i=this.hitDetectionTransform_;ol.vec.Mat4.makeTransform2D(i,.5,.5,1/t,-1/t,-o,-e[0],-e[1]);var s=this.hitDetectionContext_;s.clearRect(0,0,1,1);var a;goog.isDef(this.renderBuffer_)&&(a=ol.extent.createEmpty(),ol.extent.extendCoordinate(a,e),ol.extent.buffer(a,t*this.renderBuffer_,a));return this.replayHitDetection_(s,i,o,r,function(e){if(0<s.getImageData(0,0,1,1).data[3]){if(e=n(e))return e;s.clearRect(0,0,1,1)}},a)};ol.render.canvas.ReplayGroup.prototype.getReplay=function(e,t){var o=goog.isDef(e)?e.toString():"0",r=this.replaysByZIndex_[o];goog.isDef(r)||(r={},this.replaysByZIndex_[o]=r);o=r[t];goog.isDef(o)||(o=ol.render.canvas.BATCH_CONSTRUCTORS_[t],goog.asserts.assert(goog.isDef(o),t+" constructor missing from ol.render.canvas.BATCH_CONSTRUCTORS_"),o=new o(this.tolerance_,this.maxExtent_,this.resolution_),r[t]=o);return o};ol.render.canvas.ReplayGroup.prototype.isEmpty=function(){return goog.object.isEmpty(this.replaysByZIndex_)};ol.render.canvas.ReplayGroup.prototype.replay=function(e,t,o,r,n){var i=goog.array.map(goog.object.getKeys(this.replaysByZIndex_),Number);goog.array.sort(i);var s=this.maxExtent_,a=s[0],g=s[1],l=s[2],s=s[3],a=[a,g,a,s,l,s,l,g];ol.geom.flat.transform.transform2D(a,0,8,2,o,a);e.save();e.beginPath();e.moveTo(a[0],a[1]);e.lineTo(a[2],a[3]);e.lineTo(a[4],a[5]);e.lineTo(a[6],a[7]);e.closePath();e.clip();for(var u,c,a=0,g=i.length;g>a;++a)for(u=this.replaysByZIndex_[i[a].toString()],l=0,s=ol.render.REPLAY_ORDER.length;s>l;++l)c=u[ol.render.REPLAY_ORDER[l]],goog.isDef(c)&&c.replay(e,t,o,r,n);e.restore()};ol.render.canvas.ReplayGroup.prototype.replayHitDetection_=function(e,t,o,r,n,i){var s=goog.array.map(goog.object.getKeys(this.replaysByZIndex_),Number);goog.array.sort(s,function(e,t){return t-e});var a,g,l,u,c;a=0;for(g=s.length;g>a;++a)for(u=this.replaysByZIndex_[s[a].toString()],l=ol.render.REPLAY_ORDER.length-1;l>=0;--l)if(c=u[ol.render.REPLAY_ORDER[l]],goog.isDef(c)&&(c=c.replayHitDetection(e,t,o,r,n,i)))return c};ol.render.canvas.BATCH_CONSTRUCTORS_={Image:ol.render.canvas.ImageReplay,LineString:ol.render.canvas.LineStringReplay,Polygon:ol.render.canvas.PolygonReplay,Text:ol.render.canvas.TextReplay};ol.geom.Circle=function(e,t,o){ol.geom.SimpleGeometry.call(this);t=goog.isDef(t)?t:0;this.setCenterAndRadius(e,t,o)};goog.inherits(ol.geom.Circle,ol.geom.SimpleGeometry);ol.geom.Circle.prototype.clone=function(){var e=new ol.geom.Circle(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};ol.geom.Circle.prototype.closestPointXY=function(e,t,o,r){var n=this.flatCoordinates;e-=n[0];var i=t-n[1];t=e*e+i*i;if(r>t){0===t?r=0:(r=this.getRadius()/Math.sqrt(t),o[0]=n[0]+r*e,o[1]=n[1]+r*i,r=2);for(;r<this.stride;++r)o[r]=n[r];o.length=this.stride;return t}return r};ol.geom.Circle.prototype.containsXY=function(e,t){var o=this.flatCoordinates,r=e-o[0],o=t-o[1];return r*r+o*o<=this.getRadiusSquared_()};ol.geom.Circle.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)};ol.geom.Circle.prototype.computeExtent=function(e){var t=this.flatCoordinates,o=t[this.stride]-t[0];return ol.extent.createOrUpdate(t[0]-o,t[1]-o,t[0]+o,t[1]+o,e)};ol.geom.Circle.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())};ol.geom.Circle.prototype.getRadiusSquared_=function(){var e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t};ol.geom.Circle.prototype.getType=function(){return ol.geom.GeometryType.CIRCLE};ol.geom.Circle.prototype.intersectsExtent=function(e){var t=this.getExtent();return ol.extent.intersects(e,t)?(t=this.getCenter(),e[0]<=t[0]&&e[2]>=t[0]||e[1]<=t[1]&&e[3]>=t[1]?!0:ol.extent.forEachCorner(e,this.containsCoordinate,this)):!1};ol.geom.Circle.prototype.setCenter=function(e){var t=this.stride;goog.asserts.assert(e.length==t,"center array length should match stride");var o=this.flatCoordinates[t]-this.flatCoordinates[0],r=e.slice();r[t]=r[0]+o;for(o=1;t>o;++o)r[t+o]=e[o];this.setFlatCoordinates(this.layout,r)};ol.geom.Circle.prototype.setCenterAndRadius=function(e,t,o){if(goog.isNull(e))this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null);else{this.setLayout(o,e,0);goog.isNull(this.flatCoordinates)&&(this.flatCoordinates=[]);o=this.flatCoordinates;e=ol.geom.flat.deflate.coordinate(o,0,e,this.stride);o[e++]=o[0]+t;var r;t=1;for(r=this.stride;r>t;++t)o[e++]=o[t];o.length=e;this.changed()}};ol.geom.Circle.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t);this.changed()};ol.geom.Circle.prototype.setRadius=function(e){goog.asserts.assert(!goog.isNull(this.flatCoordinates),"this.flatCoordinates cannot be null");this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e;this.changed()};ol.geom.GeometryCollection=function(e){ol.geom.Geometry.call(this);this.geometries_=goog.isDef(e)?e:null;this.listenGeometriesChange_()};goog.inherits(ol.geom.GeometryCollection,ol.geom.Geometry);ol.geom.GeometryCollection.cloneGeometries_=function(e){var t,o,r=[];t=0;for(o=e.length;o>t;++t)r.push(e[t].clone());return r};ol.geom.GeometryCollection.prototype.unlistenGeometriesChange_=function(){var e,t;if(!goog.isNull(this.geometries_))for(e=0,t=this.geometries_.length;t>e;++e)goog.events.unlisten(this.geometries_[e],goog.events.EventType.CHANGE,this.changed,!1,this)};ol.geom.GeometryCollection.prototype.listenGeometriesChange_=function(){var e,t;if(!goog.isNull(this.geometries_))for(e=0,t=this.geometries_.length;t>e;++e)goog.events.listen(this.geometries_[e],goog.events.EventType.CHANGE,this.changed,!1,this)};ol.geom.GeometryCollection.prototype.clone=function(){var e=new ol.geom.GeometryCollection(null);e.setGeometries(this.geometries_);return e};ol.geom.GeometryCollection.prototype.closestPointXY=function(e,t,o,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t))return r;var n,i,s=this.geometries_;n=0;for(i=s.length;i>n;++n)r=s[n].closestPointXY(e,t,o,r);return r};ol.geom.GeometryCollection.prototype.containsXY=function(e,t){var o,r,n=this.geometries_;o=0;for(r=n.length;r>o;++o)if(n[o].containsXY(e,t))return!0;return!1};ol.geom.GeometryCollection.prototype.computeExtent=function(e){ol.extent.createOrUpdateEmpty(e);for(var t=this.geometries_,o=0,r=t.length;r>o;++o)ol.extent.extend(e,t[o].getExtent());return e};ol.geom.GeometryCollection.prototype.getGeometries=function(){return ol.geom.GeometryCollection.cloneGeometries_(this.geometries_)};ol.geom.GeometryCollection.prototype.getGeometriesArray=function(){return this.geometries_};ol.geom.GeometryCollection.prototype.getSimplifiedGeometry=function(e){this.simplifiedGeometryRevision!=this.getRevision()&&(goog.object.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision());if(0>e||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var t=e.toString();if(this.simplifiedGeometryCache.hasOwnProperty(t))return this.simplifiedGeometryCache[t];var o,r,n=[],i=this.geometries_,s=!1;o=0;for(r=i.length;r>o;++o){var a=i[o],g=a.getSimplifiedGeometry(e);n.push(g);g!==a&&(s=!0)}if(s)return e=new ol.geom.GeometryCollection(null),e.setGeometriesArray(n),this.simplifiedGeometryCache[t]=e;this.simplifiedGeometryMaxMinSquaredTolerance=e;return this};ol.geom.GeometryCollection.prototype.getType=function(){return ol.geom.GeometryType.GEOMETRY_COLLECTION};ol.geom.GeometryCollection.prototype.intersectsExtent=function(e){var t,o,r=this.geometries_;t=0;for(o=r.length;o>t;++t)if(r[t].intersectsExtent(e))return!0;return!1};ol.geom.GeometryCollection.prototype.isEmpty=function(){return goog.array.isEmpty(this.geometries_)};ol.geom.GeometryCollection.prototype.setGeometries=function(e){this.setGeometriesArray(ol.geom.GeometryCollection.cloneGeometries_(e))};ol.geom.GeometryCollection.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_();this.geometries_=e;this.listenGeometriesChange_();this.changed()};ol.geom.GeometryCollection.prototype.applyTransform=function(e){var t,o,r=this.geometries_;t=0;for(o=r.length;o>t;++t)r[t].applyTransform(e);this.changed()};ol.geom.GeometryCollection.prototype.translate=function(e,t){var o,r,n=this.geometries_;o=0;for(r=n.length;r>o;++o)n[o].translate(e,t);this.changed()};ol.geom.GeometryCollection.prototype.disposeInternal=function(){this.unlistenGeometriesChange_();ol.geom.GeometryCollection.superClass_.disposeInternal.call(this)};ol.geom.flat.interpolate={};ol.geom.flat.interpolate.lineString=function(e,t,o,r,n,i){goog.asserts.assert(n>=0&&1>=n,"fraction should be in between 0 and 1");var s=0/0,a=0/0,g=(o-t)/r;if(0===g)goog.asserts.fail("n cannot be 0");else if(1==g)s=e[t],a=e[t+1];else if(2==g)s=(1-n)*e[t]+n*e[t+r],a=(1-n)*e[t+1]+n*e[t+r+1];else{var l,a=e[t],g=e[t+1],u=0,s=[0];for(l=t+r;o>l;l+=r){var c=e[l],h=e[l+1],u=u+Math.sqrt((c-a)*(c-a)+(h-g)*(h-g));s.push(u);a=c;g=h}n*=u;o=goog.array.binarySearch(s,n);0>o?(n=(n-s[-o-2])/(s[-o-1]-s[-o-2]),t+=(-o-2)*r,s=goog.math.lerp(e[t],e[t+r],n),a=goog.math.lerp(e[t+1],e[t+r+1],n)):(s=e[t+o*r],a=e[t+o*r+1])}return goog.isDefAndNotNull(i)?(i[0]=s,i[1]=a,i):[s,a]};ol.geom.flat.lineStringCoordinateAtM=function(e,t,o,r,n,i){if(o==t)return null;if(n<e[t+r-1])return i?(o=e.slice(t,t+r),o[r-1]=n,o):null;if(e[o-1]<n)return i?(o=e.slice(o-r,o),o[r-1]=n,o):null;if(n==e[t+r-1])return e.slice(t,t+r);t/=r;for(o/=r;o>t;)i=t+o>>1,n<e[(i+1)*r-1]?o=i:t=i+1;o=e[t*r-1];if(n==o)return e.slice((t-1)*r,(t-1)*r+r);i=e[(t+1)*r-1];goog.asserts.assert(n>o,"m0 should be less than m");goog.asserts.assert(i>=n,"m should be less than or equal to m1");i=(n-o)/(i-o);o=[];var s;for(s=0;r-1>s;++s)o.push(goog.math.lerp(e[(t-1)*r+s],e[t*r+s],i));o.push(n);goog.asserts.assert(o.length==r,"length of coordinate array should match stride");return o};ol.geom.flat.lineStringsCoordinateAtM=function(e,t,o,r,n,i,s){if(s)return ol.geom.flat.lineStringCoordinateAtM(e,t,o[o.length-1],r,n,i);if(n<e[r-1])return i?(e=e.slice(0,r),e[r-1]=n,e):null;if(e[e.length-1]<n)return i?(e=e.slice(e.length-r),e[r-1]=n,e):null;i=0;for(s=o.length;s>i;++i){var a=o[i];if(t!=a){if(n<e[t+r-1])return null;if(n<=e[a-1])return ol.geom.flat.lineStringCoordinateAtM(e,t,a,r,n,!1);t=a}}goog.asserts.fail("ol.geom.flat.lineStringsCoordinateAtM should have returned");return null};ol.geom.flat.length={};ol.geom.flat.length.lineString=function(e,t,o,r){var n=e[t],i=e[t+1],s=0;for(t+=r;o>t;t+=r)var a=e[t],g=e[t+1],s=s+Math.sqrt((a-n)*(a-n)+(g-i)*(g-i)),n=a,i=g;return s};ol.geom.flat.length.linearRing=function(e,t,o,r){var n=ol.geom.flat.length.lineString(e,t,o,r),i=e[o-r]-e[t];e=e[o-r+1]-e[t+1];return n+=Math.sqrt(i*i+e*e)};ol.geom.LineString=function(e,t){ol.geom.SimpleGeometry.call(this);this.flatMidpoint_=null;this.maxDeltaRevision_=this.maxDelta_=this.flatMidpointRevision_=-1;this.setCoordinates(e,t)};goog.inherits(ol.geom.LineString,ol.geom.SimpleGeometry);ol.geom.LineString.prototype.appendCoordinate=function(e){goog.asserts.assert(e.length==this.stride,"length of coordinate array should match stride");goog.isNull(this.flatCoordinates)?this.flatCoordinates=e.slice():goog.array.extend(this.flatCoordinates,e);this.changed()};ol.geom.LineString.prototype.clone=function(){var e=new ol.geom.LineString(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};ol.geom.LineString.prototype.closestPointXY=function(e,t,o,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t))return r;this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision());return ol.geom.flat.closest.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,o,r)};ol.geom.LineString.prototype.forEachSegment=function(e,t){return ol.geom.flat.segments.forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t)};ol.geom.LineString.prototype.getCoordinateAtM=function(e,t){if(this.layout!=ol.geom.GeometryLayout.XYM&&this.layout!=ol.geom.GeometryLayout.XYZM)return null;var o=goog.isDef(t)?t:!1;return ol.geom.flat.lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,o)};ol.geom.LineString.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LineString.prototype.getLength=function(){return ol.geom.flat.length.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LineString.prototype.getFlatMidpoint=function(){this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=ol.geom.flat.interpolate.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision());return this.flatMidpoint_};ol.geom.LineString.prototype.getSimplifiedGeometryInternal=function(e){var t=[];t.length=ol.geom.flat.simplify.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0);e=new ol.geom.LineString(null);e.setFlatCoordinates(ol.geom.GeometryLayout.XY,t);return e};ol.geom.LineString.prototype.getType=function(){return ol.geom.GeometryType.LINE_STRING};ol.geom.LineString.prototype.intersectsExtent=function(e){return ol.geom.flat.intersectsextent.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)};ol.geom.LineString.prototype.setCoordinates=function(e,t){goog.isNull(e)?this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null):(this.setLayout(t,e,1),goog.isNull(this.flatCoordinates)&&(this.flatCoordinates=[]),this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,e,this.stride),this.changed())};ol.geom.LineString.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t);this.changed()};ol.geom.MultiLineString=function(e,t){ol.geom.SimpleGeometry.call(this);this.ends_=[];this.maxDeltaRevision_=this.maxDelta_=-1;this.setCoordinates(e,t)};goog.inherits(ol.geom.MultiLineString,ol.geom.SimpleGeometry);ol.geom.MultiLineString.prototype.appendLineString=function(e){goog.asserts.assert(e.getLayout()==this.layout,"layout of lineString should match the layout");goog.isNull(this.flatCoordinates)?this.flatCoordinates=e.getFlatCoordinates().slice():goog.array.extend(this.flatCoordinates,e.getFlatCoordinates().slice());this.ends_.push(this.flatCoordinates.length);this.changed()};ol.geom.MultiLineString.prototype.clone=function(){var e=new ol.geom.MultiLineString(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return e};ol.geom.MultiLineString.prototype.closestPointXY=function(e,t,o,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t))return r;this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision());return ol.geom.flat.closest.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,o,r)};ol.geom.MultiLineString.prototype.getCoordinateAtM=function(e,t,o){if(this.layout!=ol.geom.GeometryLayout.XYM&&this.layout!=ol.geom.GeometryLayout.XYZM||0===this.flatCoordinates.length)return null;t=goog.isDef(t)?t:!1;o=goog.isDef(o)?o:!1;return ol.geom.flat.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,t,o)};ol.geom.MultiLineString.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)};ol.geom.MultiLineString.prototype.getEnds=function(){return this.ends_};ol.geom.MultiLineString.prototype.getLineString=function(e){goog.asserts.assert(e>=0&&e<this.ends_.length,"index should be in between 0 and length of the this.ends_ array");if(0>e||this.ends_.length<=e)return null;var t=new ol.geom.LineString(null);t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]));return t};ol.geom.MultiLineString.prototype.getLineStrings=function(){var e,t,o=this.flatCoordinates,r=this.ends_,n=this.layout,i=[],s=0;e=0;for(t=r.length;t>e;++e){var a=r[e],g=new ol.geom.LineString(null);g.setFlatCoordinates(n,o.slice(s,a));i.push(g);s=a}return i};ol.geom.MultiLineString.prototype.getFlatMidpoints=function(){var e,t,o=[],r=this.flatCoordinates,n=0,i=this.ends_,s=this.stride;e=0;for(t=i.length;t>e;++e){var a=i[e],n=ol.geom.flat.interpolate.lineString(r,n,a,s,.5);goog.array.extend(o,n);n=a}return o};ol.geom.MultiLineString.prototype.getSimplifiedGeometryInternal=function(e){var t=[],o=[];t.length=ol.geom.flat.simplify.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,o);e=new ol.geom.MultiLineString(null);e.setFlatCoordinates(ol.geom.GeometryLayout.XY,t,o);return e};ol.geom.MultiLineString.prototype.getType=function(){return ol.geom.GeometryType.MULTI_LINE_STRING};ol.geom.MultiLineString.prototype.intersectsExtent=function(e){return ol.geom.flat.intersectsextent.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,e)};ol.geom.MultiLineString.prototype.setCoordinates=function(e,t){if(goog.isNull(e))this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.ends_);else{this.setLayout(t,e,2);goog.isNull(this.flatCoordinates)&&(this.flatCoordinates=[]);var o=ol.geom.flat.deflate.coordinatess(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===o.length?0:o[o.length-1];this.changed()}};ol.geom.MultiLineString.prototype.setFlatCoordinates=function(e,t,o){goog.isNull(t)?goog.asserts.assert(!goog.isNull(o)&&0===o.length,"ends cannot be null and ends.length should be 0"):0===o.length?goog.asserts.assert(0===t.length,"flatCoordinates should be an empty array"):goog.asserts.assert(t.length==o[o.length-1],"length of flatCoordinates array should match the last value of ends");this.setFlatCoordinatesInternal(e,t);this.ends_=o;this.changed()};ol.geom.MultiLineString.prototype.setLineStrings=function(e){var t,o,r=ol.geom.GeometryLayout.XY,n=[],i=[];t=0;for(o=e.length;o>t;++t){var s=e[t];0===t?r=s.getLayout():goog.asserts.assert(s.getLayout()==r,"layout of lineString should match layout");goog.array.extend(n,s.getFlatCoordinates());i.push(n.length)}this.setFlatCoordinates(r,n,i)};ol.geom.MultiPoint=function(e,t){ol.geom.SimpleGeometry.call(this);this.setCoordinates(e,t)};goog.inherits(ol.geom.MultiPoint,ol.geom.SimpleGeometry);ol.geom.MultiPoint.prototype.appendPoint=function(e){goog.asserts.assert(e.getLayout()==this.layout,"the layout of point should match layout");goog.isNull(this.flatCoordinates)?this.flatCoordinates=e.getFlatCoordinates().slice():goog.array.extend(this.flatCoordinates,e.getFlatCoordinates());this.changed()};ol.geom.MultiPoint.prototype.clone=function(){var e=new ol.geom.MultiPoint(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};ol.geom.MultiPoint.prototype.closestPointXY=function(e,t,o,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t))return r;var n,i,s,a=this.flatCoordinates,g=this.stride;n=0;for(i=a.length;i>n;n+=g)if(s=ol.math.squaredDistance(e,t,a[n],a[n+1]),r>s){r=s;for(s=0;g>s;++s)o[s]=a[n+s];o.length=g}return r};ol.geom.MultiPoint.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.MultiPoint.prototype.getPoint=function(e){var t=goog.isNull(this.flatCoordinates)?0:this.flatCoordinates.length/this.stride;goog.asserts.assert(e>=0&&t>e,"index should be in between 0 and n");if(0>e||e>=t)return null;t=new ol.geom.Point(null);t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride));return t};ol.geom.MultiPoint.prototype.getPoints=function(){var e,t,o=this.flatCoordinates,r=this.layout,n=this.stride,i=[];e=0;for(t=o.length;t>e;e+=n){var s=new ol.geom.Point(null);s.setFlatCoordinates(r,o.slice(e,e+n));i.push(s)}return i};ol.geom.MultiPoint.prototype.getType=function(){return ol.geom.GeometryType.MULTI_POINT};ol.geom.MultiPoint.prototype.intersectsExtent=function(e){var t,o,r,n,i=this.flatCoordinates,s=this.stride;t=0;for(o=i.length;o>t;t+=s)if(r=i[t],n=i[t+1],ol.extent.containsXY(e,r,n))return!0;return!1};ol.geom.MultiPoint.prototype.setCoordinates=function(e,t){goog.isNull(e)?this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null):(this.setLayout(t,e,1),goog.isNull(this.flatCoordinates)&&(this.flatCoordinates=[]),this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,e,this.stride),this.changed())};ol.geom.MultiPoint.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t);this.changed()};ol.geom.flat.center={};ol.geom.flat.center.linearRingss=function(e,t,o,r){var n,i,s=[],a=ol.extent.createEmpty();n=0;for(i=o.length;i>n;++n){var g=o[n],a=ol.extent.createOrUpdateFromFlatCoordinates(e,t,g[0],r);s.push((a[0]+a[2])/2,(a[1]+a[3])/2);t=g[g.length-1]}return s};ol.geom.MultiPolygon=function(e,t){ol.geom.SimpleGeometry.call(this);this.endss_=[];this.flatInteriorPointsRevision_=-1;this.flatInteriorPoints_=null;this.orientedRevision_=this.maxDeltaRevision_=this.maxDelta_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(e,t)};goog.inherits(ol.geom.MultiPolygon,ol.geom.SimpleGeometry);ol.geom.MultiPolygon.prototype.appendPolygon=function(e){goog.asserts.assert(e.getLayout()==this.layout,"layout of polygon should match layout");if(goog.isNull(this.flatCoordinates))this.flatCoordinates=e.getFlatCoordinates().slice(),e=e.getEnds().slice(),this.endss_.push();else{var t=this.flatCoordinates.length;goog.array.extend(this.flatCoordinates,e.getFlatCoordinates());e=e.getEnds().slice();var o,r;o=0;for(r=e.length;r>o;++o)e[o]+=t}this.endss_.push(e);this.changed()};ol.geom.MultiPolygon.prototype.clone=function(){var e=new ol.geom.MultiPolygon(null),t=goog.object.unsafeClone(this.endss_);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),t);return e};ol.geom.MultiPolygon.prototype.closestPointXY=function(e,t,o,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t))return r;this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision());return ol.geom.flat.closest.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,o,r)};ol.geom.MultiPolygon.prototype.containsXY=function(e,t){return ol.geom.flat.contains.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)};ol.geom.MultiPolygon.prototype.getArea=function(){return ol.geom.flat.area.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)};ol.geom.MultiPolygon.prototype.getCoordinates=function(e){var t;goog.isDef(e)?(t=this.getOrientedFlatCoordinates().slice(),ol.geom.flat.orient.orientLinearRingss(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates;return ol.geom.flat.inflate.coordinatesss(t,0,this.endss_,this.stride)};ol.geom.MultiPolygon.prototype.getEndss=function(){return this.endss_};ol.geom.MultiPolygon.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var e=ol.geom.flat.center.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ol.geom.flat.interiorpoint.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e);this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_};ol.geom.MultiPolygon.prototype.getInteriorPoints=function(){var e=new ol.geom.MultiPoint(null);e.setFlatCoordinates(ol.geom.GeometryLayout.XY,this.getFlatInteriorPoints().slice());return e};ol.geom.MultiPolygon.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;ol.geom.flat.orient.linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=ol.geom.flat.orient.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride));this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};ol.geom.MultiPolygon.prototype.getSimplifiedGeometryInternal=function(e){var t=[],o=[];t.length=ol.geom.flat.simplify.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,o);e=new ol.geom.MultiPolygon(null);e.setFlatCoordinates(ol.geom.GeometryLayout.XY,t,o);return e};ol.geom.MultiPolygon.prototype.getPolygon=function(e){goog.asserts.assert(e>=0&&e<this.endss_.length,"index should be in between 0 and the length of this.endss_");if(0>e||this.endss_.length<=e)return null;var t;0===e?t=0:(t=this.endss_[e-1],t=t[t.length-1]);e=this.endss_[e].slice();var o=e[e.length-1];if(0!==t){var r,n;r=0;for(n=e.length;n>r;++r)e[r]-=t}r=new ol.geom.Polygon(null);r.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t,o),e);return r};ol.geom.MultiPolygon.prototype.getPolygons=function(){var e,t,o,r,n=this.layout,i=this.flatCoordinates,s=this.endss_,a=[],g=0;e=0;for(t=s.length;t>e;++e){var l=s[e].slice(),u=l[l.length-1];if(0!==g)for(o=0,r=l.length;r>o;++o)l[o]-=g;o=new ol.geom.Polygon(null);o.setFlatCoordinates(n,i.slice(g,u),l);a.push(o);g=u}return a};ol.geom.MultiPolygon.prototype.getType=function(){return ol.geom.GeometryType.MULTI_POLYGON};ol.geom.MultiPolygon.prototype.intersectsExtent=function(e){return ol.geom.flat.intersectsextent.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)};ol.geom.MultiPolygon.prototype.setCoordinates=function(e,t){if(goog.isNull(e))this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.endss_);else{this.setLayout(t,e,3);goog.isNull(this.flatCoordinates)&&(this.flatCoordinates=[]);var o=ol.geom.flat.deflate.coordinatesss(this.flatCoordinates,0,e,this.stride,this.endss_);0===o.length?this.flatCoordinates.length=0:(o=o[o.length-1],this.flatCoordinates.length=0===o.length?0:o[o.length-1]);this.changed()}};ol.geom.MultiPolygon.prototype.setFlatCoordinates=function(e,t,o){goog.asserts.assert(!goog.isNull(o),"endss cannot be null");if(goog.isNull(t)||0===t.length)goog.asserts.assert(0===o.length,"the length of endss should be 0");else{goog.asserts.assert(0<o.length,"endss cannot be an empty array");var r=o[o.length-1];goog.asserts.assert(t.length==r[r.length-1],"the length of flatCoordinates should be the last value of ends")}this.setFlatCoordinatesInternal(e,t);this.endss_=o;this.changed()};ol.geom.MultiPolygon.prototype.setPolygons=function(e){var t,o,r,n=ol.geom.GeometryLayout.XY,i=[],s=[];t=0;for(o=e.length;o>t;++t){var a=e[t];0===t?n=a.getLayout():goog.asserts.assert(a.getLayout()==n,"layout of polygon should be layout");var g=i.length;r=a.getEnds();var l,u;l=0;for(u=r.length;u>l;++l)r[l]+=g;goog.array.extend(i,a.getFlatCoordinates());
s.push(r)}this.setFlatCoordinates(n,i,s)};ol.renderer.vector={};ol.renderer.vector.defaultOrder=function(e,t){return goog.getUid(e)-goog.getUid(t)};ol.renderer.vector.getSquaredTolerance=function(e,t){var o=ol.renderer.vector.getTolerance(e,t);return o*o};ol.renderer.vector.getTolerance=function(e,t){return ol.SIMPLIFY_TOLERANCE*e/t};ol.renderer.vector.renderCircleGeometry_=function(e,t,o,r){goog.asserts.assertInstanceof(t,ol.geom.Circle,"geometry should be an ol.geom.Circle");var n=o.getFill(),i=o.getStroke();if(!goog.isNull(n)||!goog.isNull(i)){var s=e.getReplay(o.getZIndex(),ol.render.ReplayType.POLYGON);s.setFillStrokeStyle(n,i);s.drawCircleGeometry(t,r)}n=o.getText();goog.isNull(n)||(e=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT),e.setTextStyle(n),e.drawText(t.getCenter(),0,2,2,t,r))};ol.renderer.vector.renderFeature=function(e,t,o,r,n,i){var s,a,g=!1;s=o.getImage();goog.isNull(s)||(a=s.getImageState(),a==ol.style.ImageState.LOADED||a==ol.style.ImageState.ERROR?s.unlistenImageChange(n,i):(a==ol.style.ImageState.IDLE&&s.load(),a=s.getImageState(),goog.asserts.assert(a==ol.style.ImageState.LOADING,"imageState should be LOADING"),s.listenImageChange(n,i),g=!0));ol.renderer.vector.renderFeature_(e,t,o,r);return g};ol.renderer.vector.renderFeature_=function(e,t,o,r){var n=o.getGeometryFunction()(t);goog.isDefAndNotNull(n)&&(r=n.getSimplifiedGeometry(r),n=ol.renderer.vector.GEOMETRY_RENDERERS_[r.getType()],goog.asserts.assert(goog.isDef(n),"geometryRenderer should be defined"),n(e,r,o,t))};ol.renderer.vector.renderGeometryCollectionGeometry_=function(e,t,o,r){goog.asserts.assertInstanceof(t,ol.geom.GeometryCollection,"geometry should be an ol.geom.GeometryCollection");t=t.getGeometriesArray();var n,i;n=0;for(i=t.length;i>n;++n){var s=ol.renderer.vector.GEOMETRY_RENDERERS_[t[n].getType()];goog.asserts.assert(goog.isDef(s),"geometryRenderer should be defined");s(e,t[n],o,r)}};ol.renderer.vector.renderLineStringGeometry_=function(e,t,o,r){goog.asserts.assertInstanceof(t,ol.geom.LineString,"geometry should be an ol.geom.LineString");var n=o.getStroke();if(!goog.isNull(n)){var i=e.getReplay(o.getZIndex(),ol.render.ReplayType.LINE_STRING);i.setFillStrokeStyle(null,n);i.drawLineStringGeometry(t,r)}n=o.getText();goog.isNull(n)||(e=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT),e.setTextStyle(n),e.drawText(t.getFlatMidpoint(),0,2,2,t,r))};ol.renderer.vector.renderMultiLineStringGeometry_=function(e,t,o,r){goog.asserts.assertInstanceof(t,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");var n=o.getStroke();if(!goog.isNull(n)){var i=e.getReplay(o.getZIndex(),ol.render.ReplayType.LINE_STRING);i.setFillStrokeStyle(null,n);i.drawMultiLineStringGeometry(t,r)}n=o.getText();goog.isNull(n)||(e=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT),e.setTextStyle(n),o=t.getFlatMidpoints(),e.drawText(o,0,o.length,2,t,r))};ol.renderer.vector.renderMultiPolygonGeometry_=function(e,t,o,r){goog.asserts.assertInstanceof(t,ol.geom.MultiPolygon,"geometry should be an ol.geom.MultiPolygon");var n=o.getFill(),i=o.getStroke();if(!goog.isNull(i)||!goog.isNull(n)){var s=e.getReplay(o.getZIndex(),ol.render.ReplayType.POLYGON);s.setFillStrokeStyle(n,i);s.drawMultiPolygonGeometry(t,r)}n=o.getText();goog.isNull(n)||(e=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT),e.setTextStyle(n),o=t.getFlatInteriorPoints(),e.drawText(o,0,o.length,2,t,r))};ol.renderer.vector.renderPointGeometry_=function(e,t,o,r){goog.asserts.assertInstanceof(t,ol.geom.Point,"geometry should be an ol.geom.Point");var n=o.getImage();if(!goog.isNull(n)){if(n.getImageState()!=ol.style.ImageState.LOADED)return;var i=e.getReplay(o.getZIndex(),ol.render.ReplayType.IMAGE);i.setImageStyle(n);i.drawPointGeometry(t,r)}n=o.getText();goog.isNull(n)||(e=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT),e.setTextStyle(n),e.drawText(t.getCoordinates(),0,2,2,t,r))};ol.renderer.vector.renderMultiPointGeometry_=function(e,t,o,r){goog.asserts.assertInstanceof(t,ol.geom.MultiPoint,"geometry should be an ol.goem.MultiPoint");var n=o.getImage();if(!goog.isNull(n)){if(n.getImageState()!=ol.style.ImageState.LOADED)return;var i=e.getReplay(o.getZIndex(),ol.render.ReplayType.IMAGE);i.setImageStyle(n);i.drawMultiPointGeometry(t,r)}n=o.getText();goog.isNull(n)||(e=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT),e.setTextStyle(n),o=t.getFlatCoordinates(),e.drawText(o,0,o.length,t.getStride(),t,r))};ol.renderer.vector.renderPolygonGeometry_=function(e,t,o,r){goog.asserts.assertInstanceof(t,ol.geom.Polygon,"geometry should be an ol.geom.Polygon");var n=o.getFill(),i=o.getStroke();if(!goog.isNull(n)||!goog.isNull(i)){var s=e.getReplay(o.getZIndex(),ol.render.ReplayType.POLYGON);s.setFillStrokeStyle(n,i);s.drawPolygonGeometry(t,r)}n=o.getText();goog.isNull(n)||(e=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT),e.setTextStyle(n),e.drawText(t.getFlatInteriorPoint(),0,2,2,t,r))};ol.renderer.vector.GEOMETRY_RENDERERS_={Point:ol.renderer.vector.renderPointGeometry_,LineString:ol.renderer.vector.renderLineStringGeometry_,Polygon:ol.renderer.vector.renderPolygonGeometry_,MultiPoint:ol.renderer.vector.renderMultiPointGeometry_,MultiLineString:ol.renderer.vector.renderMultiLineStringGeometry_,MultiPolygon:ol.renderer.vector.renderMultiPolygonGeometry_,GeometryCollection:ol.renderer.vector.renderGeometryCollectionGeometry_,Circle:ol.renderer.vector.renderCircleGeometry_};ol.ImageCanvas=function(e,t,o,r,n,i){this.loader_=goog.isDef(i)?i:null;i=goog.isDef(i)?ol.ImageState.IDLE:ol.ImageState.LOADED;ol.ImageBase.call(this,e,t,o,i,r);this.canvas_=n;this.error_=null};goog.inherits(ol.ImageCanvas,ol.ImageBase);ol.ImageCanvas.prototype.getError=function(){return this.error_};ol.ImageCanvas.prototype.handleLoad_=function(e){e?(this.error_=e,this.state=ol.ImageState.ERROR):this.state=ol.ImageState.LOADED;this.changed()};ol.ImageCanvas.prototype.load=function(){this.state==ol.ImageState.IDLE&&(goog.asserts.assert(!goog.isNull(this.loader_)),this.state=ol.ImageState.LOADING,this.changed(),this.loader_(goog.bind(this.handleLoad_,this)))};ol.ImageCanvas.prototype.getImage=function(){return this.canvas_};ol.source.Image=function(e){ol.source.Source.call(this,{attributions:e.attributions,extent:e.extent,logo:e.logo,projection:e.projection,state:e.state});this.resolutions_=goog.isDef(e.resolutions)?e.resolutions:null;goog.asserts.assert(goog.isNull(this.resolutions_)||goog.array.isSorted(this.resolutions_,function(e,t){return t-e},!0),"resolutions must be null or sorted in descending order")};goog.inherits(ol.source.Image,ol.source.Source);ol.source.Image.prototype.getResolutions=function(){return this.resolutions_};ol.source.Image.prototype.findNearestResolution=function(e){goog.isNull(this.resolutions_)||(e=ol.array.linearFindNearest(this.resolutions_,e,0),e=this.resolutions_[e]);return e};ol.source.Image.prototype.handleImageChange=function(e){e=e.target;switch(e.getState()){case ol.ImageState.LOADING:this.dispatchEvent(new ol.source.ImageEvent(ol.source.ImageEventType.IMAGELOADSTART,e));break;case ol.ImageState.LOADED:this.dispatchEvent(new ol.source.ImageEvent(ol.source.ImageEventType.IMAGELOADEND,e));break;case ol.ImageState.ERROR:this.dispatchEvent(new ol.source.ImageEvent(ol.source.ImageEventType.IMAGELOADERROR,e))}};ol.source.Image.defaultImageLoadFunction=function(e,t){e.getImage().src=t};ol.source.ImageEvent=function(e,t){goog.events.Event.call(this,e);this.image=t};goog.inherits(ol.source.ImageEvent,goog.events.Event);ol.source.ImageEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};ol.source.ImageCanvas=function(e){ol.source.Image.call(this,{attributions:e.attributions,logo:e.logo,projection:e.projection,resolutions:e.resolutions,state:goog.isDef(e.state)?e.state:void 0});this.canvasFunction_=e.canvasFunction;this.canvas_=null;this.renderedRevision_=0;this.ratio_=goog.isDef(e.ratio)?e.ratio:1.5};goog.inherits(ol.source.ImageCanvas,ol.source.Image);ol.source.ImageCanvas.prototype.getImage=function(e,t,o,r){t=this.findNearestResolution(t);var n=this.canvas_;if(!goog.isNull(n)&&this.renderedRevision_==this.getRevision()&&n.getResolution()==t&&n.getPixelRatio()==o&&ol.extent.containsExtent(n.getExtent(),e))return n;e=e.slice();ol.extent.scaleFromCenter(e,this.ratio_);var i=ol.extent.getWidth(e)/t,s=ol.extent.getHeight(e)/t;r=this.canvasFunction_(e,t,o,[i*o,s*o],r);goog.isNull(r)||(n=new ol.ImageCanvas(e,t,o,this.getAttributions(),r));this.canvas_=n;this.renderedRevision_=this.getRevision();return n};ol.Feature=function(e){ol.Object.call(this);this.id_=void 0;this.geometryName_="geometry";this.style_=null;this.styleFunction_=void 0;this.geometryChangeKey_=null;goog.events.listen(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,!1,this);goog.isDef(e)&&(e instanceof ol.geom.Geometry||goog.isNull(e)?this.setGeometry(e):(goog.asserts.assert(goog.isObject(e),"opt_geometryOrProperties should be an Object"),this.setProperties(e)))};goog.inherits(ol.Feature,ol.Object);ol.Feature.prototype.clone=function(){var e=new ol.Feature(this.getProperties());e.setGeometryName(this.getGeometryName());var t=this.getGeometry();goog.isDefAndNotNull(t)&&e.setGeometry(t.clone());t=this.getStyle();goog.isNull(t)||e.setStyle(t);return e};ol.Feature.prototype.getGeometry=function(){return this.get(this.geometryName_)};ol.Feature.prototype.getId=function(){return this.id_};ol.Feature.prototype.getGeometryName=function(){return this.geometryName_};ol.Feature.prototype.getStyle=function(){return this.style_};ol.Feature.prototype.getStyleFunction=function(){return this.styleFunction_};ol.Feature.prototype.handleGeometryChange_=function(){this.changed()};ol.Feature.prototype.handleGeometryChanged_=function(){goog.isNull(this.geometryChangeKey_)||(goog.events.unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();goog.isDefAndNotNull(e)&&(this.geometryChangeKey_=goog.events.listen(e,goog.events.EventType.CHANGE,this.handleGeometryChange_,!1,this));this.changed()};ol.Feature.prototype.setGeometry=function(e){this.set(this.geometryName_,e)};ol.Feature.prototype.setStyle=function(e){this.style_=e;this.styleFunction_=goog.isNull(e)?void 0:ol.Feature.createStyleFunction(e);this.changed()};ol.Feature.prototype.setId=function(e){this.id_=e;this.changed()};ol.Feature.prototype.setGeometryName=function(e){goog.events.unlisten(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,!1,this);this.geometryName_=e;goog.events.listen(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,!1,this);this.handleGeometryChanged_()};ol.Feature.createStyleFunction=function(e){goog.isFunction(e)||(goog.isArray(e)||(goog.asserts.assertInstanceof(e,ol.style.Style,"obj should be an ol.style.Style"),e=[e]),e=goog.functions.constant(e));return e};goog.net={};goog.net.EventType={COMPLETE:"complete",SUCCESS:"success",ERROR:"error",ABORT:"abort",READY:"ready",READY_STATE_CHANGE:"readystatechange",TIMEOUT:"timeout",INCREMENTAL_DATA:"incrementaldata",PROGRESS:"progress"};goog.Thenable=function(){};goog.Thenable.prototype.then=function(){};goog.Thenable.IMPLEMENTED_BY_PROP="$goog_Thenable";goog.Thenable.addImplementation=function(e){goog.exportProperty(e.prototype,"then",e.prototype.then);COMPILED?e.prototype[goog.Thenable.IMPLEMENTED_BY_PROP]=!0:e.prototype.$goog_Thenable=!0};goog.Thenable.isImplementedBy=function(e){if(!e)return!1;try{return COMPILED?!!e[goog.Thenable.IMPLEMENTED_BY_PROP]:!!e.$goog_Thenable}catch(t){return!1}};goog.async.FreeList=function(e,t,o){this.limit_=o;this.create_=e;this.reset_=t;this.occupants_=0;this.head_=null};goog.async.FreeList.prototype.get=function(){var e;0<this.occupants_?(this.occupants_--,e=this.head_,this.head_=e.next,e.next=null):e=this.create_();return e};goog.async.FreeList.prototype.put=function(e){this.reset_(e);this.occupants_<this.limit_&&(this.occupants_++,e.next=this.head_,this.head_=e)};goog.async.FreeList.prototype.occupants=function(){return this.occupants_};goog.async.WorkQueue=function(){this.workTail_=this.workHead_=null};goog.async.WorkQueue.DEFAULT_MAX_UNUSED=100;goog.async.WorkQueue.freelist_=new goog.async.FreeList(function(){return new goog.async.WorkItem},function(e){e.reset()},goog.async.WorkQueue.DEFAULT_MAX_UNUSED);goog.async.WorkQueue.prototype.add=function(e,t){var o=this.getUnusedItem_();o.set(e,t);this.workTail_?this.workTail_.next=o:(goog.asserts.assert(!this.workHead_),this.workHead_=o);this.workTail_=o};goog.async.WorkQueue.prototype.remove=function(){var e=null;this.workHead_&&(e=this.workHead_,this.workHead_=this.workHead_.next,this.workHead_||(this.workTail_=null),e.next=null);return e};goog.async.WorkQueue.prototype.returnUnused=function(e){goog.async.WorkQueue.freelist_.put(e)};goog.async.WorkQueue.prototype.getUnusedItem_=function(){return goog.async.WorkQueue.freelist_.get()};goog.async.WorkItem=function(){this.next=this.scope=this.fn=null};goog.async.WorkItem.prototype.set=function(e,t){this.fn=e;this.scope=t;this.next=null};goog.async.WorkItem.prototype.reset=function(){this.next=this.scope=this.fn=null};goog.testing={};goog.testing.watchers={};goog.testing.watchers.resetWatchers_=[];goog.testing.watchers.signalClockReset=function(){for(var e=goog.testing.watchers.resetWatchers_,t=0;t<e.length;t++)goog.testing.watchers.resetWatchers_[t]()};goog.testing.watchers.watchClockReset=function(e){goog.testing.watchers.resetWatchers_.push(e)};goog.async.run=function(e,t){goog.async.run.schedule_||goog.async.run.initializeRunner_();goog.async.run.workQueueScheduled_||(goog.async.run.schedule_(),goog.async.run.workQueueScheduled_=!0);goog.async.run.workQueue_.add(e,t)};goog.async.run.initializeRunner_=function(){if(goog.global.Promise&&goog.global.Promise.resolve){var e=goog.global.Promise.resolve(void 0);goog.async.run.schedule_=function(){e.then(goog.async.run.processWorkQueue)}}else goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue)}};goog.async.run.forceNextTick=function(e){goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue);e&&e(goog.async.run.processWorkQueue)}};goog.async.run.workQueueScheduled_=!1;goog.async.run.workQueue_=new goog.async.WorkQueue;goog.DEBUG&&(goog.async.run.resetQueue_=function(){goog.async.run.workQueueScheduled_=!1;goog.async.run.workQueue_=new goog.async.WorkQueue},goog.testing.watchers.watchClockReset(goog.async.run.resetQueue_));goog.async.run.processWorkQueue=function(){for(var e=null;e=goog.async.run.workQueue_.remove();){try{e.fn.call(e.scope)}catch(t){goog.async.throwException(t)}goog.async.run.workQueue_.returnUnused(e)}goog.async.run.workQueueScheduled_=!1};goog.promise={};goog.promise.Resolver=function(){};goog.Promise=function(e,t){this.state_=goog.Promise.State_.PENDING;this.result_=void 0;this.callbackEntriesTail_=this.callbackEntries_=this.parent_=null;this.executing_=!1;0<goog.Promise.UNHANDLED_REJECTION_DELAY?this.unhandledRejectionId_=0:0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1);goog.Promise.LONG_STACK_TRACES&&(this.stack_=[],this.addStackTrace_(Error("created")),this.currentStep_=0);if(e!=goog.nullFunction)try{var o=this;e.call(t,function(e){o.resolve_(goog.Promise.State_.FULFILLED,e)},function(e){if(goog.DEBUG&&!(e instanceof goog.Promise.CancellationError))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}o.resolve_(goog.Promise.State_.REJECTED,e)})}catch(r){this.resolve_(goog.Promise.State_.REJECTED,r)}};goog.Promise.LONG_STACK_TRACES=!1;goog.Promise.UNHANDLED_REJECTION_DELAY=0;goog.Promise.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3};goog.Promise.CallbackEntry_=function(){this.next=this.context=this.onRejected=this.onFulfilled=this.child=null;this.always=!1};goog.Promise.CallbackEntry_.prototype.reset=function(){this.context=this.onRejected=this.onFulfilled=this.child=null;this.always=!1};goog.Promise.DEFAULT_MAX_UNUSED=100;goog.Promise.freelist_=new goog.async.FreeList(function(){return new goog.Promise.CallbackEntry_},function(e){e.reset()},goog.Promise.DEFAULT_MAX_UNUSED);goog.Promise.getCallbackEntry_=function(e,t,o){var r=goog.Promise.freelist_.get();r.onFulfilled=e;r.onRejected=t;r.context=o;return r};goog.Promise.returnEntry_=function(e){goog.Promise.freelist_.put(e)};goog.Promise.resolve=function(e){if(e instanceof goog.Promise)return e;var t=new goog.Promise(goog.nullFunction);t.resolve_(goog.Promise.State_.FULFILLED,e);return t};goog.Promise.reject=function(e){return new goog.Promise(function(t,o){o(e)})};goog.Promise.resolveThen_=function(e,t,o){goog.Promise.maybeThen_(e,t,o,null)||goog.async.run(goog.partial(t,e))};goog.Promise.race=function(e){return new goog.Promise(function(t,o){e.length||t(void 0);for(var r,n=0;n<e.length;n++)r=e[n],goog.Promise.resolveThen_(r,t,o)})};goog.Promise.all=function(e){return new goog.Promise(function(t,o){var r=e.length,n=[];if(r)for(var i,s=function(e,o){r--;n[e]=o;0==r&&t(n)},a=function(e){o(e)},g=0;g<e.length;g++)i=e[g],goog.Promise.resolveThen_(i,goog.partial(s,g),a);else t(n)})};goog.Promise.allSettled=function(e){return new goog.Promise(function(t){var o=e.length,r=[];if(o)for(var n,i=function(e,n,i){o--;r[e]=n?{fulfilled:!0,value:i}:{fulfilled:!1,reason:i};0==o&&t(r)},s=0;s<e.length;s++)n=e[s],goog.Promise.resolveThen_(n,goog.partial(i,s,!0),goog.partial(i,s,!1));else t(r)})};goog.Promise.firstFulfilled=function(e){return new goog.Promise(function(t,o){var r=e.length,n=[];if(r)for(var i,s=function(e){t(e)},a=function(e,t){r--;n[e]=t;0==r&&o(n)},g=0;g<e.length;g++)i=e[g],goog.Promise.resolveThen_(i,s,goog.partial(a,g));else t(void 0)})};goog.Promise.withResolver=function(){var e,t,o=new goog.Promise(function(o,r){e=o;t=r});return new goog.Promise.Resolver_(o,e,t)};goog.Promise.prototype.then=function(e,t,o){null!=e&&goog.asserts.assertFunction(e,"opt_onFulfilled should be a function.");null!=t&&goog.asserts.assertFunction(t,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then"));return this.addChildPromise_(goog.isFunction(e)?e:null,goog.isFunction(t)?t:null,o)};goog.Thenable.addImplementation(goog.Promise);goog.Promise.prototype.thenVoid=function(e,t,o){null!=e&&goog.asserts.assertFunction(e,"opt_onFulfilled should be a function.");null!=t&&goog.asserts.assertFunction(t,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then"));this.addCallbackEntry_(goog.Promise.getCallbackEntry_(e||goog.nullFunction,t||null,o))};goog.Promise.prototype.thenAlways=function(e,t){goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenAlways"));var o=goog.Promise.getCallbackEntry_(e,e,t);o.always=!0;this.addCallbackEntry_(o);return this};goog.Promise.prototype.thenCatch=function(e,t){goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenCatch"));return this.addChildPromise_(null,e,t)};goog.Promise.prototype.cancel=function(e){this.state_==goog.Promise.State_.PENDING&&goog.async.run(function(){var t=new goog.Promise.CancellationError(e);this.cancelInternal_(t)},this)};goog.Promise.prototype.cancelInternal_=function(e){this.state_==goog.Promise.State_.PENDING&&(this.parent_?(this.parent_.cancelChild_(this,e),this.parent_=null):this.resolve_(goog.Promise.State_.REJECTED,e))};goog.Promise.prototype.cancelChild_=function(e,t){if(this.callbackEntries_){for(var o=0,r=null,n=null,i=this.callbackEntries_;i&&(i.always||(o++,i.child==e&&(r=i),!(r&&o>1)));i=i.next)r||(n=i);r&&(this.state_==goog.Promise.State_.PENDING&&1==o?this.cancelInternal_(t):(n?this.removeEntryAfter_(n):this.popEntry_(),this.executeCallback_(r,goog.Promise.State_.REJECTED,t)))}};goog.Promise.prototype.addCallbackEntry_=function(e){this.hasEntry_()||this.state_!=goog.Promise.State_.FULFILLED&&this.state_!=goog.Promise.State_.REJECTED||this.scheduleCallbacks_();this.queueEntry_(e)};goog.Promise.prototype.addChildPromise_=function(e,t,o){var r=goog.Promise.getCallbackEntry_(null,null,null);r.child=new goog.Promise(function(n,i){r.onFulfilled=e?function(t){try{var r=e.call(o,t);n(r)}catch(s){i(s)}}:n;r.onRejected=t?function(e){try{var r=t.call(o,e);!goog.isDef(r)&&e instanceof goog.Promise.CancellationError?i(e):n(r)}catch(s){i(s)}}:i});r.child.parent_=this;this.addCallbackEntry_(r);return r.child};goog.Promise.prototype.unblockAndFulfill_=function(e){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED);this.state_=goog.Promise.State_.PENDING;this.resolve_(goog.Promise.State_.FULFILLED,e)};goog.Promise.prototype.unblockAndReject_=function(e){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED);this.state_=goog.Promise.State_.PENDING;this.resolve_(goog.Promise.State_.REJECTED,e)};goog.Promise.prototype.resolve_=function(e,t){this.state_==goog.Promise.State_.PENDING&&(this==t&&(e=goog.Promise.State_.REJECTED,t=new TypeError("Promise cannot resolve to itself")),this.state_=goog.Promise.State_.BLOCKED,goog.Promise.maybeThen_(t,this.unblockAndFulfill_,this.unblockAndReject_,this)||(this.result_=t,this.state_=e,this.parent_=null,this.scheduleCallbacks_(),e!=goog.Promise.State_.REJECTED||t instanceof goog.Promise.CancellationError||goog.Promise.addUnhandledRejection_(this,t)))};goog.Promise.maybeThen_=function(e,t,o,r){if(e instanceof goog.Promise)return e.thenVoid(t,o,r),!0;if(goog.Thenable.isImplementedBy(e))return e.then(t,o,r),!0;if(goog.isObject(e))try{var n=e.then;if(goog.isFunction(n))return goog.Promise.tryThen_(e,n,t,o,r),!0}catch(i){return o.call(r,i),!0}return!1};goog.Promise.tryThen_=function(e,t,o,r,n){var i=!1,s=function(e){i||(i=!0,o.call(n,e))},a=function(e){i||(i=!0,r.call(n,e))};try{t.call(e,s,a)}catch(g){a(g)}};goog.Promise.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,goog.async.run(this.executeCallbacks_,this))};goog.Promise.prototype.hasEntry_=function(){return!!this.callbackEntries_};goog.Promise.prototype.queueEntry_=function(e){goog.asserts.assert(null!=e.onFulfilled);this.callbackEntriesTail_?this.callbackEntriesTail_.next=e:this.callbackEntries_=e;this.callbackEntriesTail_=e};goog.Promise.prototype.popEntry_=function(){var e=null;this.callbackEntries_&&(e=this.callbackEntries_,this.callbackEntries_=e.next,e.next=null);this.callbackEntries_||(this.callbackEntriesTail_=null);null!=e&&goog.asserts.assert(null!=e.onFulfilled);return e};goog.Promise.prototype.removeEntryAfter_=function(e){goog.asserts.assert(this.callbackEntries_);goog.asserts.assert(null!=e);e.next==this.callbackEntriesTail_&&(this.callbackEntriesTail_=e);e.next=e.next.next};goog.Promise.prototype.executeCallbacks_=function(){for(var e=null;e=this.popEntry_();)goog.Promise.LONG_STACK_TRACES&&this.currentStep_++,this.executeCallback_(e,this.state_,this.result_);this.executing_=!1};goog.Promise.prototype.executeCallback_=function(e,t,o){t==goog.Promise.State_.REJECTED&&e.onRejected&&!e.always&&this.removeUnhandledRejection_();if(e.child)e.child.parent_=null,goog.Promise.invokeCallback_(e,t,o);else try{e.always?e.onFulfilled.call(e.context):goog.Promise.invokeCallback_(e,t,o)}catch(r){goog.Promise.handleRejection_.call(null,r)}goog.Promise.returnEntry_(e)};goog.Promise.invokeCallback_=function(e,t,o){t==goog.Promise.State_.FULFILLED?e.onFulfilled.call(e.context,o):e.onRejected&&e.onRejected.call(e.context,o)};goog.Promise.prototype.addStackTrace_=function(e){if(goog.Promise.LONG_STACK_TRACES&&goog.isString(e.stack)){var t=e.stack.split("\n",4)[3];e=e.message;e+=Array(11-e.length).join(" ");this.stack_.push(e+t)}};goog.Promise.prototype.appendLongStack_=function(e){if(goog.Promise.LONG_STACK_TRACES&&e&&goog.isString(e.stack)&&this.stack_.length){for(var t=["Promise trace:"],o=this;o;o=o.parent_){for(var r=this.currentStep_;r>=0;r--)t.push(o.stack_[r]);t.push("Value: ["+(o.state_==goog.Promise.State_.REJECTED?"REJECTED":"FULFILLED")+"] <"+String(o.result_)+">")}e.stack+="\n\n"+t.join("\n")}};goog.Promise.prototype.removeUnhandledRejection_=function(){if(0<goog.Promise.UNHANDLED_REJECTION_DELAY)for(var e=this;e&&e.unhandledRejectionId_;e=e.parent_)goog.global.clearTimeout(e.unhandledRejectionId_),e.unhandledRejectionId_=0;else if(0==goog.Promise.UNHANDLED_REJECTION_DELAY)for(e=this;e&&e.hadUnhandledRejection_;e=e.parent_)e.hadUnhandledRejection_=!1};goog.Promise.addUnhandledRejection_=function(e,t){0<goog.Promise.UNHANDLED_REJECTION_DELAY?e.unhandledRejectionId_=goog.global.setTimeout(function(){e.appendLongStack_(t);goog.Promise.handleRejection_.call(null,t)},goog.Promise.UNHANDLED_REJECTION_DELAY):0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(e.hadUnhandledRejection_=!0,goog.async.run(function(){e.hadUnhandledRejection_&&(e.appendLongStack_(t),goog.Promise.handleRejection_.call(null,t))}))};goog.Promise.handleRejection_=goog.async.throwException;goog.Promise.setUnhandledRejectionHandler=function(e){goog.Promise.handleRejection_=e};goog.Promise.CancellationError=function(e){goog.debug.Error.call(this,e)};goog.inherits(goog.Promise.CancellationError,goog.debug.Error);goog.Promise.CancellationError.prototype.name="cancel";goog.Promise.Resolver_=function(e,t,o){this.promise=e;this.resolve=t;this.reject=o};goog.Timer=function(e,t){goog.events.EventTarget.call(this);this.interval_=e||1;this.timerObject_=t||goog.Timer.defaultTimerObject;this.boundTick_=goog.bind(this.tick_,this);this.last_=goog.now()};goog.inherits(goog.Timer,goog.events.EventTarget);goog.Timer.MAX_TIMEOUT_=2147483647;goog.Timer.INVALID_TIMEOUT_ID_=-1;goog.Timer.prototype.enabled=!1;goog.Timer.defaultTimerObject=goog.global;goog.Timer.intervalScale=.8;goog.Timer.prototype.timer_=null;goog.Timer.prototype.getInterval=function(){return this.interval_};goog.Timer.prototype.setInterval=function(e){this.interval_=e;this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()};goog.Timer.prototype.tick_=function(){if(this.enabled){var e=goog.now()-this.last_;e>0&&e<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-e):(this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null),this.dispatchTick(),this.enabled&&(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now()))}};goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)};goog.Timer.prototype.start=function(){this.enabled=!0;this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())};goog.Timer.prototype.stop=function(){this.enabled=!1;this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)};goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this);this.stop();delete this.timerObject_};goog.Timer.TICK="tick";goog.Timer.callOnce=function(e,t,o){if(goog.isFunction(e))o&&(e=goog.bind(e,o));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=goog.bind(e.handleEvent,e)}return t>goog.Timer.MAX_TIMEOUT_?goog.Timer.INVALID_TIMEOUT_ID_:goog.Timer.defaultTimerObject.setTimeout(e,t||0)};goog.Timer.clear=function(e){goog.Timer.defaultTimerObject.clearTimeout(e)};goog.Timer.promise=function(e,t){var o=null;return new goog.Promise(function(r,n){o=goog.Timer.callOnce(function(){r(t)},e);o==goog.Timer.INVALID_TIMEOUT_ID_&&n(Error("Failed to schedule timer."))}).thenCatch(function(e){goog.Timer.clear(o);throw e})};goog.json={};goog.json.USE_NATIVE_JSON=!0;goog.json.isValid=function(e){return/^\s*$/.test(e)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))};goog.json.parse=goog.json.USE_NATIVE_JSON?goog.global.JSON.parse:function(a){a=String(a);if(goog.json.isValid(a))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)};goog.json.unsafeParse=goog.json.USE_NATIVE_JSON?goog.global.JSON.parse:function(a){return eval("("+a+")")};goog.json.serialize=goog.json.USE_NATIVE_JSON?goog.global.JSON.stringify:function(e,t){return new goog.json.Serializer(t).serialize(e)};goog.json.Serializer=function(e){this.replacer_=e};goog.json.Serializer.prototype.serialize=function(e){var t=[];this.serializeInternal(e,t);return t.join("")};goog.json.Serializer.prototype.serializeInternal=function(e,t){if(null==e)t.push("null");else{if("object"==typeof e){if(goog.isArray(e)){this.serializeArray(e,t);return}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){this.serializeObject_(e,t);return}e=e.valueOf()}switch(typeof e){case"string":this.serializeString_(e,t);break;case"number":this.serializeNumber_(e,t);break;case"boolean":t.push(e);break;case"function":t.push("null");break;default:throw Error("Unknown type: "+typeof e)}}};goog.json.Serializer.charToJsonCharCache_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"};goog.json.Serializer.charsToReplace_=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;goog.json.Serializer.prototype.serializeString_=function(e,t){t.push('"',e.replace(goog.json.Serializer.charsToReplace_,function(e){var t=goog.json.Serializer.charToJsonCharCache_[e];t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),goog.json.Serializer.charToJsonCharCache_[e]=t);return t}),'"')};goog.json.Serializer.prototype.serializeNumber_=function(e,t){t.push(isFinite(e)&&!isNaN(e)?e:"null")};goog.json.Serializer.prototype.serializeArray=function(e,t){var o=e.length;t.push("[");for(var r="",n=0;o>n;n++)t.push(r),r=e[n],this.serializeInternal(this.replacer_?this.replacer_.call(e,String(n),r):r,t),r=",";t.push("]")};goog.json.Serializer.prototype.serializeObject_=function(e,t){t.push("{");var o,r="";for(o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=e[o];"function"!=typeof n&&(t.push(r),this.serializeString_(o,t),t.push(":"),this.serializeInternal(this.replacer_?this.replacer_.call(e,o,n):n,t),r=",")}t.push("}")};goog.net.ErrorCode={NO_ERROR:0,ACCESS_DENIED:1,FILE_NOT_FOUND:2,FF_SILENT_ERROR:3,CUSTOM_ERROR:4,EXCEPTION:5,HTTP_ERROR:6,ABORT:7,TIMEOUT:8,OFFLINE:9};goog.net.ErrorCode.getDebugMessage=function(e){switch(e){case goog.net.ErrorCode.NO_ERROR:return"No Error";case goog.net.ErrorCode.ACCESS_DENIED:return"Access denied to content document";case goog.net.ErrorCode.FILE_NOT_FOUND:return"File not found";case goog.net.ErrorCode.FF_SILENT_ERROR:return"Firefox silently errored";case goog.net.ErrorCode.CUSTOM_ERROR:return"Application custom error";case goog.net.ErrorCode.EXCEPTION:return"An exception occurred";case goog.net.ErrorCode.HTTP_ERROR:return"Http response at 400 or 500 level";case goog.net.ErrorCode.ABORT:return"Request was aborted";case goog.net.ErrorCode.TIMEOUT:return"Request timed out";case goog.net.ErrorCode.OFFLINE:return"The resource is not available offline";default:return"Unrecognized error code"}};goog.net.HttpStatus={CONTINUE:100,SWITCHING_PROTOCOLS:101,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,REQUEST_ENTITY_TOO_LARGE:413,REQUEST_URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,REQUEST_RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,NETWORK_AUTHENTICATION_REQUIRED:511,QUIRK_IE_NO_CONTENT:1223};
goog.net.HttpStatus.isSuccess=function(e){switch(e){case goog.net.HttpStatus.OK:case goog.net.HttpStatus.CREATED:case goog.net.HttpStatus.ACCEPTED:case goog.net.HttpStatus.NO_CONTENT:case goog.net.HttpStatus.PARTIAL_CONTENT:case goog.net.HttpStatus.NOT_MODIFIED:case goog.net.HttpStatus.QUIRK_IE_NO_CONTENT:return!0;default:return!1}};goog.net.XhrLike=function(){};goog.net.XhrLike.prototype.open=function(){};goog.net.XhrLike.prototype.send=function(){};goog.net.XhrLike.prototype.abort=function(){};goog.net.XhrLike.prototype.setRequestHeader=function(){};goog.net.XhrLike.prototype.getResponseHeader=function(){};goog.net.XhrLike.prototype.getAllResponseHeaders=function(){};goog.net.XmlHttpFactory=function(){};goog.net.XmlHttpFactory.prototype.cachedOptions_=null;goog.net.XmlHttpFactory.prototype.getOptions=function(){return this.cachedOptions_||(this.cachedOptions_=this.internalGetOptions())};goog.net.WrapperXmlHttpFactory=function(e,t){goog.net.XmlHttpFactory.call(this);this.xhrFactory_=e;this.optionsFactory_=t};goog.inherits(goog.net.WrapperXmlHttpFactory,goog.net.XmlHttpFactory);goog.net.WrapperXmlHttpFactory.prototype.createInstance=function(){return this.xhrFactory_()};goog.net.WrapperXmlHttpFactory.prototype.getOptions=function(){return this.optionsFactory_()};goog.net.XmlHttp=function(){return goog.net.XmlHttp.factory_.createInstance()};goog.net.XmlHttp.ASSUME_NATIVE_XHR=!1;goog.net.XmlHttpDefines={};goog.net.XmlHttpDefines.ASSUME_NATIVE_XHR=!1;goog.net.XmlHttp.getOptions=function(){return goog.net.XmlHttp.factory_.getOptions()};goog.net.XmlHttp.OptionType={USE_NULL_FUNCTION:0,LOCAL_REQUEST_ERROR:1};goog.net.XmlHttp.ReadyState={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETE:4};goog.net.XmlHttp.setFactory=function(e,t){goog.net.XmlHttp.setGlobalFactory(new goog.net.WrapperXmlHttpFactory(goog.asserts.assert(e),goog.asserts.assert(t)))};goog.net.XmlHttp.setGlobalFactory=function(e){goog.net.XmlHttp.factory_=e};goog.net.DefaultXmlHttpFactory=function(){goog.net.XmlHttpFactory.call(this)};goog.inherits(goog.net.DefaultXmlHttpFactory,goog.net.XmlHttpFactory);goog.net.DefaultXmlHttpFactory.prototype.createInstance=function(){var e=this.getProgId_();return e?new ActiveXObject(e):new XMLHttpRequest};goog.net.DefaultXmlHttpFactory.prototype.internalGetOptions=function(){var e={};this.getProgId_()&&(e[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]=!0,e[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]=!0);return e};goog.net.DefaultXmlHttpFactory.prototype.getProgId_=function(){if(goog.net.XmlHttp.ASSUME_NATIVE_XHR||goog.net.XmlHttpDefines.ASSUME_NATIVE_XHR)return"";if(!this.ieProgId_&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t=0;t<e.length;t++){var o=e[t];try{return new ActiveXObject(o),this.ieProgId_=o}catch(r){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return this.ieProgId_};goog.net.XmlHttp.setGlobalFactory(new goog.net.DefaultXmlHttpFactory);goog.uri={};goog.uri.utils={};goog.uri.utils.CharCode_={AMPERSAND:38,EQUAL:61,HASH:35,QUESTION:63};goog.uri.utils.buildFromEncodedParts=function(e,t,o,r,n,i,s){var a="";e&&(a+=e+":");o&&(a+="//",t&&(a+=t+"@"),a+=o,r&&(a+=":"+r));n&&(a+=n);i&&(a+="?"+i);s&&(a+="#"+s);return a};goog.uri.utils.splitRe_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};goog.uri.utils.split=function(e){goog.uri.utils.phishingProtection_();return e.match(goog.uri.utils.splitRe_)};goog.uri.utils.needsPhishingProtection_=goog.userAgent.WEBKIT;goog.uri.utils.phishingProtection_=function(){if(goog.uri.utils.needsPhishingProtection_){goog.uri.utils.needsPhishingProtection_=!1;var e=goog.global.location;if(e){var t=e.href;if(t&&(t=goog.uri.utils.getDomain(t))&&t!=e.hostname)throw goog.uri.utils.needsPhishingProtection_=!0,Error()}}};goog.uri.utils.decodeIfPossible_=function(e,t){return e?t?decodeURI(e):decodeURIComponent(e):e};goog.uri.utils.getComponentByIndex_=function(e,t){return goog.uri.utils.split(t)[e]||null};goog.uri.utils.getScheme=function(e){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.SCHEME,e)};goog.uri.utils.getEffectiveScheme=function(e){e=goog.uri.utils.getScheme(e);!e&&goog.global.self&&goog.global.self.location&&(e=goog.global.self.location.protocol,e=e.substr(0,e.length-1));return e?e.toLowerCase():""};goog.uri.utils.getUserInfoEncoded=function(e){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.USER_INFO,e)};goog.uri.utils.getUserInfo=function(e){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getUserInfoEncoded(e))};goog.uri.utils.getDomainEncoded=function(e){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.DOMAIN,e)};goog.uri.utils.getDomain=function(e){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getDomainEncoded(e),!0)};goog.uri.utils.getPort=function(e){return Number(goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PORT,e))||null};goog.uri.utils.getPathEncoded=function(e){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PATH,e)};goog.uri.utils.getPath=function(e){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getPathEncoded(e),!0)};goog.uri.utils.getQueryData=function(e){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.QUERY_DATA,e)};goog.uri.utils.getFragmentEncoded=function(e){var t=e.indexOf("#");return 0>t?null:e.substr(t+1)};goog.uri.utils.setFragmentEncoded=function(e,t){return goog.uri.utils.removeFragment(e)+(t?"#"+t:"")};goog.uri.utils.getFragment=function(e){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getFragmentEncoded(e))};goog.uri.utils.getHost=function(e){e=goog.uri.utils.split(e);return goog.uri.utils.buildFromEncodedParts(e[goog.uri.utils.ComponentIndex.SCHEME],e[goog.uri.utils.ComponentIndex.USER_INFO],e[goog.uri.utils.ComponentIndex.DOMAIN],e[goog.uri.utils.ComponentIndex.PORT])};goog.uri.utils.getPathAndAfter=function(e){e=goog.uri.utils.split(e);return goog.uri.utils.buildFromEncodedParts(null,null,null,null,e[goog.uri.utils.ComponentIndex.PATH],e[goog.uri.utils.ComponentIndex.QUERY_DATA],e[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.removeFragment=function(e){var t=e.indexOf("#");return 0>t?e:e.substr(0,t)};goog.uri.utils.haveSameDomain=function(e,t){var o=goog.uri.utils.split(e),r=goog.uri.utils.split(t);return o[goog.uri.utils.ComponentIndex.DOMAIN]==r[goog.uri.utils.ComponentIndex.DOMAIN]&&o[goog.uri.utils.ComponentIndex.SCHEME]==r[goog.uri.utils.ComponentIndex.SCHEME]&&o[goog.uri.utils.ComponentIndex.PORT]==r[goog.uri.utils.ComponentIndex.PORT]};goog.uri.utils.assertNoFragmentsOrQueries_=function(e){if(goog.DEBUG&&(0<=e.indexOf("#")||0<=e.indexOf("?")))throw Error("goog.uri.utils: Fragment or query identifiers are not supported: ["+e+"]")};goog.uri.utils.parseQueryData=function(e,t){if(e)for(var o=e.split("&"),r=0;r<o.length;r++){var n=o[r].indexOf("="),i=null,s=null;n>=0?(i=o[r].substring(0,n),s=o[r].substring(n+1)):i=o[r];t(i,s?goog.string.urlDecode(s):"")}};goog.uri.utils.appendQueryData_=function(e){if(e[1]){var t=e[0],o=t.indexOf("#");o>=0&&(e.push(t.substr(o)),e[0]=t=t.substr(0,o));o=t.indexOf("?");0>o?e[1]="?":o==t.length-1&&(e[1]=void 0)}return e.join("")};goog.uri.utils.appendKeyValuePairs_=function(e,t,o){if(goog.isArray(t)){goog.asserts.assertArray(t);for(var r=0;r<t.length;r++)goog.uri.utils.appendKeyValuePairs_(e,String(t[r]),o)}else null!=t&&o.push("&",e,""===t?"":"=",goog.string.urlEncode(t))};goog.uri.utils.buildQueryDataBuffer_=function(e,t,o){goog.asserts.assert(0==Math.max(t.length-(o||0),0)%2,"goog.uri.utils: Key/value lists must be even in length.");for(o=o||0;o<t.length;o+=2)goog.uri.utils.appendKeyValuePairs_(t[o],t[o+1],e);return e};goog.uri.utils.buildQueryData=function(e,t){var o=goog.uri.utils.buildQueryDataBuffer_([],e,t);o[0]="";return o.join("")};goog.uri.utils.buildQueryDataBufferFromMap_=function(e,t){for(var o in t)goog.uri.utils.appendKeyValuePairs_(o,t[o],e);return e};goog.uri.utils.buildQueryDataFromMap=function(e){e=goog.uri.utils.buildQueryDataBufferFromMap_([],e);e[0]="";return e.join("")};goog.uri.utils.appendParams=function(e){return goog.uri.utils.appendQueryData_(2==arguments.length?goog.uri.utils.buildQueryDataBuffer_([e],arguments[1],0):goog.uri.utils.buildQueryDataBuffer_([e],arguments,1))};goog.uri.utils.appendParamsFromMap=function(e,t){return goog.uri.utils.appendQueryData_(goog.uri.utils.buildQueryDataBufferFromMap_([e],t))};goog.uri.utils.appendParam=function(e,t,o){e=[e,"&",t];goog.isDefAndNotNull(o)&&e.push("=",goog.string.urlEncode(o));return goog.uri.utils.appendQueryData_(e)};goog.uri.utils.findParam_=function(e,t,o,r){for(var n=o.length;0<=(t=e.indexOf(o,t))&&r>t;){var i=e.charCodeAt(t-1);if((i==goog.uri.utils.CharCode_.AMPERSAND||i==goog.uri.utils.CharCode_.QUESTION)&&(i=e.charCodeAt(t+n),!i||i==goog.uri.utils.CharCode_.EQUAL||i==goog.uri.utils.CharCode_.AMPERSAND||i==goog.uri.utils.CharCode_.HASH))return t;t+=n+1}return-1};goog.uri.utils.hashOrEndRe_=/#|$/;goog.uri.utils.hasParam=function(e,t){return 0<=goog.uri.utils.findParam_(e,0,t,e.search(goog.uri.utils.hashOrEndRe_))};goog.uri.utils.getParamValue=function(e,t){var o=e.search(goog.uri.utils.hashOrEndRe_),r=goog.uri.utils.findParam_(e,0,t,o);if(0>r)return null;var n=e.indexOf("&",r);(0>n||n>o)&&(n=o);r+=t.length+1;return goog.string.urlDecode(e.substr(r,n-r))};goog.uri.utils.getParamValues=function(e,t){for(var o,r=e.search(goog.uri.utils.hashOrEndRe_),n=0,i=[];0<=(o=goog.uri.utils.findParam_(e,n,t,r));){n=e.indexOf("&",o);(0>n||n>r)&&(n=r);o+=t.length+1;i.push(goog.string.urlDecode(e.substr(o,n-o)))}return i};goog.uri.utils.trailingQueryPunctuationRe_=/[?&]($|#)/;goog.uri.utils.removeParam=function(e,t){for(var o,r=e.search(goog.uri.utils.hashOrEndRe_),n=0,i=[];0<=(o=goog.uri.utils.findParam_(e,n,t,r));)i.push(e.substring(n,o)),n=Math.min(e.indexOf("&",o)+1||r,r);i.push(e.substr(n));return i.join("").replace(goog.uri.utils.trailingQueryPunctuationRe_,"$1")};goog.uri.utils.setParam=function(e,t,o){return goog.uri.utils.appendParam(goog.uri.utils.removeParam(e,t),t,o)};goog.uri.utils.appendPath=function(e,t){goog.uri.utils.assertNoFragmentsOrQueries_(e);goog.string.endsWith(e,"/")&&(e=e.substr(0,e.length-1));goog.string.startsWith(t,"/")&&(t=t.substr(1));return goog.string.buildString(e,"/",t)};goog.uri.utils.setPath=function(e,t){goog.string.startsWith(t,"/")||(t="/"+t);var o=goog.uri.utils.split(e);return goog.uri.utils.buildFromEncodedParts(o[goog.uri.utils.ComponentIndex.SCHEME],o[goog.uri.utils.ComponentIndex.USER_INFO],o[goog.uri.utils.ComponentIndex.DOMAIN],o[goog.uri.utils.ComponentIndex.PORT],t,o[goog.uri.utils.ComponentIndex.QUERY_DATA],o[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.StandardQueryParam={RANDOM:"zx"};goog.uri.utils.makeUnique=function(e){return goog.uri.utils.setParam(e,goog.uri.utils.StandardQueryParam.RANDOM,goog.string.getRandomString())};goog.net.XhrIo=function(e){goog.events.EventTarget.call(this);this.headers=new goog.structs.Map;this.xmlHttpFactory_=e||null;this.active_=!1;this.xhrOptions_=this.xhr_=null;this.lastMethod_=this.lastUri_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastError_="";this.inAbort_=this.inOpen_=this.inSend_=this.errorDispatched_=!1;this.timeoutInterval_=0;this.timeoutId_=null;this.responseType_=goog.net.XhrIo.ResponseType.DEFAULT;this.useXhr2Timeout_=this.withCredentials_=!1};goog.inherits(goog.net.XhrIo,goog.events.EventTarget);goog.net.XhrIo.ResponseType={DEFAULT:"",TEXT:"text",DOCUMENT:"document",BLOB:"blob",ARRAY_BUFFER:"arraybuffer"};goog.net.XhrIo.prototype.logger_=goog.log.getLogger("goog.net.XhrIo");goog.net.XhrIo.CONTENT_TYPE_HEADER="Content-Type";goog.net.XhrIo.HTTP_SCHEME_PATTERN=/^https?$/i;goog.net.XhrIo.METHODS_WITH_FORM_DATA=["POST","PUT"];goog.net.XhrIo.FORM_CONTENT_TYPE="application/x-www-form-urlencoded;charset=utf-8";goog.net.XhrIo.XHR2_TIMEOUT_="timeout";goog.net.XhrIo.XHR2_ON_TIMEOUT_="ontimeout";goog.net.XhrIo.sendInstances_=[];goog.net.XhrIo.send=function(e,t,o,r,n,i,s){var a=new goog.net.XhrIo;goog.net.XhrIo.sendInstances_.push(a);t&&a.listen(goog.net.EventType.COMPLETE,t);a.listenOnce(goog.net.EventType.READY,a.cleanupSend_);i&&a.setTimeoutInterval(i);s&&a.setWithCredentials(s);a.send(e,o,r,n);return a};goog.net.XhrIo.cleanup=function(){for(var e=goog.net.XhrIo.sendInstances_;e.length;)e.pop().dispose()};goog.net.XhrIo.protectEntryPoints=function(e){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=e.protectEntryPoint(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)};goog.net.XhrIo.prototype.cleanupSend_=function(){this.dispose();goog.array.remove(goog.net.XhrIo.sendInstances_,this)};goog.net.XhrIo.prototype.getTimeoutInterval=function(){return this.timeoutInterval_};goog.net.XhrIo.prototype.setTimeoutInterval=function(e){this.timeoutInterval_=Math.max(0,e)};goog.net.XhrIo.prototype.setResponseType=function(e){this.responseType_=e};goog.net.XhrIo.prototype.getResponseType=function(){return this.responseType_};goog.net.XhrIo.prototype.setWithCredentials=function(e){this.withCredentials_=e};goog.net.XhrIo.prototype.getWithCredentials=function(){return this.withCredentials_};goog.net.XhrIo.prototype.send=function(e,t,o,r){if(this.xhr_)throw Error("[goog.net.XhrIo] Object is active with another request="+this.lastUri_+"; newUri="+e);t=t?t.toUpperCase():"GET";this.lastUri_=e;this.lastError_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastMethod_=t;this.errorDispatched_=!1;this.active_=!0;this.xhr_=this.createXhr();this.xhrOptions_=this.xmlHttpFactory_?this.xmlHttpFactory_.getOptions():goog.net.XmlHttp.getOptions();this.xhr_.onreadystatechange=goog.bind(this.onReadyStateChange_,this);try{goog.log.fine(this.logger_,this.formatMsg_("Opening Xhr")),this.inOpen_=!0,this.xhr_.open(t,String(e),!0),this.inOpen_=!1}catch(n){goog.log.fine(this.logger_,this.formatMsg_("Error opening Xhr: "+n.message));this.error_(goog.net.ErrorCode.EXCEPTION,n);return}e=o||"";var i=this.headers.clone();r&&goog.structs.forEach(r,function(e,t){i.set(t,e)});r=goog.array.find(i.getKeys(),goog.net.XhrIo.isContentTypeHeader_);o=goog.global.FormData&&e instanceof goog.global.FormData;!goog.array.contains(goog.net.XhrIo.METHODS_WITH_FORM_DATA,t)||r||o||i.set(goog.net.XhrIo.CONTENT_TYPE_HEADER,goog.net.XhrIo.FORM_CONTENT_TYPE);i.forEach(function(e,t){this.xhr_.setRequestHeader(t,e)},this);this.responseType_&&(this.xhr_.responseType=this.responseType_);goog.object.containsKey(this.xhr_,"withCredentials")&&(this.xhr_.withCredentials=this.withCredentials_);try{this.cleanUpTimeoutTimer_(),0<this.timeoutInterval_&&(this.useXhr2Timeout_=goog.net.XhrIo.shouldUseXhr2Timeout_(this.xhr_),goog.log.fine(this.logger_,this.formatMsg_("Will abort after "+this.timeoutInterval_+"ms if incomplete, xhr2 "+this.useXhr2Timeout_)),this.useXhr2Timeout_?(this.xhr_[goog.net.XhrIo.XHR2_TIMEOUT_]=this.timeoutInterval_,this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=goog.bind(this.timeout_,this)):this.timeoutId_=goog.Timer.callOnce(this.timeout_,this.timeoutInterval_,this)),goog.log.fine(this.logger_,this.formatMsg_("Sending request")),this.inSend_=!0,this.xhr_.send(e),this.inSend_=!1}catch(s){goog.log.fine(this.logger_,this.formatMsg_("Send error: "+s.message)),this.error_(goog.net.ErrorCode.EXCEPTION,s)}};goog.net.XhrIo.shouldUseXhr2Timeout_=function(e){return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher(9)&&goog.isNumber(e[goog.net.XhrIo.XHR2_TIMEOUT_])&&goog.isDef(e[goog.net.XhrIo.XHR2_ON_TIMEOUT_])};goog.net.XhrIo.isContentTypeHeader_=function(e){return goog.string.caseInsensitiveEquals(goog.net.XhrIo.CONTENT_TYPE_HEADER,e)};goog.net.XhrIo.prototype.createXhr=function(){return this.xmlHttpFactory_?this.xmlHttpFactory_.createInstance():goog.net.XmlHttp()};goog.net.XhrIo.prototype.timeout_=function(){"undefined"!=typeof goog&&this.xhr_&&(this.lastError_="Timed out after "+this.timeoutInterval_+"ms, aborting",this.lastErrorCode_=goog.net.ErrorCode.TIMEOUT,goog.log.fine(this.logger_,this.formatMsg_(this.lastError_)),this.dispatchEvent(goog.net.EventType.TIMEOUT),this.abort(goog.net.ErrorCode.TIMEOUT))};goog.net.XhrIo.prototype.error_=function(e,t){this.active_=!1;this.xhr_&&(this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1);this.lastError_=t;this.lastErrorCode_=e;this.dispatchErrors_();this.cleanUpXhr_()};goog.net.XhrIo.prototype.dispatchErrors_=function(){this.errorDispatched_||(this.errorDispatched_=!0,this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.ERROR))};goog.net.XhrIo.prototype.abort=function(e){this.xhr_&&this.active_&&(goog.log.fine(this.logger_,this.formatMsg_("Aborting")),this.active_=!1,this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1,this.lastErrorCode_=e||goog.net.ErrorCode.ABORT,this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.ABORT),this.cleanUpXhr_())};goog.net.XhrIo.prototype.disposeInternal=function(){this.xhr_&&(this.active_&&(this.active_=!1,this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1),this.cleanUpXhr_(!0));goog.net.XhrIo.superClass_.disposeInternal.call(this)};goog.net.XhrIo.prototype.onReadyStateChange_=function(){this.isDisposed()||(this.inOpen_||this.inSend_||this.inAbort_?this.onReadyStateChangeHelper_():this.onReadyStateChangeEntryPoint_())};goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=function(){this.onReadyStateChangeHelper_()};goog.net.XhrIo.prototype.onReadyStateChangeHelper_=function(){if(this.active_&&"undefined"!=typeof goog)if(this.xhrOptions_[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE&&2==this.getStatus())goog.log.fine(this.logger_,this.formatMsg_("Local request error detected and ignored"));else if(this.inSend_&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE)goog.Timer.callOnce(this.onReadyStateChange_,0,this);else if(this.dispatchEvent(goog.net.EventType.READY_STATE_CHANGE),this.isComplete()){goog.log.fine(this.logger_,this.formatMsg_("Request complete"));this.active_=!1;try{this.isSuccess()?(this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.SUCCESS)):(this.lastErrorCode_=goog.net.ErrorCode.HTTP_ERROR,this.lastError_=this.getStatusText()+" ["+this.getStatus()+"]",this.dispatchErrors_())}finally{this.cleanUpXhr_()}}};goog.net.XhrIo.prototype.cleanUpXhr_=function(e){if(this.xhr_){this.cleanUpTimeoutTimer_();var t=this.xhr_,o=this.xhrOptions_[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]?goog.nullFunction:null;this.xhrOptions_=this.xhr_=null;e||this.dispatchEvent(goog.net.EventType.READY);try{t.onreadystatechange=o}catch(r){goog.log.error(this.logger_,"Problem encountered resetting onreadystatechange: "+r.message)}}};goog.net.XhrIo.prototype.cleanUpTimeoutTimer_=function(){this.xhr_&&this.useXhr2Timeout_&&(this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=null);goog.isNumber(this.timeoutId_)&&(goog.Timer.clear(this.timeoutId_),this.timeoutId_=null)};goog.net.XhrIo.prototype.isActive=function(){return!!this.xhr_};goog.net.XhrIo.prototype.isComplete=function(){return this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE};goog.net.XhrIo.prototype.isSuccess=function(){var e=this.getStatus();return goog.net.HttpStatus.isSuccess(e)||0===e&&!this.isLastUriEffectiveSchemeHttp_()};goog.net.XhrIo.prototype.isLastUriEffectiveSchemeHttp_=function(){var e=goog.uri.utils.getEffectiveScheme(String(this.lastUri_));return goog.net.XhrIo.HTTP_SCHEME_PATTERN.test(e)};goog.net.XhrIo.prototype.getReadyState=function(){return this.xhr_?this.xhr_.readyState:goog.net.XmlHttp.ReadyState.UNINITIALIZED};goog.net.XhrIo.prototype.getStatus=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.status:-1}catch(e){return-1}};goog.net.XhrIo.prototype.getStatusText=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.statusText:""}catch(e){return goog.log.fine(this.logger_,"Can not get status: "+e.message),""}};goog.net.XhrIo.prototype.getLastUri=function(){return String(this.lastUri_)};goog.net.XhrIo.prototype.getResponseText=function(){try{return this.xhr_?this.xhr_.responseText:""}catch(e){return goog.log.fine(this.logger_,"Can not get responseText: "+e.message),""}};goog.net.XhrIo.prototype.getResponseBody=function(){try{if(this.xhr_&&"responseBody"in this.xhr_)return this.xhr_.responseBody}catch(e){goog.log.fine(this.logger_,"Can not get responseBody: "+e.message)}return null};goog.net.XhrIo.prototype.getResponseXml=function(){try{return this.xhr_?this.xhr_.responseXML:null}catch(e){return goog.log.fine(this.logger_,"Can not get responseXML: "+e.message),null}};goog.net.XhrIo.prototype.getResponseJson=function(e){if(this.xhr_){var t=this.xhr_.responseText;e&&0==t.indexOf(e)&&(t=t.substring(e.length));return goog.json.parse(t)}};goog.net.XhrIo.prototype.getResponse=function(){try{if(!this.xhr_)return null;if("response"in this.xhr_)return this.xhr_.response;switch(this.responseType_){case goog.net.XhrIo.ResponseType.DEFAULT:case goog.net.XhrIo.ResponseType.TEXT:return this.xhr_.responseText;case goog.net.XhrIo.ResponseType.ARRAY_BUFFER:if("mozResponseArrayBuffer"in this.xhr_)return this.xhr_.mozResponseArrayBuffer}goog.log.error(this.logger_,"Response type "+this.responseType_+" is not supported on this browser");return null}catch(e){return goog.log.fine(this.logger_,"Can not get response: "+e.message),null}};goog.net.XhrIo.prototype.getResponseHeader=function(e){return this.xhr_&&this.isComplete()?this.xhr_.getResponseHeader(e):void 0};goog.net.XhrIo.prototype.getAllResponseHeaders=function(){return this.xhr_&&this.isComplete()?this.xhr_.getAllResponseHeaders():""};goog.net.XhrIo.prototype.getResponseHeaders=function(){for(var e={},t=this.getAllResponseHeaders().split("\r\n"),o=0;o<t.length;o++)if(!goog.string.isEmptyOrWhitespace(t[o])){var r=goog.string.splitLimit(t[o],": ",2);e[r[0]]=e[r[0]]?e[r[0]]+(", "+r[1]):r[1]}return e};goog.net.XhrIo.prototype.getLastErrorCode=function(){return this.lastErrorCode_};goog.net.XhrIo.prototype.getLastError=function(){return goog.isString(this.lastError_)?this.lastError_:String(this.lastError_)};goog.net.XhrIo.prototype.formatMsg_=function(e){return e+" ["+this.lastMethod_+" "+this.lastUri_+" "+this.getStatus()+"]"};goog.debug.entryPointRegistry.register(function(e){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=e(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)});ol.format={};ol.format.FormatType={JSON:"json",TEXT:"text",XML:"xml"};goog.dom.xml={};goog.dom.xml.MAX_XML_SIZE_KB=2048;goog.dom.xml.MAX_ELEMENT_DEPTH=256;goog.dom.xml.createDocument=function(e,t){if(t&&!e)throw Error("Can't create document with namespace and no root tag");if(document.implementation&&document.implementation.createDocument)return document.implementation.createDocument(t||"",e||"",null);if("undefined"!=typeof ActiveXObject){var o=goog.dom.xml.createMsXmlDocument_();if(o)return e&&o.appendChild(o.createNode(goog.dom.NodeType.ELEMENT,e,t||"")),o}throw Error("Your browser does not support creating new documents")};goog.dom.xml.loadXml=function(e){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(e,"application/xml");if("undefined"!=typeof ActiveXObject){var t=goog.dom.xml.createMsXmlDocument_();t.loadXML(e);return t}throw Error("Your browser does not support loading xml documents")};goog.dom.xml.serialize=function(e){if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(e);if(e=e.xml)return e;throw Error("Your browser does not support serializing XML documents")};goog.dom.xml.selectSingleNode=function(e,t){if("undefined"!=typeof e.selectSingleNode){var o=goog.dom.getOwnerDocument(e);"undefined"!=typeof o.setProperty&&o.setProperty("SelectionLanguage","XPath");return e.selectSingleNode(t)}if(document.implementation.hasFeature("XPath","3.0")){var o=goog.dom.getOwnerDocument(e),r=o.createNSResolver(o.documentElement);return o.evaluate(t,e,r,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}return null};goog.dom.xml.selectNodes=function(e,t){if("undefined"!=typeof e.selectNodes){var o=goog.dom.getOwnerDocument(e);"undefined"!=typeof o.setProperty&&o.setProperty("SelectionLanguage","XPath");return e.selectNodes(t)}if(document.implementation.hasFeature("XPath","3.0")){for(var o=goog.dom.getOwnerDocument(e),r=o.createNSResolver(o.documentElement),o=o.evaluate(t,e,r,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),r=[],n=o.snapshotLength,i=0;n>i;i++)r.push(o.snapshotItem(i));return r}return[]};goog.dom.xml.setAttributes=function(e,t){for(var o in t)t.hasOwnProperty(o)&&e.setAttribute(o,t[o])};goog.dom.xml.createMsXmlDocument_=function(){var e=new ActiveXObject("MSXML2.DOMDocument");if(e){e.resolveExternals=!1;e.validateOnParse=!1;try{e.setProperty("ProhibitDTD",!0),e.setProperty("MaxXMLSize",goog.dom.xml.MAX_XML_SIZE_KB),e.setProperty("MaxElementDepth",goog.dom.xml.MAX_ELEMENT_DEPTH)}catch(t){}}return e};ol.xml={};ol.xml.DOCUMENT=goog.dom.xml.createDocument();ol.xml.createElementNS_=function(e,t){return ol.xml.DOCUMENT.createElementNS(e,t)};ol.xml.createElementNSActiveX_=function(e,t){goog.isNull(e)&&(e="");return ol.xml.DOCUMENT.createNode(1,t,e)};ol.xml.createElementNS=document.implementation&&document.implementation.createDocument?ol.xml.createElementNS_:ol.xml.createElementNSActiveX_;ol.xml.getAllTextContent=function(e,t){return ol.xml.getAllTextContent_(e,t,[]).join("")};ol.xml.getAllTextContent_=function(e,t,o){if(e.nodeType==goog.dom.NodeType.CDATA_SECTION||e.nodeType==goog.dom.NodeType.TEXT)o.push(t?String(e.nodeValue).replace(/(\r\n|\r|\n)/g,""):e.nodeValue);else for(e=e.firstChild;!goog.isNull(e);e=e.nextSibling)ol.xml.getAllTextContent_(e,t,o);return o};ol.xml.getLocalName_=function(e){return e.localName};ol.xml.getLocalNameIE_=function(e){var t=e.localName;if(goog.isDef(t))return t;t=e.baseName;goog.asserts.assert(goog.isDefAndNotNull(t),"Failed to get localName/baseName of node %s",e);return t};ol.xml.getLocalName=goog.userAgent.IE?ol.xml.getLocalNameIE_:ol.xml.getLocalName_;ol.xml.isDocument_=function(e){return e instanceof Document};ol.xml.isDocumentIE_=function(e){return goog.isObject(e)&&e.nodeType==goog.dom.NodeType.DOCUMENT};ol.xml.isDocument=goog.userAgent.IE?ol.xml.isDocumentIE_:ol.xml.isDocument_;ol.xml.isNode_=function(e){return e instanceof Node};ol.xml.isNodeIE_=function(e){return goog.isObject(e)&&goog.isDef(e.nodeType)};ol.xml.isNode=goog.userAgent.IE?ol.xml.isNodeIE_:ol.xml.isNode_;ol.xml.getAttributeNS_=function(e,t,o){return e.getAttributeNS(t,o)||""};ol.xml.getAttributeNSActiveX_=function(e,t,o){var r="";e=ol.xml.getAttributeNodeNS(e,t,o);goog.isDef(e)&&(r=e.nodeValue);return r};ol.xml.getAttributeNS=document.implementation&&document.implementation.createDocument?ol.xml.getAttributeNS_:ol.xml.getAttributeNSActiveX_;ol.xml.getAttributeNodeNS_=function(e,t,o){return e.getAttributeNodeNS(t,o)};ol.xml.getAttributeNodeNSActiveX_=function(e,t,o){var r=null;e=e.attributes;for(var n,i,s=0,a=e.length;a>s;++s)if(n=e[s],n.namespaceURI==t&&(i=n.prefix?n.prefix+":"+o:o,i==n.nodeName)){r=n;break}return r};ol.xml.getAttributeNodeNS=document.implementation&&document.implementation.createDocument?ol.xml.getAttributeNodeNS_:ol.xml.getAttributeNodeNSActiveX_;ol.xml.setAttributeNS_=function(e,t,o,r){e.setAttributeNS(t,o,r)};ol.xml.setAttributeNSActiveX_=function(e,t,o,r){goog.isNull(t)?e.setAttribute(o,r):(t=e.ownerDocument.createNode(2,o,t),t.nodeValue=r,e.setAttributeNode(t))};ol.xml.setAttributeNS=document.implementation&&document.implementation.createDocument?ol.xml.setAttributeNS_:ol.xml.setAttributeNSActiveX_;ol.xml.parse=function(e){return(new DOMParser).parseFromString(e,"application/xml")};ol.xml.makeArrayExtender=function(e,t){return function(o,r){var n=e.call(t,o,r);if(goog.isDef(n)){goog.asserts.assert(goog.isArray(n),"valueReader function is expected to return an array of values");var i=r[r.length-1];goog.asserts.assert(goog.isArray(i),"objectStack is supposed to be an array of arrays");goog.array.extend(i,n)}}};ol.xml.makeArrayPusher=function(e,t){return function(o,r){var n=e.call(goog.isDef(t)?t:this,o,r);if(goog.isDef(n)){var i=r[r.length-1];goog.asserts.assert(goog.isArray(i),"objectStack is supposed to be an array of arrays");i.push(n)}}};ol.xml.makeReplacer=function(e,t){return function(o,r){var n=e.call(goog.isDef(t)?t:this,o,r);goog.isDef(n)&&(r[r.length-1]=n)}};ol.xml.makeObjectPropertyPusher=function(e,t,o){goog.asserts.assert(goog.isDef(e),"undefined valueReader, expected function(this: T, Node, Array.<*>)");return function(r,n){var i=e.call(goog.isDef(o)?o:this,r,n);if(goog.isDef(i)){var s=n[n.length-1],a=goog.isDef(t)?t:r.localName;goog.asserts.assert(goog.isObject(s),"entity from stack was not an object");goog.object.setIfUndefined(s,a,[]).push(i)}}};ol.xml.makeObjectPropertySetter=function(e,t,o){goog.asserts.assert(goog.isDef(e),"undefined valueReader, expected function(this: T, Node, Array.<*>)");return function(r,n){var i=e.call(goog.isDef(o)?o:this,r,n);if(goog.isDef(i)){var s=n[n.length-1],a=goog.isDef(t)?t:r.localName;goog.asserts.assert(goog.isObject(s),"entity from stack was not an object");s[a]=i}}};ol.xml.makeChildAppender=function(e,t){return function(o,r,n){e.call(goog.isDef(t)?t:this,o,r,n);r=n[n.length-1];goog.asserts.assert(goog.isObject(r),"entity from stack was not an object");r=r.node;goog.asserts.assert(ol.xml.isNode(r)||ol.xml.isDocument(r),"expected parentNode %s to be a Node or a Document",r);r.appendChild(o)}};ol.xml.makeArraySerializer=function(e){var t,o;return function(r,n,i){if(!goog.isDef(t)){t={};var s={};s[r.localName]=e;t[r.namespaceURI]=s;o=ol.xml.makeSimpleNodeFactory(r.localName)}ol.xml.serialize(t,o,n,i)}};ol.xml.makeSimpleNodeFactory=function(e,t){return function(o,r,n){o=r[r.length-1].node;goog.asserts.assert(ol.xml.isNode(o)||ol.xml.isDocument(o),"expected node %s to be a Node or a Document",o);r=e;goog.isDef(r)||(r=n);n=t;goog.isDef(t)||(n=o.namespaceURI);goog.asserts.assert(goog.isDef(r),"nodeName was undefined");return ol.xml.createElementNS(n,r)}};ol.xml.OBJECT_PROPERTY_NODE_FACTORY=ol.xml.makeSimpleNodeFactory();ol.xml.makeSequence=function(e,t){for(var o=t.length,r=Array(o),n=0;o>n;++n)r[n]=e[t[n]];return r};ol.xml.makeStructureNS=function(e,t,o){o=goog.isDef(o)?o:{};var r,n;r=0;for(n=e.length;n>r;++r)o[e[r]]=t;return o};ol.xml.parseNode=function(e,t,o,r){for(t=t.firstElementChild;!goog.isNull(t);t=t.nextElementSibling){var n=e[t.namespaceURI];goog.isDef(n)&&(n=n[t.localName],goog.isDef(n)&&n.call(r,t,o))}};ol.xml.pushParseAndPop=function(e,t,o,r,n){r.push(e);ol.xml.parseNode(t,o,r,n);return r.pop()};ol.xml.serialize=function(e,t,o,r,n,i){for(var s,a,g=(goog.isDef(n)?n:o).length,l=0;g>l;++l)s=o[l],goog.isDef(s)&&(a=t.call(i,s,r,goog.isDef(n)?n[l]:void 0),goog.isDef(a)&&e[a.namespaceURI][a.localName].call(i,a,s,r))};ol.xml.pushSerializeAndPop=function(e,t,o,r,n,i,s){n.push(e);ol.xml.serialize(t,o,r,n,i,s);return n.pop()};ol.featureloader={};ol.featureloader.loadFeaturesXhr=function(e,t,o){return function(r,n,i){var s=new goog.net.XhrIo;s.setResponseType(goog.net.XhrIo.ResponseType.TEXT);goog.events.listen(s,goog.net.EventType.COMPLETE,function(e){e=e.target;goog.asserts.assertInstanceof(e,goog.net.XhrIo,"event.target/xhrIo is an instance of goog.net.XhrIo");if(e.isSuccess()){var r,n=t.getType();n==ol.format.FormatType.JSON?r=e.getResponseText():n==ol.format.FormatType.TEXT?r=e.getResponseText():n==ol.format.FormatType.XML?(goog.userAgent.IE||(r=e.getResponseXml()),goog.isDefAndNotNull(r)||(r=ol.xml.parse(e.getResponseText()))):goog.asserts.fail("unexpected format type");goog.isDefAndNotNull(r)?(r=t.readFeatures(r,{featureProjection:i}),o.call(this,r)):goog.asserts.fail("undefined or null source")
}goog.dispose(e)},!1,this);s.send(goog.isFunction(e)?e(r,n,i):e)}};ol.featureloader.xhr=function(e,t){return ol.featureloader.loadFeaturesXhr(e,t,function(e){this.addFeatures(e)})};ol.loadingstrategy={};ol.loadingstrategy.all=function(){return[[-1/0,-1/0,1/0,1/0]]};ol.loadingstrategy.bbox=function(e){return[e]};ol.loadingstrategy.tile=function(e){return function(t,o){var r=e.getZForResolution(o),n=e.getTileRangeForExtentAndZ(t,r),i=[],r=[r,0,0];for(r[1]=n.minX;r[1]<=n.maxX;++r[1])for(r[2]=n.minY;r[2]<=n.maxY;++r[2])i.push(e.getTileCoordExtent(r));return i}};ol.ext={};!function(){var e={exports:{}};!function(){function t(e,o){if(!(this instanceof t))return new t(e,o);this._maxEntries=Math.max(4,e||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));o&&this._initFormat(o);this.clear()}function o(e,t){e.bbox=r(e,0,e.children.length,t)}function r(e,t,o,r){for(var i,s=[1/0,1/0,-1/0,-1/0];o>t;t++)i=e.children[t],n(s,e.leaf?r(i):i.bbox);return s}function n(e,t){e[0]=Math.min(e[0],t[0]);e[1]=Math.min(e[1],t[1]);e[2]=Math.max(e[2],t[2]);e[3]=Math.max(e[3],t[3]);return e}function i(e,t){return e.bbox[0]-t.bbox[0]}function s(e,t){return e.bbox[1]-t.bbox[1]}function a(e){return(e[2]-e[0])*(e[3]-e[1])}function g(e){return e[2]-e[0]+(e[3]-e[1])}function l(e,t){return e[0]<=t[0]&&e[1]<=t[1]&&t[2]<=e[2]&&t[3]<=e[3]}function u(e,t){return t[0]<=e[2]&&t[1]<=e[3]&&t[2]>=e[0]&&t[3]>=e[1]}function c(e,t,o,r,n){for(var i,s=[t,o];s.length;)o=s.pop(),t=s.pop(),r>=o-t||(i=t+Math.ceil((o-t)/r/2)*r,h(e,t,o,i,n),s.push(t,i,i,o))}function h(e,t,o,r,n){for(var i,s,a,g,l;o>t;){o-t>600&&(i=o-t+1,s=r-t+1,a=Math.log(i),g=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*g*(i-g)/i)*(0>s-i/2?-1:1),a=Math.max(t,Math.floor(r-s*g/i+l)),s=Math.min(o,Math.floor(r+(i-s)*g/i+l)),h(e,a,s,r,n));i=e[r];s=t;g=o;d(e,t,r);for(0<n(e[o],i)&&d(e,t,o);g>s;){d(e,s,g);s++;for(g--;0>n(e[s],i);)s++;for(;0<n(e[g],i);)g--}0===n(e[t],i)?d(e,t,g):(g++,d(e,g,o));r>=g&&(t=g+1);g>=r&&(o=g-1)}}function d(e,t,o){var r=e[t];e[t]=e[o];e[o]=r}t.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,o=[],r=this.toBBox;if(!u(e,t.bbox))return o;for(var n,i,s,a,g=[];t;){n=0;for(i=t.children.length;i>n;n++)s=t.children[n],a=t.leaf?r(s):s.bbox,u(e,a)&&(t.leaf?o.push(s):l(e,a)?this._all(s,o):g.push(s));t=g.pop()}return o},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,o=e.length;o>t;t++)this.insert(e[t]);return this}e=this._build(e.slice(),0,e.length-1,0);this.data.children.length?this.data.height===e.height?this._splitRoot(this.data,e):(this.data.height<e.height&&(t=this.data,this.data=e,e=t),this._insert(e,this.data.height-e.height-1,!0)):this.data=e;return this},insert:function(e){e&&this._insert(e,this.data.height-1);return this},clear:function(){this.data={children:[],height:1,bbox:[1/0,1/0,-1/0,-1/0],leaf:!0};return this},remove:function(e){if(!e)return this;for(var t,o,r,n,i=this.data,s=this.toBBox(e),a=[],g=[];i||a.length;){i||(i=a.pop(),o=a[a.length-1],t=g.pop(),n=!0);if(i.leaf&&(r=i.children.indexOf(e),-1!==r)){i.children.splice(r,1);a.push(i);this._condense(a);break}n||i.leaf||!l(i.bbox,s)?o?(t++,i=o.children[t],n=!1):i=null:(a.push(i),g.push(t),t=0,o=i,i=i.children[0])}return this},toBBox:function(e){return e},compareMinX:function(e,t){return e[0]-t[0]},compareMinY:function(e,t){return e[1]-t[1]},toJSON:function(){return this.data},fromJSON:function(e){this.data=e;return this},_all:function(e,t){for(var o=[];e;)e.leaf?t.push.apply(t,e.children):o.push.apply(o,e.children),e=o.pop();return t},_build:function(e,t,r,n){var i,s=r-t+1,a=this._maxEntries;if(a>=s)return i={children:e.slice(t,r+1),height:1,bbox:null,leaf:!0},o(i,this.toBBox),i;n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1)));i={children:[],height:n,bbox:null};var g,l,u,s=Math.ceil(s/a),a=s*Math.ceil(Math.sqrt(a));for(c(e,t,r,a,this.compareMinX);r>=t;t+=a)for(l=Math.min(t+a-1,r),c(e,t,l,s,this.compareMinY),g=t;l>=g;g+=s)u=Math.min(g+s-1,l),i.children.push(this._build(e,g,u,n-1));o(i,this.toBBox);return i},_chooseSubtree:function(e,t,o,r){for(var n,i,s,g,l,u,c,h;;){r.push(t);if(t.leaf||r.length-1===o)break;c=h=1/0;n=0;for(i=t.children.length;i>n;n++){s=t.children[n];l=a(s.bbox);u=e;var d=s.bbox;u=(Math.max(d[2],u[2])-Math.min(d[0],u[0]))*(Math.max(d[3],u[3])-Math.min(d[1],u[1]))-l;h>u?(h=u,c=c>l?l:c,g=s):u===h&&c>l&&(c=l,g=s)}t=g}return t},_insert:function(e,t,o){var r=this.toBBox;o=o?e.bbox:r(e);var r=[],i=this._chooseSubtree(o,this.data,t,r);i.children.push(e);for(n(i.bbox,o);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(o,r,t)},_split:function(e,t){var r=e[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);n={children:r.children.splice(this._chooseSplitIndex(r,i,n)),height:r.height};r.leaf&&(n.leaf=!0);o(r,this.toBBox);o(n,this.toBBox);t?e[t-1].children.push(n):this._splitRoot(r,n)},_splitRoot:function(e,t){this.data={children:[e,t],height:e.height+1};o(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,o){var n,i,s,g,l,u,c;l=u=1/0;for(n=t;o-t>=n;n++){i=r(e,0,n,this.toBBox);s=r(e,n,o,this.toBBox);var h=i,d=s;g=Math.max(h[0],d[0]);var m=Math.max(h[1],d[1]),p=Math.min(h[2],d[2]),h=Math.min(h[3],d[3]);g=Math.max(0,p-g)*Math.max(0,h-m);i=a(i)+a(s);l>g?(l=g,c=n,u=u>i?i:u):g===l&&u>i&&(u=i,c=n)}return c},_chooseSplitAxis:function(e,t,o){var r=e.leaf?this.compareMinX:i,n=e.leaf?this.compareMinY:s,a=this._allDistMargin(e,t,o,r);t=this._allDistMargin(e,t,o,n);t>a&&e.children.sort(r)},_allDistMargin:function(e,t,o,i){e.children.sort(i);i=this.toBBox;var s,a,l=r(e,0,t,i),u=r(e,o-t,o,i),c=g(l)+g(u);for(s=t;o-t>s;s++)a=e.children[s],n(l,e.leaf?i(a):a.bbox),c+=g(l);for(s=o-t-1;s>=t;s--)a=e.children[s],n(u,e.leaf?i(a):a.bbox),c+=g(u);return c},_adjustParentBBoxes:function(e,t,o){for(;o>=0;o--)n(t[o].bbox,e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)0===e[r].children.length?r>0?(t=e[r-1].children,t.splice(t.indexOf(e[r]),1)):this.clear():o(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0]));this.compareMinY=new Function("a","b",t.join(e[1]));this.toBBox=new Function("a","return [a"+e.join(", a")+"];")}};"undefined"!=typeof e?e.exports=t:"undefined"!=typeof self?self.rbush=t:window.rbush=t}();ol.ext.rbush=e.exports}();ol.structs.RBush=function(e){this.rbush_=ol.ext.rbush(e);this.items_={};goog.DEBUG&&(this.readers_=0)};ol.structs.RBush.prototype.insert=function(e,t){if(goog.DEBUG&&this.readers_)throw Error("Can not insert value while reading");var o=[e[0],e[1],e[2],e[3],t];this.rbush_.insert(o);goog.asserts.assert(!goog.object.containsKey(this.items_,goog.getUid(t)),"uid (%s) of value (%s) already exists",goog.getUid(t),t);this.items_[goog.getUid(t)]=o};ol.structs.RBush.prototype.load=function(e,t){if(goog.DEBUG&&this.readers_)throw Error("Can not insert values while reading");goog.asserts.assert(e.length===t.length,"extens and values must have same length (%s === %s)",e.length,t.length);for(var o=Array(t.length),r=0,n=t.length;n>r;r++){var i=e[r],s=t[r],i=[i[0],i[1],i[2],i[3],s];o[r]=i;goog.asserts.assert(!goog.object.containsKey(this.items_,goog.getUid(s)),"uid (%s) of value (%s) already exists",goog.getUid(s),s);this.items_[goog.getUid(s)]=i}this.rbush_.load(o)};ol.structs.RBush.prototype.remove=function(e){if(goog.DEBUG&&this.readers_)throw Error("Can not remove value while reading");var t=goog.getUid(e);goog.asserts.assert(goog.object.containsKey(this.items_,t),"uid (%s) of value (%s) does not exist",t,e);e=this.items_[t];goog.object.remove(this.items_,t);return null!==this.rbush_.remove(e)};ol.structs.RBush.prototype.update=function(e,t){var o=goog.getUid(t);goog.asserts.assert(goog.object.containsKey(this.items_,o),"uid (%s) of value (%s) does not exist",o,t);if(!ol.extent.equals(this.items_[o].slice(0,4),e)){if(goog.DEBUG&&this.readers_)throw Error("Can not update extent while reading");this.remove(t);this.insert(e,t)}};ol.structs.RBush.prototype.getAll=function(){var e=this.rbush_.all();return goog.array.map(e,function(e){return e[4]})};ol.structs.RBush.prototype.getInExtent=function(e){e=this.rbush_.search(e);return goog.array.map(e,function(e){return e[4]})};ol.structs.RBush.prototype.forEach=function(e,t){if(!goog.DEBUG)return this.forEach_(this.getAll(),e,t);++this.readers_;try{return this.forEach_(this.getAll(),e,t)}finally{--this.readers_}};ol.structs.RBush.prototype.forEachInExtent=function(e,t,o){if(!goog.DEBUG)return this.forEach_(this.getInExtent(e),t,o);++this.readers_;try{return this.forEach_(this.getInExtent(e),t,o)}finally{--this.readers_}};ol.structs.RBush.prototype.forEach_=function(e,t,o){for(var r,n=0,i=e.length;i>n&&!(r=t.call(o,e[n]));n++);return r};ol.structs.RBush.prototype.isEmpty=function(){return goog.object.isEmpty(this.items_)};ol.structs.RBush.prototype.clear=function(){this.rbush_.clear();this.items_={}};ol.structs.RBush.prototype.getExtent=function(){return this.rbush_.data.bbox};ol.source.VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};ol.source.Vector=function(e){e=goog.isDef(e)?e:{};ol.source.Source.call(this,{attributions:e.attributions,logo:e.logo,projection:void 0,state:ol.source.State.READY,wrapX:goog.isDef(e.wrapX)?e.wrapX:!0});this.loader_=goog.nullFunction;goog.isDef(e.loader)?this.loader_=e.loader:goog.isDef(e.url)&&(goog.asserts.assert(goog.isDef(e.format),"format must be set when url is set"),this.loader_=ol.featureloader.xhr(e.url,e.format));this.strategy_=goog.isDef(e.strategy)?e.strategy:ol.loadingstrategy.all;var t=goog.isDef(e.useSpatialIndex)?e.useSpatialIndex:!0;this.featuresRtree_=t?new ol.structs.RBush:null;this.loadedExtentsRtree_=new ol.structs.RBush;this.nullGeometryFeatures_={};this.idIndex_={};this.undefIdIndex_={};this.featureChangeKeys_={};this.featuresCollection_=null;var o,r;e.features instanceof ol.Collection?(o=e.features,r=o.getArray()):goog.isArray(e.features)&&(r=e.features);t||goog.isDef(o)||(o=new ol.Collection(r));goog.isDef(r)&&this.addFeaturesInternal(r);goog.isDef(o)&&this.bindFeaturesCollection_(o)};goog.inherits(ol.source.Vector,ol.source.Source);ol.source.Vector.prototype.addFeature=function(e){this.addFeatureInternal(e);this.changed()};ol.source.Vector.prototype.addFeatureInternal=function(e){var t=goog.getUid(e).toString();if(this.addToIndex_(t,e)){this.setupChangeEvents_(t,e);var o=e.getGeometry();goog.isDefAndNotNull(o)?(t=o.getExtent(),goog.isNull(this.featuresRtree_)||this.featuresRtree_.insert(t,e)):this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.ADDFEATURE,e))}};ol.source.Vector.prototype.setupChangeEvents_=function(e,t){goog.asserts.assert(!(e in this.featureChangeKeys_),"key (%s) not yet registered in featureChangeKey",e);this.featureChangeKeys_[e]=[goog.events.listen(t,goog.events.EventType.CHANGE,this.handleFeatureChange_,!1,this),goog.events.listen(t,ol.ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,!1,this)]};ol.source.Vector.prototype.addToIndex_=function(e,t){var o=!0,r=t.getId();goog.isDef(r)?r.toString()in this.idIndex_?o=!1:this.idIndex_[r.toString()]=t:(goog.asserts.assert(!(e in this.undefIdIndex_),"Feature already added to the source"),this.undefIdIndex_[e]=t);return o};ol.source.Vector.prototype.addFeatures=function(e){this.addFeaturesInternal(e);this.changed()};ol.source.Vector.prototype.addFeaturesInternal=function(e){var t,o,r,n,i=[],s=[],a=[];o=0;for(r=e.length;r>o;o++)n=e[o],t=goog.getUid(n).toString(),this.addToIndex_(t,n)&&s.push(n);o=0;for(r=s.length;r>o;o++)n=s[o],t=goog.getUid(n).toString(),this.setupChangeEvents_(t,n),e=n.getGeometry(),goog.isDefAndNotNull(e)?(t=e.getExtent(),i.push(t),a.push(n)):this.nullGeometryFeatures_[t]=n;goog.isNull(this.featuresRtree_)||this.featuresRtree_.load(i,a);o=0;for(r=s.length;r>o;o++)this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.ADDFEATURE,s[o]))};ol.source.Vector.prototype.bindFeaturesCollection_=function(e){goog.asserts.assert(goog.isNull(this.featuresCollection_),"bindFeaturesCollection can only be called once");var t=!1;goog.events.listen(this,ol.source.VectorEventType.ADDFEATURE,function(o){t||(t=!0,e.push(o.feature),t=!1)});goog.events.listen(this,ol.source.VectorEventType.REMOVEFEATURE,function(o){t||(t=!0,e.remove(o.feature),t=!1)});goog.events.listen(e,ol.CollectionEventType.ADD,function(e){t||(e=e.element,goog.asserts.assertInstanceof(e,ol.Feature),t=!0,this.addFeature(e),t=!1)},!1,this);goog.events.listen(e,ol.CollectionEventType.REMOVE,function(e){t||(e=e.element,goog.asserts.assertInstanceof(e,ol.Feature),t=!0,this.removeFeature(e),t=!1)},!1,this);this.featuresCollection_=e};ol.source.Vector.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_)goog.array.forEach(this.featureChangeKeys_[t],goog.events.unlistenByKey);goog.isNull(this.featuresCollection_)&&(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else e=this.removeFeatureInternal,goog.isNull(this.featuresRtree_)||(this.featuresRtree_.forEach(e,this),goog.object.forEach(this.nullGeometryFeatures_,e,this));goog.isNull(this.featuresCollection_)||this.featuresCollection_.clear();goog.asserts.assert(goog.object.isEmpty(this.featureChangeKeys_),"featureChangeKeys is an empty object now");goog.asserts.assert(goog.object.isEmpty(this.idIndex_),"idIndex is an empty object now");goog.asserts.assert(goog.object.isEmpty(this.undefIdIndex_),"undefIdIndex is an empty object now");goog.isNull(this.featuresRtree_)||this.featuresRtree_.clear();this.loadedExtentsRtree_.clear();this.nullGeometryFeatures_={};e=new ol.source.VectorEvent(ol.source.VectorEventType.CLEAR);this.dispatchEvent(e);this.changed()};ol.source.Vector.prototype.forEachFeature=function(e,t){return goog.isNull(this.featuresRtree_)?goog.isNull(this.featuresCollection_)?void 0:this.featuresCollection_.forEach(e,t):this.featuresRtree_.forEach(e,t)};ol.source.Vector.prototype.forEachFeatureAtCoordinateDirect=function(e,t,o){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(r){var n=r.getGeometry();goog.asserts.assert(goog.isDefAndNotNull(n),"feature geometry is defined and not null");return n.containsCoordinate(e)?t.call(o,r):void 0})};ol.source.Vector.prototype.forEachFeatureInExtent=function(e,t,o){return goog.isNull(this.featuresRtree_)?goog.isNull(this.featuresCollection_)?void 0:this.featuresCollection_.forEach(t,o):this.featuresRtree_.forEachInExtent(e,t,o)};ol.source.Vector.prototype.forEachFeatureInExtentAtResolution=function(e,t,o,r){return this.forEachFeatureInExtent(e,o,r)};ol.source.Vector.prototype.forEachFeatureIntersectingExtent=function(e,t,o){return this.forEachFeatureInExtent(e,function(r){var n=r.getGeometry();goog.asserts.assert(goog.isDefAndNotNull(n),"feature geometry is defined and not null");return n.intersectsExtent(e)&&(r=t.call(o,r))?r:void 0})};ol.source.Vector.prototype.getFeaturesCollection=function(){return this.featuresCollection_};ol.source.Vector.prototype.getFeatures=function(){var e;goog.isNull(this.featuresCollection_)?goog.isNull(this.featuresRtree_)||(e=this.featuresRtree_.getAll(),goog.object.isEmpty(this.nullGeometryFeatures_)||goog.array.extend(e,goog.object.getValues(this.nullGeometryFeatures_))):e=this.featuresCollection_.getArray();goog.asserts.assert(goog.isDef(e),"Neither featuresRtree_ nor featuresCollection_ are available");return e};ol.source.Vector.prototype.getFeaturesAtCoordinate=function(e){var t=[];this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)});return t};ol.source.Vector.prototype.getFeaturesInExtent=function(e){goog.asserts.assert(!goog.isNull(this.featuresRtree_),"getFeaturesInExtent does not work when useSpatialIndex is set to false");return this.featuresRtree_.getInExtent(e)};ol.source.Vector.prototype.getClosestFeatureToCoordinate=function(e){var t=e[0],o=e[1],r=null,n=[0/0,0/0],i=1/0,s=[-1/0,-1/0,1/0,1/0];goog.asserts.assert(!goog.isNull(this.featuresRtree_),"getClosestFeatureToCoordinate does not work with useSpatialIndex set to false");this.featuresRtree_.forEachInExtent(s,function(e){var a=e.getGeometry();goog.asserts.assert(goog.isDefAndNotNull(a),"feature geometry is defined and not null");var g=i;i=a.closestPointXY(t,o,n,i);g>i&&(r=e,e=Math.sqrt(i),s[0]=t-e,s[1]=o-e,s[2]=t+e,s[3]=o+e)});return r};ol.source.Vector.prototype.getExtent=function(){goog.asserts.assert(!goog.isNull(this.featuresRtree_),"getExtent does not work when useSpatialIndex is set to false");return this.featuresRtree_.getExtent()};ol.source.Vector.prototype.getFeatureById=function(e){e=this.idIndex_[e.toString()];return goog.isDef(e)?e:null};ol.source.Vector.prototype.handleFeatureChange_=function(e){e=e.target;var t=goog.getUid(e).toString(),o=e.getGeometry();goog.isDefAndNotNull(o)?(o=o.getExtent(),t in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[t],goog.isNull(this.featuresRtree_)||this.featuresRtree_.insert(o,e)):goog.isNull(this.featuresRtree_)||this.featuresRtree_.update(o,e)):t in this.nullGeometryFeatures_||(goog.isNull(this.featuresRtree_)||this.featuresRtree_.remove(e),this.nullGeometryFeatures_[t]=e);o=e.getId();if(goog.isDef(o)){var r=o.toString();t in this.undefIdIndex_?(delete this.undefIdIndex_[t],this.idIndex_[r]=e):this.idIndex_[r]!==e&&(o=this.removeFromIdIndex_(e),goog.asserts.assert(o,"Expected feature to be removed from index"),this.idIndex_[r]=e)}else t in this.undefIdIndex_?goog.asserts.assert(this.undefIdIndex_[t]===e,"feature keyed under %s in undefIdKeys",t):(o=this.removeFromIdIndex_(e),goog.asserts.assert(o,"Expected feature to be removed from index"),this.undefIdIndex_[t]=e);this.changed();this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.CHANGEFEATURE,e))};ol.source.Vector.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&goog.object.isEmpty(this.nullGeometryFeatures_)};ol.source.Vector.prototype.loadFeatures=function(e,t,o){var r=this.loadedExtentsRtree_;e=this.strategy_(e,t);var n,i;n=0;for(i=e.length;i>n;++n){var s=e[n];r.forEachInExtent(s,function(e){return ol.extent.containsExtent(e.extent,s)})||(this.loader_.call(this,s,t,o),r.insert(s,{extent:s.slice()}))}};ol.source.Vector.prototype.removeFeature=function(e){var t=goog.getUid(e).toString();t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:goog.isNull(this.featuresRtree_)||this.featuresRtree_.remove(e);this.removeFeatureInternal(e);this.changed()};ol.source.Vector.prototype.removeFeatureInternal=function(e){var t=goog.getUid(e).toString();goog.asserts.assert(t in this.featureChangeKeys_,"featureKey exists in featureChangeKeys");goog.array.forEach(this.featureChangeKeys_[t],goog.events.unlistenByKey);delete this.featureChangeKeys_[t];var o=e.getId();goog.isDef(o)?delete this.idIndex_[o.toString()]:delete this.undefIdIndex_[t];this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.REMOVEFEATURE,e))};ol.source.Vector.prototype.removeFromIdIndex_=function(e){var t,o=!1;for(t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];o=!0;break}return o};ol.source.VectorEvent=function(e,t){goog.events.Event.call(this,e);this.feature=t};goog.inherits(ol.source.VectorEvent,goog.events.Event);ol.source.ImageVector=function(e){this.source_=e.source;this.transform_=goog.vec.Mat4.createNumber();this.canvasContext_=ol.dom.createCanvasContext2D();this.canvasSize_=[0,0];this.replayGroup_=null;ol.source.ImageCanvas.call(this,{attributions:e.attributions,canvasFunction:goog.bind(this.canvasFunctionInternal_,this),logo:e.logo,projection:e.projection,ratio:e.ratio,resolutions:e.resolutions,state:this.source_.getState()});this.style_=null;this.styleFunction_=void 0;this.setStyle(e.style);goog.events.listen(this.source_,goog.events.EventType.CHANGE,this.handleSourceChange_,void 0,this)};goog.inherits(ol.source.ImageVector,ol.source.ImageCanvas);ol.source.ImageVector.prototype.canvasFunctionInternal_=function(e,t,o,r,n){var i=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(t,o),e,t);this.source_.loadFeatures(e,t,n);var s=!1;this.source_.forEachFeatureInExtentAtResolution(e,t,function(e){s=s||this.renderFeature_(e,t,o,i)},this);i.finish();if(s)return null;this.canvasSize_[0]!=r[0]||this.canvasSize_[1]!=r[1]?(this.canvasContext_.canvas.width=r[0],this.canvasContext_.canvas.height=r[1],this.canvasSize_[0]=r[0],this.canvasSize_[1]=r[1]):this.canvasContext_.clearRect(0,0,r[0],r[1]);e=this.getTransform_(ol.extent.getCenter(e),t,o,r);i.replay(this.canvasContext_,o,e,0,{});this.replayGroup_=i;return this.canvasContext_.canvas};ol.source.ImageVector.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,n){if(!goog.isNull(this.replayGroup_)){var i={};return this.replayGroup_.forEachFeatureAtCoordinate(e,t,0,r,function(e){goog.asserts.assert(goog.isDef(e),"passed a feature");var t=goog.getUid(e).toString();return t in i?void 0:(i[t]=!0,n(e))})}};ol.source.ImageVector.prototype.getSource=function(){return this.source_};ol.source.ImageVector.prototype.getStyle=function(){return this.style_};ol.source.ImageVector.prototype.getStyleFunction=function(){return this.styleFunction_};ol.source.ImageVector.prototype.getTransform_=function(e,t,o,r){return ol.vec.Mat4.makeTransform2D(this.transform_,r[0]/2,r[1]/2,o/t,-o/t,0,-e[0],-e[1])};ol.source.ImageVector.prototype.handleImageChange_=function(){this.changed()};ol.source.ImageVector.prototype.handleSourceChange_=function(){this.setState(this.source_.getState())};ol.source.ImageVector.prototype.renderFeature_=function(e,t,o,r){var n;goog.isDef(e.getStyleFunction())?n=e.getStyleFunction().call(e,t):goog.isDef(this.styleFunction_)&&(n=this.styleFunction_(e,t));if(!goog.isDefAndNotNull(n))return!1;var i,s,a=!1;i=0;for(s=n.length;s>i;++i)a=ol.renderer.vector.renderFeature(r,e,n[i],ol.renderer.vector.getSquaredTolerance(t,o),this.handleImageChange_,this)||a;return a};ol.source.ImageVector.prototype.setStyle=function(e){this.style_=goog.isDef(e)?e:ol.style.defaultStyleFunction;this.styleFunction_=goog.isNull(e)?void 0:ol.style.createStyleFunction(this.style_);this.changed()};ol.renderer.canvas.ImageLayer=function(e){ol.renderer.canvas.Layer.call(this,e);this.image_=null;this.imageTransform_=goog.vec.Mat4.createNumber();this.hitCanvasContext_=this.imageTransformInv_=null};goog.inherits(ol.renderer.canvas.ImageLayer,ol.renderer.canvas.Layer);ol.renderer.canvas.ImageLayer.prototype.forEachFeatureAtCoordinate=function(e,t,o,r){var n=this.getLayer();return n.getSource().forEachFeatureAtCoordinate(e,t.viewState.resolution,t.viewState.rotation,t.skippedFeatureUids,function(e){return o.call(r,e,n)})};ol.renderer.canvas.ImageLayer.prototype.forEachLayerAtPixel=function(e,t,o,r){if(!goog.isNull(this.getImage()))if(this.getLayer().getSource()instanceof ol.source.ImageVector){if(e=e.slice(),ol.vec.Mat4.multVec2(t.pixelToCoordinateMatrix,e,e),this.forEachFeatureAtCoordinate(e,t,goog.functions.TRUE,this))return o.call(r,this.getLayer())}else if(goog.isNull(this.imageTransformInv_)&&(this.imageTransformInv_=goog.vec.Mat4.createNumber(),goog.vec.Mat4.invert(this.imageTransform_,this.imageTransformInv_)),t=this.getPixelOnCanvas(e,this.imageTransformInv_),goog.isNull(this.hitCanvasContext_)&&(this.hitCanvasContext_=ol.dom.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),t[0],t[1],1,1,0,0,1,1),0<this.hitCanvasContext_.getImageData(0,0,1,1).data[3])return o.call(r,this.getLayer())};ol.renderer.canvas.ImageLayer.prototype.getImage=function(){return goog.isNull(this.image_)?null:this.image_.getImage()};ol.renderer.canvas.ImageLayer.prototype.getImageTransform=function(){return this.imageTransform_};ol.renderer.canvas.ImageLayer.prototype.prepareFrame=function(e,t){var o,r=e.pixelRatio,n=e.viewState,i=n.center,s=n.resolution,a=n.rotation,g=this.getLayer();goog.asserts.assertInstanceof(g,ol.layer.Image,"layer is an instance of ol.layer.Image");var g=g.getSource(),l=e.viewHints;o=e.extent;goog.isDef(t.extent)&&(o=ol.extent.getIntersection(o,t.extent));l[ol.ViewHint.ANIMATING]||l[ol.ViewHint.INTERACTING]||ol.extent.isEmpty(o)||(n=n.projection,l=g.getProjection(),goog.isNull(l)||(goog.asserts.assert(ol.proj.equivalent(n,l),"projection and sourceProjection are equivalent"),n=l),o=g.getImage(o,s,r,n),!goog.isNull(o)&&this.loadImage(o)&&(this.image_=o));if(!goog.isNull(this.image_)){o=this.image_;var n=o.getExtent(),l=o.getResolution(),u=o.getPixelRatio(),s=r*l/(s*u);ol.vec.Mat4.makeTransform2D(this.imageTransform_,r*e.size[0]/2,r*e.size[1]/2,s,s,a,u*(n[0]-i[0])/l,u*(i[1]-n[3])/l);this.imageTransformInv_=null;this.updateAttributions(e.attributions,o.getAttributions());this.updateLogos(e,g)}return!0};ol.renderer.canvas.TileLayer=function(e){ol.renderer.canvas.Layer.call(this,e);this.canvasSize_=this.canvas_=null;this.canvasTooBig_=!1;this.context_=null;this.imageTransform_=goog.vec.Mat4.createNumber();this.imageTransformInv_=null;this.renderedTileHeight_=this.renderedTileWidth_=this.renderedCanvasZ_=0/0;this.renderedTiles_=this.renderedCanvasTileRange_=null;this.tmpSize_=[0,0]};goog.inherits(ol.renderer.canvas.TileLayer,ol.renderer.canvas.Layer);ol.renderer.canvas.TileLayer.prototype.getImage=function(){return this.canvas_};ol.renderer.canvas.TileLayer.prototype.getImageTransform=function(){return this.imageTransform_};ol.renderer.canvas.TileLayer.prototype.prepareFrame=function(e,t){var o=e.pixelRatio,r=e.viewState,n=r.projection,i=this.getLayer();goog.asserts.assertInstanceof(i,ol.layer.Tile,"layer is an instance of ol.layer.Tile");var s,a=i.getSource(),g=a.getTileGridForProjection(n),l=a.getGutter(),u=g.getZForResolution(r.resolution),c=a.getTilePixelSize(u,e.pixelRatio,n),h=c[0]/ol.size.toSize(g.getTileSize(u),this.tmpSize_)[0],d=g.getResolution(u),h=d/h,m=r.center;d==r.resolution?(m=this.snapCenterToPixel(m,d,e.size),s=ol.extent.getForViewAndSize(m,d,r.rotation,e.size)):s=e.extent;goog.isDef(t.extent)&&(s=ol.extent.getIntersection(s,t.extent));if(ol.extent.isEmpty(s))return!1;var p,f,_=g.getTileRangeForExtentAndResolution(s,d),y=c[0]*_.getWidth(),E=c[1]*_.getHeight();goog.isNull(this.canvas_)?(goog.asserts.assert(goog.isNull(this.canvasSize_),"canvasSize is null (because canvas is null)"),goog.asserts.assert(goog.isNull(this.context_),"context is null (because canvas is null)"),goog.asserts.assert(goog.isNull(this.renderedCanvasTileRange_),"renderedCanvasTileRange is null (because canvas is null)"),f=ol.dom.createCanvasContext2D(y,E),this.canvas_=f.canvas,this.canvasSize_=[y,E],this.context_=f,this.canvasTooBig_=!ol.renderer.canvas.Layer.testCanvasSize(this.canvasSize_)):(goog.asserts.assert(!goog.isNull(this.canvasSize_),"non-null canvasSize (because canvas is not null)"),goog.asserts.assert(!goog.isNull(this.context_),"non-null context (because canvas is not null)"),p=this.canvas_,f=this.context_,this.canvasSize_[0]<y||this.canvasSize_[1]<E||this.renderedTileWidth_!==c[0]||this.renderedTileHeight_!==c[1]||this.canvasTooBig_&&(this.canvasSize_[0]>y||this.canvasSize_[1]>E)?(p.width=y,p.height=E,this.canvasSize_=[y,E],this.canvasTooBig_=!ol.renderer.canvas.Layer.testCanvasSize(this.canvasSize_),this.renderedCanvasTileRange_=null):(y=this.canvasSize_[0],E=this.canvasSize_[1],u==this.renderedCanvasZ_&&this.renderedCanvasTileRange_.containsTileRange(_)||(this.renderedCanvasTileRange_=null)));var S,v;goog.isNull(this.renderedCanvasTileRange_)?(y/=c[0],E/=c[1],S=_.minX-Math.floor((y-_.getWidth())/2),v=_.minY-Math.floor((E-_.getHeight())/2),this.renderedCanvasZ_=u,this.renderedTileWidth_=c[0],this.renderedTileHeight_=c[1],this.renderedCanvasTileRange_=new ol.TileRange(S,S+y-1,v,v+E-1),this.renderedTiles_=Array(y*E),E=this.renderedCanvasTileRange_):(E=this.renderedCanvasTileRange_,y=E.getWidth());goog.asserts.assert(E.containsTileRange(_),"tileRange is contained in canvasTileRange");p={};p[u]={};var T,b,R,C=[],A=this.createLoadedTileFinder(a,p),N=i.getUseInterimTilesOnError(),M=ol.extent.createEmpty(),L=new ol.TileRange(0,0,0,0);for(v=_.minX;v<=_.maxX;++v)for(R=_.minY;R<=_.maxY;++R)b=a.getTile(u,v,R,o,n),S=b.getState(),S==ol.TileState.LOADED||S==ol.TileState.EMPTY||S==ol.TileState.ERROR&&!N?p[u][ol.tilecoord.toString(b.tileCoord)]=b:(T=g.forEachTileCoordParentTileRange(b.tileCoord,A,null,L,M),T||(C.push(b),T=g.getTileCoordChildTileRange(b.tileCoord,L,M),goog.isNull(T)||A(u+1,T)));A=0;for(T=C.length;T>A;++A)b=C[A],v=c[0]*(b.tileCoord[1]-E.minX),R=c[1]*(E.maxY-b.tileCoord[2]),f.clearRect(v,R,c[0],c[1]);C=goog.array.map(goog.object.getKeys(p),Number);goog.array.sort(C);var I,x,D,P,O,w,F=a.getOpaque(),U=ol.extent.getTopLeft(g.getTileCoordExtent([u,E.minX,E.maxY],M)),A=0;for(T=C.length;T>A;++A)if(I=C[A],c=a.getTilePixelSize(I,o,n),P=p[I],I==u)for(D in P)b=P[D],x=(b.tileCoord[2]-E.minY)*y+(b.tileCoord[1]-E.minX),this.renderedTiles_[x]!=b&&(v=c[0]*(b.tileCoord[1]-E.minX),R=c[1]*(E.maxY-b.tileCoord[2]),S=b.getState(),S!=ol.TileState.EMPTY&&(S!=ol.TileState.ERROR||N)&&F||f.clearRect(v,R,c[0],c[1]),S==ol.TileState.LOADED&&f.drawImage(b.getImage(),l,l,c[0],c[1],v,R,c[0],c[1]),this.renderedTiles_[x]=b);else for(D in I=g.getResolution(I)/d,P)for(b=P[D],x=g.getTileCoordExtent(b.tileCoord,M),v=(x[0]-U[0])/h,R=(U[1]-x[3])/h,w=I*c[0],O=I*c[1],S=b.getState(),S!=ol.TileState.EMPTY&&F||f.clearRect(v,R,w,O),S==ol.TileState.LOADED&&f.drawImage(b.getImage(),l,l,c[0],c[1],v,R,w,O),b=g.getTileRangeForExtentAndZ(x,u,L),S=Math.max(b.minX,E.minX),R=Math.min(b.maxX,E.maxX),v=Math.max(b.minY,E.minY),b=Math.min(b.maxY,E.maxY);R>=S;++S)for(O=v;b>=O;++O)x=(O-E.minY)*y+(S-E.minX),this.renderedTiles_[x]=void 0;this.updateUsedTiles(e.usedTiles,a,u,_);this.manageTilePyramid(e,a,g,o,n,s,u,i.getPreload());this.scheduleExpireCache(e,a);this.updateLogos(e,a);ol.vec.Mat4.makeTransform2D(this.imageTransform_,o*e.size[0]/2,o*e.size[1]/2,o*h/r.resolution,o*h/r.resolution,r.rotation,(U[0]-m[0])/h,(m[1]-U[1])/h);this.imageTransformInv_=null;return!0};ol.renderer.canvas.TileLayer.prototype.forEachLayerAtPixel=function(e,t,o,r){return!goog.isNull(this.context_)&&(goog.isNull(this.imageTransformInv_)&&(this.imageTransformInv_=goog.vec.Mat4.createNumber(),goog.vec.Mat4.invert(this.imageTransform_,this.imageTransformInv_)),e=this.getPixelOnCanvas(e,this.imageTransformInv_),0<this.context_.getImageData(e[0],e[1],1,1).data[3])?o.call(r,this.getLayer()):void 0};ol.renderer.canvas.VectorLayer=function(e){ol.renderer.canvas.Layer.call(this,e);this.dirty_=!1;this.renderedRevision_=-1;this.renderedResolution_=0/0;this.renderedExtent_=ol.extent.createEmpty();this.replayGroup_=this.renderedRenderOrder_=null;this.context_=ol.dom.createCanvasContext2D()};goog.inherits(ol.renderer.canvas.VectorLayer,ol.renderer.canvas.Layer);ol.renderer.canvas.VectorLayer.prototype.composeFrame=function(e,t,o){var r=e.extent,n=e.pixelRatio,i=t.managed?e.skippedFeatureUids:{},s=e.viewState,a=s.projection,s=s.rotation,g=a.getExtent(),l=this.getLayer().getSource();goog.asserts.assertInstanceof(l,ol.source.Vector);var u=this.getTransform(e,0);this.dispatchPreComposeEvent(o,e,u);var c=this.replayGroup_;if(!goog.isNull(c)&&!c.isEmpty()){var h;this.getLayer().hasListener(ol.render.EventType.RENDER)?(this.context_.canvas.width=o.canvas.width,this.context_.canvas.height=o.canvas.height,h=this.context_):h=o;var d=h.globalAlpha;h.globalAlpha=t.opacity;c.replay(h,n,u,s,i);if(l.getWrapX()&&a.canWrapX()&&!ol.extent.containsExtent(g,r)){t=r[0];a=ol.extent.getWidth(g);for(l=0;t<g[0];)--l,u=a*l,u=this.getTransform(e,u),c.replay(h,n,u,s,i),t+=a;l=0;for(t=r[2];t>g[2];)++l,u=a*l,u=this.getTransform(e,u),c.replay(h,n,u,s,i),t-=a;u=this.getTransform(e,0)}h!=o&&(this.dispatchRenderEvent(h,e,u),o.drawImage(h.canvas,0,0));h.globalAlpha=d}this.dispatchPostComposeEvent(o,e,u)};ol.renderer.canvas.VectorLayer.prototype.forEachFeatureAtCoordinate=function(e,t,o,r){if(!goog.isNull(this.replayGroup_)){var n=t.viewState.resolution,i=t.viewState.rotation,s=this.getLayer(),a=t.layerStates[goog.getUid(s)],g={};
return this.replayGroup_.forEachFeatureAtCoordinate(e,n,i,a.managed?t.skippedFeatureUids:{},function(e){goog.asserts.assert(goog.isDef(e),"received a feature");var t=goog.getUid(e).toString();return t in g?void 0:(g[t]=!0,o.call(r,e,s))})}};ol.renderer.canvas.VectorLayer.prototype.handleStyleImageChange_=function(){this.renderIfReadyAndVisible()};ol.renderer.canvas.VectorLayer.prototype.prepareFrame=function(e){var t=this.getLayer();goog.asserts.assertInstanceof(t,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var o=t.getSource();this.updateAttributions(e.attributions,o.getAttributions());this.updateLogos(e,o);var r=e.viewHints[ol.ViewHint.ANIMATING],n=e.viewHints[ol.ViewHint.INTERACTING],i=t.getUpdateWhileAnimating(),s=t.getUpdateWhileInteracting();if(!this.dirty_&&!i&&r||!s&&n)return!0;var s=e.extent,a=e.viewState,i=a.projection,g=a.resolution,l=e.pixelRatio,r=t.getRevision(),u=t.getRenderBuffer(),n=t.getRenderOrder();goog.isDef(n)||(n=ol.renderer.vector.defaultOrder);s=ol.extent.buffer(s,u*g);u=a.projection.getExtent();o.getWrapX()&&a.projection.canWrapX()&&!ol.extent.containsExtent(u,e.extent)&&(a=ol.extent.getWidth(u),a=Math.max(ol.extent.getWidth(s)/2,a),s[0]=u[0]-a,s[2]=u[2]+a);if(!this.dirty_&&this.renderedResolution_==g&&this.renderedRevision_==r&&this.renderedRenderOrder_==n&&ol.extent.containsExtent(this.renderedExtent_,s))return!0;goog.dispose(this.replayGroup_);this.replayGroup_=null;this.dirty_=!1;var c=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(g,l),s,g,t.getRenderBuffer());o.loadFeatures(s,g,i);i=function(e){var o;goog.isDef(e.getStyleFunction())?o=e.getStyleFunction().call(e,g):goog.isDef(t.getStyleFunction())&&(o=t.getStyleFunction()(e,g));goog.isDefAndNotNull(o)&&(e=this.renderFeature(e,g,l,o,c),this.dirty_=this.dirty_||e)};if(goog.isNull(n))o.forEachFeatureInExtentAtResolution(s,g,i,this);else{var h=[];o.forEachFeatureInExtentAtResolution(s,g,function(e){h.push(e)},this);goog.array.sort(h,n);goog.array.forEach(h,i,this)}c.finish();this.renderedResolution_=g;this.renderedRevision_=r;this.renderedRenderOrder_=n;this.renderedExtent_=s;this.replayGroup_=c;return!0};ol.renderer.canvas.VectorLayer.prototype.renderFeature=function(e,t,o,r,n){if(!goog.isDefAndNotNull(r))return!1;var i,s,a=!1;i=0;for(s=r.length;s>i;++i)a=ol.renderer.vector.renderFeature(n,e,r[i],ol.renderer.vector.getSquaredTolerance(t,o),this.handleStyleImageChange_,this)||a;return a};ol.renderer.canvas.Map=function(e,t){ol.renderer.Map.call(this,e,t);this.context_=ol.dom.createCanvasContext2D();this.canvas_=this.context_.canvas;this.canvas_.style.width="100%";this.canvas_.style.height="100%";this.canvas_.className=ol.css.CLASS_UNSELECTABLE;goog.dom.insertChildAt(e,this.canvas_,0);this.renderedVisible_=!0;this.transform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.renderer.canvas.Map,ol.renderer.Map);ol.renderer.canvas.Map.prototype.createLayerRenderer=function(e){if(ol.ENABLE_IMAGE&&e instanceof ol.layer.Image)return new ol.renderer.canvas.ImageLayer(e);if(ol.ENABLE_TILE&&e instanceof ol.layer.Tile)return new ol.renderer.canvas.TileLayer(e);if(ol.ENABLE_VECTOR&&e instanceof ol.layer.Vector)return new ol.renderer.canvas.VectorLayer(e);goog.asserts.fail("unexpected layer configuration");return null};ol.renderer.canvas.Map.prototype.dispatchComposeEvent_=function(e,t){var o=this.getMap(),r=this.context_;if(o.hasListener(e)){var n=t.extent,i=t.pixelRatio,s=t.viewState.rotation,a=this.getTransform(t),n=new ol.render.canvas.Immediate(r,i,n,a,s),r=new ol.render.Event(e,o,n,t,r,null);o.dispatchEvent(r);n.flush()}};ol.renderer.canvas.Map.prototype.getTransform=function(e){var t=e.pixelRatio;e=e.viewState;var o=e.resolution;return ol.vec.Mat4.makeTransform2D(this.transform_,this.canvas_.width/2,this.canvas_.height/2,t/o,-t/o,-e.rotation,-e.center[0],-e.center[1])};ol.renderer.canvas.Map.prototype.getType=function(){return ol.RendererType.CANVAS};ol.renderer.canvas.Map.prototype.renderFrame=function(e){if(goog.isNull(e))this.renderedVisible_&&(goog.style.setElementShown(this.canvas_,!1),this.renderedVisible_=!1);else{var t=this.context_,o=e.size[0]*e.pixelRatio,r=e.size[1]*e.pixelRatio;this.canvas_.width!=o||this.canvas_.height!=r?(this.canvas_.width=o,this.canvas_.height=r):t.clearRect(0,0,this.canvas_.width,this.canvas_.height);this.calculateMatrices2D(e);this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,e);o=e.layerStatesArray;goog.array.stableSort(o,ol.renderer.Map.sortByZIndex);var n,i,s,a,r=e.viewState.resolution;n=0;for(i=o.length;i>n;++n)a=o[n],s=a.layer,s=this.getLayerRenderer(s),goog.asserts.assertInstanceof(s,ol.renderer.canvas.Layer,"layerRenderer is an instance of ol.renderer.canvas.Layer"),ol.layer.Layer.visibleAtResolution(a,r)&&a.sourceState==ol.source.State.READY&&s.prepareFrame(e,a)&&s.composeFrame(e,a,t);this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,e);this.renderedVisible_||(goog.style.setElementShown(this.canvas_,!0),this.renderedVisible_=!0);this.scheduleRemoveUnusedLayerRenderers(e);this.scheduleExpireIconCache(e)}};ol.renderer.dom={};ol.renderer.dom.Layer=function(e,t){ol.renderer.Layer.call(this,e);this.target=t};goog.inherits(ol.renderer.dom.Layer,ol.renderer.Layer);ol.renderer.dom.Layer.prototype.clearFrame=goog.nullFunction;ol.renderer.dom.Layer.prototype.composeFrame=goog.nullFunction;ol.renderer.dom.Layer.prototype.getTarget=function(){return this.target};ol.renderer.dom.ImageLayer=function(e){var t=goog.dom.createElement(goog.dom.TagName.DIV);t.style.position="absolute";ol.renderer.dom.Layer.call(this,e,t);this.image_=null;this.transform_=goog.vec.Mat4.createNumberIdentity()};goog.inherits(ol.renderer.dom.ImageLayer,ol.renderer.dom.Layer);ol.renderer.dom.ImageLayer.prototype.forEachFeatureAtCoordinate=function(e,t,o,r){var n=this.getLayer();return n.getSource().forEachFeatureAtCoordinate(e,t.viewState.resolution,t.viewState.rotation,t.skippedFeatureUids,function(e){return o.call(r,e,n)})};ol.renderer.dom.ImageLayer.prototype.clearFrame=function(){goog.dom.removeChildren(this.target);this.image_=null};ol.renderer.dom.ImageLayer.prototype.prepareFrame=function(e,t){var o=e.viewState,r=o.center,n=o.resolution,i=o.rotation,s=this.image_,a=this.getLayer();goog.asserts.assertInstanceof(a,ol.layer.Image,"layer is an instance of ol.layer.Image");var a=a.getSource(),g=e.viewHints,l=e.extent;goog.isDef(t.extent)&&(l=ol.extent.getIntersection(l,t.extent));g[ol.ViewHint.ANIMATING]||g[ol.ViewHint.INTERACTING]||ol.extent.isEmpty(l)||(o=o.projection,g=a.getProjection(),goog.isNull(g)||(goog.asserts.assert(ol.proj.equivalent(o,g),"projection and sourceProjection are equivalent"),o=g),l=a.getImage(l,n,e.pixelRatio,o),goog.isNull(l)||this.loadImage(l)&&(s=l));goog.isNull(s)||(o=s.getExtent(),g=s.getResolution(),l=goog.vec.Mat4.createNumber(),ol.vec.Mat4.makeTransform2D(l,e.size[0]/2,e.size[1]/2,g/n,g/n,i,(o[0]-r[0])/g,(r[1]-o[3])/g),s!=this.image_&&(r=s.getImage(this),r.style.maxWidth="none",r.style.position="absolute",goog.dom.removeChildren(this.target),goog.dom.appendChild(this.target,r),this.image_=s),this.setTransform_(l),this.updateAttributions(e.attributions,s.getAttributions()),this.updateLogos(e,a));return!0};ol.renderer.dom.ImageLayer.prototype.setTransform_=function(e){ol.vec.Mat4.equals2D(e,this.transform_)||(ol.dom.transformElement2D(this.target,e,6),goog.vec.Mat4.setFromArray(this.transform_,e))};ol.renderer.dom.TileLayer=function(e){var t=goog.dom.createElement(goog.dom.TagName.DIV);t.style.position="absolute";ol.dom.BrowserFeature.USE_MS_MATRIX_TRANSFORM&&(t.style.width="100%",t.style.height="100%");ol.renderer.dom.Layer.call(this,e,t);this.renderedVisible_=!0;this.renderedOpacity_=1;this.renderedRevision_=0;this.tileLayerZs_={}};goog.inherits(ol.renderer.dom.TileLayer,ol.renderer.dom.Layer);ol.renderer.dom.TileLayer.prototype.clearFrame=function(){goog.dom.removeChildren(this.target);this.renderedRevision_=0};ol.renderer.dom.TileLayer.prototype.prepareFrame=function(e,t){if(!t.visible)return this.renderedVisible_&&(goog.style.setElementShown(this.target,!1),this.renderedVisible_=!1),!0;var o=e.pixelRatio,r=e.viewState,n=r.projection,i=this.getLayer();goog.asserts.assertInstanceof(i,ol.layer.Tile,"layer is an instance of ol.layer.Tile");var s,a=i.getSource(),g=a.getTileGridForProjection(n),l=a.getGutter(),u=g.getZForResolution(r.resolution),c=g.getResolution(u),h=r.center;c==r.resolution?(h=this.snapCenterToPixel(h,c,e.size),s=ol.extent.getForViewAndSize(h,c,r.rotation,e.size)):s=e.extent;goog.isDef(t.extent)&&(s=ol.extent.getIntersection(s,t.extent));var c=g.getTileRangeForExtentAndResolution(s,c),d={};d[u]={};var m,p,f,_,y=this.createLoadedTileFinder(a,d),E=i.getUseInterimTilesOnError(),S=ol.extent.createEmpty(),v=new ol.TileRange(0,0,0,0);for(f=c.minX;f<=c.maxX;++f)for(_=c.minY;_<=c.maxY;++_)m=a.getTile(u,f,_,o,n),p=m.getState(),p==ol.TileState.LOADED?d[u][ol.tilecoord.toString(m.tileCoord)]=m:p==ol.TileState.EMPTY||p==ol.TileState.ERROR&&!E||(p=g.forEachTileCoordParentTileRange(m.tileCoord,y,null,v,S),p||(m=g.getTileCoordChildTileRange(m.tileCoord,v,S),goog.isNull(m)||y(u+1,m)));var T;if(this.renderedRevision_!=a.getRevision()){for(T in this.tileLayerZs_)E=this.tileLayerZs_[+T],goog.dom.removeNode(E.target);this.tileLayerZs_={};this.renderedRevision_=a.getRevision()}S=goog.array.map(goog.object.getKeys(d),Number);goog.array.sort(S);var b,y={};f=0;for(_=S.length;_>f;++f){T=S[f];T in this.tileLayerZs_?E=this.tileLayerZs_[T]:(E=g.getTileCoordForCoordAndZ(h,T),E=new ol.renderer.dom.TileLayerZ_(g,E),y[T]=!0,this.tileLayerZs_[T]=E);T=d[T];for(b in T)E.addTile(T[b],l);E.finalizeAddTiles()}l=goog.array.map(goog.object.getKeys(this.tileLayerZs_),Number);goog.array.sort(l);f=goog.vec.Mat4.createNumber();b=0;for(S=l.length;S>b;++b)if(T=l[b],E=this.tileLayerZs_[T],T in d)if(m=E.getResolution(),_=E.getOrigin(),ol.vec.Mat4.makeTransform2D(f,e.size[0]/2,e.size[1]/2,m/r.resolution,m/r.resolution,r.rotation,(_[0]-h[0])/m,(h[1]-_[1])/m),E.setTransform(f),T in y){for(--T;T>=0;--T)if(T in this.tileLayerZs_){goog.dom.insertSiblingAfter(E.target,this.tileLayerZs_[T].target);break}0>T&&goog.dom.insertChildAt(this.target,E.target,0)}else e.viewHints[ol.ViewHint.ANIMATING]||e.viewHints[ol.ViewHint.INTERACTING]||E.removeTilesOutsideExtent(s,v);else goog.dom.removeNode(E.target),delete this.tileLayerZs_[T];t.opacity!=this.renderedOpacity_&&(ol.dom.setOpacity(this.target,t.opacity),this.renderedOpacity_=t.opacity);t.visible&&!this.renderedVisible_&&(goog.style.setElementShown(this.target,!0),this.renderedVisible_=!0);this.updateUsedTiles(e.usedTiles,a,u,c);this.manageTilePyramid(e,a,g,o,n,s,u,i.getPreload());this.scheduleExpireCache(e,a);this.updateLogos(e,a);return!0};ol.renderer.dom.TileLayerZ_=function(e,t){this.target=goog.dom.createElement(goog.dom.TagName.DIV);this.target.style.position="absolute";this.target.style.width="100%";this.target.style.height="100%";ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE&&(this.translateTarget_=goog.dom.createElement(goog.dom.TagName.DIV),this.translateTarget_.style.position="absolute",this.translateTarget_.style.width="100%",this.translateTarget_.style.height="100%",goog.dom.appendChild(this.target,this.translateTarget_));this.tileGrid_=e;this.tileCoordOrigin_=t;this.origin_=ol.extent.getTopLeft(e.getTileCoordExtent(t));this.resolution_=e.getResolution(t[0]);this.tiles_={};this.documentFragment_=null;this.transform_=goog.vec.Mat4.createNumberIdentity();this.tmpSize_=[0,0]};ol.renderer.dom.TileLayerZ_.prototype.addTile=function(e,t){var o=e.tileCoord,r=o[0],n=o[1],i=o[2];goog.asserts.assert(r==this.tileCoordOrigin_[0],"tileCoordZ matches z of tileCoordOrigin");o=ol.tilecoord.toString(o);if(!(o in this.tiles_)){var r=ol.size.toSize(this.tileGrid_.getTileSize(r),this.tmpSize_),s=e.getImage(this),a=s.style;a.maxWidth="none";var g,l;t>0?(g=goog.dom.createElement(goog.dom.TagName.DIV),l=g.style,l.overflow="hidden",l.width=r[0]+"px",l.height=r[1]+"px",a.position="absolute",a.left=-t+"px",a.top=-t+"px",a.width=r[0]+2*t+"px",a.height=r[1]+2*t+"px",goog.dom.appendChild(g,s)):(a.width=r[0]+"px",a.height=r[1]+"px",g=s,l=a);l.position="absolute";l.left=(n-this.tileCoordOrigin_[1])*r[0]+"px";l.top=(this.tileCoordOrigin_[2]-i)*r[1]+"px";goog.isNull(this.documentFragment_)&&(this.documentFragment_=document.createDocumentFragment());goog.dom.appendChild(this.documentFragment_,g);this.tiles_[o]=e}};ol.renderer.dom.TileLayerZ_.prototype.finalizeAddTiles=function(){goog.isNull(this.documentFragment_)||(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE?goog.dom.appendChild(this.translateTarget_,this.documentFragment_):goog.dom.appendChild(this.target,this.documentFragment_),this.documentFragment_=null)};ol.renderer.dom.TileLayerZ_.prototype.getOrigin=function(){return this.origin_};ol.renderer.dom.TileLayerZ_.prototype.getResolution=function(){return this.resolution_};ol.renderer.dom.TileLayerZ_.prototype.removeTilesOutsideExtent=function(e,t){var o,r,n=this.tileGrid_.getTileRangeForExtentAndZ(e,this.tileCoordOrigin_[0],t),i=[];for(r in this.tiles_)o=this.tiles_[r],n.contains(o.tileCoord)||i.push(o);var s,n=0;for(s=i.length;s>n;++n)o=i[n],r=ol.tilecoord.toString(o.tileCoord),goog.dom.removeNode(o.getImage(this)),delete this.tiles_[r]};ol.renderer.dom.TileLayerZ_.prototype.setTransform=function(e){ol.vec.Mat4.equals2D(e,this.transform_)||(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE?ol.dom.transformElement2D(this.target,e,6,this.translateTarget_):ol.dom.transformElement2D(this.target,e,6),goog.vec.Mat4.setFromArray(this.transform_,e))};ol.renderer.dom.VectorLayer=function(e){this.context_=ol.dom.createCanvasContext2D();var t=this.context_.canvas;t.style.maxWidth="none";t.style.position="absolute";ol.renderer.dom.Layer.call(this,e,t);this.dirty_=!1;this.renderedRevision_=-1;this.renderedResolution_=0/0;this.renderedExtent_=ol.extent.createEmpty();this.replayGroup_=this.renderedRenderOrder_=null;this.transform_=goog.vec.Mat4.createNumber();this.elementTransform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.renderer.dom.VectorLayer,ol.renderer.dom.Layer);ol.renderer.dom.VectorLayer.prototype.composeFrame=function(e,t){var o=this.getLayer();goog.asserts.assertInstanceof(o,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var r=e.viewState,n=r.center,o=r.rotation,i=r.resolution,r=e.pixelRatio,s=e.size[0],a=e.size[1],g=s*r,l=a*r,n=ol.vec.Mat4.makeTransform2D(this.transform_,r*s/2,r*a/2,r/i,-r/i,-o,-n[0],-n[1]),i=this.context_;i.canvas.width=g;i.canvas.height=l;s=ol.vec.Mat4.makeTransform2D(this.elementTransform_,0,0,1/r,1/r,0,-(g-s)/2*r,-(l-a)/2*r);ol.dom.transformElement2D(i.canvas,s,6);this.dispatchEvent_(ol.render.EventType.PRECOMPOSE,e,n);s=this.replayGroup_;goog.isNull(s)||s.isEmpty()||(i.globalAlpha=t.opacity,s.replay(i,r,n,o,t.managed?e.skippedFeatureUids:{}),this.dispatchEvent_(ol.render.EventType.RENDER,e,n));this.dispatchEvent_(ol.render.EventType.POSTCOMPOSE,e,n)};ol.renderer.dom.VectorLayer.prototype.dispatchEvent_=function(e,t,o){var r=this.context_,n=this.getLayer();n.hasListener(e)&&(o=new ol.render.canvas.Immediate(r,t.pixelRatio,t.extent,o,t.viewState.rotation),e=new ol.render.Event(e,n,o,t,r,null),n.dispatchEvent(e),o.flush())};ol.renderer.dom.VectorLayer.prototype.forEachFeatureAtCoordinate=function(e,t,o,r){if(!goog.isNull(this.replayGroup_)){var n=t.viewState.resolution,i=t.viewState.rotation,s=this.getLayer(),a=t.layerStates[goog.getUid(s)],g={};return this.replayGroup_.forEachFeatureAtCoordinate(e,n,i,a.managed?t.skippedFeatureUids:{},function(e){goog.asserts.assert(goog.isDef(e),"received a feature");var t=goog.getUid(e).toString();return t in g?void 0:(g[t]=!0,o.call(r,e,s))})}};ol.renderer.dom.VectorLayer.prototype.handleStyleImageChange_=function(){this.renderIfReadyAndVisible()};ol.renderer.dom.VectorLayer.prototype.prepareFrame=function(e){var t=this.getLayer();goog.asserts.assertInstanceof(t,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var o=t.getSource();this.updateAttributions(e.attributions,o.getAttributions());this.updateLogos(e,o);var r=e.viewHints[ol.ViewHint.ANIMATING],n=e.viewHints[ol.ViewHint.INTERACTING],i=t.getUpdateWhileAnimating(),s=t.getUpdateWhileInteracting();if(!this.dirty_&&!i&&r||!s&&n)return!0;var s=e.extent,n=e.viewState,r=n.projection,a=n.resolution,g=e.pixelRatio,n=t.getRevision(),l=t.getRenderBuffer(),i=t.getRenderOrder();goog.isDef(i)||(i=ol.renderer.vector.defaultOrder);s=ol.extent.buffer(s,l*a);if(!this.dirty_&&this.renderedResolution_==a&&this.renderedRevision_==n&&this.renderedRenderOrder_==i&&ol.extent.containsExtent(this.renderedExtent_,s))return!0;goog.dispose(this.replayGroup_);this.replayGroup_=null;this.dirty_=!1;var u=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(a,g),s,a,t.getRenderBuffer());o.loadFeatures(s,a,r);r=function(e){var o;goog.isDef(e.getStyleFunction())?o=e.getStyleFunction().call(e,a):goog.isDef(t.getStyleFunction())&&(o=t.getStyleFunction()(e,a));goog.isDefAndNotNull(o)&&(e=this.renderFeature(e,a,g,o,u),this.dirty_=this.dirty_||e)};if(goog.isNull(i))o.forEachFeatureInExtentAtResolution(s,a,r,this);else{var c=[];o.forEachFeatureInExtentAtResolution(s,a,function(e){c.push(e)},this);goog.array.sort(c,i);goog.array.forEach(c,r,this)}u.finish();this.renderedResolution_=a;this.renderedRevision_=n;this.renderedRenderOrder_=i;this.renderedExtent_=s;this.replayGroup_=u;return!0};ol.renderer.dom.VectorLayer.prototype.renderFeature=function(e,t,o,r,n){if(!goog.isDefAndNotNull(r))return!1;var i,s,a=!1;i=0;for(s=r.length;s>i;++i)a=ol.renderer.vector.renderFeature(n,e,r[i],ol.renderer.vector.getSquaredTolerance(t,o),this.handleStyleImageChange_,this)||a;return a};ol.renderer.dom.Map=function(e,t){ol.renderer.Map.call(this,e,t);this.context_=null;if(!ol.LEGACY_IE_SUPPORT||!ol.IS_LEGACY_IE){this.context_=ol.dom.createCanvasContext2D();var o=this.context_.canvas;o.style.position="absolute";o.style.width="100%";o.style.height="100%";o.className=ol.css.CLASS_UNSELECTABLE;goog.dom.insertChildAt(e,o,0)}this.transform_=goog.vec.Mat4.createNumber();this.layersPane_=goog.dom.createElement(goog.dom.TagName.DIV);this.layersPane_.className=ol.css.CLASS_UNSELECTABLE;o=this.layersPane_.style;o.position="absolute";o.width="100%";o.height="100%";ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE&&(this.layersPane_.ondragstart=goog.functions.FALSE,this.layersPane_.onselectstart=goog.functions.FALSE);goog.events.listen(this.layersPane_,goog.events.EventType.TOUCHSTART,goog.events.Event.preventDefault);goog.dom.insertChildAt(e,this.layersPane_,0);this.renderedVisible_=!0};goog.inherits(ol.renderer.dom.Map,ol.renderer.Map);ol.renderer.dom.Map.prototype.disposeInternal=function(){goog.dom.removeNode(this.layersPane_);ol.renderer.dom.Map.superClass_.disposeInternal.call(this)};ol.renderer.dom.Map.prototype.createLayerRenderer=function(e){if(ol.ENABLE_IMAGE&&e instanceof ol.layer.Image)e=new ol.renderer.dom.ImageLayer(e);else if(ol.ENABLE_TILE&&e instanceof ol.layer.Tile)e=new ol.renderer.dom.TileLayer(e);else{if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE||!ol.ENABLE_VECTOR||!(e instanceof ol.layer.Vector))return goog.asserts.fail("unexpected layer configuration"),null;e=new ol.renderer.dom.VectorLayer(e)}return e};ol.renderer.dom.Map.prototype.dispatchComposeEvent_=function(e,t){var o=this.getMap();if((!ol.LEGACY_IE_SUPPORT||!ol.IS_LEGACY_IE)&&o.hasListener(e)){var r=t.extent,n=t.pixelRatio,i=t.viewState,s=i.rotation,a=this.context_,g=a.canvas;ol.vec.Mat4.makeTransform2D(this.transform_,g.width/2,g.height/2,n/i.resolution,-n/i.resolution,-i.rotation,-i.center[0],-i.center[1]);r=new ol.render.canvas.Immediate(a,n,r,this.transform_,s);a=new ol.render.Event(e,o,r,t,a,null);o.dispatchEvent(a);r.flush()}};ol.renderer.dom.Map.prototype.getType=function(){return ol.RendererType.DOM};ol.renderer.dom.Map.prototype.renderFrame=function(e){if(goog.isNull(e))this.renderedVisible_&&(goog.style.setElementShown(this.layersPane_,!1),this.renderedVisible_=!1);else{var t;t=ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE?function(e){goog.dom.appendChild(this.layersPane_,e)}:function(e,t){goog.dom.insertChildAt(this.layersPane_,e,t)};var o=this.getMap();if(!(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE||!o.hasListener(ol.render.EventType.PRECOMPOSE)&&!o.hasListener(ol.render.EventType.POSTCOMPOSE))){var o=this.context_.canvas,r=e.pixelRatio;o.width=e.size[0]*r;o.height=e.size[1]*r}this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,e);o=e.layerStatesArray;goog.array.stableSort(o,ol.renderer.Map.sortByZIndex);var n,i,s,a,r=e.viewState.resolution;n=0;for(i=o.length;i>n;++n)a=o[n],s=a.layer,s=this.getLayerRenderer(s),goog.asserts.assertInstanceof(s,ol.renderer.dom.Layer,"renderer is an instance of ol.renderer.dom.Layer"),t.call(this,s.getTarget(),n),ol.layer.Layer.visibleAtResolution(a,r)&&a.sourceState==ol.source.State.READY?s.prepareFrame(e,a)&&s.composeFrame(e,a):s.clearFrame();t=e.layerStates;for(var g in this.getLayerRenderers())g in t||(s=this.getLayerRendererByKey(g),goog.asserts.assertInstanceof(s,ol.renderer.dom.Layer,"renderer is an instance of ol.renderer.dom.Layer"),goog.dom.removeNode(s.getTarget()));this.renderedVisible_||(goog.style.setElementShown(this.layersPane_,!0),this.renderedVisible_=!0);this.calculateMatrices2D(e);this.scheduleRemoveUnusedLayerRenderers(e);this.scheduleExpireIconCache(e);this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,e)}};goog.webgl={};goog.webgl.DEPTH_BUFFER_BIT=256;goog.webgl.STENCIL_BUFFER_BIT=1024;goog.webgl.COLOR_BUFFER_BIT=16384;goog.webgl.POINTS=0;goog.webgl.LINES=1;goog.webgl.LINE_LOOP=2;goog.webgl.LINE_STRIP=3;goog.webgl.TRIANGLES=4;goog.webgl.TRIANGLE_STRIP=5;goog.webgl.TRIANGLE_FAN=6;goog.webgl.ZERO=0;goog.webgl.ONE=1;goog.webgl.SRC_COLOR=768;goog.webgl.ONE_MINUS_SRC_COLOR=769;goog.webgl.SRC_ALPHA=770;goog.webgl.ONE_MINUS_SRC_ALPHA=771;goog.webgl.DST_ALPHA=772;goog.webgl.ONE_MINUS_DST_ALPHA=773;goog.webgl.DST_COLOR=774;goog.webgl.ONE_MINUS_DST_COLOR=775;goog.webgl.SRC_ALPHA_SATURATE=776;goog.webgl.FUNC_ADD=32774;goog.webgl.BLEND_EQUATION=32777;goog.webgl.BLEND_EQUATION_RGB=32777;goog.webgl.BLEND_EQUATION_ALPHA=34877;goog.webgl.FUNC_SUBTRACT=32778;goog.webgl.FUNC_REVERSE_SUBTRACT=32779;goog.webgl.BLEND_DST_RGB=32968;goog.webgl.BLEND_SRC_RGB=32969;goog.webgl.BLEND_DST_ALPHA=32970;goog.webgl.BLEND_SRC_ALPHA=32971;goog.webgl.CONSTANT_COLOR=32769;goog.webgl.ONE_MINUS_CONSTANT_COLOR=32770;goog.webgl.CONSTANT_ALPHA=32771;goog.webgl.ONE_MINUS_CONSTANT_ALPHA=32772;goog.webgl.BLEND_COLOR=32773;goog.webgl.ARRAY_BUFFER=34962;goog.webgl.ELEMENT_ARRAY_BUFFER=34963;goog.webgl.ARRAY_BUFFER_BINDING=34964;goog.webgl.ELEMENT_ARRAY_BUFFER_BINDING=34965;goog.webgl.STREAM_DRAW=35040;goog.webgl.STATIC_DRAW=35044;goog.webgl.DYNAMIC_DRAW=35048;goog.webgl.BUFFER_SIZE=34660;goog.webgl.BUFFER_USAGE=34661;goog.webgl.CURRENT_VERTEX_ATTRIB=34342;goog.webgl.FRONT=1028;goog.webgl.BACK=1029;goog.webgl.FRONT_AND_BACK=1032;goog.webgl.CULL_FACE=2884;goog.webgl.BLEND=3042;goog.webgl.DITHER=3024;goog.webgl.STENCIL_TEST=2960;goog.webgl.DEPTH_TEST=2929;goog.webgl.SCISSOR_TEST=3089;goog.webgl.POLYGON_OFFSET_FILL=32823;goog.webgl.SAMPLE_ALPHA_TO_COVERAGE=32926;goog.webgl.SAMPLE_COVERAGE=32928;goog.webgl.NO_ERROR=0;goog.webgl.INVALID_ENUM=1280;goog.webgl.INVALID_VALUE=1281;goog.webgl.INVALID_OPERATION=1282;goog.webgl.OUT_OF_MEMORY=1285;goog.webgl.CW=2304;goog.webgl.CCW=2305;goog.webgl.LINE_WIDTH=2849;goog.webgl.ALIASED_POINT_SIZE_RANGE=33901;goog.webgl.ALIASED_LINE_WIDTH_RANGE=33902;goog.webgl.CULL_FACE_MODE=2885;goog.webgl.FRONT_FACE=2886;goog.webgl.DEPTH_RANGE=2928;goog.webgl.DEPTH_WRITEMASK=2930;goog.webgl.DEPTH_CLEAR_VALUE=2931;goog.webgl.DEPTH_FUNC=2932;goog.webgl.STENCIL_CLEAR_VALUE=2961;goog.webgl.STENCIL_FUNC=2962;goog.webgl.STENCIL_FAIL=2964;goog.webgl.STENCIL_PASS_DEPTH_FAIL=2965;goog.webgl.STENCIL_PASS_DEPTH_PASS=2966;goog.webgl.STENCIL_REF=2967;goog.webgl.STENCIL_VALUE_MASK=2963;goog.webgl.STENCIL_WRITEMASK=2968;goog.webgl.STENCIL_BACK_FUNC=34816;goog.webgl.STENCIL_BACK_FAIL=34817;goog.webgl.STENCIL_BACK_PASS_DEPTH_FAIL=34818;goog.webgl.STENCIL_BACK_PASS_DEPTH_PASS=34819;goog.webgl.STENCIL_BACK_REF=36003;goog.webgl.STENCIL_BACK_VALUE_MASK=36004;goog.webgl.STENCIL_BACK_WRITEMASK=36005;goog.webgl.VIEWPORT=2978;goog.webgl.SCISSOR_BOX=3088;goog.webgl.COLOR_CLEAR_VALUE=3106;goog.webgl.COLOR_WRITEMASK=3107;goog.webgl.UNPACK_ALIGNMENT=3317;goog.webgl.PACK_ALIGNMENT=3333;goog.webgl.MAX_TEXTURE_SIZE=3379;goog.webgl.MAX_VIEWPORT_DIMS=3386;goog.webgl.SUBPIXEL_BITS=3408;goog.webgl.RED_BITS=3410;goog.webgl.GREEN_BITS=3411;goog.webgl.BLUE_BITS=3412;goog.webgl.ALPHA_BITS=3413;goog.webgl.DEPTH_BITS=3414;goog.webgl.STENCIL_BITS=3415;goog.webgl.POLYGON_OFFSET_UNITS=10752;goog.webgl.POLYGON_OFFSET_FACTOR=32824;goog.webgl.TEXTURE_BINDING_2D=32873;goog.webgl.SAMPLE_BUFFERS=32936;goog.webgl.SAMPLES=32937;goog.webgl.SAMPLE_COVERAGE_VALUE=32938;goog.webgl.SAMPLE_COVERAGE_INVERT=32939;goog.webgl.COMPRESSED_TEXTURE_FORMATS=34467;goog.webgl.DONT_CARE=4352;goog.webgl.FASTEST=4353;goog.webgl.NICEST=4354;goog.webgl.GENERATE_MIPMAP_HINT=33170;goog.webgl.BYTE=5120;goog.webgl.UNSIGNED_BYTE=5121;goog.webgl.SHORT=5122;goog.webgl.UNSIGNED_SHORT=5123;goog.webgl.INT=5124;goog.webgl.UNSIGNED_INT=5125;goog.webgl.FLOAT=5126;goog.webgl.DEPTH_COMPONENT=6402;goog.webgl.ALPHA=6406;goog.webgl.RGB=6407;goog.webgl.RGBA=6408;goog.webgl.LUMINANCE=6409;goog.webgl.LUMINANCE_ALPHA=6410;goog.webgl.UNSIGNED_SHORT_4_4_4_4=32819;goog.webgl.UNSIGNED_SHORT_5_5_5_1=32820;goog.webgl.UNSIGNED_SHORT_5_6_5=33635;goog.webgl.FRAGMENT_SHADER=35632;goog.webgl.VERTEX_SHADER=35633;goog.webgl.MAX_VERTEX_ATTRIBS=34921;goog.webgl.MAX_VERTEX_UNIFORM_VECTORS=36347;goog.webgl.MAX_VARYING_VECTORS=36348;goog.webgl.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661;goog.webgl.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660;goog.webgl.MAX_TEXTURE_IMAGE_UNITS=34930;goog.webgl.MAX_FRAGMENT_UNIFORM_VECTORS=36349;goog.webgl.SHADER_TYPE=35663;goog.webgl.DELETE_STATUS=35712;goog.webgl.LINK_STATUS=35714;goog.webgl.VALIDATE_STATUS=35715;goog.webgl.ATTACHED_SHADERS=35717;goog.webgl.ACTIVE_UNIFORMS=35718;goog.webgl.ACTIVE_ATTRIBUTES=35721;goog.webgl.SHADING_LANGUAGE_VERSION=35724;goog.webgl.CURRENT_PROGRAM=35725;goog.webgl.NEVER=512;goog.webgl.LESS=513;goog.webgl.EQUAL=514;goog.webgl.LEQUAL=515;goog.webgl.GREATER=516;goog.webgl.NOTEQUAL=517;goog.webgl.GEQUAL=518;goog.webgl.ALWAYS=519;goog.webgl.KEEP=7680;goog.webgl.REPLACE=7681;goog.webgl.INCR=7682;goog.webgl.DECR=7683;goog.webgl.INVERT=5386;goog.webgl.INCR_WRAP=34055;goog.webgl.DECR_WRAP=34056;goog.webgl.VENDOR=7936;goog.webgl.RENDERER=7937;goog.webgl.VERSION=7938;goog.webgl.NEAREST=9728;goog.webgl.LINEAR=9729;goog.webgl.NEAREST_MIPMAP_NEAREST=9984;goog.webgl.LINEAR_MIPMAP_NEAREST=9985;goog.webgl.NEAREST_MIPMAP_LINEAR=9986;goog.webgl.LINEAR_MIPMAP_LINEAR=9987;goog.webgl.TEXTURE_MAG_FILTER=10240;goog.webgl.TEXTURE_MIN_FILTER=10241;goog.webgl.TEXTURE_WRAP_S=10242;goog.webgl.TEXTURE_WRAP_T=10243;goog.webgl.TEXTURE_2D=3553;goog.webgl.TEXTURE=5890;goog.webgl.TEXTURE_CUBE_MAP=34067;goog.webgl.TEXTURE_BINDING_CUBE_MAP=34068;goog.webgl.TEXTURE_CUBE_MAP_POSITIVE_X=34069;goog.webgl.TEXTURE_CUBE_MAP_NEGATIVE_X=34070;goog.webgl.TEXTURE_CUBE_MAP_POSITIVE_Y=34071;goog.webgl.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072;goog.webgl.TEXTURE_CUBE_MAP_POSITIVE_Z=34073;goog.webgl.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074;goog.webgl.MAX_CUBE_MAP_TEXTURE_SIZE=34076;goog.webgl.TEXTURE0=33984;goog.webgl.TEXTURE1=33985;goog.webgl.TEXTURE2=33986;goog.webgl.TEXTURE3=33987;goog.webgl.TEXTURE4=33988;goog.webgl.TEXTURE5=33989;goog.webgl.TEXTURE6=33990;goog.webgl.TEXTURE7=33991;goog.webgl.TEXTURE8=33992;goog.webgl.TEXTURE9=33993;goog.webgl.TEXTURE10=33994;goog.webgl.TEXTURE11=33995;goog.webgl.TEXTURE12=33996;goog.webgl.TEXTURE13=33997;goog.webgl.TEXTURE14=33998;goog.webgl.TEXTURE15=33999;goog.webgl.TEXTURE16=34e3;goog.webgl.TEXTURE17=34001;goog.webgl.TEXTURE18=34002;goog.webgl.TEXTURE19=34003;goog.webgl.TEXTURE20=34004;goog.webgl.TEXTURE21=34005;goog.webgl.TEXTURE22=34006;goog.webgl.TEXTURE23=34007;goog.webgl.TEXTURE24=34008;goog.webgl.TEXTURE25=34009;goog.webgl.TEXTURE26=34010;goog.webgl.TEXTURE27=34011;goog.webgl.TEXTURE28=34012;goog.webgl.TEXTURE29=34013;goog.webgl.TEXTURE30=34014;goog.webgl.TEXTURE31=34015;goog.webgl.ACTIVE_TEXTURE=34016;goog.webgl.REPEAT=10497;goog.webgl.CLAMP_TO_EDGE=33071;goog.webgl.MIRRORED_REPEAT=33648;goog.webgl.FLOAT_VEC2=35664;goog.webgl.FLOAT_VEC3=35665;goog.webgl.FLOAT_VEC4=35666;goog.webgl.INT_VEC2=35667;goog.webgl.INT_VEC3=35668;goog.webgl.INT_VEC4=35669;goog.webgl.BOOL=35670;goog.webgl.BOOL_VEC2=35671;goog.webgl.BOOL_VEC3=35672;goog.webgl.BOOL_VEC4=35673;goog.webgl.FLOAT_MAT2=35674;goog.webgl.FLOAT_MAT3=35675;goog.webgl.FLOAT_MAT4=35676;goog.webgl.SAMPLER_2D=35678;goog.webgl.SAMPLER_CUBE=35680;goog.webgl.VERTEX_ATTRIB_ARRAY_ENABLED=34338;goog.webgl.VERTEX_ATTRIB_ARRAY_SIZE=34339;goog.webgl.VERTEX_ATTRIB_ARRAY_STRIDE=34340;goog.webgl.VERTEX_ATTRIB_ARRAY_TYPE=34341;goog.webgl.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922;goog.webgl.VERTEX_ATTRIB_ARRAY_POINTER=34373;goog.webgl.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975;goog.webgl.COMPILE_STATUS=35713;goog.webgl.LOW_FLOAT=36336;goog.webgl.MEDIUM_FLOAT=36337;goog.webgl.HIGH_FLOAT=36338;goog.webgl.LOW_INT=36339;goog.webgl.MEDIUM_INT=36340;goog.webgl.HIGH_INT=36341;goog.webgl.FRAMEBUFFER=36160;goog.webgl.RENDERBUFFER=36161;goog.webgl.RGBA4=32854;goog.webgl.RGB5_A1=32855;goog.webgl.RGB565=36194;goog.webgl.DEPTH_COMPONENT16=33189;goog.webgl.STENCIL_INDEX=6401;goog.webgl.STENCIL_INDEX8=36168;goog.webgl.DEPTH_STENCIL=34041;goog.webgl.RENDERBUFFER_WIDTH=36162;goog.webgl.RENDERBUFFER_HEIGHT=36163;goog.webgl.RENDERBUFFER_INTERNAL_FORMAT=36164;goog.webgl.RENDERBUFFER_RED_SIZE=36176;goog.webgl.RENDERBUFFER_GREEN_SIZE=36177;goog.webgl.RENDERBUFFER_BLUE_SIZE=36178;goog.webgl.RENDERBUFFER_ALPHA_SIZE=36179;goog.webgl.RENDERBUFFER_DEPTH_SIZE=36180;goog.webgl.RENDERBUFFER_STENCIL_SIZE=36181;goog.webgl.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048;goog.webgl.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049;goog.webgl.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050;goog.webgl.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051;goog.webgl.COLOR_ATTACHMENT0=36064;goog.webgl.DEPTH_ATTACHMENT=36096;goog.webgl.STENCIL_ATTACHMENT=36128;goog.webgl.DEPTH_STENCIL_ATTACHMENT=33306;goog.webgl.NONE=0;goog.webgl.FRAMEBUFFER_COMPLETE=36053;goog.webgl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054;goog.webgl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055;goog.webgl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057;goog.webgl.FRAMEBUFFER_UNSUPPORTED=36061;goog.webgl.FRAMEBUFFER_BINDING=36006;goog.webgl.RENDERBUFFER_BINDING=36007;goog.webgl.MAX_RENDERBUFFER_SIZE=34024;goog.webgl.INVALID_FRAMEBUFFER_OPERATION=1286;goog.webgl.UNPACK_FLIP_Y_WEBGL=37440;goog.webgl.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441;goog.webgl.CONTEXT_LOST_WEBGL=37442;goog.webgl.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443;goog.webgl.BROWSER_DEFAULT_WEBGL=37444;goog.webgl.HALF_FLOAT_OES=36193;goog.webgl.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723;goog.webgl.VERTEX_ARRAY_BINDING_OES=34229;goog.webgl.UNMASKED_VENDOR_WEBGL=37445;goog.webgl.UNMASKED_RENDERER_WEBGL=37446;goog.webgl.COMPRESSED_RGB_S3TC_DXT1_EXT=33776;goog.webgl.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777;goog.webgl.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778;goog.webgl.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779;goog.webgl.TEXTURE_MAX_ANISOTROPY_EXT=34046;goog.webgl.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047;ol.webgl.Fragment={};ol.webgl.Vertex={};ol.webgl.shader={};ol.webgl.Shader=function(e){this.source_=e};ol.webgl.Shader.prototype.getSource=function(){return this.source_};ol.webgl.Shader.prototype.isAnimated=goog.functions.FALSE;ol.webgl.shader.Fragment=function(e){ol.webgl.Shader.call(this,e)};goog.inherits(ol.webgl.shader.Fragment,ol.webgl.Shader);ol.webgl.shader.Fragment.prototype.getType=function(){return goog.webgl.FRAGMENT_SHADER};ol.webgl.shader.Vertex=function(e){ol.webgl.Shader.call(this,e)};goog.inherits(ol.webgl.shader.Vertex,ol.webgl.Shader);ol.webgl.shader.Vertex.prototype.getType=function(){return goog.webgl.VERTEX_SHADER};ol.render.webgl={};ol.render.webgl.imagereplay={};ol.render.webgl.imagereplay.shader={};
ol.render.webgl.imagereplay.shader.Color={};ol.render.webgl.imagereplay.shader.ColorFragment=function(){ol.webgl.shader.Fragment.call(this,ol.render.webgl.imagereplay.shader.ColorFragment.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.ColorFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.ColorFragment);ol.render.webgl.imagereplay.shader.ColorFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\n// @see https://svn.webkit.org/repository/webkit/trunk/Source/WebCore/platform/graphics/filters/skia/SkiaImageFilterBuilder.cpp\nuniform mat4 u_colorMatrix;\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n  gl_FragColor.rgb = (u_colorMatrix * vec4(texColor.rgb, 1.)).rgb;\n}\n";ol.render.webgl.imagereplay.shader.ColorFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;varying float b;uniform mat4 k;uniform float l;uniform sampler2D m;void main(void){vec4 texColor=texture2D(m,a);float alpha=texColor.a*b*l;if(alpha==0.0){discard;}gl_FragColor.a=alpha;gl_FragColor.rgb=(k*vec4(texColor.rgb,1.)).rgb;}";ol.render.webgl.imagereplay.shader.ColorFragment.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.ColorFragment.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.ColorFragment.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.ColorVertex=function(){ol.webgl.shader.Vertex.call(this,ol.render.webgl.imagereplay.shader.ColorVertex.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.ColorVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.ColorVertex);ol.render.webgl.imagereplay.shader.ColorVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0., 0.);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n";ol.render.webgl.imagereplay.shader.ColorVertex.OPTIMIZED_SOURCE="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.,0.);gl_Position=h*vec4(c,0.,1.)+offsets;a=d;b=f;}";ol.render.webgl.imagereplay.shader.ColorVertex.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.ColorVertex.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.ColorVertex.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.Color.Locations=function(e,t){this.u_colorMatrix=e.getUniformLocation(t,goog.DEBUG?"u_colorMatrix":"k");this.u_image=e.getUniformLocation(t,goog.DEBUG?"u_image":"m");this.u_offsetRotateMatrix=e.getUniformLocation(t,goog.DEBUG?"u_offsetRotateMatrix":"j");this.u_offsetScaleMatrix=e.getUniformLocation(t,goog.DEBUG?"u_offsetScaleMatrix":"i");this.u_opacity=e.getUniformLocation(t,goog.DEBUG?"u_opacity":"l");this.u_projectionMatrix=e.getUniformLocation(t,goog.DEBUG?"u_projectionMatrix":"h");this.a_offsets=e.getAttribLocation(t,goog.DEBUG?"a_offsets":"e");this.a_opacity=e.getAttribLocation(t,goog.DEBUG?"a_opacity":"f");this.a_position=e.getAttribLocation(t,goog.DEBUG?"a_position":"c");this.a_rotateWithView=e.getAttribLocation(t,goog.DEBUG?"a_rotateWithView":"g");this.a_texCoord=e.getAttribLocation(t,goog.DEBUG?"a_texCoord":"d")};ol.render.webgl.imagereplay.shader.Default={};ol.render.webgl.imagereplay.shader.DefaultFragment=function(){ol.webgl.shader.Fragment.call(this,ol.render.webgl.imagereplay.shader.DefaultFragment.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.DefaultFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.DefaultFragment);ol.render.webgl.imagereplay.shader.DefaultFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n";ol.render.webgl.imagereplay.shader.DefaultFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}";ol.render.webgl.imagereplay.shader.DefaultFragment.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.DefaultFragment.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.DefaultFragment.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.DefaultVertex=function(){ol.webgl.shader.Vertex.call(this,ol.render.webgl.imagereplay.shader.DefaultVertex.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.DefaultVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.DefaultVertex);ol.render.webgl.imagereplay.shader.DefaultVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0., 0.);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n";ol.render.webgl.imagereplay.shader.DefaultVertex.OPTIMIZED_SOURCE="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.,0.);gl_Position=h*vec4(c,0.,1.)+offsets;a=d;b=f;}";ol.render.webgl.imagereplay.shader.DefaultVertex.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.DefaultVertex.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.DefaultVertex.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.Default.Locations=function(e,t){this.u_image=e.getUniformLocation(t,goog.DEBUG?"u_image":"l");this.u_offsetRotateMatrix=e.getUniformLocation(t,goog.DEBUG?"u_offsetRotateMatrix":"j");this.u_offsetScaleMatrix=e.getUniformLocation(t,goog.DEBUG?"u_offsetScaleMatrix":"i");this.u_opacity=e.getUniformLocation(t,goog.DEBUG?"u_opacity":"k");this.u_projectionMatrix=e.getUniformLocation(t,goog.DEBUG?"u_projectionMatrix":"h");this.a_offsets=e.getAttribLocation(t,goog.DEBUG?"a_offsets":"e");this.a_opacity=e.getAttribLocation(t,goog.DEBUG?"a_opacity":"f");this.a_position=e.getAttribLocation(t,goog.DEBUG?"a_position":"c");this.a_rotateWithView=e.getAttribLocation(t,goog.DEBUG?"a_rotateWithView":"g");this.a_texCoord=e.getAttribLocation(t,goog.DEBUG?"a_texCoord":"d")};ol.webgl.BufferUsage={STATIC_DRAW:goog.webgl.STATIC_DRAW,STREAM_DRAW:goog.webgl.STREAM_DRAW,DYNAMIC_DRAW:goog.webgl.DYNAMIC_DRAW};ol.webgl.Buffer=function(e,t){this.arr_=goog.isDef(e)?e:[];this.usage_=goog.isDef(t)?t:ol.webgl.BufferUsage.STATIC_DRAW};ol.webgl.Buffer.prototype.getArray=function(){return this.arr_};ol.webgl.Buffer.prototype.getUsage=function(){return this.usage_};ol.webgl.Context=function(e,t){this.canvas_=e;this.gl_=t;this.bufferCache_={};this.shaderCache_={};this.programCache_={};this.hitDetectionRenderbuffer_=this.hitDetectionTexture_=this.hitDetectionFramebuffer_=this.currentProgram_=null;if(this.hasOESElementIndexUint=goog.array.contains(ol.WEBGL_EXTENSIONS,"OES_element_index_uint")){var o=t.getExtension("OES_element_index_uint");goog.asserts.assert(!goog.isNull(o),'Failed to get extension "OES_element_index_uint"')}goog.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.LOST,this.handleWebGLContextLost,!1,this);goog.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.RESTORED,this.handleWebGLContextRestored,!1,this)};ol.webgl.Context.prototype.bindBuffer=function(e,t){var o=this.getGL(),r=t.getArray(),n=goog.getUid(t);if(n in this.bufferCache_)o.bindBuffer(e,this.bufferCache_[n].buffer);else{var i=o.createBuffer();o.bindBuffer(e,i);goog.asserts.assert(e==goog.webgl.ARRAY_BUFFER||e==goog.webgl.ELEMENT_ARRAY_BUFFER,"target is supposed to be an ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER");var s;e==goog.webgl.ARRAY_BUFFER?s=new Float32Array(r):e==goog.webgl.ELEMENT_ARRAY_BUFFER?s=this.hasOESElementIndexUint?new Uint32Array(r):new Uint16Array(r):goog.asserts.fail();o.bufferData(e,s,t.getUsage());this.bufferCache_[n]={buf:t,buffer:i}}};ol.webgl.Context.prototype.deleteBuffer=function(e){var t=this.getGL();e=goog.getUid(e);goog.asserts.assert(e in this.bufferCache_,"attempted to delete uncached buffer");var o=this.bufferCache_[e];t.isContextLost()||t.deleteBuffer(o.buffer);delete this.bufferCache_[e]};ol.webgl.Context.prototype.disposeInternal=function(){var e=this.getGL();e.isContextLost()||(goog.object.forEach(this.bufferCache_,function(t){e.deleteBuffer(t.buffer)}),goog.object.forEach(this.programCache_,function(t){e.deleteProgram(t)}),goog.object.forEach(this.shaderCache_,function(t){e.deleteShader(t)}),e.deleteFramebuffer(this.hitDetectionFramebuffer_),e.deleteRenderbuffer(this.hitDetectionRenderbuffer_),e.deleteTexture(this.hitDetectionTexture_))};ol.webgl.Context.prototype.getCanvas=function(){return this.canvas_};ol.webgl.Context.prototype.getGL=function(){return this.gl_};ol.webgl.Context.prototype.getHitDetectionFramebuffer=function(){goog.isNull(this.hitDetectionFramebuffer_)&&this.initHitDetectionFramebuffer_();return this.hitDetectionFramebuffer_};ol.webgl.Context.prototype.getShader=function(e){var t=goog.getUid(e);if(t in this.shaderCache_)return this.shaderCache_[t];var o=this.getGL(),r=o.createShader(e.getType());o.shaderSource(r,e.getSource());o.compileShader(r);goog.DEBUG&&(o.getShaderParameter(r,goog.webgl.COMPILE_STATUS)||o.isContextLost()||goog.log.error(this.logger_,o.getShaderInfoLog(r)));goog.asserts.assert(o.getShaderParameter(r,goog.webgl.COMPILE_STATUS)||o.isContextLost(),"illegal state, shader not compiled or context lost");return this.shaderCache_[t]=r};ol.webgl.Context.prototype.getProgram=function(e,t){var o=goog.getUid(e)+"/"+goog.getUid(t);if(o in this.programCache_)return this.programCache_[o];var r=this.getGL(),n=r.createProgram();r.attachShader(n,this.getShader(e));r.attachShader(n,this.getShader(t));r.linkProgram(n);goog.DEBUG&&(r.getProgramParameter(n,goog.webgl.LINK_STATUS)||r.isContextLost()||goog.log.error(this.logger_,r.getProgramInfoLog(n)));goog.asserts.assert(r.getProgramParameter(n,goog.webgl.LINK_STATUS)||r.isContextLost(),"illegal state, shader not linked or context lost");return this.programCache_[o]=n};ol.webgl.Context.prototype.handleWebGLContextLost=function(){goog.object.clear(this.bufferCache_);goog.object.clear(this.shaderCache_);goog.object.clear(this.programCache_);this.hitDetectionRenderbuffer_=this.hitDetectionTexture_=this.hitDetectionFramebuffer_=this.currentProgram_=null};ol.webgl.Context.prototype.handleWebGLContextRestored=function(){};ol.webgl.Context.prototype.initHitDetectionFramebuffer_=function(){var e=this.gl_,t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var o=ol.webgl.Context.createEmptyTexture(e,1,1),r=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,r);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,1,1);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,r);e.bindTexture(e.TEXTURE_2D,null);e.bindRenderbuffer(e.RENDERBUFFER,null);e.bindFramebuffer(e.FRAMEBUFFER,null);this.hitDetectionFramebuffer_=t;this.hitDetectionTexture_=o;this.hitDetectionRenderbuffer_=r};ol.webgl.Context.prototype.useProgram=function(e){if(e==this.currentProgram_)return!1;this.getGL().useProgram(e);this.currentProgram_=e;return!0};ol.webgl.Context.prototype.logger_=goog.log.getLogger("ol.webgl.Context");ol.webgl.Context.createTexture_=function(e,t,o){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);goog.isDef(t)&&e.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_S,t);goog.isDef(o)&&e.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_T,o);return r};ol.webgl.Context.createEmptyTexture=function(e,t,o,r,n){r=ol.webgl.Context.createTexture_(e,r,n);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,o,0,e.RGBA,e.UNSIGNED_BYTE,null);return r};ol.webgl.Context.createTexture=function(e,t,o,r){o=ol.webgl.Context.createTexture_(e,o,r);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);return o};ol.render.webgl.ImageReplay=function(e,t){ol.render.VectorContext.call(this);this.anchorY_=this.anchorX_=void 0;this.colorMatrix_=new ol.color.Matrix;this.origin_=ol.extent.getCenter(t);this.groupIndices_=[];this.hitDetectionGroupIndices_=[];this.height_=void 0;this.images_=[];this.hitDetectionImages_=[];this.imageWidth_=this.imageHeight_=void 0;this.indices_=[];this.defaultLocations_=this.colorLocations_=this.indicesBuffer_=null;this.opacity_=void 0;this.offsetRotateMatrix_=goog.vec.Mat4.createNumberIdentity();this.offsetScaleMatrix_=goog.vec.Mat4.createNumberIdentity();this.originY_=this.originX_=void 0;this.projectionMatrix_=goog.vec.Mat4.createNumberIdentity();this.scale_=this.rotation_=this.rotateWithView_=void 0;this.textures_=[];this.hitDetectionTextures_=[];this.vertices_=[];this.verticesBuffer_=null;this.startIndices_=[];this.startIndicesFeature_=[];this.width_=void 0};goog.inherits(ol.render.webgl.ImageReplay,ol.render.VectorContext);ol.render.webgl.ImageReplay.prototype.getDeleteResourcesFunction=function(e){goog.asserts.assert(!goog.isNull(this.verticesBuffer_),"verticesBuffer must not be null");goog.asserts.assert(!goog.isNull(this.indicesBuffer_),"indicesBuffer must not be null");var t=this.verticesBuffer_,o=this.indicesBuffer_,r=this.textures_,n=this.hitDetectionTextures_,i=e.getGL();return function(){if(!i.isContextLost()){var s,a;s=0;for(a=r.length;a>s;++s)i.deleteTexture(r[s]);s=0;for(a=n.length;a>s;++s)i.deleteTexture(n[s])}e.deleteBuffer(t);e.deleteBuffer(o)}};ol.render.webgl.ImageReplay.prototype.drawCoordinates_=function(e,t,o,r){goog.asserts.assert(goog.isDef(this.anchorX_),"anchorX is defined");goog.asserts.assert(goog.isDef(this.anchorY_),"anchorY is defined");goog.asserts.assert(goog.isDef(this.height_),"height is defined");goog.asserts.assert(goog.isDef(this.imageHeight_),"imageHeight is defined");goog.asserts.assert(goog.isDef(this.imageWidth_),"imageWidth is defined");goog.asserts.assert(goog.isDef(this.opacity_),"opacity is defined");goog.asserts.assert(goog.isDef(this.originX_),"originX is defined");goog.asserts.assert(goog.isDef(this.originY_),"originY is defined");goog.asserts.assert(goog.isDef(this.rotateWithView_),"rotateWithView is defined");goog.asserts.assert(goog.isDef(this.rotation_),"rotation is defined");goog.asserts.assert(goog.isDef(this.scale_),"scale is defined");goog.asserts.assert(goog.isDef(this.width_),"width is defined");for(var n,i,s,a,g,l=this.anchorX_,u=this.anchorY_,c=this.height_,h=this.imageHeight_,d=this.imageWidth_,m=this.opacity_,p=this.originX_,f=this.originY_,_=this.rotateWithView_?1:0,y=this.rotation_,E=this.scale_,S=this.width_,v=Math.cos(y),y=Math.sin(y),T=this.indices_.length,b=this.vertices_.length;o>t;t+=r)a=e[t]-this.origin_[0],g=e[t+1]-this.origin_[1],n=b/8,i=-E*l,s=-E*(c-u),this.vertices_[b++]=a,this.vertices_[b++]=g,this.vertices_[b++]=i*v-s*y,this.vertices_[b++]=i*y+s*v,this.vertices_[b++]=p/d,this.vertices_[b++]=(f+c)/h,this.vertices_[b++]=m,this.vertices_[b++]=_,i=E*(S-l),s=-E*(c-u),this.vertices_[b++]=a,this.vertices_[b++]=g,this.vertices_[b++]=i*v-s*y,this.vertices_[b++]=i*y+s*v,this.vertices_[b++]=(p+S)/d,this.vertices_[b++]=(f+c)/h,this.vertices_[b++]=m,this.vertices_[b++]=_,i=E*(S-l),s=E*u,this.vertices_[b++]=a,this.vertices_[b++]=g,this.vertices_[b++]=i*v-s*y,this.vertices_[b++]=i*y+s*v,this.vertices_[b++]=(p+S)/d,this.vertices_[b++]=f/h,this.vertices_[b++]=m,this.vertices_[b++]=_,i=-E*l,s=E*u,this.vertices_[b++]=a,this.vertices_[b++]=g,this.vertices_[b++]=i*v-s*y,this.vertices_[b++]=i*y+s*v,this.vertices_[b++]=p/d,this.vertices_[b++]=f/h,this.vertices_[b++]=m,this.vertices_[b++]=_,this.indices_[T++]=n,this.indices_[T++]=n+1,this.indices_[T++]=n+2,this.indices_[T++]=n,this.indices_[T++]=n+2,this.indices_[T++]=n+3;return b};ol.render.webgl.ImageReplay.prototype.drawMultiPointGeometry=function(e,t){this.startIndices_.push(this.indices_.length);this.startIndicesFeature_.push(t);var o=e.getFlatCoordinates(),r=e.getStride();this.drawCoordinates_(o,0,o.length,r)};ol.render.webgl.ImageReplay.prototype.drawPointGeometry=function(e,t){this.startIndices_.push(this.indices_.length);this.startIndicesFeature_.push(t);var o=e.getFlatCoordinates(),r=e.getStride();this.drawCoordinates_(o,0,o.length,r)};ol.render.webgl.ImageReplay.prototype.finish=function(e){var t=e.getGL();this.groupIndices_.push(this.indices_.length);goog.asserts.assert(this.images_.length===this.groupIndices_.length,"number of images and groupIndices match");this.hitDetectionGroupIndices_.push(this.indices_.length);goog.asserts.assert(this.hitDetectionImages_.length===this.hitDetectionGroupIndices_.length,"number of hitDetectionImages and hitDetectionGroupIndices match");this.verticesBuffer_=new ol.webgl.Buffer(this.vertices_);e.bindBuffer(goog.webgl.ARRAY_BUFFER,this.verticesBuffer_);var o=this.indices_;goog.asserts.assert(o[o.length-1]<Math.pow(2,e.hasOESElementIndexUint?32:16),'Too large element index detected [%s] (OES_element_index_uint "%s")',o[o.length-1],e.hasOESElementIndexUint);this.indicesBuffer_=new ol.webgl.Buffer(o);e.bindBuffer(goog.webgl.ELEMENT_ARRAY_BUFFER,this.indicesBuffer_);e={};this.createTextures_(this.textures_,this.images_,e,t);goog.asserts.assert(this.textures_.length===this.groupIndices_.length,"number of textures and groupIndices match");this.createTextures_(this.hitDetectionTextures_,this.hitDetectionImages_,e,t);goog.asserts.assert(this.hitDetectionTextures_.length===this.hitDetectionGroupIndices_.length,"number of hitDetectionTextures and hitDetectionGroupIndices match");this.height_=this.anchorY_=this.anchorX_=void 0;this.hitDetectionImages_=this.images_=null;this.imageWidth_=this.imageHeight_=void 0;this.indices_=null;this.scale_=this.rotation_=this.rotateWithView_=this.originY_=this.originX_=this.opacity_=void 0;this.vertices_=null;this.width_=void 0};ol.render.webgl.ImageReplay.prototype.createTextures_=function(e,t,o,r){goog.asserts.assert(0===e.length,"upon creation, textures is empty");var n,i,s,a=t.length;for(s=0;a>s;++s)n=t[s],i=goog.getUid(n).toString(),goog.object.containsKey(o,i)?n=o[i]:(n=ol.webgl.Context.createTexture(r,n,goog.webgl.CLAMP_TO_EDGE,goog.webgl.CLAMP_TO_EDGE),o[i]=n),e[s]=n};ol.render.webgl.ImageReplay.prototype.replay=function(e,t,o,r,n,i,s,a,g,l,u,c,h,d,m){i=e.getGL();goog.asserts.assert(!goog.isNull(this.verticesBuffer_),"verticesBuffer must not be null");e.bindBuffer(goog.webgl.ARRAY_BUFFER,this.verticesBuffer_);goog.asserts.assert(!goog.isNull(this.indicesBuffer_),"indecesBuffer must not be null");e.bindBuffer(goog.webgl.ELEMENT_ARRAY_BUFFER,this.indicesBuffer_);var p,f,_=a||1!=g||l||1!=u;_?(p=ol.render.webgl.imagereplay.shader.ColorFragment.getInstance(),f=ol.render.webgl.imagereplay.shader.ColorVertex.getInstance()):(p=ol.render.webgl.imagereplay.shader.DefaultFragment.getInstance(),f=ol.render.webgl.imagereplay.shader.DefaultVertex.getInstance());f=e.getProgram(p,f);_?goog.isNull(this.colorLocations_)?this.colorLocations_=p=new ol.render.webgl.imagereplay.shader.Color.Locations(i,f):p=this.colorLocations_:goog.isNull(this.defaultLocations_)?this.defaultLocations_=p=new ol.render.webgl.imagereplay.shader.Default.Locations(i,f):p=this.defaultLocations_;e.useProgram(f);i.enableVertexAttribArray(p.a_position);i.vertexAttribPointer(p.a_position,2,goog.webgl.FLOAT,!1,32,0);i.enableVertexAttribArray(p.a_offsets);i.vertexAttribPointer(p.a_offsets,2,goog.webgl.FLOAT,!1,32,8);i.enableVertexAttribArray(p.a_texCoord);i.vertexAttribPointer(p.a_texCoord,2,goog.webgl.FLOAT,!1,32,16);i.enableVertexAttribArray(p.a_opacity);i.vertexAttribPointer(p.a_opacity,1,goog.webgl.FLOAT,!1,32,24);i.enableVertexAttribArray(p.a_rotateWithView);i.vertexAttribPointer(p.a_rotateWithView,1,goog.webgl.FLOAT,!1,32,28);f=this.projectionMatrix_;ol.vec.Mat4.makeTransform2D(f,0,0,2/(o*n[0]),2/(o*n[1]),-r,-(t[0]-this.origin_[0]),-(t[1]-this.origin_[1]));t=this.offsetScaleMatrix_;goog.vec.Mat4.makeScale(t,2/n[0],2/n[1],1);n=this.offsetRotateMatrix_;goog.vec.Mat4.makeIdentity(n);0!==r&&goog.vec.Mat4.rotateZ(n,-r);i.uniformMatrix4fv(p.u_projectionMatrix,!1,f);i.uniformMatrix4fv(p.u_offsetScaleMatrix,!1,t);i.uniformMatrix4fv(p.u_offsetRotateMatrix,!1,n);i.uniform1f(p.u_opacity,s);_&&i.uniformMatrix4fv(p.u_colorMatrix,!1,this.colorMatrix_.getMatrix(a,g,l,u));var y;goog.isDef(h)?y=this.drawHitDetectionReplay_(i,e,c,h,d,m):this.drawReplay_(i,e,c,this.textures_,this.groupIndices_);i.disableVertexAttribArray(p.a_position);i.disableVertexAttribArray(p.a_offsets);i.disableVertexAttribArray(p.a_texCoord);i.disableVertexAttribArray(p.a_opacity);i.disableVertexAttribArray(p.a_rotateWithView);return y};ol.render.webgl.ImageReplay.prototype.drawReplay_=function(e,t,o,r,n){goog.asserts.assert(r.length===n.length,"number of textures and groupIndeces match");var i=t.hasOESElementIndexUint?goog.webgl.UNSIGNED_INT:goog.webgl.UNSIGNED_SHORT;t=t.hasOESElementIndexUint?4:2;if(goog.object.isEmpty(o)){var s,a;o=0;s=r.length;for(a=0;s>o;++o){e.bindTexture(goog.webgl.TEXTURE_2D,r[o]);var g=n[o];this.drawElements_(e,a,g,i,t);a=g}}else this.drawReplaySkipping_(e,o,r,n,i,t)};ol.render.webgl.ImageReplay.prototype.drawReplaySkipping_=function(e,t,o,r,n,i){var s,a,g=0;s=0;for(a=o.length;a>s;++s){e.bindTexture(goog.webgl.TEXTURE_2D,o[s]);for(var l=s>0?r[s-1]:0,u=r[s],c=l;g<this.startIndices_.length&&this.startIndices_[g]<=u;){var h=goog.getUid(this.startIndicesFeature_[g]).toString();goog.isDef(t[h])?(c!==l&&this.drawElements_(e,c,l,n,i),l=c=g===this.startIndices_.length-1?u:this.startIndices_[g+1]):l=g===this.startIndices_.length-1?u:this.startIndices_[g+1];g++}c!==l&&this.drawElements_(e,c,l,n,i)}};ol.render.webgl.ImageReplay.prototype.drawElements_=function(e,t,o,r,n){e.drawElements(goog.webgl.TRIANGLES,o-t,r,t*n)};ol.render.webgl.ImageReplay.prototype.drawHitDetectionReplay_=function(e,t,o,r,n,i){return n?this.drawHitDetectionReplayOneByOne_(e,t,o,r,i):this.drawHitDetectionReplayAll_(e,t,o,r)};ol.render.webgl.ImageReplay.prototype.drawHitDetectionReplayAll_=function(e,t,o,r){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);this.drawReplay_(e,t,o,this.hitDetectionTextures_,this.hitDetectionGroupIndices_);return(e=r(null))?e:void 0};ol.render.webgl.ImageReplay.prototype.drawHitDetectionReplayOneByOne_=function(e,t,o,r,n){goog.asserts.assert(this.hitDetectionTextures_.length===this.hitDetectionGroupIndices_.length,"number of hitDetectionTextures and hitDetectionGroupIndices match");var i=t.hasOESElementIndexUint?goog.webgl.UNSIGNED_INT:goog.webgl.UNSIGNED_SHORT;t=t.hasOESElementIndexUint?4:2;var s,a,g,l,u,c,h=this.startIndices_.length-1;for(s=this.hitDetectionTextures_.length-1;s>=0;--s)for(e.bindTexture(goog.webgl.TEXTURE_2D,this.hitDetectionTextures_[s]),a=s>0?this.hitDetectionGroupIndices_[s-1]:0,l=this.hitDetectionGroupIndices_[s];h>=0&&this.startIndices_[h]>=a;){g=this.startIndices_[h];u=this.startIndicesFeature_[h];c=goog.getUid(u).toString();if(!goog.isDef(o[c])&&goog.isDefAndNotNull(u.getGeometry())&&(!goog.isDef(n)||ol.extent.intersects(n,u.getGeometry().getExtent()))&&(e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawElements_(e,g,l,i,t),l=r(u)))return l;l=g;h--}};ol.render.webgl.ImageReplay.prototype.setImageStyle=function(e){var t=e.getAnchor(),o=e.getImage(1),r=e.getImageSize(),n=e.getHitDetectionImage(1),i=e.getHitDetectionImageSize(),s=e.getOpacity(),a=e.getOrigin(),g=e.getRotateWithView(),l=e.getRotation(),u=e.getSize();e=e.getScale();goog.asserts.assert(!goog.isNull(t),"imageStyle anchor is not null");goog.asserts.assert(!goog.isNull(o),"imageStyle image is not null");goog.asserts.assert(!goog.isNull(r),"imageStyle imageSize is not null");goog.asserts.assert(!goog.isNull(n),"imageStyle hitDetectionImage is not null");goog.asserts.assert(!goog.isNull(i),"imageStyle hitDetectionImageSize is not null");goog.asserts.assert(goog.isDef(s),"imageStyle opacity is defined");goog.asserts.assert(!goog.isNull(a),"imageStyle origin is not null");goog.asserts.assert(goog.isDef(g),"imageStyle rotateWithView is defined");goog.asserts.assert(goog.isDef(l),"imageStyle rotation is defined");goog.asserts.assert(!goog.isNull(u),"imageStyle size is not null");goog.asserts.assert(goog.isDef(e),"imageStyle scale is defined");0===this.images_.length?this.images_.push(o):(i=this.images_[this.images_.length-1],goog.getUid(i)!=goog.getUid(o)&&(this.groupIndices_.push(this.indices_.length),goog.asserts.assert(this.groupIndices_.length===this.images_.length,"number of groupIndices and images match"),this.images_.push(o)));0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(n):(i=this.hitDetectionImages_[this.hitDetectionImages_.length-1],goog.getUid(i)!=goog.getUid(n)&&(this.hitDetectionGroupIndices_.push(this.indices_.length),goog.asserts.assert(this.hitDetectionGroupIndices_.length===this.hitDetectionImages_.length,"number of hitDetectionGroupIndices and hitDetectionImages match"),this.hitDetectionImages_.push(n)));this.anchorX_=t[0];this.anchorY_=t[1];this.height_=u[1];this.imageHeight_=r[1];this.imageWidth_=r[0];this.opacity_=s;this.originX_=a[0];this.originY_=a[1];this.rotation_=l;this.rotateWithView_=g;this.scale_=e;this.width_=u[0]};ol.render.webgl.ReplayGroup=function(e,t,o){this.maxExtent_=t;this.tolerance_=e;this.renderBuffer_=o;this.replays_={}};ol.render.webgl.ReplayGroup.prototype.getDeleteResourcesFunction=function(e){var t,o=[];for(t in this.replays_)o.push(this.replays_[t].getDeleteResourcesFunction(e));return goog.functions.sequence.apply(null,o)};ol.render.webgl.ReplayGroup.prototype.finish=function(e){for(var t in this.replays_)this.replays_[t].finish(e)};ol.render.webgl.ReplayGroup.prototype.getReplay=function(e,t){var o=this.replays_[t];goog.isDef(o)||(o=ol.render.webgl.BATCH_CONSTRUCTORS_[t],goog.asserts.assert(goog.isDef(o),t+" constructor missing from ol.render.webgl.BATCH_CONSTRUCTORS_"),o=new o(this.tolerance_,this.maxExtent_),this.replays_[t]=o);return o};ol.render.webgl.ReplayGroup.prototype.isEmpty=function(){return goog.object.isEmpty(this.replays_)};ol.render.webgl.ReplayGroup.prototype.replay=function(e,t,o,r,n,i,s,a,g,l,u,c){var h,d,m;h=0;for(d=ol.render.REPLAY_ORDER.length;d>h;++h)m=this.replays_[ol.render.REPLAY_ORDER[h]],goog.isDef(m)&&m.replay(e,t,o,r,n,i,s,a,g,l,u,c,void 0,!1)};ol.render.webgl.ReplayGroup.prototype.replayHitDetection_=function(e,t,o,r,n,i,s,a,g,l,u,c,h,d,m){var p,f;for(p=ol.render.REPLAY_ORDER.length-1;p>=0;--p)if(f=this.replays_[ol.render.REPLAY_ORDER[p]],goog.isDef(f)&&(f=f.replay(e,t,o,r,n,i,s,a,g,l,u,c,h,d,m)))return f};ol.render.webgl.ReplayGroup.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,n,i,s,a,g,l,u,c,h,d){var m=t.getGL();m.bindFramebuffer(m.FRAMEBUFFER,t.getHitDetectionFramebuffer());var p;goog.isDef(this.renderBuffer_)&&(p=ol.extent.buffer(ol.extent.createOrUpdateFromCoordinate(e),r*this.renderBuffer_));return this.replayHitDetection_(t,e,r,n,ol.render.webgl.HIT_DETECTION_SIZE_,s,a,g,l,u,c,h,function(e){var t=new Uint8Array(4);m.readPixels(0,0,1,1,m.RGBA,m.UNSIGNED_BYTE,t);return 0<t[3]&&(e=d(e))?e:void 0},!0,p)};ol.render.webgl.ReplayGroup.prototype.hasFeatureAtCoordinate=function(e,t,o,r,n,i,s,a,g,l,u,c,h){var d=t.getGL();d.bindFramebuffer(d.FRAMEBUFFER,t.getHitDetectionFramebuffer());e=this.replayHitDetection_(t,e,r,n,ol.render.webgl.HIT_DETECTION_SIZE_,s,a,g,l,u,c,h,function(e){e=new Uint8Array(4);d.readPixels(0,0,1,1,d.RGBA,d.UNSIGNED_BYTE,e);return 0<e[3]},!1);return goog.isDef(e)};ol.render.webgl.BATCH_CONSTRUCTORS_={Image:ol.render.webgl.ImageReplay};ol.render.webgl.HIT_DETECTION_SIZE_=[1,1];ol.render.webgl.Immediate=function(e,t,o,r,n,i,s){ol.render.VectorContext.call(this);this.context_=e;this.center_=t;this.extent_=i;this.pixelRatio_=s;this.size_=n;this.rotation_=r;this.resolution_=o;this.imageStyle_=null;this.callbacksByZIndex_={}};goog.inherits(ol.render.webgl.Immediate,ol.render.VectorContext);ol.render.webgl.Immediate.prototype.flush=function(){var e=goog.array.map(goog.object.getKeys(this.callbacksByZIndex_),Number);goog.array.sort(e);var t,o,r,n,i;t=0;for(o=e.length;o>t;++t)for(r=this.callbacksByZIndex_[e[t].toString()],n=0,i=r.length;i>n;++n)r[n](this)};ol.render.webgl.Immediate.prototype.drawAsync=function(e,t){var o=e.toString(),r=this.callbacksByZIndex_[o];goog.isDef(r)?r.push(t):this.callbacksByZIndex_[o]=[t]};ol.render.webgl.Immediate.prototype.drawCircleGeometry=function(){};ol.render.webgl.Immediate.prototype.drawFeature=function(e,t){var o=t.getGeometryFunction()(e);if(goog.isDefAndNotNull(o)&&ol.extent.intersects(this.extent_,o.getExtent())){var r=t.getZIndex();goog.isDef(r)||(r=0);this.drawAsync(r,function(e){e.setFillStrokeStyle(t.getFill(),t.getStroke());e.setImageStyle(t.getImage());e.setTextStyle(t.getText());var r=o.getType();(r=ol.render.webgl.Immediate.GEOMETRY_RENDERERS_[r])&&r.call(e,o,null)})}};ol.render.webgl.Immediate.prototype.drawGeometryCollectionGeometry=function(e,t){var o,r,n=e.getGeometriesArray(),i=ol.render.webgl.Immediate.GEOMETRY_RENDERERS_;o=0;for(r=n.length;r>o;++o){var s=n[o],a=i[s.getType()];a&&a.call(this,s,t)}};ol.render.webgl.Immediate.prototype.drawPointGeometry=function(e,t){var o=this.context_,r=new ol.render.webgl.ReplayGroup(1,this.extent_).getReplay(0,ol.render.ReplayType.IMAGE);r.setImageStyle(this.imageStyle_);r.drawPointGeometry(e,t);r.finish(o);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,0,1,0,1,{},void 0,!1);r.getDeleteResourcesFunction(o)()};ol.render.webgl.Immediate.prototype.drawLineStringGeometry=function(){};ol.render.webgl.Immediate.prototype.drawMultiLineStringGeometry=function(){};ol.render.webgl.Immediate.prototype.drawMultiPointGeometry=function(e,t){var o=this.context_,r=new ol.render.webgl.ReplayGroup(1,this.extent_).getReplay(0,ol.render.ReplayType.IMAGE);r.setImageStyle(this.imageStyle_);r.drawMultiPointGeometry(e,t);r.finish(o);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,0,1,0,1,{},void 0,!1);r.getDeleteResourcesFunction(o)()};ol.render.webgl.Immediate.prototype.drawMultiPolygonGeometry=function(){};ol.render.webgl.Immediate.prototype.drawPolygonGeometry=function(){};ol.render.webgl.Immediate.prototype.drawText=function(){};ol.render.webgl.Immediate.prototype.setFillStrokeStyle=function(){};ol.render.webgl.Immediate.prototype.setImageStyle=function(e){this.imageStyle_=e};ol.render.webgl.Immediate.prototype.setTextStyle=function(){};ol.render.webgl.Immediate.GEOMETRY_RENDERERS_={Point:ol.render.webgl.Immediate.prototype.drawPointGeometry,MultiPoint:ol.render.webgl.Immediate.prototype.drawMultiPointGeometry,GeometryCollection:ol.render.webgl.Immediate.prototype.drawGeometryCollectionGeometry};
ol.renderer.webgl={};ol.renderer.webgl.map={};ol.renderer.webgl.map.shader={};ol.renderer.webgl.map.shader.Color={};ol.renderer.webgl.map.shader.ColorFragment=function(){ol.webgl.shader.Fragment.call(this,ol.renderer.webgl.map.shader.ColorFragment.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.ColorFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.renderer.webgl.map.shader.ColorFragment);ol.renderer.webgl.map.shader.ColorFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\n\n\n// @see https://svn.webkit.org/repository/webkit/trunk/Source/WebCore/platform/graphics/filters/skia/SkiaImageFilterBuilder.cpp\nuniform mat4 u_colorMatrix;\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = (u_colorMatrix * vec4(texColor.rgb, 1.)).rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n";ol.renderer.webgl.map.shader.ColorFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;uniform mat4 f;uniform float g;uniform sampler2D h;void main(void){vec4 texColor=texture2D(h,a);gl_FragColor.rgb=(f*vec4(texColor.rgb,1.)).rgb;gl_FragColor.a=texColor.a*g;}";ol.renderer.webgl.map.shader.ColorFragment.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.ColorFragment.DEBUG_SOURCE:ol.renderer.webgl.map.shader.ColorFragment.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.ColorVertex=function(){ol.webgl.shader.Vertex.call(this,ol.renderer.webgl.map.shader.ColorVertex.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.ColorVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.renderer.webgl.map.shader.ColorVertex);ol.renderer.webgl.map.shader.ColorVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n";ol.renderer.webgl.map.shader.ColorVertex.OPTIMIZED_SOURCE="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}";ol.renderer.webgl.map.shader.ColorVertex.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.ColorVertex.DEBUG_SOURCE:ol.renderer.webgl.map.shader.ColorVertex.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.Color.Locations=function(e,t){this.u_colorMatrix=e.getUniformLocation(t,goog.DEBUG?"u_colorMatrix":"f");this.u_opacity=e.getUniformLocation(t,goog.DEBUG?"u_opacity":"g");this.u_projectionMatrix=e.getUniformLocation(t,goog.DEBUG?"u_projectionMatrix":"e");this.u_texCoordMatrix=e.getUniformLocation(t,goog.DEBUG?"u_texCoordMatrix":"d");this.u_texture=e.getUniformLocation(t,goog.DEBUG?"u_texture":"h");this.a_position=e.getAttribLocation(t,goog.DEBUG?"a_position":"b");this.a_texCoord=e.getAttribLocation(t,goog.DEBUG?"a_texCoord":"c")};ol.renderer.webgl.map.shader.Default={};ol.renderer.webgl.map.shader.DefaultFragment=function(){ol.webgl.shader.Fragment.call(this,ol.renderer.webgl.map.shader.DefaultFragment.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.DefaultFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.renderer.webgl.map.shader.DefaultFragment);ol.renderer.webgl.map.shader.DefaultFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n";ol.renderer.webgl.map.shader.DefaultFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}";ol.renderer.webgl.map.shader.DefaultFragment.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.DefaultFragment.DEBUG_SOURCE:ol.renderer.webgl.map.shader.DefaultFragment.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.DefaultVertex=function(){ol.webgl.shader.Vertex.call(this,ol.renderer.webgl.map.shader.DefaultVertex.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.DefaultVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.renderer.webgl.map.shader.DefaultVertex);ol.renderer.webgl.map.shader.DefaultVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n";ol.renderer.webgl.map.shader.DefaultVertex.OPTIMIZED_SOURCE="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}";ol.renderer.webgl.map.shader.DefaultVertex.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.DefaultVertex.DEBUG_SOURCE:ol.renderer.webgl.map.shader.DefaultVertex.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.Default.Locations=function(e,t){this.u_opacity=e.getUniformLocation(t,goog.DEBUG?"u_opacity":"f");this.u_projectionMatrix=e.getUniformLocation(t,goog.DEBUG?"u_projectionMatrix":"e");this.u_texCoordMatrix=e.getUniformLocation(t,goog.DEBUG?"u_texCoordMatrix":"d");this.u_texture=e.getUniformLocation(t,goog.DEBUG?"u_texture":"g");this.a_position=e.getAttribLocation(t,goog.DEBUG?"a_position":"b");this.a_texCoord=e.getAttribLocation(t,goog.DEBUG?"a_texCoord":"c")};ol.renderer.webgl.Layer=function(e,t){ol.renderer.Layer.call(this,t);this.mapRenderer=e;this.arrayBuffer_=new ol.webgl.Buffer([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);this.framebuffer=this.texture=null;this.framebufferDimension=void 0;this.texCoordMatrix=goog.vec.Mat4.createNumber();this.projectionMatrix=goog.vec.Mat4.createNumberIdentity();this.colorMatrix_=new ol.color.Matrix;this.defaultLocations_=this.colorLocations_=null};goog.inherits(ol.renderer.webgl.Layer,ol.renderer.Layer);ol.renderer.webgl.Layer.prototype.bindFramebuffer=function(e,t){var o=this.mapRenderer.getGL();if(goog.isDef(this.framebufferDimension)&&this.framebufferDimension==t)o.bindFramebuffer(goog.webgl.FRAMEBUFFER,this.framebuffer);else{e.postRenderFunctions.push(goog.partial(function(e,t,o){e.isContextLost()||(e.deleteFramebuffer(t),e.deleteTexture(o))},o,this.framebuffer,this.texture));var r=ol.webgl.Context.createEmptyTexture(o,t,t),n=o.createFramebuffer();o.bindFramebuffer(goog.webgl.FRAMEBUFFER,n);o.framebufferTexture2D(goog.webgl.FRAMEBUFFER,goog.webgl.COLOR_ATTACHMENT0,goog.webgl.TEXTURE_2D,r,0);this.texture=r;this.framebuffer=n;this.framebufferDimension=t}};ol.renderer.webgl.Layer.prototype.composeFrame=function(e,t,o){this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,o,e);o.bindBuffer(goog.webgl.ARRAY_BUFFER,this.arrayBuffer_);var r,n,i=o.getGL(),s=t.brightness||1!=t.contrast||t.hue||1!=t.saturation;s?(r=ol.renderer.webgl.map.shader.ColorFragment.getInstance(),n=ol.renderer.webgl.map.shader.ColorVertex.getInstance()):(r=ol.renderer.webgl.map.shader.DefaultFragment.getInstance(),n=ol.renderer.webgl.map.shader.DefaultVertex.getInstance());r=o.getProgram(r,n);s?goog.isNull(this.colorLocations_)?this.colorLocations_=n=new ol.renderer.webgl.map.shader.Color.Locations(i,r):n=this.colorLocations_:goog.isNull(this.defaultLocations_)?this.defaultLocations_=n=new ol.renderer.webgl.map.shader.Default.Locations(i,r):n=this.defaultLocations_;o.useProgram(r)&&(i.enableVertexAttribArray(n.a_position),i.vertexAttribPointer(n.a_position,2,goog.webgl.FLOAT,!1,16,0),i.enableVertexAttribArray(n.a_texCoord),i.vertexAttribPointer(n.a_texCoord,2,goog.webgl.FLOAT,!1,16,8),i.uniform1i(n.u_texture,0));i.uniformMatrix4fv(n.u_texCoordMatrix,!1,this.getTexCoordMatrix());i.uniformMatrix4fv(n.u_projectionMatrix,!1,this.getProjectionMatrix());s&&i.uniformMatrix4fv(n.u_colorMatrix,!1,this.colorMatrix_.getMatrix(t.brightness,t.contrast,t.hue,t.saturation));i.uniform1f(n.u_opacity,t.opacity);i.bindTexture(goog.webgl.TEXTURE_2D,this.getTexture());i.drawArrays(goog.webgl.TRIANGLE_STRIP,0,4);this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,o,e)};ol.renderer.webgl.Layer.prototype.dispatchComposeEvent_=function(e,t,o){var r=this.getLayer();if(r.hasListener(e)){var n=o.viewState,n=new ol.render.webgl.Immediate(t,n.center,n.resolution,n.rotation,o.size,o.extent,o.pixelRatio);e=new ol.render.Event(e,r,n,o,null,t);r.dispatchEvent(e)}};ol.renderer.webgl.Layer.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix};ol.renderer.webgl.Layer.prototype.getTexture=function(){return this.texture};ol.renderer.webgl.Layer.prototype.getProjectionMatrix=function(){return this.projectionMatrix};ol.renderer.webgl.Layer.prototype.handleWebGLContextLost=function(){this.framebuffer=this.texture=null;this.framebufferDimension=void 0};ol.renderer.webgl.ImageLayer=function(e,t){ol.renderer.webgl.Layer.call(this,e,t);this.hitTransformationMatrix_=this.hitCanvasContext_=this.image_=null};goog.inherits(ol.renderer.webgl.ImageLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.ImageLayer.prototype.createTexture_=function(e){e=e.getImage();var t=this.mapRenderer.getGL();return ol.webgl.Context.createTexture(t,e,goog.webgl.CLAMP_TO_EDGE,goog.webgl.CLAMP_TO_EDGE)};ol.renderer.webgl.ImageLayer.prototype.forEachFeatureAtCoordinate=function(e,t,o,r){var n=this.getLayer();return n.getSource().forEachFeatureAtCoordinate(e,t.viewState.resolution,t.viewState.rotation,t.skippedFeatureUids,function(e){return o.call(r,e,n)})};ol.renderer.webgl.ImageLayer.prototype.prepareFrame=function(e,t,o){var r=this.mapRenderer.getGL(),n=e.pixelRatio,i=e.viewState,s=i.center,a=i.resolution,g=i.rotation;o=this.image_;var l=this.texture,u=this.getLayer();goog.asserts.assertInstanceof(u,ol.layer.Image,"layer is an instance of ol.layer.Image");var u=u.getSource(),c=e.viewHints,h=e.extent;goog.isDef(t.extent)&&(h=ol.extent.getIntersection(h,t.extent));c[ol.ViewHint.ANIMATING]||c[ol.ViewHint.INTERACTING]||ol.extent.isEmpty(h)||(t=i.projection,i=u.getProjection(),goog.isNull(i)||(goog.asserts.assert(ol.proj.equivalent(t,i),"projection and sourceProjection are equivalent"),t=i),t=u.getImage(h,a,n,t),!goog.isNull(t)&&this.loadImage(t)&&(o=t,l=this.createTexture_(t),goog.isNull(this.texture)||e.postRenderFunctions.push(goog.partial(function(e,t){e.isContextLost()||e.deleteTexture(t)},r,this.texture))));goog.isNull(o)||(goog.asserts.assert(!goog.isNull(l),"texture is not null"),r=this.mapRenderer.getContext().getCanvas(),this.updateProjectionMatrix_(r.width,r.height,n,s,a,g,o.getExtent()),this.hitTransformationMatrix_=null,n=this.texCoordMatrix,goog.vec.Mat4.makeIdentity(n),goog.vec.Mat4.scale(n,1,-1,1),goog.vec.Mat4.translate(n,0,-1,0),this.image_=o,this.texture=l,this.updateAttributions(e.attributions,o.getAttributions()),this.updateLogos(e,u));return!0};ol.renderer.webgl.ImageLayer.prototype.updateProjectionMatrix_=function(e,t,o,r,n,i,s){e*=n;t*=n;n=this.projectionMatrix;goog.vec.Mat4.makeIdentity(n);goog.vec.Mat4.scale(n,2*o/e,2*o/t,1);goog.vec.Mat4.rotateZ(n,-i);goog.vec.Mat4.translate(n,s[0]-r[0],s[1]-r[1],0);goog.vec.Mat4.scale(n,(s[2]-s[0])/2,(s[3]-s[1])/2,1);goog.vec.Mat4.translate(n,1,1,0)};ol.renderer.webgl.ImageLayer.prototype.hasFeatureAtCoordinate=function(e,t){var o=this.forEachFeatureAtCoordinate(e,t,goog.functions.TRUE,this);return goog.isDef(o)};ol.renderer.webgl.ImageLayer.prototype.forEachLayerAtPixel=function(e,t,o,r){if(!goog.isNull(this.image_)&&!goog.isNull(this.image_.getImage()))if(this.getLayer().getSource()instanceof ol.source.ImageVector){if(e=e.slice(),ol.vec.Mat4.multVec2(t.pixelToCoordinateMatrix,e,e),this.forEachFeatureAtCoordinate(e,t,goog.functions.TRUE,this))return o.call(r,this.getLayer())}else{var n=[this.image_.getImage().width,this.image_.getImage().height];goog.isNull(this.hitTransformationMatrix_)&&(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(t.size,n));t=[0,0];ol.vec.Mat4.multVec2(this.hitTransformationMatrix_,e,t);if(!(0>t[0]||t[0]>n[0]||0>t[1]||t[1]>n[1])&&(goog.isNull(this.hitCanvasContext_)&&(this.hitCanvasContext_=ol.dom.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),t[0],t[1],1,1,0,0,1,1),0<this.hitCanvasContext_.getImageData(0,0,1,1).data[3]))return o.call(r,this.getLayer())}};ol.renderer.webgl.ImageLayer.prototype.getHitTransformationMatrix_=function(e,t){var o=goog.vec.Mat4.createNumber();goog.vec.Mat4.makeIdentity(o);goog.vec.Mat4.translate(o,-1,-1,0);goog.vec.Mat4.scale(o,2/e[0],2/e[1],1);goog.vec.Mat4.translate(o,0,e[1],0);goog.vec.Mat4.scale(o,1,-1,1);var r=goog.vec.Mat4.createNumber();goog.vec.Mat4.invert(this.projectionMatrix,r);var n=goog.vec.Mat4.createNumber();goog.vec.Mat4.makeIdentity(n);goog.vec.Mat4.translate(n,0,t[1],0);goog.vec.Mat4.scale(n,1,-1,1);goog.vec.Mat4.scale(n,t[0]/2,t[1]/2,1);goog.vec.Mat4.translate(n,1,1,0);var i=goog.vec.Mat4.createNumber();goog.vec.Mat4.multMat(n,r,i);goog.vec.Mat4.multMat(i,o,i);return i};ol.renderer.webgl.tilelayer={};ol.renderer.webgl.tilelayer.shader={};ol.renderer.webgl.tilelayer.shader.Fragment=function(){ol.webgl.shader.Fragment.call(this,ol.renderer.webgl.tilelayer.shader.Fragment.SOURCE)};goog.inherits(ol.renderer.webgl.tilelayer.shader.Fragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.renderer.webgl.tilelayer.shader.Fragment);ol.renderer.webgl.tilelayer.shader.Fragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n";ol.renderer.webgl.tilelayer.shader.Fragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}";ol.renderer.webgl.tilelayer.shader.Fragment.SOURCE=goog.DEBUG?ol.renderer.webgl.tilelayer.shader.Fragment.DEBUG_SOURCE:ol.renderer.webgl.tilelayer.shader.Fragment.OPTIMIZED_SOURCE;ol.renderer.webgl.tilelayer.shader.Vertex=function(){ol.webgl.shader.Vertex.call(this,ol.renderer.webgl.tilelayer.shader.Vertex.SOURCE)};goog.inherits(ol.renderer.webgl.tilelayer.shader.Vertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.renderer.webgl.tilelayer.shader.Vertex);ol.renderer.webgl.tilelayer.shader.Vertex.DEBUG_SOURCE="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n";ol.renderer.webgl.tilelayer.shader.Vertex.OPTIMIZED_SOURCE="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}";ol.renderer.webgl.tilelayer.shader.Vertex.SOURCE=goog.DEBUG?ol.renderer.webgl.tilelayer.shader.Vertex.DEBUG_SOURCE:ol.renderer.webgl.tilelayer.shader.Vertex.OPTIMIZED_SOURCE;ol.renderer.webgl.tilelayer.shader.Locations=function(e,t){this.u_texture=e.getUniformLocation(t,goog.DEBUG?"u_texture":"e");this.u_tileOffset=e.getUniformLocation(t,goog.DEBUG?"u_tileOffset":"d");this.a_position=e.getAttribLocation(t,goog.DEBUG?"a_position":"b");this.a_texCoord=e.getAttribLocation(t,goog.DEBUG?"a_texCoord":"c")};ol.renderer.webgl.TileLayer=function(e,t){ol.renderer.webgl.Layer.call(this,e,t);this.fragmentShader_=ol.renderer.webgl.tilelayer.shader.Fragment.getInstance();this.vertexShader_=ol.renderer.webgl.tilelayer.shader.Vertex.getInstance();this.locations_=null;this.renderArrayBuffer_=new ol.webgl.Buffer([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]);this.renderedFramebufferExtent_=this.renderedTileRange_=null;this.renderedRevision_=-1;this.tmpSize_=[0,0]};goog.inherits(ol.renderer.webgl.TileLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.TileLayer.prototype.disposeInternal=function(){this.mapRenderer.getContext().deleteBuffer(this.renderArrayBuffer_);ol.renderer.webgl.TileLayer.superClass_.disposeInternal.call(this)};ol.renderer.webgl.TileLayer.prototype.createLoadedTileFinder=function(e,t){var o=this.mapRenderer;return function(r,n){return e.forEachLoadedTile(r,n,function(e){var n=o.isTileTextureLoaded(e);n&&(t[r]||(t[r]={}),t[r][e.tileCoord.toString()]=e);return n})}};ol.renderer.webgl.TileLayer.prototype.handleWebGLContextLost=function(){ol.renderer.webgl.TileLayer.superClass_.handleWebGLContextLost.call(this);this.locations_=null};ol.renderer.webgl.TileLayer.prototype.prepareFrame=function(e,t,o){var r=this.mapRenderer,n=o.getGL(),i=e.viewState,s=i.projection,a=this.getLayer();goog.asserts.assertInstanceof(a,ol.layer.Tile,"layer is an instance of ol.layer.Tile");var g,l=a.getSource(),u=l.getTileGridForProjection(s),c=u.getZForResolution(i.resolution),h=u.getResolution(c),d=l.getTilePixelSize(c,e.pixelRatio,s),m=d[0]/ol.size.toSize(u.getTileSize(c),this.tmpSize_)[0],p=h/m,f=l.getGutter(),_=i.center;h==i.resolution?(_=this.snapCenterToPixel(_,h,e.size),g=ol.extent.getForViewAndSize(_,h,i.rotation,e.size)):g=e.extent;h=u.getTileRangeForExtentAndResolution(g,h);if(!goog.isNull(this.renderedTileRange_)&&this.renderedTileRange_.equals(h)&&this.renderedRevision_==l.getRevision())p=this.renderedFramebufferExtent_;else{var y=h.getSize(),y=Math.max(y[0]*d[0],y[1]*d[1]),E=ol.math.roundUpToPowerOfTwo(y),y=p*E,S=u.getOrigin(c),v=S[0]+h.minX*d[0]*p,p=S[1]+h.minY*d[1]*p,p=[v,p,v+y,p+y];this.bindFramebuffer(e,E);n.viewport(0,0,E,E);n.clearColor(0,0,0,0);n.clear(goog.webgl.COLOR_BUFFER_BIT);n.disable(goog.webgl.BLEND);E=o.getProgram(this.fragmentShader_,this.vertexShader_);o.useProgram(E);goog.isNull(this.locations_)&&(this.locations_=new ol.renderer.webgl.tilelayer.shader.Locations(n,E));o.bindBuffer(goog.webgl.ARRAY_BUFFER,this.renderArrayBuffer_);n.enableVertexAttribArray(this.locations_.a_position);n.vertexAttribPointer(this.locations_.a_position,2,goog.webgl.FLOAT,!1,16,0);n.enableVertexAttribArray(this.locations_.a_texCoord);n.vertexAttribPointer(this.locations_.a_texCoord,2,goog.webgl.FLOAT,!1,16,8);n.uniform1i(this.locations_.u_texture,0);o={};o[c]={};var T,b,R,C=this.createLoadedTileFinder(l,o),A=a.getUseInterimTilesOnError(),E=!0,v=ol.extent.createEmpty(),N=new ol.TileRange(0,0,0,0);for(b=h.minX;b<=h.maxX;++b)for(R=h.minY;R<=h.maxY;++R){S=l.getTile(c,b,R,m,s);if(!goog.isDef(t.extent)||(T=u.getTileCoordExtent(S.tileCoord,v),ol.extent.intersects(T,t.extent))){T=S.getState();if(T==ol.TileState.LOADED){if(r.isTileTextureLoaded(S)){o[c][ol.tilecoord.toString(S.tileCoord)]=S;continue}}else if(T==ol.TileState.EMPTY||T==ol.TileState.ERROR&&!A)continue;E=!1;T=u.forEachTileCoordParentTileRange(S.tileCoord,C,null,N,v);T||(S=u.getTileCoordChildTileRange(S.tileCoord,N,v),goog.isNull(S)||C(c+1,S))}}t=goog.array.map(goog.object.getKeys(o),Number);goog.array.sort(t);for(var M,L,I,C=goog.vec.Vec4.createFloat32(),A=0,N=t.length;N>A;++A)for(M in L=o[t[A]])S=L[M],T=u.getTileCoordExtent(S.tileCoord,v),b=2*(T[2]-T[0])/y,R=2*(T[3]-T[1])/y,I=2*(T[0]-p[0])/y-1,T=2*(T[1]-p[1])/y-1,goog.vec.Vec4.setFromValues(C,b,R,I,T),n.uniform4fv(this.locations_.u_tileOffset,C),r.bindTileTexture(S,d,f*m,goog.webgl.LINEAR,goog.webgl.LINEAR),n.drawArrays(goog.webgl.TRIANGLE_STRIP,0,4);E?(this.renderedTileRange_=h,this.renderedFramebufferExtent_=p,this.renderedRevision_=l.getRevision()):(this.renderedFramebufferExtent_=this.renderedTileRange_=null,this.renderedRevision_=-1,e.animate=!0)}this.updateUsedTiles(e.usedTiles,l,c,h);var x=r.getTileTextureQueue();this.manageTilePyramid(e,l,u,m,s,g,c,a.getPreload(),function(e){e.getState()!=ol.TileState.LOADED||r.isTileTextureLoaded(e)||x.isKeyQueued(e.getKey())||x.enqueue([e,u.getTileCoordCenter(e.tileCoord),u.getResolution(e.tileCoord[0]),d,f*m])},this);this.scheduleExpireCache(e,l);this.updateLogos(e,l);n=this.texCoordMatrix;goog.vec.Mat4.makeIdentity(n);goog.vec.Mat4.translate(n,(_[0]-p[0])/(p[2]-p[0]),(_[1]-p[1])/(p[3]-p[1]),0);0!==i.rotation&&goog.vec.Mat4.rotateZ(n,i.rotation);goog.vec.Mat4.scale(n,e.size[0]*i.resolution/(p[2]-p[0]),e.size[1]*i.resolution/(p[3]-p[1]),1);goog.vec.Mat4.translate(n,-.5,-.5,0);return!0};ol.renderer.webgl.TileLayer.prototype.forEachLayerAtPixel=function(e,t,o,r){if(!goog.isNull(this.framebuffer)){var n=[0,0];ol.vec.Mat4.multVec2(this.texCoordMatrix,[e[0]/t.size[0],(t.size[1]-e[1])/t.size[1]],n);e=[n[0]*this.framebufferDimension,n[1]*this.framebufferDimension];t=this.mapRenderer.getContext().getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer);n=new Uint8Array(4);t.readPixels(e[0],e[1],1,1,t.RGBA,t.UNSIGNED_BYTE,n);if(0<n[3])return o.call(r,this.getLayer())}};ol.renderer.webgl.VectorLayer=function(e,t){ol.renderer.webgl.Layer.call(this,e,t);this.dirty_=!1;this.renderedRevision_=-1;this.renderedResolution_=0/0;this.renderedExtent_=ol.extent.createEmpty();this.layerState_=this.replayGroup_=this.renderedRenderOrder_=null};goog.inherits(ol.renderer.webgl.VectorLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.VectorLayer.prototype.composeFrame=function(e,t,o){this.layerState_=t;var r=e.viewState,n=this.replayGroup_;goog.isNull(n)||n.isEmpty()||n.replay(o,r.center,r.resolution,r.rotation,e.size,e.pixelRatio,t.opacity,t.brightness,t.contrast,t.hue,t.saturation,t.managed?e.skippedFeatureUids:{})};ol.renderer.webgl.VectorLayer.prototype.disposeInternal=function(){var e=this.replayGroup_;if(!goog.isNull(e)){var t=this.mapRenderer.getContext();e.getDeleteResourcesFunction(t)();this.replayGroup_=null}ol.renderer.webgl.VectorLayer.superClass_.disposeInternal.call(this)};ol.renderer.webgl.VectorLayer.prototype.forEachFeatureAtCoordinate=function(e,t,o,r){if(!goog.isNull(this.replayGroup_)&&!goog.isNull(this.layerState_)){var n=this.mapRenderer.getContext(),i=t.viewState,s=this.getLayer(),a=this.layerState_,g={};return this.replayGroup_.forEachFeatureAtCoordinate(e,n,i.center,i.resolution,i.rotation,t.size,t.pixelRatio,a.opacity,a.brightness,a.contrast,a.hue,a.saturation,a.managed?t.skippedFeatureUids:{},function(e){goog.asserts.assert(goog.isDef(e),"received a feature");var t=goog.getUid(e).toString();return t in g?void 0:(g[t]=!0,o.call(r,e,s))})}};ol.renderer.webgl.VectorLayer.prototype.hasFeatureAtCoordinate=function(e,t){if(goog.isNull(this.replayGroup_)||goog.isNull(this.layerState_))return!1;var o=this.mapRenderer.getContext(),r=t.viewState,n=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(e,o,r.center,r.resolution,r.rotation,t.size,t.pixelRatio,n.opacity,n.brightness,n.contrast,n.hue,n.saturation,t.skippedFeatureUids)};ol.renderer.webgl.VectorLayer.prototype.forEachLayerAtPixel=function(e,t,o,r){e=e.slice();ol.vec.Mat4.multVec2(t.pixelToCoordinateMatrix,e,e);return this.hasFeatureAtCoordinate(e,t)?o.call(r,this.getLayer()):void 0};ol.renderer.webgl.VectorLayer.prototype.handleStyleImageChange_=function(){this.renderIfReadyAndVisible()};ol.renderer.webgl.VectorLayer.prototype.prepareFrame=function(e,t,o){var r=this.getLayer();goog.asserts.assertInstanceof(r,ol.layer.Vector,"layer is an instance of ol.layer.Vector");t=r.getSource();this.updateAttributions(e.attributions,t.getAttributions());this.updateLogos(e,t);var n=e.viewHints[ol.ViewHint.ANIMATING],i=e.viewHints[ol.ViewHint.INTERACTING],s=r.getUpdateWhileAnimating(),a=r.getUpdateWhileInteracting();if(!this.dirty_&&!s&&n||!a&&i)return!0;var a=e.extent,i=e.viewState,n=i.projection,g=i.resolution,l=e.pixelRatio,i=r.getRevision(),u=r.getRenderBuffer(),s=r.getRenderOrder();goog.isDef(s)||(s=ol.renderer.vector.defaultOrder);a=ol.extent.buffer(a,u*g);if(!this.dirty_&&this.renderedResolution_==g&&this.renderedRevision_==i&&this.renderedRenderOrder_==s&&ol.extent.containsExtent(this.renderedExtent_,a))return!0;goog.isNull(this.replayGroup_)||e.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(o));this.dirty_=!1;var c=new ol.render.webgl.ReplayGroup(ol.renderer.vector.getTolerance(g,l),a,r.getRenderBuffer());t.loadFeatures(a,g,n);e=function(e){var t;goog.isDef(e.getStyleFunction())?t=e.getStyleFunction().call(e,g):goog.isDef(r.getStyleFunction())&&(t=r.getStyleFunction()(e,g));goog.isDefAndNotNull(t)&&(e=this.renderFeature(e,g,l,t,c),this.dirty_=this.dirty_||e)};if(goog.isNull(s))t.forEachFeatureInExtentAtResolution(a,g,e,this);else{var h=[];t.forEachFeatureInExtentAtResolution(a,g,function(e){h.push(e)},this);goog.array.sort(h,s);goog.array.forEach(h,e,this)}c.finish(o);this.renderedResolution_=g;this.renderedRevision_=i;this.renderedRenderOrder_=s;this.renderedExtent_=a;this.replayGroup_=c;return!0};ol.renderer.webgl.VectorLayer.prototype.renderFeature=function(e,t,o,r,n){if(!goog.isDefAndNotNull(r))return!1;var i,s,a=!1;i=0;for(s=r.length;s>i;++i)a=ol.renderer.vector.renderFeature(n,e,r[i],ol.renderer.vector.getSquaredTolerance(t,o),this.handleStyleImageChange_,this)||a;return a};ol.renderer.webgl.Map=function(e,t){ol.renderer.Map.call(this,e,t);this.canvas_=goog.dom.createElement(goog.dom.TagName.CANVAS);this.canvas_.style.width="100%";this.canvas_.style.height="100%";this.canvas_.className=ol.css.CLASS_UNSELECTABLE;goog.dom.insertChildAt(e,this.canvas_,0);this.clipTileCanvasHeight_=this.clipTileCanvasWidth_=0;this.clipTileContext_=ol.dom.createCanvasContext2D();this.renderedVisible_=!0;this.gl_=ol.webgl.getContext(this.canvas_,{antialias:!0,depth:!1,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0});goog.asserts.assert(!goog.isNull(this.gl_),"got a WebGLRenderingContext");this.context_=new ol.webgl.Context(this.canvas_,this.gl_);goog.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.LOST,this.handleWebGLContextLost,!1,this);goog.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.RESTORED,this.handleWebGLContextRestored,!1,this);this.textureCache_=new ol.structs.LRUCache;this.focus_=null;this.tileTextureQueue_=new ol.structs.PriorityQueue(goog.bind(function(e){var t=e[1];e=e[2];var o=t[0]-this.focus_[0],t=t[1]-this.focus_[1];return 65536*Math.log(e)+Math.sqrt(o*o+t*t)/e},this),function(e){return e[0].getKey()});this.loadNextTileTexture_=goog.bind(function(){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var e=this.tileTextureQueue_.dequeue();this.bindTileTexture(e[0],e[3],e[4],goog.webgl.LINEAR,goog.webgl.LINEAR)}},this);this.textureCacheFrameMarkerCount_=0;this.initializeGL_()};goog.inherits(ol.renderer.webgl.Map,ol.renderer.Map);ol.renderer.webgl.Map.prototype.bindTileTexture=function(e,t,o,r,n){var i=this.getGL(),s=e.getKey();if(this.textureCache_.containsKey(s))e=this.textureCache_.get(s),goog.asserts.assert(!goog.isNull(e),"a texture cache entry exists for key %s",s),i.bindTexture(goog.webgl.TEXTURE_2D,e.texture),e.magFilter!=r&&(i.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MAG_FILTER,r),e.magFilter=r),e.minFilter!=n&&(i.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MAG_FILTER,n),e.minFilter=n);else{var a=i.createTexture();i.bindTexture(goog.webgl.TEXTURE_2D,a);if(o>0){var g=this.clipTileContext_.canvas,l=this.clipTileContext_;this.clipTileCanvasWidth_!==t[0]||this.clipTileCanvasHeight_!==t[1]?(g.width=t[0],g.height=t[1],this.clipTileCanvasWidth_=t[0],this.clipTileCanvasHeight_=t[1]):l.clearRect(0,0,t[0],t[1]);l.drawImage(e.getImage(),o,o,t[0],t[1],0,0,t[0],t[1]);i.texImage2D(goog.webgl.TEXTURE_2D,0,goog.webgl.RGBA,goog.webgl.RGBA,goog.webgl.UNSIGNED_BYTE,g)}else i.texImage2D(goog.webgl.TEXTURE_2D,0,goog.webgl.RGBA,goog.webgl.RGBA,goog.webgl.UNSIGNED_BYTE,e.getImage());i.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MAG_FILTER,r);i.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MIN_FILTER,n);i.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_S,goog.webgl.CLAMP_TO_EDGE);i.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_T,goog.webgl.CLAMP_TO_EDGE);this.textureCache_.set(s,{texture:a,magFilter:r,minFilter:n})}};ol.renderer.webgl.Map.prototype.createLayerRenderer=function(e){if(ol.ENABLE_IMAGE&&e instanceof ol.layer.Image)return new ol.renderer.webgl.ImageLayer(this,e);if(ol.ENABLE_TILE&&e instanceof ol.layer.Tile)return new ol.renderer.webgl.TileLayer(this,e);if(ol.ENABLE_VECTOR&&e instanceof ol.layer.Vector)return new ol.renderer.webgl.VectorLayer(this,e);goog.asserts.fail("unexpected layer configuration");return null};ol.renderer.webgl.Map.prototype.dispatchComposeEvent_=function(e,t){var o=this.getMap();if(o.hasListener(e)){var r=this.context_,n=t.viewState,n=new ol.render.webgl.Immediate(r,n.center,n.resolution,n.rotation,t.size,t.extent,t.pixelRatio),r=new ol.render.Event(e,o,n,t,null,r);o.dispatchEvent(r);n.flush()}};ol.renderer.webgl.Map.prototype.disposeInternal=function(){var e=this.getGL();e.isContextLost()||this.textureCache_.forEach(function(t){goog.isNull(t)||e.deleteTexture(t.texture)});goog.dispose(this.context_);ol.renderer.webgl.Map.superClass_.disposeInternal.call(this)};ol.renderer.webgl.Map.prototype.expireCache_=function(e,t){for(var o,r=this.getGL();this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK;){o=this.textureCache_.peekLast();if(goog.isNull(o)){if(+this.textureCache_.peekLastKey()==t.index)break;--this.textureCacheFrameMarkerCount_}else r.deleteTexture(o.texture);this.textureCache_.pop()}};ol.renderer.webgl.Map.prototype.getContext=function(){return this.context_};ol.renderer.webgl.Map.prototype.getGL=function(){return this.gl_};ol.renderer.webgl.Map.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_};ol.renderer.webgl.Map.prototype.getType=function(){return ol.RendererType.WEBGL};ol.renderer.webgl.Map.prototype.handleWebGLContextLost=function(e){e.preventDefault();this.textureCache_.clear();this.textureCacheFrameMarkerCount_=0;goog.object.forEach(this.getLayerRenderers(),function(e){goog.asserts.assertInstanceof(e,ol.renderer.webgl.Layer,"renderer is an instance of ol.renderer.webgl.Layer");e.handleWebGLContextLost()})};ol.renderer.webgl.Map.prototype.handleWebGLContextRestored=function(){this.initializeGL_();this.getMap().render()};ol.renderer.webgl.Map.prototype.initializeGL_=function(){var e=this.gl_;e.activeTexture(goog.webgl.TEXTURE0);e.blendFuncSeparate(goog.webgl.SRC_ALPHA,goog.webgl.ONE_MINUS_SRC_ALPHA,goog.webgl.ONE,goog.webgl.ONE_MINUS_SRC_ALPHA);e.disable(goog.webgl.CULL_FACE);e.disable(goog.webgl.DEPTH_TEST);e.disable(goog.webgl.SCISSOR_TEST);e.disable(goog.webgl.STENCIL_TEST)};ol.renderer.webgl.Map.prototype.isTileTextureLoaded=function(e){return this.textureCache_.containsKey(e.getKey())};ol.renderer.webgl.Map.prototype.logger_=goog.log.getLogger("ol.renderer.webgl.Map");ol.renderer.webgl.Map.prototype.renderFrame=function(e){var t=this.getContext(),o=this.getGL();if(o.isContextLost())return!1;if(goog.isNull(e))return this.renderedVisible_&&(goog.style.setElementShown(this.canvas_,!1),this.renderedVisible_=!1),!1;this.focus_=e.focus;this.textureCache_.set((-e.index).toString(),null);++this.textureCacheFrameMarkerCount_;this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,e);var r=[],n=e.layerStatesArray;goog.array.stableSort(n,ol.renderer.Map.sortByZIndex);var i,s,a,g,l=e.viewState.resolution;i=0;for(s=n.length;s>i;++i)g=n[i],ol.layer.Layer.visibleAtResolution(g,l)&&g.sourceState==ol.source.State.READY&&(a=this.getLayerRenderer(g.layer),goog.asserts.assertInstanceof(a,ol.renderer.webgl.Layer,"renderer is an instance of ol.renderer.webgl.Layer"),a.prepareFrame(e,g,t)&&r.push(g));n=e.size[0]*e.pixelRatio;l=e.size[1]*e.pixelRatio;(this.canvas_.width!=n||this.canvas_.height!=l)&&(this.canvas_.width=n,this.canvas_.height=l);o.bindFramebuffer(goog.webgl.FRAMEBUFFER,null);o.clearColor(0,0,0,0);o.clear(goog.webgl.COLOR_BUFFER_BIT);o.enable(goog.webgl.BLEND);o.viewport(0,0,this.canvas_.width,this.canvas_.height);i=0;for(s=r.length;s>i;++i)g=r[i],a=this.getLayerRenderer(g.layer),goog.asserts.assertInstanceof(a,ol.renderer.webgl.Layer,"renderer is an instance of ol.renderer.webgl.Layer"),a.composeFrame(e,g,t);this.renderedVisible_||(goog.style.setElementShown(this.canvas_,!0),this.renderedVisible_=!0);this.calculateMatrices2D(e);
this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK&&e.postRenderFunctions.push(goog.bind(this.expireCache_,this));this.tileTextureQueue_.isEmpty()||(e.postRenderFunctions.push(this.loadNextTileTexture_),e.animate=!0);this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,e);this.scheduleRemoveUnusedLayerRenderers(e);this.scheduleExpireIconCache(e)};ol.renderer.webgl.Map.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,n,i){var s;if(this.getGL().isContextLost())return!1;var a,g=t.viewState,l=t.layerStatesArray;for(a=l.length-1;a>=0;--a){s=l[a];var u=s.layer;if(ol.layer.Layer.visibleAtResolution(s,g.resolution)&&n.call(i,u)&&(s=this.getLayerRenderer(u).forEachFeatureAtCoordinate(e,t,o,r)))return s}};ol.renderer.webgl.Map.prototype.hasFeatureAtCoordinate=function(e,t,o,r){var n=!1;if(this.getGL().isContextLost())return!1;var i,s=t.viewState,a=t.layerStatesArray;for(i=a.length-1;i>=0;--i){var g=a[i],l=g.layer;if(ol.layer.Layer.visibleAtResolution(g,s.resolution)&&o.call(r,l)&&(n=this.getLayerRenderer(l).hasFeatureAtCoordinate(e,t)))return!0}return n};ol.renderer.webgl.Map.prototype.forEachLayerAtPixel=function(e,t,o,r,n,i){if(this.getGL().isContextLost())return!1;i=t.viewState;var s,a,g=t.layerStatesArray;for(a=g.length-1;a>=0;--a){s=g[a];var l=s.layer;if(ol.layer.Layer.visibleAtResolution(s,i.resolution)&&n.call(r,l)&&(s=this.getLayerRenderer(l).forEachLayerAtPixel(e,t,o,r)))return s}};ol.OL3_URL="http://openlayers.org/";ol.OL3_LOGO_URL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC";ol.DEFAULT_RENDERER_TYPES=[ol.RendererType.CANVAS,ol.RendererType.WEBGL,ol.RendererType.DOM];ol.MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};ol.Map=function(e){ol.Object.call(this);var t=ol.Map.createOptionsInternal(e);this.loadTilesWhileAnimating_=goog.isDef(e.loadTilesWhileAnimating)?e.loadTilesWhileAnimating:!1;this.loadTilesWhileInteracting_=goog.isDef(e.loadTilesWhileInteracting)?e.loadTilesWhileInteracting:!1;this.pixelRatio_=goog.isDef(e.pixelRatio)?e.pixelRatio:ol.has.DEVICE_PIXEL_RATIO;this.logos_=t.logos;this.animationDelay_=new goog.async.AnimationDelay(this.renderFrame_,void 0,this);this.registerDisposable(this.animationDelay_);this.coordinateToPixelMatrix_=goog.vec.Mat4.createNumber();this.pixelToCoordinateMatrix_=goog.vec.Mat4.createNumber();this.frameIndex_=0;this.frameState_=null;this.previousExtent_=ol.extent.createEmpty();this.layerGroupPropertyListenerKeys_=this.viewPropertyListenerKey_=null;this.viewport_=goog.dom.createDom(goog.dom.TagName.DIV,"ol-viewport");this.viewport_.style.position="relative";this.viewport_.style.overflow="hidden";this.viewport_.style.width="100%";this.viewport_.style.height="100%";this.viewport_.style.msTouchAction="none";ol.has.TOUCH&&goog.dom.classlist.add(this.viewport_,"ol-touch");this.overlayContainer_=goog.dom.createDom(goog.dom.TagName.DIV,"ol-overlaycontainer");goog.dom.appendChild(this.viewport_,this.overlayContainer_);this.overlayContainerStopEvent_=goog.dom.createDom(goog.dom.TagName.DIV,"ol-overlaycontainer-stopevent");goog.events.listen(this.overlayContainerStopEvent_,[goog.events.EventType.CLICK,goog.events.EventType.DBLCLICK,goog.events.EventType.MOUSEDOWN,goog.events.EventType.TOUCHSTART,goog.events.EventType.MSPOINTERDOWN,ol.MapBrowserEvent.EventType.POINTERDOWN,goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel"],goog.events.Event.stopPropagation);goog.dom.appendChild(this.viewport_,this.overlayContainerStopEvent_);e=new ol.MapBrowserEventHandler(this);goog.events.listen(e,goog.object.getValues(ol.MapBrowserEvent.EventType),this.handleMapBrowserEvent,!1,this);this.registerDisposable(e);this.keyboardEventTarget_=t.keyboardEventTarget;this.keyHandler_=new goog.events.KeyHandler;goog.events.listen(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.handleBrowserEvent,!1,this);this.registerDisposable(this.keyHandler_);e=new goog.events.MouseWheelHandler(this.viewport_);goog.events.listen(e,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.handleBrowserEvent,!1,this);this.registerDisposable(e);this.controls_=t.controls;this.interactions_=t.interactions;this.overlays_=t.overlays;this.renderer_=new t.rendererConstructor(this.viewport_,this);this.registerDisposable(this.renderer_);this.viewportSizeMonitor_=new goog.dom.ViewportSizeMonitor;this.registerDisposable(this.viewportSizeMonitor_);this.focus_=this.viewportResizeListenerKey_=null;this.preRenderFunctions_=[];this.postRenderFunctions_=[];this.tileQueue_=new ol.TileQueue(goog.bind(this.getTilePriority,this),goog.bind(this.handleTileChange_,this));this.skippedFeatureUids_={};goog.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.LAYERGROUP),this.handleLayerGroupChanged_,!1,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.VIEW),this.handleViewChanged_,!1,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.SIZE),this.handleSizeChanged_,!1,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.TARGET),this.handleTargetChanged_,!1,this);this.setProperties(t.values);this.controls_.forEach(function(e){e.setMap(this)},this);goog.events.listen(this.controls_,ol.CollectionEventType.ADD,function(e){e.element.setMap(this)},!1,this);goog.events.listen(this.controls_,ol.CollectionEventType.REMOVE,function(e){e.element.setMap(null)},!1,this);this.interactions_.forEach(function(e){e.setMap(this)},this);goog.events.listen(this.interactions_,ol.CollectionEventType.ADD,function(e){e.element.setMap(this)},!1,this);goog.events.listen(this.interactions_,ol.CollectionEventType.REMOVE,function(e){e.element.setMap(null)},!1,this);this.overlays_.forEach(function(e){e.setMap(this)},this);goog.events.listen(this.overlays_,ol.CollectionEventType.ADD,function(e){e.element.setMap(this)},!1,this);goog.events.listen(this.overlays_,ol.CollectionEventType.REMOVE,function(e){e.element.setMap(null)},!1,this)};goog.inherits(ol.Map,ol.Object);ol.Map.prototype.addControl=function(e){var t=this.getControls();goog.asserts.assert(goog.isDef(t),"controls should be defined");t.push(e)};ol.Map.prototype.addInteraction=function(e){var t=this.getInteractions();goog.asserts.assert(goog.isDef(t),"interactions should be defined");t.push(e)};ol.Map.prototype.addLayer=function(e){this.getLayerGroup().getLayers().push(e)};ol.Map.prototype.addOverlay=function(e){var t=this.getOverlays();goog.asserts.assert(goog.isDef(t),"overlays should be defined");t.push(e)};ol.Map.prototype.beforeRender=function(){this.render();Array.prototype.push.apply(this.preRenderFunctions_,arguments)};ol.Map.prototype.removePreRenderFunction=function(e){return goog.array.remove(this.preRenderFunctions_,e)};ol.Map.prototype.disposeInternal=function(){goog.dom.removeNode(this.viewport_);ol.Map.superClass_.disposeInternal.call(this)};ol.Map.prototype.forEachFeatureAtPixel=function(e,t,o,r,n){return goog.isNull(this.frameState_)?void 0:(e=this.getCoordinateFromPixel(e),o=goog.isDef(o)?o:null,r=goog.isDef(r)?r:goog.functions.TRUE,n=goog.isDef(n)?n:null,this.renderer_.forEachFeatureAtCoordinate(e,this.frameState_,t,o,r,n))};ol.Map.prototype.forEachLayerAtPixel=function(e,t,o,r,n){return goog.isNull(this.frameState_)?void 0:(o=goog.isDef(o)?o:null,r=goog.isDef(r)?r:goog.functions.TRUE,n=goog.isDef(n)?n:null,this.renderer_.forEachLayerAtPixel(e,this.frameState_,t,o,r,n))};ol.Map.prototype.hasFeatureAtPixel=function(e,t,o){if(goog.isNull(this.frameState_))return!1;e=this.getCoordinateFromPixel(e);t=goog.isDef(t)?t:goog.functions.TRUE;o=goog.isDef(o)?o:null;return this.renderer_.hasFeatureAtCoordinate(e,this.frameState_,t,o)};ol.Map.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))};ol.Map.prototype.getEventPixel=function(e){e=goog.style.getRelativePosition(e,this.viewport_);return[e.x,e.y]};ol.Map.prototype.getTarget=function(){return this.get(ol.MapProperty.TARGET)};ol.Map.prototype.getTargetElement=function(){var e=this.getTarget();return goog.isDef(e)?goog.dom.getElement(e):null};ol.Map.prototype.getCoordinateFromPixel=function(e){var t=this.frameState_;if(goog.isNull(t))return null;e=e.slice();return ol.vec.Mat4.multVec2(t.pixelToCoordinateMatrix,e,e)};ol.Map.prototype.getControls=function(){return this.controls_};ol.Map.prototype.getOverlays=function(){return this.overlays_};ol.Map.prototype.getInteractions=function(){return this.interactions_};ol.Map.prototype.getLayerGroup=function(){return this.get(ol.MapProperty.LAYERGROUP)};ol.Map.prototype.getLayers=function(){return this.getLayerGroup().getLayers()};ol.Map.prototype.getPixelFromCoordinate=function(e){var t=this.frameState_;if(goog.isNull(t))return null;e=e.slice(0,2);return ol.vec.Mat4.multVec2(t.coordinateToPixelMatrix,e,e)};ol.Map.prototype.getRenderer=function(){return this.renderer_};ol.Map.prototype.getSize=function(){return this.get(ol.MapProperty.SIZE)};ol.Map.prototype.getView=function(){return this.get(ol.MapProperty.VIEW)};ol.Map.prototype.getViewport=function(){return this.viewport_};ol.Map.prototype.getOverlayContainer=function(){return this.overlayContainer_};ol.Map.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_};ol.Map.prototype.getTilePriority=function(e,t,o,r){var n=this.frameState_;if(goog.isNull(n)||!(t in n.wantedTiles))return ol.structs.PriorityQueue.DROP;e=ol.tilecoord.toString(e.tileCoord);if(!n.wantedTiles[t][e])return ol.structs.PriorityQueue.DROP;t=o[0]-n.focus[0];o=o[1]-n.focus[1];return 65536*Math.log(r)+Math.sqrt(t*t+o*o)/r};ol.Map.prototype.handleBrowserEvent=function(e,t){var o=new ol.MapBrowserEvent(t||e.type,this,e);this.handleMapBrowserEvent(o)};ol.Map.prototype.handleMapBrowserEvent=function(e){if(!goog.isNull(this.frameState_)){this.focus_=e.coordinate;e.frameState=this.frameState_;var t=this.getInteractions();goog.asserts.assert(goog.isDef(t),"interactions should be defined");var o,t=t.getArray();if(!1!==this.dispatchEvent(e))for(o=t.length-1;o>=0;o--){var r=t[o];if(r.getActive()&&!r.handleEvent(e))break}}};ol.Map.prototype.handlePostRender=function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var o=16,r=o,n=0;goog.isNull(e)||(n=e.viewHints,n[ol.ViewHint.ANIMATING]&&(o=this.loadTilesWhileAnimating_?8:0,r=2),n[ol.ViewHint.INTERACTING]&&(o=this.loadTilesWhileInteracting_?8:0,r=2),n=goog.object.getCount(e.wantedTiles));o*=n;r*=n;t.getTilesLoading()<o&&(t.reprioritize(),t.loadMoreTiles(o,r))}t=this.postRenderFunctions_;o=0;for(r=t.length;r>o;++o)t[o](this,e);t.length=0};ol.Map.prototype.handleSizeChanged_=function(){this.render()};ol.Map.prototype.handleTargetChanged_=function(){var e=this.getTargetElement();this.keyHandler_.detach();goog.isNull(e)?(goog.dom.removeNode(this.viewport_),goog.isNull(this.viewportResizeListenerKey_)||(goog.events.unlistenByKey(this.viewportResizeListenerKey_),this.viewportResizeListenerKey_=null)):(goog.dom.appendChild(e,this.viewport_),e=goog.isNull(this.keyboardEventTarget_)?e:this.keyboardEventTarget_,this.keyHandler_.attach(e),goog.isNull(this.viewportResizeListenerKey_)&&(this.viewportResizeListenerKey_=goog.events.listen(this.viewportSizeMonitor_,goog.events.EventType.RESIZE,this.updateSize,!1,this)));this.updateSize()};ol.Map.prototype.handleTileChange_=function(){this.render()};ol.Map.prototype.handleViewPropertyChanged_=function(){this.render()};ol.Map.prototype.handleViewChanged_=function(){goog.isNull(this.viewPropertyListenerKey_)||(goog.events.unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null);var e=this.getView();goog.isNull(e)||(this.viewPropertyListenerKey_=goog.events.listen(e,ol.ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,!1,this));this.render()};ol.Map.prototype.handleLayerGroupMemberChanged_=function(e){goog.asserts.assertInstanceof(e,goog.events.Event,"event should be an Event");this.render()};ol.Map.prototype.handleLayerGroupPropertyChanged_=function(e){goog.asserts.assertInstanceof(e,ol.ObjectEvent,"event should be an ol.ObjectEvent");this.render()};ol.Map.prototype.handleLayerGroupChanged_=function(){if(!goog.isNull(this.layerGroupPropertyListenerKeys_)){for(var e=this.layerGroupPropertyListenerKeys_.length,t=0;e>t;++t)goog.events.unlistenByKey(this.layerGroupPropertyListenerKeys_[t]);this.layerGroupPropertyListenerKeys_=null}e=this.getLayerGroup();goog.isDefAndNotNull(e)&&(this.layerGroupPropertyListenerKeys_=[goog.events.listen(e,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerGroupPropertyChanged_,!1,this),goog.events.listen(e,goog.events.EventType.CHANGE,this.handleLayerGroupMemberChanged_,!1,this)]);this.render()};ol.Map.prototype.isDef=function(){if(!goog.dom.contains(document,this.viewport_)||!goog.style.isElementShown(this.viewport_))return!1;var e=this.getSize();if(!goog.isDefAndNotNull(e)||0>=e[0]||0>=e[1])return!1;e=this.getView();return goog.isNull(e)||!e.isDef()?!1:!0};ol.Map.prototype.isRendered=function(){return!goog.isNull(this.frameState_)};ol.Map.prototype.renderSync=function(){this.animationDelay_.fire()};ol.Map.prototype.render=function(){this.animationDelay_.isActive()||this.animationDelay_.start()};ol.Map.prototype.removeControl=function(e){var t=this.getControls();goog.asserts.assert(goog.isDef(t),"controls should be defined");return goog.isDef(t.remove(e))?e:void 0};ol.Map.prototype.removeInteraction=function(e){var t,o=this.getInteractions();goog.asserts.assert(goog.isDef(o),"interactions should be defined");goog.isDef(o.remove(e))&&(t=e);return t};ol.Map.prototype.removeLayer=function(e){return this.getLayerGroup().getLayers().remove(e)};ol.Map.prototype.removeOverlay=function(e){var t=this.getOverlays();goog.asserts.assert(goog.isDef(t),"overlays should be defined");return goog.isDef(t.remove(e))?e:void 0};ol.Map.prototype.renderFrame_=function(e){var t,o,r,n=this.getSize(),i=this.getView(),s=null;if(goog.isDef(n)&&ol.size.hasArea(n)&&!goog.isNull(i)&&i.isDef()){var s=i.getHints(),a=this.getLayerGroup().getLayerStatesArray(),g={};t=0;for(o=a.length;o>t;++t)g[goog.getUid(a[t].layer)]=a[t];r=i.getState();s={animate:!1,attributions:{},coordinateToPixelMatrix:this.coordinateToPixelMatrix_,extent:null,focus:goog.isNull(this.focus_)?r.center:this.focus_,index:this.frameIndex_++,layerStates:g,layerStatesArray:a,logos:goog.object.clone(this.logos_),pixelRatio:this.pixelRatio_,pixelToCoordinateMatrix:this.pixelToCoordinateMatrix_,postRenderFunctions:[],size:n,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:r,viewHints:s,wantedTiles:{}}}if(!goog.isNull(s)){e=this.preRenderFunctions_;t=n=0;for(o=e.length;o>t;++t)i=e[t],i(this,s)&&(e[n++]=i);e.length=n;s.extent=ol.extent.getForViewAndSize(r.center,r.resolution,r.rotation,s.size)}this.frameState_=s;this.renderer_.renderFrame(s);goog.isNull(s)||(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),0!==this.preRenderFunctions_.length||s.viewHints[ol.ViewHint.ANIMATING]||s.viewHints[ol.ViewHint.INTERACTING]||ol.extent.equals(s.extent,this.previousExtent_)||(this.dispatchEvent(new ol.MapEvent(ol.MapEventType.MOVEEND,this,s)),ol.extent.clone(s.extent,this.previousExtent_)));this.dispatchEvent(new ol.MapEvent(ol.MapEventType.POSTRENDER,this,s));goog.async.nextTick(this.handlePostRender,this)};ol.Map.prototype.setLayerGroup=function(e){this.set(ol.MapProperty.LAYERGROUP,e)};ol.Map.prototype.setSize=function(e){this.set(ol.MapProperty.SIZE,e)};ol.Map.prototype.setTarget=function(e){this.set(ol.MapProperty.TARGET,e)};ol.Map.prototype.setView=function(e){this.set(ol.MapProperty.VIEW,e)};ol.Map.prototype.skipFeature=function(e){e=goog.getUid(e).toString();this.skippedFeatureUids_[e]=!0;this.render()};ol.Map.prototype.updateSize=function(){var e=this.getTargetElement();goog.isNull(e)?this.setSize(void 0):(e=goog.style.getContentBoxSize(e),this.setSize([e.width,e.height]))};ol.Map.prototype.unskipFeature=function(e){e=goog.getUid(e).toString();delete this.skippedFeatureUids_[e];this.render()};ol.Map.createOptionsInternal=function(e){var t=null;goog.isDef(e.keyboardEventTarget)&&(t=goog.isString(e.keyboardEventTarget)?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var o={},r={};if(!goog.isDef(e.logo)||goog.isBoolean(e.logo)&&e.logo)r[ol.OL3_LOGO_URL]=ol.OL3_URL;else{var n=e.logo;goog.isString(n)?r[n]="":goog.isObject(n)&&(goog.asserts.assertString(n.href,"logo.href should be a string"),goog.asserts.assertString(n.src,"logo.src should be a string"),r[n.src]=n.href)}n=e.layers instanceof ol.layer.Group?e.layers:new ol.layer.Group({layers:e.layers});o[ol.MapProperty.LAYERGROUP]=n;o[ol.MapProperty.TARGET]=e.target;o[ol.MapProperty.VIEW]=goog.isDef(e.view)?e.view:new ol.View;var i,n=ol.renderer.Map;goog.isDef(e.renderer)?goog.isArray(e.renderer)?i=e.renderer:goog.isString(e.renderer)?i=[e.renderer]:goog.asserts.fail("Incorrect format for renderer option"):i=ol.DEFAULT_RENDERER_TYPES;var s,a;s=0;for(a=i.length;a>s;++s){var g=i[s];if(ol.ENABLE_CANVAS&&g==ol.RendererType.CANVAS){if(ol.has.CANVAS){n=ol.renderer.canvas.Map;break}}else if(ol.ENABLE_DOM&&g==ol.RendererType.DOM){if(ol.has.DOM){n=ol.renderer.dom.Map;break}}else if(ol.ENABLE_WEBGL&&g==ol.RendererType.WEBGL&&ol.has.WEBGL){n=ol.renderer.webgl.Map;break}}goog.isDef(e.controls)?goog.isArray(e.controls)?i=new ol.Collection(e.controls.slice()):(goog.asserts.assertInstanceof(e.controls,ol.Collection,"options.controls should be an ol.Collection"),i=e.controls):i=ol.control.defaults();goog.isDef(e.interactions)?goog.isArray(e.interactions)?s=new ol.Collection(e.interactions.slice()):(goog.asserts.assertInstanceof(e.interactions,ol.Collection,"options.interactions should be an ol.Collection"),s=e.interactions):s=ol.interaction.defaults();goog.isDef(e.overlays)?goog.isArray(e.overlays)?e=new ol.Collection(e.overlays.slice()):(goog.asserts.assertInstanceof(e.overlays,ol.Collection,"options.overlays should be an ol.Collection"),e=e.overlays):e=new ol.Collection;return{controls:i,interactions:s,keyboardEventTarget:t,logos:r,overlays:e,rendererConstructor:n,values:o}};ol.proj.common.add();goog.DEBUG&&function(){goog.debug.Console.autoInstall();goog.log.getLogger("ol").setLevel(goog.log.Level.FINEST)}();ol.OverlayProperty={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};ol.OverlayPositioning={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};ol.Overlay=function(e){ol.Object.call(this);this.insertFirst_=goog.isDef(e.insertFirst)?e.insertFirst:!0;this.stopEvent_=goog.isDef(e.stopEvent)?e.stopEvent:!0;this.element_=goog.dom.createDom(goog.dom.TagName.DIV,{"class":"ol-overlay-container"});this.element_.style.position="absolute";this.autoPan=goog.isDef(e.autoPan)?e.autoPan:!1;this.autoPanAnimation_=goog.isDef(e.autoPanAnimation)?e.autoPanAnimation:{};this.autoPanMargin_=goog.isDef(e.autoPanMargin)?e.autoPanMargin:20;this.rendered_={bottom_:"",left_:"",right_:"",top_:"",visible:!0};this.mapPostrenderListenerKey_=null;goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.ELEMENT),this.handleElementChanged,!1,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.MAP),this.handleMapChanged,!1,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.OFFSET),this.handleOffsetChanged,!1,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.POSITION),this.handlePositionChanged,!1,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.POSITIONING),this.handlePositioningChanged,!1,this);goog.isDef(e.element)&&this.setElement(e.element);this.setOffset(goog.isDef(e.offset)?e.offset:[0,0]);this.setPositioning(goog.isDef(e.positioning)?e.positioning:ol.OverlayPositioning.TOP_LEFT);goog.isDef(e.position)&&this.setPosition(e.position)};goog.inherits(ol.Overlay,ol.Object);ol.Overlay.prototype.getElement=function(){return this.get(ol.OverlayProperty.ELEMENT)};ol.Overlay.prototype.getMap=function(){return this.get(ol.OverlayProperty.MAP)};ol.Overlay.prototype.getOffset=function(){return this.get(ol.OverlayProperty.OFFSET)};ol.Overlay.prototype.getPosition=function(){return this.get(ol.OverlayProperty.POSITION)};ol.Overlay.prototype.getPositioning=function(){return this.get(ol.OverlayProperty.POSITIONING)};ol.Overlay.prototype.handleElementChanged=function(){goog.dom.removeChildren(this.element_);var e=this.getElement();goog.isDefAndNotNull(e)&&goog.dom.append(this.element_,e)};ol.Overlay.prototype.handleMapChanged=function(){goog.isNull(this.mapPostrenderListenerKey_)||(goog.dom.removeNode(this.element_),goog.events.unlistenByKey(this.mapPostrenderListenerKey_),this.mapPostrenderListenerKey_=null);var e=this.getMap();goog.isDefAndNotNull(e)&&(this.mapPostrenderListenerKey_=goog.events.listen(e,ol.MapEventType.POSTRENDER,this.render,!1,this),this.updatePixelPosition(),e=this.stopEvent_?e.getOverlayContainerStopEvent():e.getOverlayContainer(),this.insertFirst_?goog.dom.insertChildAt(e,this.element_,0):goog.dom.append(e,this.element_))};ol.Overlay.prototype.render=function(){this.updatePixelPosition()};ol.Overlay.prototype.handleOffsetChanged=function(){this.updatePixelPosition()};ol.Overlay.prototype.handlePositionChanged=function(){this.updatePixelPosition();goog.isDef(this.get(ol.OverlayProperty.POSITION))&&this.autoPan&&this.panIntoView_()};ol.Overlay.prototype.handlePositioningChanged=function(){this.updatePixelPosition()};ol.Overlay.prototype.setElement=function(e){this.set(ol.OverlayProperty.ELEMENT,e)};ol.Overlay.prototype.setMap=function(e){this.set(ol.OverlayProperty.MAP,e)};ol.Overlay.prototype.setOffset=function(e){this.set(ol.OverlayProperty.OFFSET,e)};ol.Overlay.prototype.setPosition=function(e){this.set(ol.OverlayProperty.POSITION,e)};ol.Overlay.prototype.panIntoView_=function(){goog.asserts.assert(this.autoPan,"this.autoPan should be true");var e=this.getMap();if(goog.isDef(e)&&!goog.isNull(e.getTargetElement())){var t=this.getRect_(e.getTargetElement(),e.getSize()),o=this.getElement();goog.asserts.assert(goog.isDefAndNotNull(o),"element should be defined");var r=this.getRect_(o,[ol.dom.outerWidth(o),ol.dom.outerHeight(o)]),o=this.autoPanMargin_;if(!ol.extent.containsExtent(t,r)){var n=r[0]-t[0],i=t[2]-r[2],s=r[1]-t[1],r=t[3]-r[3],t=[0,0];0>n?t[0]=n-o:0>i&&(t[0]=Math.abs(i)+o);0>s?t[1]=s-o:0>r&&(t[1]=Math.abs(r)+o);(0!==t[0]||0!==t[1])&&(o=e.getView().getCenter(),goog.asserts.assert(goog.isDef(o),"center should be defined"),n=e.getPixelFromCoordinate(o),n=[n[0]+t[0],n[1]+t[1]],goog.isNull(this.autoPanAnimation_)||(this.autoPanAnimation_.source=o,e.beforeRender(ol.animation.pan(this.autoPanAnimation_))),e.getView().setCenter(e.getCoordinateFromPixel(n)))}}};ol.Overlay.prototype.getRect_=function(e,t){goog.asserts.assert(goog.isDefAndNotNull(e),"element should be defined");goog.asserts.assert(goog.isDef(t),"size should be defined");var o=goog.style.getPageOffset(e);return[o.x,o.y,o.x+t[0],o.y+t[1]]};ol.Overlay.prototype.setPositioning=function(e){this.set(ol.OverlayProperty.POSITIONING,e)};ol.Overlay.prototype.setVisible=function(e){this.rendered_.visible!==e&&(goog.style.setElementShown(this.element_,e),this.rendered_.visible=e)};ol.Overlay.prototype.updatePixelPosition=function(){var e=this.getMap(),t=this.getPosition();goog.isDef(e)&&e.isRendered()&&goog.isDef(t)?(t=e.getPixelFromCoordinate(t),e=e.getSize(),this.updateRenderedPosition(t,e)):this.setVisible(!1)};ol.Overlay.prototype.updateRenderedPosition=function(e,t){goog.asserts.assert(!goog.isNull(e),"pixel should not be null");goog.asserts.assert(goog.isDef(t),"mapSize should be defined");var o=this.element_.style,r=this.getOffset();goog.asserts.assert(goog.isArray(r),"offset should be an array");var n=this.getPositioning();goog.asserts.assert(goog.isDef(n),"positioning should be defined");var i=r[0],r=r[1];if(n==ol.OverlayPositioning.BOTTOM_RIGHT||n==ol.OverlayPositioning.CENTER_RIGHT||n==ol.OverlayPositioning.TOP_RIGHT)""!==this.rendered_.left_&&(this.rendered_.left_=o.left=""),i=Math.round(t[0]-e[0]-i)+"px",this.rendered_.right_!=i&&(this.rendered_.right_=o.right=i);else{""!==this.rendered_.right_&&(this.rendered_.right_=o.right="");(n==ol.OverlayPositioning.BOTTOM_CENTER||n==ol.OverlayPositioning.CENTER_CENTER||n==ol.OverlayPositioning.TOP_CENTER)&&(i-=goog.style.getSize(this.element_).width/2);i=Math.round(e[0]+i)+"px";this.rendered_.left_!=i&&(this.rendered_.left_=o.left=i)}if(n==ol.OverlayPositioning.BOTTOM_LEFT||n==ol.OverlayPositioning.BOTTOM_CENTER||n==ol.OverlayPositioning.BOTTOM_RIGHT)""!==this.rendered_.top_&&(this.rendered_.top_=o.top=""),n=Math.round(t[1]-e[1]-r)+"px",this.rendered_.bottom_!=n&&(this.rendered_.bottom_=o.bottom=n);else{""!==this.rendered_.bottom_&&(this.rendered_.bottom_=o.bottom="");(n==ol.OverlayPositioning.CENTER_LEFT||n==ol.OverlayPositioning.CENTER_CENTER||n==ol.OverlayPositioning.CENTER_RIGHT)&&(r-=goog.style.getSize(this.element_).height/2);n=Math.round(e[1]+r)+"px";this.rendered_.top_!=n&&(this.rendered_.top_=o.top=n)}this.setVisible(!0)};ol.control.OverviewMap=function(e){e=goog.isDef(e)?e:{};this.collapsed_=goog.isDef(e.collapsed)?e.collapsed:!0;this.collapsible_=goog.isDef(e.collapsible)?e.collapsible:!0;this.collapsible_||(this.collapsed_=!1);var t=goog.isDef(e.className)?e.className:"ol-overviewmap",o=goog.isDef(e.tipLabel)?e.tipLabel:"Overview map",r=goog.isDef(e.collapseLabel)?e.collapseLabel:"\xab";this.collapseLabel_=goog.isString(r)?goog.dom.createDom(goog.dom.TagName.SPAN,{},r):r;r=goog.isDef(e.label)?e.label:"\xbb";this.label_=goog.isString(r)?goog.dom.createDom(goog.dom.TagName.SPAN,{},r):r;o=goog.dom.createDom(goog.dom.TagName.BUTTON,{type:"button",title:o},this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_);goog.events.listen(o,goog.events.EventType.CLICK,this.handleClick_,!1,this);var r=goog.dom.createDom(goog.dom.TagName.DIV,"ol-overviewmap-map"),n=this.ovmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:r});goog.isDef(e.layers)&&e.layers.forEach(function(e){n.addLayer(e)},this);var i=goog.dom.createDom(goog.dom.TagName.DIV,"ol-overviewmap-box");this.boxOverlay_=new ol.Overlay({position:[0,0],positioning:ol.OverlayPositioning.BOTTOM_LEFT,element:i});this.ovmap_.addOverlay(this.boxOverlay_);t=goog.dom.createDom(goog.dom.TagName.DIV,t+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),r,o);o=goog.isDef(e.render)?e.render:ol.control.OverviewMap.render;ol.control.Control.call(this,{element:t,render:o,target:e.target})};goog.inherits(ol.control.OverviewMap,ol.control.Control);ol.control.OverviewMap.prototype.setMap=function(e){var t=this.getMap();e!==t&&(t&&(t=t.getView())&&this.unbindView_(t),ol.control.OverviewMap.superClass_.setMap.call(this,e),e&&(this.listenerKeys.push(goog.events.listen(e,ol.ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,!1,this)),0===this.ovmap_.getLayers().getLength()&&this.ovmap_.setLayerGroup(e.getLayerGroup()),e=e.getView()))&&(this.bindView_(e),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))};ol.control.OverviewMap.prototype.handleMapPropertyChange_=function(e){e.key===ol.MapProperty.VIEW&&((e=e.oldValue)&&this.unbindView_(e),e=this.getMap().getView(),this.bindView_(e))};ol.control.OverviewMap.prototype.bindView_=function(e){goog.events.listen(e,ol.Object.getChangeEventType(ol.ViewProperty.ROTATION),this.handleRotationChanged_,!1,this)};ol.control.OverviewMap.prototype.unbindView_=function(e){goog.events.unlisten(e,ol.Object.getChangeEventType(ol.ViewProperty.ROTATION),this.handleRotationChanged_,!1,this)};ol.control.OverviewMap.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())};ol.control.OverviewMap.render=function(){this.validateExtent_();this.updateBox_()};ol.control.OverviewMap.prototype.validateExtent_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var o=e.getSize();goog.asserts.assertArray(o,"mapSize should be an array");e=e.getView();goog.asserts.assert(goog.isDef(e),"view should be defined");o=e.calculateExtent(o);e=t.getSize();goog.asserts.assertArray(e,"ovmapSize should be an array");var r=t.getView();goog.asserts.assert(goog.isDef(r),"ovview should be defined");var r=r.calculateExtent(e),n=t.getPixelFromCoordinate(ol.extent.getTopLeft(o)),t=t.getPixelFromCoordinate(ol.extent.getBottomRight(o)),t=new goog.math.Size(Math.abs(n[0]-t[0]),Math.abs(n[1]-t[1])),n=e[0],e=e[1];t.width<n*ol.OVERVIEWMAP_MIN_RATIO||t.height<e*ol.OVERVIEWMAP_MIN_RATIO||t.width>n*ol.OVERVIEWMAP_MAX_RATIO||t.height>e*ol.OVERVIEWMAP_MAX_RATIO?this.resetExtent_():ol.extent.containsExtent(r,o)||this.recenter_()}};ol.control.OverviewMap.prototype.resetExtent_=function(){if(0!==ol.OVERVIEWMAP_MAX_RATIO&&0!==ol.OVERVIEWMAP_MIN_RATIO){var e=this.getMap(),t=this.ovmap_,o=e.getSize();goog.asserts.assertArray(o,"mapSize should be an array");e=e.getView();goog.asserts.assert(goog.isDef(e),"view should be defined");o=e.calculateExtent(o);e=t.getSize();goog.asserts.assertArray(e,"ovmapSize should be an array");t=t.getView();goog.asserts.assert(goog.isDef(t),"ovview should be defined");var r=Math.log(ol.OVERVIEWMAP_MAX_RATIO/ol.OVERVIEWMAP_MIN_RATIO)/Math.LN2,r=1/(Math.pow(2,r/2)*ol.OVERVIEWMAP_MIN_RATIO);ol.extent.scaleFromCenter(o,r);t.fit(o,e)}};ol.control.OverviewMap.prototype.recenter_=function(){var e=this.getMap(),t=this.ovmap_,e=e.getView();goog.asserts.assert(goog.isDef(e),"view should be defined");t=t.getView();goog.asserts.assert(goog.isDef(t),"ovview should be defined");t.setCenter(e.getCenter())};ol.control.OverviewMap.prototype.updateBox_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var o=e.getSize();goog.asserts.assertArray(o,"mapSize should be an array");var r=e.getView();goog.asserts.assert(goog.isDef(r),"view should be defined");var n=t.getView();goog.asserts.assert(goog.isDef(n),"ovview should be defined");t=t.getSize();goog.asserts.assertArray(t,"ovmapSize should be an array");var i=r.getRotation();goog.asserts.assert(goog.isDef(i),"rotation should be defined");e=this.boxOverlay_;t=this.boxOverlay_.getElement();r=r.calculateExtent(o);o=n.getResolution();n=ol.extent.getBottomLeft(r);r=ol.extent.getTopRight(r);i=this.calculateCoordinateRotate_(i,n);
e.setPosition(i);goog.isDefAndNotNull(t)&&(e=Math.abs((n[0]-r[0])/o),i=Math.abs((r[1]-n[1])/o),goog.style.setBorderBoxSize(t,new goog.math.Size(e,i)))}};ol.control.OverviewMap.prototype.calculateCoordinateRotate_=function(e,t){var o,r=this.getMap().getView();goog.asserts.assert(goog.isDef(r),"view should be defined");r=r.getCenter();goog.isDef(r)&&(o=[t[0]-r[0],t[1]-r[1]],ol.coordinate.rotate(o,e),ol.coordinate.add(o,r));return o};ol.control.OverviewMap.prototype.handleClick_=function(e){e.preventDefault();this.handleToggle_()};ol.control.OverviewMap.prototype.handleToggle_=function(){goog.dom.classlist.toggle(this.element,"ol-collapsed");this.collapsed_?goog.dom.replaceNode(this.collapseLabel_,this.label_):goog.dom.replaceNode(this.label_,this.collapseLabel_);this.collapsed_=!this.collapsed_;var e=this.ovmap_;this.collapsed_||e.isRendered()||(e.updateSize(),this.resetExtent_(),goog.events.listenOnce(e,ol.MapEventType.POSTRENDER,function(){this.updateBox_()},!1,this))};ol.control.OverviewMap.prototype.getCollapsible=function(){return this.collapsible_};ol.control.OverviewMap.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,goog.dom.classlist.toggle(this.element,"ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())};ol.control.OverviewMap.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()};ol.control.OverviewMap.prototype.getCollapsed=function(){return this.collapsed_};ol.control.ScaleLineProperty={UNITS:"units"};ol.control.ScaleLineUnits={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};ol.control.ScaleLine=function(e){e=goog.isDef(e)?e:{};var t=goog.isDef(e.className)?e.className:"ol-scale-line";this.innerElement_=goog.dom.createDom(goog.dom.TagName.DIV,t+"-inner");this.element_=goog.dom.createDom(goog.dom.TagName.DIV,t+" "+ol.css.CLASS_UNSELECTABLE,this.innerElement_);this.viewState_=null;this.minWidth_=goog.isDef(e.minWidth)?e.minWidth:64;this.renderedVisible_=!1;this.renderedWidth_=void 0;this.renderedHTML_="";this.toEPSG4326_=null;t=goog.isDef(e.render)?e.render:ol.control.ScaleLine.render;ol.control.Control.call(this,{element:this.element_,render:t,target:e.target});goog.events.listen(this,ol.Object.getChangeEventType(ol.control.ScaleLineProperty.UNITS),this.handleUnitsChanged_,!1,this);this.setUnits(e.units||ol.control.ScaleLineUnits.METRIC)};goog.inherits(ol.control.ScaleLine,ol.control.Control);ol.control.ScaleLine.LEADING_DIGITS=[1,2,5];ol.control.ScaleLine.prototype.getUnits=function(){return this.get(ol.control.ScaleLineProperty.UNITS)};ol.control.ScaleLine.render=function(e){e=e.frameState;this.viewState_=goog.isNull(e)?null:e.viewState;this.updateElement_()};ol.control.ScaleLine.prototype.handleUnitsChanged_=function(){this.updateElement_()};ol.control.ScaleLine.prototype.setUnits=function(e){this.set(ol.control.ScaleLineProperty.UNITS,e)};ol.control.ScaleLine.prototype.updateElement_=function(){var e=this.viewState_;if(goog.isNull(e))this.renderedVisible_&&(goog.style.setElementShown(this.element_,!1),this.renderedVisible_=!1);else{var t=e.center,o=e.projection,e=o.getPointResolution(e.resolution,t),r=o.getUnits(),n=this.getUnits();r!=ol.proj.Units.DEGREES||n!=ol.control.ScaleLineUnits.METRIC&&n!=ol.control.ScaleLineUnits.IMPERIAL&&n!=ol.control.ScaleLineUnits.US&&n!=ol.control.ScaleLineUnits.NAUTICAL?r!=ol.proj.Units.DEGREES&&n==ol.control.ScaleLineUnits.DEGREES?(goog.isNull(this.toEPSG4326_)&&(this.toEPSG4326_=ol.proj.getTransformFromProjections(o,ol.proj.get("EPSG:4326"))),t=Math.cos(goog.math.toRadians(this.toEPSG4326_(t)[1])),o=ol.sphere.NORMAL.radius,goog.asserts.assert(goog.isDef(ol.proj.METERS_PER_UNIT[r]),"Meters per unit should be defined for the projection unit"),o/=ol.proj.METERS_PER_UNIT[r],e*=180/(Math.PI*t*o),r=ol.proj.Units.DEGREES):this.toEPSG4326_=null:(this.toEPSG4326_=null,t=Math.cos(goog.math.toRadians(t[1])),e*=Math.PI*t*ol.sphere.NORMAL.radius/180,r=ol.proj.Units.METERS);goog.asserts.assert((n==ol.control.ScaleLineUnits.METRIC||n==ol.control.ScaleLineUnits.IMPERIAL||n==ol.control.ScaleLineUnits.US||n==ol.control.ScaleLineUnits.NAUTICAL)&&r==ol.proj.Units.METERS||n==ol.control.ScaleLineUnits.DEGREES&&r==ol.proj.Units.DEGREES,"Scale line units and projection units should match");t=this.minWidth_*e;r="";n==ol.control.ScaleLineUnits.DEGREES?1/60>t?(r="\u2033",e*=3600):1>t?(r="\u2032",e*=60):r="\xb0":n==ol.control.ScaleLineUnits.IMPERIAL?.9144>t?(r="in",e/=.0254):1609.344>t?(r="ft",e/=.3048):(r="mi",e/=1609.344):n==ol.control.ScaleLineUnits.NAUTICAL?(e/=1852,r="nm"):n==ol.control.ScaleLineUnits.METRIC?1>t?(r="mm",e*=1e3):1e3>t?r="m":(r="km",e/=1e3):n==ol.control.ScaleLineUnits.US?.9144>t?(r="in",e*=39.37):1609.344>t?(r="ft",e/=.30480061):(r="mi",e/=1609.3472):goog.asserts.fail("Scale line element cannot be updated");for(t=3*Math.floor(Math.log(this.minWidth_*e)/Math.log(10));;){o=ol.control.ScaleLine.LEADING_DIGITS[t%3]*Math.pow(10,Math.floor(t/3));n=Math.round(o/e);if(isNaN(n)){goog.style.setElementShown(this.element_,!1);this.renderedVisible_=!1;return}if(n>=this.minWidth_)break;++t}e=o+" "+r;this.renderedHTML_!=e&&(this.renderedHTML_=this.innerElement_.innerHTML=e);this.renderedWidth_!=n&&(this.innerElement_.style.width=n+"px",this.renderedWidth_=n);this.renderedVisible_||(goog.style.setElementShown(this.element_,!0),this.renderedVisible_=!0)}};goog.events.EventHandler=function(e){goog.Disposable.call(this);this.handler_=e;this.keys_={}};goog.inherits(goog.events.EventHandler,goog.Disposable);goog.events.EventHandler.typeArray_=[];goog.events.EventHandler.prototype.listen=function(e,t,o,r){return this.listen_(e,t,o,r)};goog.events.EventHandler.prototype.listenWithScope=function(e,t,o,r,n){return this.listen_(e,t,o,r,n)};goog.events.EventHandler.prototype.listen_=function(e,t,o,r,n){goog.isArray(t)||(t&&(goog.events.EventHandler.typeArray_[0]=t.toString()),t=goog.events.EventHandler.typeArray_);for(var i=0;i<t.length;i++){var s=goog.events.listen(e,t[i],o||this.handleEvent,r||!1,n||this.handler_||this);if(!s)break;this.keys_[s.key]=s}return this};goog.events.EventHandler.prototype.listenOnce=function(e,t,o,r){return this.listenOnce_(e,t,o,r)};goog.events.EventHandler.prototype.listenOnceWithScope=function(e,t,o,r,n){return this.listenOnce_(e,t,o,r,n)};goog.events.EventHandler.prototype.listenOnce_=function(e,t,o,r,n){if(goog.isArray(t))for(var i=0;i<t.length;i++)this.listenOnce_(e,t[i],o,r,n);else{e=goog.events.listenOnce(e,t,o||this.handleEvent,r,n||this.handler_||this);if(!e)return this;this.keys_[e.key]=e}return this};goog.events.EventHandler.prototype.listenWithWrapper=function(e,t,o,r){return this.listenWithWrapper_(e,t,o,r)};goog.events.EventHandler.prototype.listenWithWrapperAndScope=function(e,t,o,r,n){return this.listenWithWrapper_(e,t,o,r,n)};goog.events.EventHandler.prototype.listenWithWrapper_=function(e,t,o,r,n){t.listen(e,o,r,n||this.handler_||this,this);return this};goog.events.EventHandler.prototype.getListenerCount=function(){var e,t=0;for(e in this.keys_)Object.prototype.hasOwnProperty.call(this.keys_,e)&&t++;return t};goog.events.EventHandler.prototype.unlisten=function(e,t,o,r,n){if(goog.isArray(t))for(var i=0;i<t.length;i++)this.unlisten(e,t[i],o,r,n);else(e=goog.events.getListener(e,t,o||this.handleEvent,r,n||this.handler_||this))&&(goog.events.unlistenByKey(e),delete this.keys_[e.key]);return this};goog.events.EventHandler.prototype.unlistenWithWrapper=function(e,t,o,r,n){t.unlisten(e,o,r,n||this.handler_||this,this);return this};goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,function(e,t){this.keys_.hasOwnProperty(t)&&goog.events.unlistenByKey(e)},this);this.keys_={}};goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this);this.removeAll()};goog.events.EventHandler.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};goog.style.bidi={};goog.style.bidi.getScrollLeft=function(e){var t=goog.style.isRightToLeft(e);return t&&goog.userAgent.GECKO?-e.scrollLeft:!t||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||"visible"==goog.style.getComputedOverflowX(e)?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft};goog.style.bidi.getOffsetStart=function(e){var t=e.offsetLeft,o=e.offsetParent;o||"fixed"!=goog.style.getComputedPosition(e)||(o=goog.dom.getOwnerDocument(e).documentElement);if(!o)return t;if(goog.userAgent.GECKO)var r=goog.style.getBorderBox(o),t=t+r.left;else goog.userAgent.isDocumentModeOrHigher(8)&&!goog.userAgent.isDocumentModeOrHigher(9)&&(r=goog.style.getBorderBox(o),t-=r.left);return goog.style.isRightToLeft(o)?o.clientWidth-(t+e.offsetWidth):t};goog.style.bidi.setScrollOffset=function(e,t){t=Math.max(t,0);e.scrollLeft=goog.style.isRightToLeft(e)?goog.userAgent.GECKO?-t:goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")?t:e.scrollWidth-t-e.clientWidth:t};goog.style.bidi.setPosition=function(e,t,o,r){goog.isNull(o)||(e.style.top=o+"px");r?(e.style.right=t+"px",e.style.left=""):(e.style.left=t+"px",e.style.right="")};goog.fx.Dragger=function(e,t,o){goog.events.EventTarget.call(this);this.target=e;this.handle=t||e;this.limits=o||new goog.math.Rect(0/0,0/0,0/0,0/0);this.document_=goog.dom.getOwnerDocument(e);this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);this.deltaY=this.deltaX=this.startY=this.startX=this.screenY=this.screenX=this.clientY=this.clientX=0;this.enabled_=!0;this.dragging_=!1;this.preventMouseDown_=!0;this.hysteresisDistanceSquared_=0;this.useRightPositioningForRtl_=this.ieDragStartCancellingOn_=!1;goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this)};goog.inherits(goog.fx.Dragger,goog.events.EventTarget);goog.tagUnsealableClass(goog.fx.Dragger);goog.fx.Dragger.HAS_SET_CAPTURE_=goog.userAgent.IE||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.3");goog.fx.Dragger.cloneNode=function(e){for(var t=e.cloneNode(!0),o=e.getElementsByTagName(goog.dom.TagName.TEXTAREA),r=t.getElementsByTagName(goog.dom.TagName.TEXTAREA),n=0;n<o.length;n++)r[n].value=o[n].value;switch(e.tagName){case goog.dom.TagName.TR:return goog.dom.createDom(goog.dom.TagName.TABLE,null,goog.dom.createDom(goog.dom.TagName.TBODY,null,t));case goog.dom.TagName.TD:case goog.dom.TagName.TH:return goog.dom.createDom(goog.dom.TagName.TABLE,null,goog.dom.createDom(goog.dom.TagName.TBODY,null,goog.dom.createDom(goog.dom.TagName.TR,null,t)));case goog.dom.TagName.TEXTAREA:t.value=e.value;default:return t}};goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"};goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(e){this.useRightPositioningForRtl_=e};goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_};goog.fx.Dragger.prototype.setLimits=function(e){this.limits=e||new goog.math.Rect(0/0,0/0,0/0,0/0)};goog.fx.Dragger.prototype.setHysteresis=function(e){this.hysteresisDistanceSquared_=Math.pow(e,2)};goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)};goog.fx.Dragger.prototype.setScrollTarget=function(e){this.scrollTarget_=e};goog.fx.Dragger.prototype.setCancelIeDragStart=function(e){this.ieDragStartCancellingOn_=e};goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_};goog.fx.Dragger.prototype.setEnabled=function(e){this.enabled_=e};goog.fx.Dragger.prototype.setPreventMouseDown=function(e){this.preventMouseDown_=e};goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this);goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this);this.cleanUpAfterDragging_();this.handle=this.target=null};goog.fx.Dragger.prototype.isRightToLeft_=function(){goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.target));return this.rightToLeft_};goog.fx.Dragger.prototype.startDrag=function(e){var t=e.type==goog.events.EventType.MOUSEDOWN;if(!this.enabled_||this.dragging_||t&&!e.isMouseActionButton())this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);else{if(0==this.hysteresisDistanceSquared_){if(!this.fireDragStart_(e))return;this.dragging_=!0,this.preventMouseDown_&&e.preventDefault()}else this.preventMouseDown_&&e.preventDefault();this.setupDragHandlers();this.clientX=this.startX=e.clientX;this.clientY=this.startY=e.clientY;this.screenX=e.screenX;this.screenY=e.screenY;this.computeInitialPosition();this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll()}};goog.fx.Dragger.prototype.setupDragHandlers=function(){var e=this.document_,t=e.documentElement,o=!goog.fx.Dragger.HAS_SET_CAPTURE_;this.eventHandler_.listen(e,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,o);this.eventHandler_.listen(e,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,o);goog.fx.Dragger.HAS_SET_CAPTURE_?(t.setCapture(!1),this.eventHandler_.listen(t,goog.events.EventType.LOSECAPTURE,this.endDrag)):this.eventHandler_.listen(goog.dom.getWindow(e),goog.events.EventType.BLUR,this.endDrag);goog.userAgent.IE&&this.ieDragStartCancellingOn_&&this.eventHandler_.listen(e,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault);this.scrollTarget_&&this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,o)};goog.fx.Dragger.prototype.fireDragStart_=function(e){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,e.clientX,e.clientY,e))};goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll();goog.fx.Dragger.HAS_SET_CAPTURE_&&this.document_.releaseCapture()};goog.fx.Dragger.prototype.endDrag=function(e,t){this.cleanUpAfterDragging_();if(this.dragging_){this.dragging_=!1;var o=this.limitX(this.deltaX),r=this.limitY(this.deltaY);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,e.clientX,e.clientY,e,o,r,t||e.type==goog.events.EventType.TOUCHCANCEL))}else this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)};goog.fx.Dragger.prototype.endDragCancel=function(e){this.endDrag(e,!0)};goog.fx.Dragger.prototype.handleMove_=function(e){if(this.enabled_){var t=(this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1)*(e.clientX-this.clientX),o=e.clientY-this.clientY;this.clientX=e.clientX;this.clientY=e.clientY;this.screenX=e.screenX;this.screenY=e.screenY;if(!this.dragging_){var r=this.startX-this.clientX,n=this.startY-this.clientY;if(r*r+n*n>this.hysteresisDistanceSquared_){if(!this.fireDragStart_(e)){this.isDisposed()||this.endDrag(e);return}this.dragging_=!0}}o=this.calculatePosition_(t,o);t=o.x;o=o.y;this.dragging_&&this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,e.clientX,e.clientY,e,t,o))&&(this.doDrag(e,t,o,!1),e.preventDefault())}};goog.fx.Dragger.prototype.calculatePosition_=function(e,t){var o=goog.dom.getDomHelper(this.document_).getDocumentScroll();e+=o.x-this.pageScroll.x;t+=o.y-this.pageScroll.y;this.pageScroll=o;this.deltaX+=e;this.deltaY+=t;var o=this.limitX(this.deltaX),r=this.limitY(this.deltaY);return new goog.math.Coordinate(o,r)};goog.fx.Dragger.prototype.onScroll_=function(e){var t=this.calculatePosition_(0,0);e.clientX=this.clientX;e.clientY=this.clientY;this.doDrag(e,t.x,t.y,!0)};goog.fx.Dragger.prototype.doDrag=function(e,t,o){this.defaultAction(t,o);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,e.clientX,e.clientY,e,t,o))};goog.fx.Dragger.prototype.limitX=function(e){var t=this.limits,o=isNaN(t.left)?null:t.left,t=isNaN(t.width)?0:t.width;return Math.min(null!=o?o+t:1/0,Math.max(null!=o?o:-1/0,e))};goog.fx.Dragger.prototype.limitY=function(e){var t=this.limits,o=isNaN(t.top)?null:t.top,t=isNaN(t.height)?0:t.height;return Math.min(null!=o?o+t:1/0,Math.max(null!=o?o:-1/0,e))};goog.fx.Dragger.prototype.computeInitialPosition=function(){this.deltaX=this.useRightPositioningForRtl_?goog.style.bidi.getOffsetStart(this.target):this.target.offsetLeft;this.deltaY=this.target.offsetTop};goog.fx.Dragger.prototype.defaultAction=function(e,t){this.useRightPositioningForRtl_&&this.isRightToLeft_()?this.target.style.right=e+"px":this.target.style.left=e+"px";this.target.style.top=t+"px"};goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_};goog.fx.DragEvent=function(e,t,o,r,n,i,s,a){goog.events.Event.call(this,e);this.clientX=o;this.clientY=r;this.browserEvent=n;this.left=goog.isDef(i)?i:t.deltaX;this.top=goog.isDef(s)?s:t.deltaY;this.dragger=t;this.dragCanceled=!!a};goog.inherits(goog.fx.DragEvent,goog.events.Event);ol.control.ZoomSlider=function(e){e=goog.isDef(e)?e:{};this.currentResolution_=void 0;this.direction_=ol.control.ZoomSlider.direction.VERTICAL;this.thumbSize_=null;this.sliderInitialized_=!1;this.duration_=goog.isDef(e.duration)?e.duration:200;var t=goog.isDef(e.className)?e.className:"ol-zoomslider",o=goog.dom.createDom(goog.dom.TagName.DIV,[t+"-thumb",ol.css.CLASS_UNSELECTABLE]),t=goog.dom.createDom(goog.dom.TagName.DIV,[t,ol.css.CLASS_UNSELECTABLE,ol.css.CLASS_CONTROL],o);this.dragger_=new goog.fx.Dragger(o);this.registerDisposable(this.dragger_);goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.START,this.handleDraggerStart_,!1,this);goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.DRAG,this.handleDraggerDrag_,!1,this);goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.END,this.handleDraggerEnd_,!1,this);goog.events.listen(t,goog.events.EventType.CLICK,this.handleContainerClick_,!1,this);goog.events.listen(o,goog.events.EventType.CLICK,goog.events.Event.stopPropagation);e=goog.isDef(e.render)?e.render:ol.control.ZoomSlider.render;ol.control.Control.call(this,{element:t,render:e})};goog.inherits(ol.control.ZoomSlider,ol.control.Control);ol.control.ZoomSlider.direction={VERTICAL:0,HORIZONTAL:1};ol.control.ZoomSlider.prototype.setMap=function(e){ol.control.ZoomSlider.superClass_.setMap.call(this,e);goog.isNull(e)||e.render()};ol.control.ZoomSlider.prototype.initSlider_=function(){var e=this.element,t=goog.style.getSize(e),o=goog.dom.getFirstElementChild(e),e=goog.style.getMarginBox(o),r=goog.style.getBorderBoxSize(o),o=r.width+e.right+e.left,e=r.height+e.top+e.bottom;this.thumbSize_=[o,e];o=t.width-o;e=t.height-e;t.width>t.height?(this.direction_=ol.control.ZoomSlider.direction.HORIZONTAL,t=new goog.math.Rect(0,0,o,0)):(this.direction_=ol.control.ZoomSlider.direction.VERTICAL,t=new goog.math.Rect(0,0,0,e));this.dragger_.setLimits(t);this.sliderInitialized_=!0};ol.control.ZoomSlider.render=function(e){goog.isNull(e.frameState)||(goog.asserts.assert(goog.isDefAndNotNull(e.frameState.viewState),"viewState should be defined"),this.sliderInitialized_||this.initSlider_(),e=e.frameState.viewState.resolution,e!==this.currentResolution_&&(this.currentResolution_=e,this.setThumbPosition_(e)))};ol.control.ZoomSlider.prototype.handleContainerClick_=function(e){var t=this.getMap(),o=t.getView(),r=o.getResolution();goog.asserts.assert(goog.isDef(r),"currentResolution should be defined");t.beforeRender(ol.animation.zoom({resolution:r,duration:this.duration_,easing:ol.easing.easeOut}));e=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2);e=this.getResolutionForPosition_(e);o.setResolution(o.constrainResolution(e))};ol.control.ZoomSlider.prototype.handleDraggerStart_=function(){this.getMap().getView().setHint(ol.ViewHint.INTERACTING,1)};ol.control.ZoomSlider.prototype.handleDraggerDrag_=function(e){e=this.getRelativePosition_(e.left,e.top);this.currentResolution_=this.getResolutionForPosition_(e);this.getMap().getView().setResolution(this.currentResolution_)};ol.control.ZoomSlider.prototype.handleDraggerEnd_=function(e){var t=this.getMap();e=t.getView();e.setHint(ol.ViewHint.INTERACTING,-1);goog.asserts.assert(goog.isDef(this.currentResolution_),"this.currentResolution_ should be defined");t.beforeRender(ol.animation.zoom({resolution:this.currentResolution_,duration:this.duration_,easing:ol.easing.easeOut}));t=e.constrainResolution(this.currentResolution_);e.setResolution(t)};ol.control.ZoomSlider.prototype.setThumbPosition_=function(e){e=this.getPositionForResolution_(e);var t=this.dragger_,o=goog.dom.getFirstElementChild(this.element);this.direction_==ol.control.ZoomSlider.direction.HORIZONTAL?goog.style.setPosition(o,t.limits.left+t.limits.width*e):goog.style.setPosition(o,t.limits.left,t.limits.top+t.limits.height*e)};ol.control.ZoomSlider.prototype.getRelativePosition_=function(e,t){var o=this.dragger_.limits;return goog.math.clamp(this.direction_===ol.control.ZoomSlider.direction.HORIZONTAL?(e-o.left)/o.width:(t-o.top)/o.height,0,1)};ol.control.ZoomSlider.prototype.getResolutionForPosition_=function(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)};ol.control.ZoomSlider.prototype.getPositionForResolution_=function(e){return 1-this.getMap().getView().getValueForResolutionFunction()(e)};ol.control.ZoomToExtent=function(e){e=goog.isDef(e)?e:{};this.extent_=goog.isDef(e.extent)?e.extent:null;var t=goog.isDef(e.className)?e.className:"ol-zoom-extent",o=goog.isDef(e.label)?e.label:"E",r=goog.isDef(e.tipLabel)?e.tipLabel:"Fit to extent",o=goog.dom.createDom(goog.dom.TagName.BUTTON,{type:"button",title:r},o);goog.events.listen(o,goog.events.EventType.CLICK,this.handleClick_,!1,this);t=goog.dom.createDom(goog.dom.TagName.DIV,t+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL,o);ol.control.Control.call(this,{element:t,target:e.target})};goog.inherits(ol.control.ZoomToExtent,ol.control.Control);ol.control.ZoomToExtent.prototype.handleClick_=function(e){e.preventDefault();this.handleZoomToExtent_()};ol.control.ZoomToExtent.prototype.handleZoomToExtent_=function(){var e=this.getMap(),t=e.getView(),o=goog.isNull(this.extent_)?t.getProjection().getExtent():this.extent_,e=e.getSize();goog.asserts.assert(goog.isDef(e),"size should be defined");t.fit(o,e)};ol.format.Feature=function(){this.defaultDataProjection=null};ol.format.Feature.prototype.getReadOptions=function(e,t){var o;goog.isDef(t)&&(o={dataProjection:goog.isDef(t.dataProjection)?t.dataProjection:this.readProjection(e),featureProjection:t.featureProjection});return this.adaptOptions(o)};ol.format.Feature.prototype.adaptOptions=function(e){var t;goog.isDef(e)&&(t={featureProjection:e.featureProjection,dataProjection:goog.isDefAndNotNull(e.dataProjection)?e.dataProjection:this.defaultDataProjection,rightHanded:e.rightHanded});return t};ol.format.Feature.transformWithOptions=function(e,t,o){var r=goog.isDef(o)?ol.proj.get(o.featureProjection):null;o=goog.isDef(o)?ol.proj.get(o.dataProjection):null;return goog.isNull(r)||goog.isNull(o)||ol.proj.equivalent(r,o)?e:e instanceof ol.geom.Geometry?(t?e.clone():e).transform(t?r:o,t?o:r):ol.proj.transformExtent(t?e.slice():e,t?r:o,t?o:r)};ol.format.JSONFeature=function(){ol.format.Feature.call(this)};goog.inherits(ol.format.JSONFeature,ol.format.Feature);ol.format.JSONFeature.prototype.getObject_=function(e){if(goog.isObject(e))return e;if(goog.isString(e))return e=goog.json.parse(e),goog.isDef(e)?e:null;goog.asserts.fail();return null};ol.format.JSONFeature.prototype.getType=function(){return ol.format.FormatType.JSON};ol.format.JSONFeature.prototype.readFeature=function(e,t){return this.readFeatureFromObject(this.getObject_(e),this.getReadOptions(e,t))};ol.format.JSONFeature.prototype.readFeatures=function(e,t){return this.readFeaturesFromObject(this.getObject_(e),this.getReadOptions(e,t))};ol.format.JSONFeature.prototype.readGeometry=function(e,t){return this.readGeometryFromObject(this.getObject_(e),this.getReadOptions(e,t))};ol.format.JSONFeature.prototype.readProjection=function(e){return this.readProjectionFromObject(this.getObject_(e))};ol.format.JSONFeature.prototype.writeFeature=function(e,t){return goog.json.serialize(this.writeFeatureObject(e,t))};ol.format.JSONFeature.prototype.writeFeatures=function(e,t){return goog.json.serialize(this.writeFeaturesObject(e,t))};ol.format.JSONFeature.prototype.writeGeometry=function(e,t){return goog.json.serialize(this.writeGeometryObject(e,t))};ol.format.GeoJSON=function(e){e=goog.isDef(e)?e:{};ol.format.JSONFeature.call(this);this.defaultDataProjection=ol.proj.get(goog.isDefAndNotNull(e.defaultDataProjection)?e.defaultDataProjection:"EPSG:4326");this.geometryName_=e.geometryName};goog.inherits(ol.format.GeoJSON,ol.format.JSONFeature);ol.format.GeoJSON.EXTENSIONS_=[".geojson"];ol.format.GeoJSON.readGeometry_=function(e,t){if(goog.isNull(e))return null;var o=ol.format.GeoJSON.GEOMETRY_READERS_[e.type];goog.asserts.assert(goog.isDef(o),"geometryReader should be defined");return ol.format.Feature.transformWithOptions(o(e),!1,t)};ol.format.GeoJSON.readGeometryCollectionGeometry_=function(e,t){goog.asserts.assert("GeometryCollection"==e.type,"object.type should be GeometryCollection");var o=goog.array.map(e.geometries,function(e){return ol.format.GeoJSON.readGeometry_(e,t)});return new ol.geom.GeometryCollection(o)};ol.format.GeoJSON.readPointGeometry_=function(e){goog.asserts.assert("Point"==e.type,"object.type should be Point");return new ol.geom.Point(e.coordinates)};ol.format.GeoJSON.readLineStringGeometry_=function(e){goog.asserts.assert("LineString"==e.type,"object.type should be LineString");return new ol.geom.LineString(e.coordinates)};ol.format.GeoJSON.readMultiLineStringGeometry_=function(e){goog.asserts.assert("MultiLineString"==e.type,"object.type should be MultiLineString");return new ol.geom.MultiLineString(e.coordinates)};ol.format.GeoJSON.readMultiPointGeometry_=function(e){goog.asserts.assert("MultiPoint"==e.type,"object.type should be MultiPoint");return new ol.geom.MultiPoint(e.coordinates)};ol.format.GeoJSON.readMultiPolygonGeometry_=function(e){goog.asserts.assert("MultiPolygon"==e.type,"object.type should be MultiPolygon");return new ol.geom.MultiPolygon(e.coordinates)};ol.format.GeoJSON.readPolygonGeometry_=function(e){goog.asserts.assert("Polygon"==e.type,"object.type should be Polygon");return new ol.geom.Polygon(e.coordinates)};ol.format.GeoJSON.writeGeometry_=function(e,t){var o=ol.format.GeoJSON.GEOMETRY_WRITERS_[e.getType()];goog.asserts.assert(goog.isDef(o),"geometryWriter should be defined");return o(ol.format.Feature.transformWithOptions(e,!0,t),t)};ol.format.GeoJSON.writeEmptyGeometryCollectionGeometry_=function(){return{type:"GeometryCollection",geometries:[]}};ol.format.GeoJSON.writeGeometryCollectionGeometry_=function(e,t){goog.asserts.assertInstanceof(e,ol.geom.GeometryCollection,"geometry should be an ol.geom.GeometryCollection");return{type:"GeometryCollection",geometries:goog.array.map(e.getGeometriesArray(),function(e){return ol.format.GeoJSON.writeGeometry_(e,t)})}};ol.format.GeoJSON.writeLineStringGeometry_=function(e){goog.asserts.assertInstanceof(e,ol.geom.LineString,"geometry should be an ol.geom.LineString");return{type:"LineString",coordinates:e.getCoordinates()}};ol.format.GeoJSON.writeMultiLineStringGeometry_=function(e){goog.asserts.assertInstanceof(e,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");return{type:"MultiLineString",coordinates:e.getCoordinates()}};ol.format.GeoJSON.writeMultiPointGeometry_=function(e){goog.asserts.assertInstanceof(e,ol.geom.MultiPoint,"geometry should be an ol.geom.MultiPoint");return{type:"MultiPoint",coordinates:e.getCoordinates()}};ol.format.GeoJSON.writeMultiPolygonGeometry_=function(e,t){goog.asserts.assertInstanceof(e,ol.geom.MultiPolygon,"geometry should be an ol.geom.MultiPolygon");var o;goog.isDef(t)&&(o=t.rightHanded);return{type:"MultiPolygon",coordinates:e.getCoordinates(o)}};ol.format.GeoJSON.writePointGeometry_=function(e){goog.asserts.assertInstanceof(e,ol.geom.Point,"geometry should be an ol.geom.Point");return{type:"Point",coordinates:e.getCoordinates()}};ol.format.GeoJSON.writePolygonGeometry_=function(e,t){goog.asserts.assertInstanceof(e,ol.geom.Polygon,"geometry should be an ol.geom.Polygon");var o;goog.isDef(t)&&(o=t.rightHanded);return{type:"Polygon",coordinates:e.getCoordinates(o)}};ol.format.GeoJSON.GEOMETRY_READERS_={Point:ol.format.GeoJSON.readPointGeometry_,LineString:ol.format.GeoJSON.readLineStringGeometry_,Polygon:ol.format.GeoJSON.readPolygonGeometry_,MultiPoint:ol.format.GeoJSON.readMultiPointGeometry_,MultiLineString:ol.format.GeoJSON.readMultiLineStringGeometry_,MultiPolygon:ol.format.GeoJSON.readMultiPolygonGeometry_,GeometryCollection:ol.format.GeoJSON.readGeometryCollectionGeometry_};ol.format.GeoJSON.GEOMETRY_WRITERS_={Point:ol.format.GeoJSON.writePointGeometry_,LineString:ol.format.GeoJSON.writeLineStringGeometry_,Polygon:ol.format.GeoJSON.writePolygonGeometry_,MultiPoint:ol.format.GeoJSON.writeMultiPointGeometry_,MultiLineString:ol.format.GeoJSON.writeMultiLineStringGeometry_,MultiPolygon:ol.format.GeoJSON.writeMultiPolygonGeometry_,GeometryCollection:ol.format.GeoJSON.writeGeometryCollectionGeometry_,Circle:ol.format.GeoJSON.writeEmptyGeometryCollectionGeometry_};ol.format.GeoJSON.prototype.getExtensions=function(){return ol.format.GeoJSON.EXTENSIONS_};ol.format.GeoJSON.prototype.readFeatureFromObject=function(e,t){goog.asserts.assert("Feature"==e.type,"geoJSONFeature.type should be Feature");var o=ol.format.GeoJSON.readGeometry_(e.geometry,t),r=new ol.Feature;goog.isDef(this.geometryName_)&&r.setGeometryName(this.geometryName_);r.setGeometry(o);goog.isDef(e.id)&&r.setId(e.id);goog.isDef(e.properties)&&r.setProperties(e.properties);return r};ol.format.GeoJSON.prototype.readFeaturesFromObject=function(e,t){if("Feature"==e.type)return[this.readFeatureFromObject(e,t)];if("FeatureCollection"==e.type){var o,r,n=[],i=e.features;o=0;for(r=i.length;r>o;++o)n.push(this.readFeatureFromObject(i[o],t));return n}goog.asserts.fail("Unknown geoJSONObject.type: "+e.type);return[]};ol.format.GeoJSON.prototype.readGeometryFromObject=function(e,t){return ol.format.GeoJSON.readGeometry_(e,t)};ol.format.GeoJSON.prototype.readProjectionFromObject=function(e){e=e.crs;if(goog.isDefAndNotNull(e)){if("name"==e.type)return ol.proj.get(e.properties.name);if("EPSG"==e.type)return ol.proj.get("EPSG:"+e.properties.code);goog.asserts.fail("Unknown crs.type: "+e.type);return null}return this.defaultDataProjection};ol.format.GeoJSON.prototype.writeFeatureObject=function(e,t){t=this.adaptOptions(t);var o={type:"Feature"},r=e.getId();goog.isDefAndNotNull(r)&&(o.id=r);r=e.getGeometry();o.geometry=goog.isDefAndNotNull(r)?ol.format.GeoJSON.writeGeometry_(r,t):null;r=e.getProperties();goog.object.remove(r,e.getGeometryName());o.properties=goog.object.isEmpty(r)?null:r;return o};ol.format.GeoJSON.prototype.writeFeaturesObject=function(e,t){t=this.adaptOptions(t);var o,r,n=[];o=0;for(r=e.length;r>o;++o)n.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:n}};ol.format.GeoJSON.prototype.writeGeometryObject=function(e,t){return ol.format.GeoJSON.writeGeometry_(e,this.adaptOptions(t))};ol.format.XMLFeature=function(){ol.format.Feature.call(this)};goog.inherits(ol.format.XMLFeature,ol.format.Feature);ol.format.XMLFeature.prototype.getType=function(){return ol.format.FormatType.XML};ol.format.XMLFeature.prototype.readFeature=function(e,t){if(ol.xml.isDocument(e))return this.readFeatureFromDocument(e,t);if(ol.xml.isNode(e))return this.readFeatureFromNode(e,t);if(goog.isString(e)){var o=ol.xml.parse(e);return this.readFeatureFromDocument(o,t)}goog.asserts.fail("Unknown source type");return null};ol.format.XMLFeature.prototype.readFeatureFromDocument=function(e,t){var o=this.readFeaturesFromDocument(e,t);return 0<o.length?o[0]:null};ol.format.XMLFeature.prototype.readFeatures=function(e,t){if(ol.xml.isDocument(e))return this.readFeaturesFromDocument(e,t);if(ol.xml.isNode(e))return this.readFeaturesFromNode(e,t);if(goog.isString(e)){var o=ol.xml.parse(e);return this.readFeaturesFromDocument(o,t)
}goog.asserts.fail("Unknown source type");return[]};ol.format.XMLFeature.prototype.readFeaturesFromDocument=function(e,t){var o,r=[];for(o=e.firstChild;!goog.isNull(o);o=o.nextSibling)o.nodeType==goog.dom.NodeType.ELEMENT&&goog.array.extend(r,this.readFeaturesFromNode(o,t));return r};ol.format.XMLFeature.prototype.readGeometry=function(e,t){if(ol.xml.isDocument(e))return this.readGeometryFromDocument(e,t);if(ol.xml.isNode(e))return this.readGeometryFromNode(e,t);if(goog.isString(e)){var o=ol.xml.parse(e);return this.readGeometryFromDocument(o,t)}goog.asserts.fail("Unknown source type");return null};ol.format.XMLFeature.prototype.readProjection=function(e){if(ol.xml.isDocument(e))return this.readProjectionFromDocument(e);if(ol.xml.isNode(e))return this.readProjectionFromNode(e);if(goog.isString(e))return e=ol.xml.parse(e),this.readProjectionFromDocument(e);goog.asserts.fail("Unknown source type");return null};ol.format.XMLFeature.prototype.readProjectionFromDocument=function(){return this.defaultDataProjection};ol.format.XMLFeature.prototype.readProjectionFromNode=function(){return this.defaultDataProjection};ol.format.XMLFeature.prototype.writeFeature=function(e,t){var o=this.writeFeatureNode(e,t);goog.asserts.assert(o.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return goog.dom.xml.serialize(o)};ol.format.XMLFeature.prototype.writeFeatures=function(e,t){var o=this.writeFeaturesNode(e,t);goog.asserts.assert(o.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return goog.dom.xml.serialize(o)};ol.format.XMLFeature.prototype.writeGeometry=function(e,t){var o=this.writeGeometryNode(e,t);goog.asserts.assert(o.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return goog.dom.xml.serialize(o)};ol.format.GMLBase=function(e){e=goog.isDef(e)?e:{};this.featureType=e.featureType;this.featureNS=e.featureNS;this.srsName=e.srsName;this.schemaLocation="";this.FEATURE_COLLECTION_PARSERS={};this.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]={featureMember:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFeaturesInternal),featureMembers:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFeaturesInternal)};ol.format.XMLFeature.call(this)};goog.inherits(ol.format.GMLBase,ol.format.XMLFeature);ol.format.GMLBase.GMLNS="http://www.opengis.net/gml";ol.format.GMLBase.prototype.readFeaturesInternal=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var o,r=ol.xml.getLocalName(e);if("FeatureCollection"==r)o="http://www.opengis.net/wfs"===e.namespaceURI?ol.xml.pushParseAndPop([],this.FEATURE_COLLECTION_PARSERS,e,t,this):ol.xml.pushParseAndPop(null,this.FEATURE_COLLECTION_PARSERS,e,t,this);else if("featureMembers"==r||"featureMember"==r){var n=t[0];goog.asserts.assert(goog.isObject(n),"context should be an Object");var i=n.featureType;o=n.featureNS;var s,a;if(!goog.isDef(i)&&goog.isDefAndNotNull(e.childNodes)){i=[];o={};s=0;for(a=e.childNodes.length;a>s;++s){var g=e.childNodes[s];if(1===g.nodeType){var l=g.nodeName.split(":").pop();if(-1===goog.array.indexOf(i,l)){var u;goog.object.contains(o,g.namespaceURI)?u=goog.object.findKey(o,function(e){return e===g.namespaceURI}):(u="p"+goog.object.getCount(o),o[u]=g.namespaceURI);i.push(u+":"+l)}}}n.featureType=i;n.featureNS=o}goog.isString(o)&&(s=o,o={},o.p0=s);var c,n={},i=goog.isArray(i)?i:[i];for(c in o){l={};s=0;for(a=i.length;a>s;++s)(-1===i[s].indexOf(":")?"p0":i[s].split(":")[0])===c&&(l[i[s].split(":").pop()]="featureMembers"==r?ol.xml.makeArrayPusher(this.readFeatureElement,this):ol.xml.makeReplacer(this.readFeatureElement,this));n[o[c]]=l}o=ol.xml.pushParseAndPop([],n,e,t)}goog.isDef(o)||(o=[]);return o};ol.format.GMLBase.prototype.readGeometryElement=function(e,t){var o=t[0];goog.asserts.assert(goog.isObject(o),"context should be an Object");o.srsName=e.firstElementChild.getAttribute("srsName");var r=ol.xml.pushParseAndPop(null,this.GEOMETRY_PARSERS_,e,t,this);return goog.isDefAndNotNull(r)?ol.format.Feature.transformWithOptions(r,!1,o):void 0};ol.format.GMLBase.prototype.readFeatureElement=function(e,t){var o,r,n=e.getAttribute("fid")||ol.xml.getAttributeNS(e,ol.format.GMLBase.GMLNS,"id"),i={};for(o=e.firstElementChild;!goog.isNull(o);o=o.nextElementSibling){var s=ol.xml.getLocalName(o);if(0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)){var a=ol.xml.getAllTextContent(o,!1);goog.string.isEmpty(a)&&(a=void 0);i[s]=a}else"boundedBy"!==s&&(r=s),i[s]=this.readGeometryElement(o,t)}o=new ol.Feature(i);goog.isDef(r)&&o.setGeometryName(r);n&&o.setId(n);return o};ol.format.GMLBase.prototype.readPoint=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Point"==e.localName,"localName should be Point");var o=this.readFlatCoordinatesFromNode_(e,t);if(goog.isDefAndNotNull(o)){var r=new ol.geom.Point(null);goog.asserts.assert(3==o.length,"flatCoordinates should have a length of 3");r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,o);return r}};ol.format.GMLBase.prototype.readMultiPoint=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("MultiPoint"==e.localName,"localName should be MultiPoint");var o=ol.xml.pushParseAndPop([],this.MULTIPOINT_PARSERS_,e,t,this);return goog.isDef(o)?new ol.geom.MultiPoint(o):void 0};ol.format.GMLBase.prototype.readMultiLineString=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("MultiLineString"==e.localName,"localName should be MultiLineString");var o=ol.xml.pushParseAndPop([],this.MULTILINESTRING_PARSERS_,e,t,this);if(goog.isDef(o)){var r=new ol.geom.MultiLineString(null);r.setLineStrings(o);return r}};ol.format.GMLBase.prototype.readMultiPolygon=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("MultiPolygon"==e.localName,"localName should be MultiPolygon");var o=ol.xml.pushParseAndPop([],this.MULTIPOLYGON_PARSERS_,e,t,this);if(goog.isDef(o)){var r=new ol.geom.MultiPolygon(null);r.setPolygons(o);return r}};ol.format.GMLBase.prototype.pointMemberParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("pointMember"==e.localName||"pointMembers"==e.localName,"localName should be pointMember or pointMembers");ol.xml.parseNode(this.POINTMEMBER_PARSERS_,e,t,this)};ol.format.GMLBase.prototype.lineStringMemberParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("lineStringMember"==e.localName||"lineStringMembers"==e.localName,"localName should be LineStringMember or LineStringMembers");ol.xml.parseNode(this.LINESTRINGMEMBER_PARSERS_,e,t,this)};ol.format.GMLBase.prototype.polygonMemberParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("polygonMember"==e.localName||"polygonMembers"==e.localName,"localName should be polygonMember or polygonMembers");ol.xml.parseNode(this.POLYGONMEMBER_PARSERS_,e,t,this)};ol.format.GMLBase.prototype.readLineString=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("LineString"==e.localName,"localName should be LineString");var o=this.readFlatCoordinatesFromNode_(e,t);if(goog.isDefAndNotNull(o)){var r=new ol.geom.LineString(null);r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,o);return r}};ol.format.GMLBase.prototype.readFlatLinearRing_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("LinearRing"==e.localName,"localName should be LinearRing");var o=ol.xml.pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,t,this);return goog.isDefAndNotNull(o)?o:void 0};ol.format.GMLBase.prototype.readLinearRing=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("LinearRing"==e.localName,"localName should be LinearRing");var o=this.readFlatCoordinatesFromNode_(e,t);if(goog.isDef(o)){var r=new ol.geom.LinearRing(null);r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,o);return r}};ol.format.GMLBase.prototype.readPolygon=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Polygon"==e.localName,"localName should be Polygon");var o=ol.xml.pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS_,e,t,this);if(goog.isDef(o)&&!goog.isNull(o[0])){var r,n,i=new ol.geom.Polygon(null),s=o[0],a=[s.length];r=1;for(n=o.length;n>r;++r)goog.array.extend(s,o[r]),a.push(s.length);i.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,s,a);return i}};ol.format.GMLBase.prototype.readFlatCoordinatesFromNode_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,t,this)};ol.format.GMLBase.prototype.MULTIPOINT_PARSERS_=Object({"http://www.opengis.net/gml":{pointMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.pointMemberParser_),pointMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.pointMemberParser_)}});ol.format.GMLBase.prototype.MULTILINESTRING_PARSERS_=Object({"http://www.opengis.net/gml":{lineStringMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.lineStringMemberParser_),lineStringMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.lineStringMemberParser_)}});ol.format.GMLBase.prototype.MULTIPOLYGON_PARSERS_=Object({"http://www.opengis.net/gml":{polygonMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.polygonMemberParser_),polygonMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.polygonMemberParser_)}});ol.format.GMLBase.prototype.POINTMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{Point:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFlatCoordinatesFromNode_)}});ol.format.GMLBase.prototype.LINESTRINGMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{LineString:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readLineString)}});ol.format.GMLBase.prototype.POLYGONMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{Polygon:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readPolygon)}});ol.format.GMLBase.prototype.RING_PARSERS=Object({"http://www.opengis.net/gml":{LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFlatLinearRing_)}});ol.format.GMLBase.prototype.readGeometryFromNode=function(e,t){var o=this.readGeometryElement(e,[this.getReadOptions(e,goog.isDef(t)?t:{})]);return goog.isDef(o)?o:null};ol.format.GMLBase.prototype.readFeaturesFromNode=function(e,t){var o={featureType:this.featureType,featureNS:this.featureNS};goog.isDef(t)&&goog.object.extend(o,this.getReadOptions(e,t));return this.readFeaturesInternal(e,[o])};ol.format.GMLBase.prototype.readProjectionFromNode=function(e){return ol.proj.get(goog.isDef(this.srsName_)?this.srsName_:e.firstElementChild.getAttribute("srsName"))};ol.format.XSD={};ol.format.XSD.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema";ol.format.XSD.readBoolean=function(e){e=ol.xml.getAllTextContent(e,!1);return ol.format.XSD.readBooleanString(e)};ol.format.XSD.readBooleanString=function(e){return(e=/^\s*(true|1)|(false|0)\s*$/.exec(e))?goog.isDef(e[1])||!1:void 0};ol.format.XSD.readDateTime=function(e){e=ol.xml.getAllTextContent(e,!1);if(e=/^\s*(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?))\s*$/.exec(e)){var t=parseInt(e[1],10),o=parseInt(e[2],10)-1,r=parseInt(e[3],10),n=parseInt(e[4],10),i=parseInt(e[5],10),s=parseInt(e[6],10),t=Date.UTC(t,o,r,n,i,s)/1e3;"Z"!=e[7]&&(o="-"==e[8]?-1:1,t+=60*o*parseInt(e[9],10),goog.isDef(e[10])&&(t+=3600*o*parseInt(e[10],10)));return t}};ol.format.XSD.readDecimal=function(e){e=ol.xml.getAllTextContent(e,!1);return ol.format.XSD.readDecimalString(e)};ol.format.XSD.readDecimalString=function(e){return(e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e))?parseFloat(e[1]):void 0};ol.format.XSD.readNonNegativeInteger=function(e){e=ol.xml.getAllTextContent(e,!1);return ol.format.XSD.readNonNegativeIntegerString(e)};ol.format.XSD.readNonNegativeIntegerString=function(e){return(e=/^\s*(\d+)\s*$/.exec(e))?parseInt(e[1],10):void 0};ol.format.XSD.readString=function(e){e=ol.xml.getAllTextContent(e,!1);return goog.string.trim(e)};ol.format.XSD.writeBooleanTextNode=function(e,t){ol.format.XSD.writeStringTextNode(e,t?"1":"0")};ol.format.XSD.writeDateTimeTextNode=function(e,t){var o=new Date(1e3*t),o=o.getUTCFullYear()+"-"+goog.string.padNumber(o.getUTCMonth()+1,2)+"-"+goog.string.padNumber(o.getUTCDate(),2)+"T"+goog.string.padNumber(o.getUTCHours(),2)+":"+goog.string.padNumber(o.getUTCMinutes(),2)+":"+goog.string.padNumber(o.getUTCSeconds(),2)+"Z";e.appendChild(ol.xml.DOCUMENT.createTextNode(o))};ol.format.XSD.writeDecimalTextNode=function(e,t){var o=t.toPrecision();e.appendChild(ol.xml.DOCUMENT.createTextNode(o))};ol.format.XSD.writeNonNegativeIntegerTextNode=function(e,t){goog.asserts.assert(t>=0,"value should be more than 0");goog.asserts.assert(t==(0|t),"value should be an integer value");e.appendChild(ol.xml.DOCUMENT.createTextNode(t.toString()))};ol.format.XSD.writeStringTextNode=function(e,t){e.appendChild(ol.xml.DOCUMENT.createTextNode(t))};ol.format.GML2=function(e){e=goog.isDef(e)?e:{};ol.format.GMLBase.call(this,e);this.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS].featureMember=ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFeaturesInternal);this.schemaLocation=goog.isDef(e.schemaLocation)?e.schemaLocation:ol.format.GML2.schemaLocation_};goog.inherits(ol.format.GML2,ol.format.GMLBase);ol.format.GML2.schemaLocation_=ol.format.GMLBase.GMLNS+" http://schemas.opengis.net/gml/2.1.2/feature.xsd";ol.format.GML2.prototype.readFlatCoordinates_=function(e,t){var o=ol.xml.getAllTextContent(e,!1).replace(/^\s*|\s*$/g,""),r=t[0];goog.asserts.assert(goog.isObject(r),"context should be an Object");var n=r.srsName,i=e.parentNode.getAttribute("srsDimension"),r="enu";goog.isNull(n)||(r=ol.proj.get(n).getAxisOrientation());o=o.split(/[\s,]+/);n=2;goog.isNull(e.getAttribute("srsDimension"))?goog.isNull(e.getAttribute("dimension"))?goog.isNull(i)||(n=ol.format.XSD.readNonNegativeIntegerString(i)):n=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("dimension")):n=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("srsDimension"));for(var s,a,g=[],l=0,u=o.length;u>l;l+=n)i=parseFloat(o[l]),s=parseFloat(o[l+1]),a=3===n?parseFloat(o[l+2]):0,"en"===r.substr(0,2)?g.push(i,s,a):g.push(s,i,a);return g};ol.format.GML2.prototype.readBox_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Box"==e.localName,"localName should be Box");var o=ol.xml.pushParseAndPop([null],this.BOX_PARSERS_,e,t,this);return ol.extent.createOrUpdate(o[1][0],o[1][1],o[1][3],o[1][4])};ol.format.GML2.prototype.innerBoundaryIsParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("innerBoundaryIs"==e.localName,"localName should be innerBoundaryIs");var o=ol.xml.pushParseAndPop(void 0,this.RING_PARSERS,e,t,this);if(goog.isDef(o)){var r=t[t.length-1];goog.asserts.assert(goog.isArray(r),"flatLinearRings should be an array");goog.asserts.assert(0<r.length,"flatLinearRings should have an array length larger than 0");r.push(o)}};ol.format.GML2.prototype.outerBoundaryIsParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("outerBoundaryIs"==e.localName,"localName should be outerBoundaryIs");var o=ol.xml.pushParseAndPop(void 0,this.RING_PARSERS,e,t,this);if(goog.isDef(o)){var r=t[t.length-1];goog.asserts.assert(goog.isArray(r),"flatLinearRings should be an array");goog.asserts.assert(0<r.length,"flatLinearRings should have an array length larger than 0");r[0]=o}};ol.format.GML2.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_=Object({"http://www.opengis.net/gml":{coordinates:ol.xml.makeReplacer(ol.format.GML2.prototype.readFlatCoordinates_)}});ol.format.GML2.prototype.FLAT_LINEAR_RINGS_PARSERS_=Object({"http://www.opengis.net/gml":{innerBoundaryIs:ol.format.GML2.prototype.innerBoundaryIsParser_,outerBoundaryIs:ol.format.GML2.prototype.outerBoundaryIsParser_}});ol.format.GML2.prototype.BOX_PARSERS_=Object({"http://www.opengis.net/gml":{coordinates:ol.xml.makeArrayPusher(ol.format.GML2.prototype.readFlatCoordinates_)}});ol.format.GML2.prototype.GEOMETRY_PARSERS_=Object({"http://www.opengis.net/gml":{Point:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPoint),MultiPoint:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPoint),LineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLineString),MultiLineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiLineString),LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLinearRing),Polygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPolygon),MultiPolygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPolygon),Box:ol.xml.makeReplacer(ol.format.GML2.prototype.readBox_)}});ol.format.GML3=function(e){e=goog.isDef(e)?e:{};ol.format.GMLBase.call(this,e);this.surface_=goog.isDef(e.surface)?e.surface:!1;this.curve_=goog.isDef(e.curve)?e.curve:!1;this.multiCurve_=goog.isDef(e.multiCurve)?e.multiCurve:!0;this.multiSurface_=goog.isDef(e.multiSurface)?e.multiSurface:!0;this.schemaLocation=goog.isDef(e.schemaLocation)?e.schemaLocation:ol.format.GML3.schemaLocation_};goog.inherits(ol.format.GML3,ol.format.GMLBase);ol.format.GML3.schemaLocation_=ol.format.GMLBase.GMLNS+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd";ol.format.GML3.prototype.readMultiCurve_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("MultiCurve"==e.localName,"localName should be MultiCurve");var o=ol.xml.pushParseAndPop([],this.MULTICURVE_PARSERS_,e,t,this);if(goog.isDef(o)){var r=new ol.geom.MultiLineString(null);r.setLineStrings(o);return r}};ol.format.GML3.prototype.readMultiSurface_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("MultiSurface"==e.localName,"localName should be MultiSurface");var o=ol.xml.pushParseAndPop([],this.MULTISURFACE_PARSERS_,e,t,this);if(goog.isDef(o)){var r=new ol.geom.MultiPolygon(null);r.setPolygons(o);return r}};ol.format.GML3.prototype.curveMemberParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("curveMember"==e.localName||"curveMembers"==e.localName,"localName should be curveMember or curveMembers");ol.xml.parseNode(this.CURVEMEMBER_PARSERS_,e,t,this)};ol.format.GML3.prototype.surfaceMemberParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("surfaceMember"==e.localName||"surfaceMembers"==e.localName,"localName should be surfaceMember or surfaceMembers");ol.xml.parseNode(this.SURFACEMEMBER_PARSERS_,e,t,this)};ol.format.GML3.prototype.readPatch_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("patches"==e.localName,"localName should be patches");return ol.xml.pushParseAndPop([null],this.PATCHES_PARSERS_,e,t,this)};ol.format.GML3.prototype.readSegment_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("segments"==e.localName,"localName should be segments");return ol.xml.pushParseAndPop([null],this.SEGMENTS_PARSERS_,e,t,this)};ol.format.GML3.prototype.readPolygonPatch_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"npde.nodeType should be ELEMENT");goog.asserts.assert("PolygonPatch"==e.localName,"localName should be PolygonPatch");return ol.xml.pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS_,e,t,this)};ol.format.GML3.prototype.readLineStringSegment_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("LineStringSegment"==e.localName,"localName should be LineStringSegment");return ol.xml.pushParseAndPop([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,t,this)};ol.format.GML3.prototype.interiorParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("interior"==e.localName,"localName should be interior");var o=ol.xml.pushParseAndPop(void 0,this.RING_PARSERS,e,t,this);if(goog.isDef(o)){var r=t[t.length-1];goog.asserts.assert(goog.isArray(r),"flatLinearRings should be an array");goog.asserts.assert(0<r.length,"flatLinearRings should have an array length of 1 or more");r.push(o)}};ol.format.GML3.prototype.exteriorParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("exterior"==e.localName,"localName should be exterior");var o=ol.xml.pushParseAndPop(void 0,this.RING_PARSERS,e,t,this);if(goog.isDef(o)){var r=t[t.length-1];goog.asserts.assert(goog.isArray(r),"flatLinearRings should be an array");goog.asserts.assert(0<r.length,"flatLinearRings should have an array length of 1 or more");r[0]=o}};ol.format.GML3.prototype.readSurface_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Surface"==e.localName,"localName should be Surface");var o=ol.xml.pushParseAndPop([null],this.SURFACE_PARSERS_,e,t,this);if(goog.isDef(o)&&!goog.isNull(o[0])){var r,n,i=new ol.geom.Polygon(null),s=o[0],a=[s.length];r=1;for(n=o.length;n>r;++r)goog.array.extend(s,o[r]),a.push(s.length);i.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,s,a);return i}};ol.format.GML3.prototype.readCurve_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Curve"==e.localName,"localName should be Curve");var o=ol.xml.pushParseAndPop([null],this.CURVE_PARSERS_,e,t,this);if(goog.isDef(o)){var r=new ol.geom.LineString(null);r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,o);return r}};ol.format.GML3.prototype.readEnvelope_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Envelope"==e.localName,"localName should be Envelope");var o=ol.xml.pushParseAndPop([null],this.ENVELOPE_PARSERS_,e,t,this);return ol.extent.createOrUpdate(o[1][0],o[1][1],o[2][0],o[2][1])};ol.format.GML3.prototype.readFlatPos_=function(e,t){for(var o,r=ol.xml.getAllTextContent(e,!1),n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,i=[];o=n.exec(r);)i.push(parseFloat(o[1])),r=r.substr(o[0].length);if(""===r){r=t[0];goog.asserts.assert(goog.isObject(r),"context should be an Object");r=r.srsName;n="enu";goog.isNull(r)||(n=ol.proj.get(r).getAxisOrientation());if("neu"===n)for(r=0,n=i.length;n>r;r+=3)o=i[r],i[r]=i[r+1],i[r+1]=o;r=i.length;2==r&&i.push(0);return 0===r?void 0:i}};ol.format.GML3.prototype.readFlatPosList_=function(e,t){var o=ol.xml.getAllTextContent(e,!1).replace(/^\s*|\s*$/g,""),r=t[0];goog.asserts.assert(goog.isObject(r),"context should be an Object");var n=r.srsName,i=e.parentNode.getAttribute("srsDimension"),r="enu";goog.isNull(n)||(r=ol.proj.get(n).getAxisOrientation());o=o.split(/\s+/);n=2;goog.isNull(e.getAttribute("srsDimension"))?goog.isNull(e.getAttribute("dimension"))?goog.isNull(i)||(n=ol.format.XSD.readNonNegativeIntegerString(i)):n=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("dimension")):n=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("srsDimension"));for(var s,a,g=[],l=0,u=o.length;u>l;l+=n)i=parseFloat(o[l]),s=parseFloat(o[l+1]),a=3===n?parseFloat(o[l+2]):0,"en"===r.substr(0,2)?g.push(i,s,a):g.push(s,i,a);return g};ol.format.GML3.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_=Object({"http://www.opengis.net/gml":{pos:ol.xml.makeReplacer(ol.format.GML3.prototype.readFlatPos_),posList:ol.xml.makeReplacer(ol.format.GML3.prototype.readFlatPosList_)}});ol.format.GML3.prototype.FLAT_LINEAR_RINGS_PARSERS_=Object({"http://www.opengis.net/gml":{interior:ol.format.GML3.prototype.interiorParser_,exterior:ol.format.GML3.prototype.exteriorParser_}});ol.format.GML3.prototype.GEOMETRY_PARSERS_=Object({"http://www.opengis.net/gml":{Point:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPoint),MultiPoint:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPoint),LineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLineString),MultiLineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiLineString),LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLinearRing),Polygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPolygon),MultiPolygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPolygon),Surface:ol.xml.makeReplacer(ol.format.GML3.prototype.readSurface_),MultiSurface:ol.xml.makeReplacer(ol.format.GML3.prototype.readMultiSurface_),Curve:ol.xml.makeReplacer(ol.format.GML3.prototype.readCurve_),MultiCurve:ol.xml.makeReplacer(ol.format.GML3.prototype.readMultiCurve_),Envelope:ol.xml.makeReplacer(ol.format.GML3.prototype.readEnvelope_)}});ol.format.GML3.prototype.MULTICURVE_PARSERS_=Object({"http://www.opengis.net/gml":{curveMember:ol.xml.makeArrayPusher(ol.format.GML3.prototype.curveMemberParser_),curveMembers:ol.xml.makeArrayPusher(ol.format.GML3.prototype.curveMemberParser_)}});ol.format.GML3.prototype.MULTISURFACE_PARSERS_=Object({"http://www.opengis.net/gml":{surfaceMember:ol.xml.makeArrayPusher(ol.format.GML3.prototype.surfaceMemberParser_),surfaceMembers:ol.xml.makeArrayPusher(ol.format.GML3.prototype.surfaceMemberParser_)}});ol.format.GML3.prototype.CURVEMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{LineString:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readLineString),Curve:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readCurve_)}});ol.format.GML3.prototype.SURFACEMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{Polygon:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readPolygon),Surface:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readSurface_)}});ol.format.GML3.prototype.SURFACE_PARSERS_=Object({"http://www.opengis.net/gml":{patches:ol.xml.makeReplacer(ol.format.GML3.prototype.readPatch_)}});ol.format.GML3.prototype.CURVE_PARSERS_=Object({"http://www.opengis.net/gml":{segments:ol.xml.makeReplacer(ol.format.GML3.prototype.readSegment_)}});ol.format.GML3.prototype.ENVELOPE_PARSERS_=Object({"http://www.opengis.net/gml":{lowerCorner:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readFlatPosList_),upperCorner:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readFlatPosList_)}});ol.format.GML3.prototype.PATCHES_PARSERS_=Object({"http://www.opengis.net/gml":{PolygonPatch:ol.xml.makeReplacer(ol.format.GML3.prototype.readPolygonPatch_)}});ol.format.GML3.prototype.SEGMENTS_PARSERS_=Object({"http://www.opengis.net/gml":{LineStringSegment:ol.xml.makeReplacer(ol.format.GML3.prototype.readLineStringSegment_)}});ol.format.GML3.prototype.writePos_=function(e,t,o){o=o[o.length-1];goog.asserts.assert(goog.isObject(o),"context should be an Object");var r=o.srsName;o="enu";goog.isDefAndNotNull(r)&&(o=ol.proj.get(r).getAxisOrientation());t=t.getCoordinates();t="en"===o.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];ol.format.XSD.writeStringTextNode(e,t)};ol.format.GML3.prototype.getCoords_=function(e,t){var o="enu";goog.isDefAndNotNull(t)&&(o=ol.proj.get(t).getAxisOrientation());return"en"===o.substr(0,2)?e[0]+" "+e[1]:e[1]+" "+e[0]};ol.format.GML3.prototype.writePosList_=function(e,t,o){o=o[o.length-1];goog.asserts.assert(goog.isObject(o),"context should be an Object");o=o.srsName;t=t.getCoordinates();for(var r,n=t.length,i=Array(n),s=0;n>s;++s)r=t[s],i[s]=this.getCoords_(r,o);ol.format.XSD.writeStringTextNode(e,i.join(" "))};ol.format.GML3.prototype.writePoint_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");r=r.srsName;goog.isDefAndNotNull(r)&&e.setAttribute("srsName",r);r=ol.xml.createElementNS(e.namespaceURI,"pos");e.appendChild(r);this.writePos_(r,t,o)};ol.format.GML3.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),upperCorner:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}};ol.format.GML3.prototype.writeEnvelope=function(e,t,o){goog.asserts.assert(4==t.length,"extent should have 4 items");var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");r=r.srsName;goog.isDef(r)&&e.setAttribute("srsName",r);ol.xml.pushSerializeAndPop({node:e},ol.format.GML3.ENVELOPE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,[t[0]+" "+t[1],t[2]+" "+t[3]],o,["lowerCorner","upperCorner"],this)};ol.format.GML3.prototype.writeLinearRing_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");r=r.srsName;goog.isDefAndNotNull(r)&&e.setAttribute("srsName",r);r=ol.xml.createElementNS(e.namespaceURI,"posList");e.appendChild(r);this.writePosList_(r,t,o)};ol.format.GML3.prototype.RING_NODE_FACTORY_=function(e,t,o){e=t[t.length-1];t=e.node;goog.asserts.assert(goog.isObject(e),"context should be an Object");o=e.exteriorWritten;goog.isDef(o)||(e.exteriorWritten=!0);return ol.xml.createElementNS(t.namespaceURI,goog.isDef(o)?"interior":"exterior")};ol.format.GML3.prototype.writeSurfaceOrPolygon_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");r=r.srsName;"PolygonPatch"!==e.nodeName&&goog.isDefAndNotNull(r)&&e.setAttribute("srsName",r);"Polygon"===e.nodeName||"PolygonPatch"===e.nodeName?(t=t.getLinearRings(),ol.xml.pushSerializeAndPop({node:e,srsName:r},ol.format.GML3.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,t,o,void 0,this)):"Surface"===e.nodeName&&(r=ol.xml.createElementNS(e.namespaceURI,"patches"),e.appendChild(r),this.writeSurfacePatches_(r,t,o))};ol.format.GML3.prototype.writeCurveOrLineString_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");r=r.srsName;"LineStringSegment"!==e.nodeName&&goog.isDefAndNotNull(r)&&e.setAttribute("srsName",r);"LineString"===e.nodeName||"LineStringSegment"===e.nodeName?(r=ol.xml.createElementNS(e.namespaceURI,"posList"),e.appendChild(r),this.writePosList_(r,t,o)):"Curve"===e.nodeName&&(r=ol.xml.createElementNS(e.namespaceURI,"segments"),e.appendChild(r),this.writeCurveSegments_(r,t,o))};ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var n=r.srsName,r=r.surface;goog.isDefAndNotNull(n)&&e.setAttribute("srsName",n);t=t.getPolygons();ol.xml.pushSerializeAndPop({node:e,srsName:n,surface:r},ol.format.GML3.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,t,o,void 0,this)};ol.format.GML3.prototype.writeMultiPoint_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");r=r.srsName;goog.isDefAndNotNull(r)&&e.setAttribute("srsName",r);t=t.getPoints();ol.xml.pushSerializeAndPop({node:e,srsName:r},ol.format.GML3.POINTMEMBER_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("pointMember"),t,o,void 0,this)};ol.format.GML3.prototype.writeMultiCurveOrLineString_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var n=r.srsName,r=r.curve;goog.isDefAndNotNull(n)&&e.setAttribute("srsName",n);
t=t.getLineStrings();ol.xml.pushSerializeAndPop({node:e,srsName:n,curve:r},ol.format.GML3.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,t,o,void 0,this)};ol.format.GML3.prototype.writeRing_=function(e,t,o){var r=ol.xml.createElementNS(e.namespaceURI,"LinearRing");e.appendChild(r);this.writeLinearRing_(r,t,o)};ol.format.GML3.prototype.writeSurfaceOrPolygonMember_=function(e,t,o){goog.asserts.assert(goog.isObject(o[o.length-1]),"context should be an Object");var r=this.GEOMETRY_NODE_FACTORY_(t,o);goog.isDef(r)&&(e.appendChild(r),this.writeSurfaceOrPolygon_(r,t,o))};ol.format.GML3.prototype.writePointMember_=function(e,t,o){var r=ol.xml.createElementNS(e.namespaceURI,"Point");e.appendChild(r);this.writePoint_(r,t,o)};ol.format.GML3.prototype.writeLineStringOrCurveMember_=function(e,t,o){goog.asserts.assert(goog.isObject(o[o.length-1]),"context should be an Object");var r=this.GEOMETRY_NODE_FACTORY_(t,o);goog.isDef(r)&&(e.appendChild(r),this.writeCurveOrLineString_(r,t,o))};ol.format.GML3.prototype.writeSurfacePatches_=function(e,t,o){var r=ol.xml.createElementNS(e.namespaceURI,"PolygonPatch");e.appendChild(r);this.writeSurfaceOrPolygon_(r,t,o)};ol.format.GML3.prototype.writeCurveSegments_=function(e,t,o){var r=ol.xml.createElementNS(e.namespaceURI,"LineStringSegment");e.appendChild(r);this.writeCurveOrLineString_(r,t,o)};ol.format.GML3.prototype.writeGeometryElement=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var n=goog.object.clone(r);n.node=e;goog.isArray(t)?e=goog.isDef(r.dataProjection)?ol.proj.transformExtent(t,r.featureProjection,r.dataProjection):t:(goog.asserts.assertInstanceof(t,ol.geom.Geometry,"geometry should be an ol.geom.Geometry"),e=ol.format.Feature.transformWithOptions(t,!0,r));ol.xml.pushSerializeAndPop(n,ol.format.GML3.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[e],o,void 0,this)};ol.format.GML3.prototype.writeFeatureElement=function(e,t,o){var r=t.getId();goog.isDef(r)&&e.setAttribute("fid",r);r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var n=r.featureNS,i=t.getGeometryName();goog.isDef(r.serializers)||(r.serializers={},r.serializers[n]={});var s=t.getProperties();t=[];var a,g=[];for(a in s){var l=s[a];goog.isNull(l)||(t.push(a),g.push(l),a==i?a in r.serializers[n]||(r.serializers[n][a]=ol.xml.makeChildAppender(this.writeGeometryElement,this)):a in r.serializers[n]||(r.serializers[n][a]=ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)))}a=goog.object.clone(r);a.node=e;ol.xml.pushSerializeAndPop(a,r.serializers,ol.xml.makeSimpleNodeFactory(void 0,n),g,o,t)};ol.format.GML3.prototype.writeFeatureMembers_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var n=r.featureType,i=r.featureNS,s={};s[i]={};s[i][n]=ol.xml.makeChildAppender(this.writeFeatureElement,this);r=goog.object.clone(r);r.node=e;ol.xml.pushSerializeAndPop(r,s,ol.xml.makeSimpleNodeFactory(n,i),t,o)};ol.format.GML3.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygonMember_),polygonMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygonMember_)}};ol.format.GML3.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writePointMember_)}};ol.format.GML3.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLineStringOrCurveMember_),curveMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLineStringOrCurveMember_)}};ol.format.GML3.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeRing_),interior:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeRing_)}};ol.format.GML3.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeCurveOrLineString_),MultiCurve:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiCurveOrLineString_),Point:ol.xml.makeChildAppender(ol.format.GML3.prototype.writePoint_),MultiPoint:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiPoint_),LineString:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeCurveOrLineString_),MultiLineString:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiCurveOrLineString_),LinearRing:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLinearRing_),Polygon:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygon_),MultiPolygon:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_),Surface:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygon_),MultiSurface:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_),Envelope:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeEnvelope)}};ol.format.GML3.MULTIGEOMETRY_TO_MEMBER_NODENAME_={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};ol.format.GML3.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(e,t){e=t[t.length-1].node;goog.asserts.assert(ol.xml.isNode(e),"parentNode should be a node");return ol.xml.createElementNS("http://www.opengis.net/gml",ol.format.GML3.MULTIGEOMETRY_TO_MEMBER_NODENAME_[e.nodeName])};ol.format.GML3.prototype.GEOMETRY_NODE_FACTORY_=function(e,t,o){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");o=r.multiSurface;var n=r.surface,i=r.curve,r=r.multiCurve;goog.asserts.assert(ol.xml.isNode(t[t.length-1].node),"parentNode should be a node");goog.isArray(e)?e="Envelope":(goog.asserts.assertInstanceof(e,ol.geom.Geometry,"value should be an ol.geom.Geometry"),e=e.getType(),"MultiPolygon"===e&&!0===o?e="MultiSurface":"Polygon"===e&&!0===n?e="Surface":"LineString"===e&&!0===i?e="Curve":"MultiLineString"===e&&!0===r&&(e="MultiCurve"));return ol.xml.createElementNS("http://www.opengis.net/gml",e)};ol.format.GML3.prototype.writeGeometryNode=function(e,t){t=this.adaptOptions(t);var o=ol.xml.createElementNS("http://www.opengis.net/gml","geom"),r={node:o,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};goog.isDef(t)&&goog.object.extend(r,t);this.writeGeometryElement(o,e,[r]);return o};ol.format.GML3.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var o=ol.xml.createElementNS("http://www.opengis.net/gml","featureMembers");ol.xml.setAttributeNS(o,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};goog.isDef(t)&&goog.object.extend(r,t);this.writeFeatureMembers_(o,e,[r]);return o};ol.format.GML=ol.format.GML3;goog.Uri=function(e,t){this.domain_=this.userInfo_=this.scheme_="";this.port_=null;this.fragment_=this.path_="";this.ignoreCase_=this.isReadOnly_=!1;var o;e instanceof goog.Uri?(this.ignoreCase_=goog.isDef(t)?t:e.getIgnoreCase(),this.setScheme(e.getScheme()),this.setUserInfo(e.getUserInfo()),this.setDomain(e.getDomain()),this.setPort(e.getPort()),this.setPath(e.getPath()),this.setQueryData(e.getQueryData().clone()),this.setFragment(e.getFragment())):e&&(o=goog.uri.utils.split(String(e)))?(this.ignoreCase_=!!t,this.setScheme(o[goog.uri.utils.ComponentIndex.SCHEME]||"",!0),this.setUserInfo(o[goog.uri.utils.ComponentIndex.USER_INFO]||"",!0),this.setDomain(o[goog.uri.utils.ComponentIndex.DOMAIN]||"",!0),this.setPort(o[goog.uri.utils.ComponentIndex.PORT]),this.setPath(o[goog.uri.utils.ComponentIndex.PATH]||"",!0),this.setQueryData(o[goog.uri.utils.ComponentIndex.QUERY_DATA]||"",!0),this.setFragment(o[goog.uri.utils.ComponentIndex.FRAGMENT]||"",!0)):(this.ignoreCase_=!!t,this.queryData_=new goog.Uri.QueryData(null,null,this.ignoreCase_))};goog.Uri.preserveParameterTypesCompatibilityFlag=!1;goog.Uri.RANDOM_PARAM=goog.uri.utils.StandardQueryParam.RANDOM;goog.Uri.prototype.toString=function(){var e=[],t=this.getScheme();t&&e.push(goog.Uri.encodeSpecialChars_(t,goog.Uri.reDisallowedInSchemeOrUserInfo_,!0),":");if(t=this.getDomain()){e.push("//");var o=this.getUserInfo();o&&e.push(goog.Uri.encodeSpecialChars_(o,goog.Uri.reDisallowedInSchemeOrUserInfo_,!0),"@");e.push(goog.Uri.removeDoubleEncoding_(goog.string.urlEncode(t)));t=this.getPort();null!=t&&e.push(":",String(t))}(t=this.getPath())&&(this.hasDomain()&&"/"!=t.charAt(0)&&e.push("/"),e.push(goog.Uri.encodeSpecialChars_(t,"/"==t.charAt(0)?goog.Uri.reDisallowedInAbsolutePath_:goog.Uri.reDisallowedInRelativePath_,!0)));(t=this.getEncodedQuery())&&e.push("?",t);(t=this.getFragment())&&e.push("#",goog.Uri.encodeSpecialChars_(t,goog.Uri.reDisallowedInFragment_));return e.join("")};goog.Uri.prototype.resolve=function(e){var t=this.clone(),o=e.hasScheme();o?t.setScheme(e.getScheme()):o=e.hasUserInfo();o?t.setUserInfo(e.getUserInfo()):o=e.hasDomain();o?t.setDomain(e.getDomain()):o=e.hasPort();var r=e.getPath();if(o)t.setPort(e.getPort());else if(o=e.hasPath()){if("/"!=r.charAt(0))if(this.hasDomain()&&!this.hasPath())r="/"+r;else{var n=t.getPath().lastIndexOf("/");-1!=n&&(r=t.getPath().substr(0,n+1)+r)}r=goog.Uri.removeDotSegments(r)}o?t.setPath(r):o=e.hasQuery();o?t.setQueryData(e.getDecodedQuery()):o=e.hasFragment();o&&t.setFragment(e.getFragment());return t};goog.Uri.prototype.clone=function(){return new goog.Uri(this)};goog.Uri.prototype.getScheme=function(){return this.scheme_};goog.Uri.prototype.setScheme=function(e,t){this.enforceReadOnly();(this.scheme_=t?goog.Uri.decodeOrEmpty_(e,!0):e)&&(this.scheme_=this.scheme_.replace(/:$/,""));return this};goog.Uri.prototype.hasScheme=function(){return!!this.scheme_};goog.Uri.prototype.getUserInfo=function(){return this.userInfo_};goog.Uri.prototype.setUserInfo=function(e,t){this.enforceReadOnly();this.userInfo_=t?goog.Uri.decodeOrEmpty_(e):e;return this};goog.Uri.prototype.hasUserInfo=function(){return!!this.userInfo_};goog.Uri.prototype.getDomain=function(){return this.domain_};goog.Uri.prototype.setDomain=function(e,t){this.enforceReadOnly();this.domain_=t?goog.Uri.decodeOrEmpty_(e,!0):e;return this};goog.Uri.prototype.hasDomain=function(){return!!this.domain_};goog.Uri.prototype.getPort=function(){return this.port_};goog.Uri.prototype.setPort=function(e){this.enforceReadOnly();if(e){e=Number(e);if(isNaN(e)||0>e)throw Error("Bad port number "+e);this.port_=e}else this.port_=null;return this};goog.Uri.prototype.hasPort=function(){return null!=this.port_};goog.Uri.prototype.getPath=function(){return this.path_};goog.Uri.prototype.setPath=function(e,t){this.enforceReadOnly();this.path_=t?goog.Uri.decodeOrEmpty_(e,!0):e;return this};goog.Uri.prototype.hasPath=function(){return!!this.path_};goog.Uri.prototype.hasQuery=function(){return""!==this.queryData_.toString()};goog.Uri.prototype.setQueryData=function(e,t){this.enforceReadOnly();e instanceof goog.Uri.QueryData?(this.queryData_=e,this.queryData_.setIgnoreCase(this.ignoreCase_)):(t||(e=goog.Uri.encodeSpecialChars_(e,goog.Uri.reDisallowedInQuery_)),this.queryData_=new goog.Uri.QueryData(e,null,this.ignoreCase_));return this};goog.Uri.prototype.setQuery=function(e,t){return this.setQueryData(e,t)};goog.Uri.prototype.getEncodedQuery=function(){return this.queryData_.toString()};goog.Uri.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()};goog.Uri.prototype.getQueryData=function(){return this.queryData_};goog.Uri.prototype.getQuery=function(){return this.getEncodedQuery()};goog.Uri.prototype.setParameterValue=function(e,t){this.enforceReadOnly();this.queryData_.set(e,t);return this};goog.Uri.prototype.setParameterValues=function(e,t){this.enforceReadOnly();goog.isArray(t)||(t=[String(t)]);this.queryData_.setValues(e,t);return this};goog.Uri.prototype.getParameterValues=function(e){return this.queryData_.getValues(e)};goog.Uri.prototype.getParameterValue=function(e){return this.queryData_.get(e)};goog.Uri.prototype.getFragment=function(){return this.fragment_};goog.Uri.prototype.setFragment=function(e,t){this.enforceReadOnly();this.fragment_=t?goog.Uri.decodeOrEmpty_(e):e;return this};goog.Uri.prototype.hasFragment=function(){return!!this.fragment_};goog.Uri.prototype.hasSameDomainAs=function(e){return!((this.hasDomain()||e.hasDomain())&&this.getDomain()!=e.getDomain()||(this.hasPort()||e.hasPort())&&this.getPort()!=e.getPort())};goog.Uri.prototype.makeUnique=function(){this.enforceReadOnly();this.setParameterValue(goog.Uri.RANDOM_PARAM,goog.string.getRandomString());return this};goog.Uri.prototype.removeParameter=function(e){this.enforceReadOnly();this.queryData_.remove(e);return this};goog.Uri.prototype.setReadOnly=function(e){this.isReadOnly_=e;return this};goog.Uri.prototype.isReadOnly=function(){return this.isReadOnly_};goog.Uri.prototype.enforceReadOnly=function(){if(this.isReadOnly_)throw Error("Tried to modify a read-only Uri")};goog.Uri.prototype.setIgnoreCase=function(e){this.ignoreCase_=e;this.queryData_&&this.queryData_.setIgnoreCase(e);return this};goog.Uri.prototype.getIgnoreCase=function(){return this.ignoreCase_};goog.Uri.parse=function(e,t){return e instanceof goog.Uri?e.clone():new goog.Uri(e,t)};goog.Uri.create=function(e,t,o,r,n,i,s,a){a=new goog.Uri(null,a);e&&a.setScheme(e);t&&a.setUserInfo(t);o&&a.setDomain(o);r&&a.setPort(r);n&&a.setPath(n);i&&a.setQueryData(i);s&&a.setFragment(s);return a};goog.Uri.resolve=function(e,t){e instanceof goog.Uri||(e=goog.Uri.parse(e));t instanceof goog.Uri||(t=goog.Uri.parse(t));return e.resolve(t)};goog.Uri.removeDotSegments=function(e){if(".."==e||"."==e)return"";if(goog.string.contains(e,"./")||goog.string.contains(e,"/.")){var t=goog.string.startsWith(e,"/");e=e.split("/");for(var o=[],r=0;r<e.length;){var n=e[r++];"."==n?t&&r==e.length&&o.push(""):".."==n?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),t&&r==e.length&&o.push("")):(o.push(n),t=!0)}return o.join("/")}return e};goog.Uri.decodeOrEmpty_=function(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""};goog.Uri.encodeSpecialChars_=function(e,t,o){return goog.isString(e)?(e=encodeURI(e).replace(t,goog.Uri.encodeChar_),o&&(e=goog.Uri.removeDoubleEncoding_(e)),e):null};goog.Uri.encodeChar_=function(e){e=e.charCodeAt(0);return"%"+(e>>4&15).toString(16)+(15&e).toString(16)};goog.Uri.removeDoubleEncoding_=function(e){return e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")};goog.Uri.reDisallowedInSchemeOrUserInfo_=/[#\/\?@]/g;goog.Uri.reDisallowedInRelativePath_=/[\#\?:]/g;goog.Uri.reDisallowedInAbsolutePath_=/[\#\?]/g;goog.Uri.reDisallowedInQuery_=/[\#\?@]/g;goog.Uri.reDisallowedInFragment_=/#/g;goog.Uri.haveSameDomain=function(e,t){var o=goog.uri.utils.split(e),r=goog.uri.utils.split(t);return o[goog.uri.utils.ComponentIndex.DOMAIN]==r[goog.uri.utils.ComponentIndex.DOMAIN]&&o[goog.uri.utils.ComponentIndex.PORT]==r[goog.uri.utils.ComponentIndex.PORT]};goog.Uri.QueryData=function(e,t,o){this.count_=this.keyMap_=null;this.encodedQuery_=e||null;this.ignoreCase_=!!o};goog.Uri.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_&&(this.keyMap_=new goog.structs.Map,this.count_=0,this.encodedQuery_)){var e=this;goog.uri.utils.parseQueryData(this.encodedQuery_,function(t,o){e.add(goog.string.urlDecode(t),o)})}};goog.Uri.QueryData.createFromMap=function(e,t,o){t=goog.structs.getKeys(e);if("undefined"==typeof t)throw Error("Keys are undefined");o=new goog.Uri.QueryData(null,null,o);e=goog.structs.getValues(e);for(var r=0;r<t.length;r++){var n=t[r],i=e[r];goog.isArray(i)?o.setValues(n,i):o.add(n,i)}return o};goog.Uri.QueryData.createFromKeysValues=function(e,t,o,r){if(e.length!=t.length)throw Error("Mismatched lengths for keys/values");o=new goog.Uri.QueryData(null,null,r);for(r=0;r<e.length;r++)o.add(e[r],t[r]);return o};goog.Uri.QueryData.prototype.getCount=function(){this.ensureKeyMapInitialized_();return this.count_};goog.Uri.QueryData.prototype.add=function(e,t){this.ensureKeyMapInitialized_();this.invalidateCache_();e=this.getKeyName_(e);var o=this.keyMap_.get(e);o||this.keyMap_.set(e,o=[]);o.push(t);this.count_++;return this};goog.Uri.QueryData.prototype.remove=function(e){this.ensureKeyMapInitialized_();e=this.getKeyName_(e);return this.keyMap_.containsKey(e)?(this.invalidateCache_(),this.count_-=this.keyMap_.get(e).length,this.keyMap_.remove(e)):!1};goog.Uri.QueryData.prototype.clear=function(){this.invalidateCache_();this.keyMap_=null;this.count_=0};goog.Uri.QueryData.prototype.isEmpty=function(){this.ensureKeyMapInitialized_();return 0==this.count_};goog.Uri.QueryData.prototype.containsKey=function(e){this.ensureKeyMapInitialized_();e=this.getKeyName_(e);return this.keyMap_.containsKey(e)};goog.Uri.QueryData.prototype.containsValue=function(e){var t=this.getValues();return goog.array.contains(t,e)};goog.Uri.QueryData.prototype.getKeys=function(){this.ensureKeyMapInitialized_();for(var e=this.keyMap_.getValues(),t=this.keyMap_.getKeys(),o=[],r=0;r<t.length;r++)for(var n=e[r],i=0;i<n.length;i++)o.push(t[r]);return o};goog.Uri.QueryData.prototype.getValues=function(e){this.ensureKeyMapInitialized_();var t=[];if(goog.isString(e))this.containsKey(e)&&(t=goog.array.concat(t,this.keyMap_.get(this.getKeyName_(e))));else{e=this.keyMap_.getValues();for(var o=0;o<e.length;o++)t=goog.array.concat(t,e[o])}return t};goog.Uri.QueryData.prototype.set=function(e,t){this.ensureKeyMapInitialized_();this.invalidateCache_();e=this.getKeyName_(e);this.containsKey(e)&&(this.count_-=this.keyMap_.get(e).length);this.keyMap_.set(e,[t]);this.count_++;return this};goog.Uri.QueryData.prototype.get=function(e,t){var o=e?this.getValues(e):[];return goog.Uri.preserveParameterTypesCompatibilityFlag?0<o.length?o[0]:t:0<o.length?String(o[0]):t};goog.Uri.QueryData.prototype.setValues=function(e,t){this.remove(e);0<t.length&&(this.invalidateCache_(),this.keyMap_.set(this.getKeyName_(e),goog.array.clone(t)),this.count_+=t.length)};goog.Uri.QueryData.prototype.toString=function(){if(this.encodedQuery_)return this.encodedQuery_;if(!this.keyMap_)return"";for(var e=[],t=this.keyMap_.getKeys(),o=0;o<t.length;o++)for(var r=t[o],n=goog.string.urlEncode(r),r=this.getValues(r),i=0;i<r.length;i++){var s=n;""!==r[i]&&(s+="="+goog.string.urlEncode(r[i]));e.push(s)}return this.encodedQuery_=e.join("&")};goog.Uri.QueryData.prototype.toDecodedString=function(){return goog.Uri.decodeOrEmpty_(this.toString())};goog.Uri.QueryData.prototype.invalidateCache_=function(){this.encodedQuery_=null};goog.Uri.QueryData.prototype.filterKeys=function(e){this.ensureKeyMapInitialized_();this.keyMap_.forEach(function(t,o){goog.array.contains(e,o)||this.remove(o)},this);return this};goog.Uri.QueryData.prototype.clone=function(){var e=new goog.Uri.QueryData;e.encodedQuery_=this.encodedQuery_;this.keyMap_&&(e.keyMap_=this.keyMap_.clone(),e.count_=this.count_);return e};goog.Uri.QueryData.prototype.getKeyName_=function(e){e=String(e);this.ignoreCase_&&(e=e.toLowerCase());return e};goog.Uri.QueryData.prototype.setIgnoreCase=function(e){e&&!this.ignoreCase_&&(this.ensureKeyMapInitialized_(),this.invalidateCache_(),this.keyMap_.forEach(function(e,t){var o=t.toLowerCase();t!=o&&(this.remove(t),this.setValues(o,e))},this));this.ignoreCase_=e};goog.Uri.QueryData.prototype.extend=function(){for(var e=0;e<arguments.length;e++)goog.structs.forEach(arguments[e],function(e,t){this.add(t,e)},this)};ol.style.Text=function(e){e=goog.isDef(e)?e:{};this.font_=e.font;this.rotation_=e.rotation;this.scale_=e.scale;this.text_=e.text;this.textAlign_=e.textAlign;this.textBaseline_=e.textBaseline;this.fill_=goog.isDef(e.fill)?e.fill:null;this.stroke_=goog.isDef(e.stroke)?e.stroke:null;this.offsetX_=goog.isDef(e.offsetX)?e.offsetX:0;this.offsetY_=goog.isDef(e.offsetY)?e.offsetY:0};ol.style.Text.prototype.getFont=function(){return this.font_};ol.style.Text.prototype.getOffsetX=function(){return this.offsetX_};ol.style.Text.prototype.getOffsetY=function(){return this.offsetY_};ol.style.Text.prototype.getFill=function(){return this.fill_};ol.style.Text.prototype.getRotation=function(){return this.rotation_};ol.style.Text.prototype.getScale=function(){return this.scale_};ol.style.Text.prototype.getStroke=function(){return this.stroke_};ol.style.Text.prototype.getText=function(){return this.text_};ol.style.Text.prototype.getTextAlign=function(){return this.textAlign_};ol.style.Text.prototype.getTextBaseline=function(){return this.textBaseline_};ol.style.Text.prototype.setFont=function(e){this.font_=e};ol.style.Text.prototype.setOffsetX=function(e){this.offsetX_=e};ol.style.Text.prototype.setOffsetY=function(e){this.offsetY_=e};ol.style.Text.prototype.setFill=function(e){this.fill_=e};ol.style.Text.prototype.setRotation=function(e){this.rotation_=e};ol.style.Text.prototype.setScale=function(e){this.scale_=e};ol.style.Text.prototype.setStroke=function(e){this.stroke_=e};ol.style.Text.prototype.setText=function(e){this.text_=e};ol.style.Text.prototype.setTextAlign=function(e){this.textAlign_=e};ol.style.Text.prototype.setTextBaseline=function(e){this.textBaseline_=e};ol.format.KML=function(e){e=goog.isDef(e)?e:{};ol.format.XMLFeature.call(this);this.defaultDataProjection=ol.proj.get("EPSG:4326");this.defaultStyle_=goog.isDef(e.defaultStyle)?e.defaultStyle:ol.format.KML.DEFAULT_STYLE_ARRAY_;this.extractStyles_=goog.isDef(e.extractStyles)?e.extractStyles:!0;this.sharedStyles_={}};goog.inherits(ol.format.KML,ol.format.XMLFeature);ol.format.KML.EXTENSIONS_=[".kml"];ol.format.KML.GX_NAMESPACE_URIS_=["http://www.google.com/kml/ext/2.2"];ol.format.KML.NAMESPACE_URIS_=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"];ol.format.KML.SCHEMA_LOCATION_="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd";ol.format.KML.DEFAULT_COLOR_=[255,255,255,1];ol.format.KML.DEFAULT_FILL_STYLE_=new ol.style.Fill({color:ol.format.KML.DEFAULT_COLOR_});ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_=[20,2];ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_=ol.style.IconAnchorUnits.PIXELS;ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_=ol.style.IconAnchorUnits.PIXELS;ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_=[64,64];ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png";ol.format.KML.DEFAULT_IMAGE_STYLE_=new ol.style.Icon({anchor:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_,anchorOrigin:ol.style.IconOrigin.BOTTOM_LEFT,anchorXUnits:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_,anchorYUnits:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_,crossOrigin:"anonymous",rotation:0,scale:.5,size:ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_,src:ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_});ol.format.KML.DEFAULT_STROKE_STYLE_=new ol.style.Stroke({color:ol.format.KML.DEFAULT_COLOR_,width:1});ol.format.KML.DEFAULT_TEXT_STYLE_=new ol.style.Text({font:"normal 16px Helvetica",fill:ol.format.KML.DEFAULT_FILL_STYLE_,stroke:ol.format.KML.DEFAULT_STROKE_STYLE_,scale:1});ol.format.KML.DEFAULT_STYLE_=new ol.style.Style({fill:ol.format.KML.DEFAULT_FILL_STYLE_,image:ol.format.KML.DEFAULT_IMAGE_STYLE_,text:ol.format.KML.DEFAULT_TEXT_STYLE_,stroke:ol.format.KML.DEFAULT_STROKE_STYLE_,zIndex:0});ol.format.KML.DEFAULT_STYLE_ARRAY_=[ol.format.KML.DEFAULT_STYLE_];ol.format.KML.ICON_ANCHOR_UNITS_MAP_={fraction:ol.style.IconAnchorUnits.FRACTION,pixels:ol.style.IconAnchorUnits.PIXELS};ol.format.KML.createFeatureStyleFunction_=function(e,t,o,r){return function(){return goog.isDef(e)?e:goog.isDef(t)?ol.format.KML.findStyle_(t,o,r):o}};ol.format.KML.findStyle_=function(e,t,o){return goog.isArray(e)?e:goog.isString(e)?(!(e in o)&&"#"+e in o&&(e="#"+e),ol.format.KML.findStyle_(o[e],t,o)):t};ol.format.KML.readColor_=function(e){e=ol.xml.getAllTextContent(e,!1);return(e=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e))?(e=e[1],[parseInt(e.substr(6,2),16),parseInt(e.substr(4,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(0,2),16)/255]):void 0};ol.format.KML.readFlatCoordinates_=function(e){e=ol.xml.getAllTextContent(e,!1);for(var t,o=[],r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;t=r.exec(e);){var n=parseFloat(t[1]),i=parseFloat(t[2]),s=t[3]?parseFloat(t[3]):0;o.push(n,i,s);e=e.substr(t[0].length)}return""!==e?void 0:o};ol.format.KML.readStyleUrl_=function(e){var t=goog.string.trim(ol.xml.getAllTextContent(e,!1));return goog.isDefAndNotNull(e.baseURI)?goog.Uri.resolve(e.baseURI,t).toString():t};ol.format.KML.readURI_=function(e){var t=ol.xml.getAllTextContent(e,!1);return goog.isDefAndNotNull(e.baseURI)?goog.Uri.resolve(e.baseURI,goog.string.trim(t)).toString():goog.string.trim(t)};ol.format.KML.readVec2_=function(e){var t=e.getAttribute("xunits"),o=e.getAttribute("yunits");return{x:parseFloat(e.getAttribute("x")),xunits:ol.format.KML.ICON_ANCHOR_UNITS_MAP_[t],y:parseFloat(e.getAttribute("y")),yunits:ol.format.KML.ICON_ANCHOR_UNITS_MAP_[o]}};ol.format.KML.readScale_=function(e){e=ol.format.XSD.readDecimal(e);return goog.isDef(e)?Math.sqrt(e):void 0};ol.format.KML.readStyleMapValue_=function(e,t){return ol.xml.pushParseAndPop(void 0,ol.format.KML.STYLE_MAP_PARSERS_,e,t)};ol.format.KML.IconStyleParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be an ELEMENT");goog.asserts.assert("IconStyle"==e.localName,"localName should be IconStyle");var o=ol.xml.pushParseAndPop({},ol.format.KML.ICON_STYLE_PARSERS_,e,t);if(goog.isDef(o)){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"styleObject should be an Object");var n,i=goog.object.get(o,"Icon",{});n=i.href;n=goog.isDef(n)?n:ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_;var s,a,g,l=o.hotSpot;goog.isDef(l)?(s=[l.x,l.y],a=l.xunits,g=l.yunits):n===ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_?(s=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_,a=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_,g=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(n)&&(s=[.5,0],g=a=ol.style.IconAnchorUnits.FRACTION);var u,l=i.x,c=i.y;goog.isDef(l)&&goog.isDef(c)&&(u=[l,c]);var h,l=i.w,i=i.h;goog.isDef(l)&&goog.isDef(i)&&(h=[l,i]);var d,i=o.heading;goog.isDef(i)&&(d=goog.math.toRadians(i));o=o.scale;n==ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_&&(h=ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_);s=new ol.style.Icon({anchor:s,anchorOrigin:ol.style.IconOrigin.BOTTOM_LEFT,anchorXUnits:a,anchorYUnits:g,crossOrigin:"anonymous",offset:u,offsetOrigin:ol.style.IconOrigin.BOTTOM_LEFT,rotation:d,scale:o,size:h,src:n});r.imageStyle=s}};ol.format.KML.LabelStyleParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("LabelStyle"==e.localName,"localName should be LabelStyle");var o=ol.xml.pushParseAndPop({},ol.format.KML.LABEL_STYLE_PARSERS_,e,t);if(goog.isDef(o)){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"styleObject should be an Object");o=new ol.style.Text({fill:new ol.style.Fill({color:goog.object.get(o,"color",ol.format.KML.DEFAULT_COLOR_)}),scale:o.scale});r.textStyle=o}};ol.format.KML.LineStyleParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("LineStyle"==e.localName,"localName should be LineStyle");var o=ol.xml.pushParseAndPop({},ol.format.KML.LINE_STYLE_PARSERS_,e,t);if(goog.isDef(o)){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"styleObject should be an Object");o=new ol.style.Stroke({color:goog.object.get(o,"color",ol.format.KML.DEFAULT_COLOR_),width:goog.object.get(o,"width",1)});r.strokeStyle=o}};ol.format.KML.PolyStyleParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("PolyStyle"==e.localName,"localName should be PolyStyle");var o=ol.xml.pushParseAndPop({},ol.format.KML.POLY_STYLE_PARSERS_,e,t);if(goog.isDef(o)){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"styleObject should be an Object");var n=new ol.style.Fill({color:goog.object.get(o,"color",ol.format.KML.DEFAULT_COLOR_)});r.fillStyle=n;n=o.fill;goog.isDef(n)&&(r.fill=n);o=o.outline;goog.isDef(o)&&(r.outline=o)}};ol.format.KML.readFlatLinearRing_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("LinearRing"==e.localName,"localName should be LinearRing");return ol.xml.pushParseAndPop(null,ol.format.KML.FLAT_LINEAR_RING_PARSERS_,e,t)};ol.format.KML.gxCoordParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(goog.array.contains(ol.format.KML.GX_NAMESPACE_URIS_,e.namespaceURI),"namespaceURI of the node should be known to the KML parser");goog.asserts.assert("coord"==e.localName,"localName should be coord");var o=t[t.length-1];goog.asserts.assert(goog.isObject(o),"gxTrackObject should be an Object");var o=o.flatCoordinates,r=ol.xml.getAllTextContent(e,!1),n=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(n){var r=parseFloat(n[1]),i=parseFloat(n[2]),n=parseFloat(n[3]);o.push(r,i,n,0)}else o.push(0,0,0,0)};ol.format.KML.readGxMultiTrack_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(goog.array.contains(ol.format.KML.GX_NAMESPACE_URIS_,e.namespaceURI),"namespaceURI of the node should be known to the KML parser");goog.asserts.assert("MultiTrack"==e.localName,"localName should be MultiTrack");var o=ol.xml.pushParseAndPop([],ol.format.KML.GX_MULTITRACK_GEOMETRY_PARSERS_,e,t);if(goog.isDef(o)){var r=new ol.geom.MultiLineString(null);r.setLineStrings(o);return r}};ol.format.KML.readGxTrack_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(goog.array.contains(ol.format.KML.GX_NAMESPACE_URIS_,e.namespaceURI),"namespaceURI of the node should be known to the KML parser");goog.asserts.assert("Track"==e.localName,"localName should be Track");var o=ol.xml.pushParseAndPop({flatCoordinates:[],whens:[]},ol.format.KML.GX_TRACK_PARSERS_,e,t);if(goog.isDef(o)){var r=o.flatCoordinates,o=o.whens;goog.asserts.assert(r.length/4==o.length,"the length of the flatCoordinates array divided by 4 should be the length of the whens array");var n,i;n=0;for(i=Math.min(r.length,o.length);i>n;++n)r[4*n+3]=o[n];o=new ol.geom.LineString(null);o.setFlatCoordinates(ol.geom.GeometryLayout.XYZM,r);return o}};ol.format.KML.readIcon_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Icon"==e.localName,"localName should be Icon");var o=ol.xml.pushParseAndPop({},ol.format.KML.ICON_PARSERS_,e,t);return goog.isDef(o)?o:null};ol.format.KML.readFlatCoordinatesFromNode_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop(null,ol.format.KML.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,t)};ol.format.KML.readLineString_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("LineString"==e.localName,"localName should be LineString");var o=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,t),r=ol.format.KML.readFlatCoordinatesFromNode_(e,t);if(goog.isDef(r)){var n=new ol.geom.LineString(null);n.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,r);n.setProperties(o);return n}};ol.format.KML.readLinearRing_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");
goog.asserts.assert("LinearRing"==e.localName,"localName should be LinearRing");var o=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,t),r=ol.format.KML.readFlatCoordinatesFromNode_(e,t);if(goog.isDef(r)){var n=new ol.geom.Polygon(null);n.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,r,[r.length]);n.setProperties(o);return n}};ol.format.KML.readMultiGeometry_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("MultiGeometry"==e.localName,"localName should be MultiGeometry");var o=ol.xml.pushParseAndPop([],ol.format.KML.MULTI_GEOMETRY_PARSERS_,e,t);if(!goog.isDef(o))return null;if(0===o.length)return new ol.geom.GeometryCollection(o);var r,n,i,s=!0,a=o[0].getType();n=1;for(i=o.length;i>n;++n)if(r=o[n],r.getType()!=a){s=!1;break}if(s){if(a==ol.geom.GeometryType.POINT){r=o[0];goog.asserts.assertInstanceof(r,ol.geom.Point,"point should be an ol.geom.Point");s=r.getLayout();a=r.getFlatCoordinates();n=1;for(i=o.length;i>n;++n)r=o[n],goog.asserts.assertInstanceof(r,ol.geom.Point,"geometry should be an ol.geom.Point"),goog.asserts.assert(r.getLayout()==s,"geometry layout should be consistent"),goog.array.extend(a,r.getFlatCoordinates());r=new ol.geom.MultiPoint(null);r.setFlatCoordinates(s,a);ol.format.KML.setCommonGeometryProperties_(r,o);return r}if(a==ol.geom.GeometryType.LINE_STRING)return r=new ol.geom.MultiLineString(null),r.setLineStrings(o),ol.format.KML.setCommonGeometryProperties_(r,o),r;if(a==ol.geom.GeometryType.POLYGON)return r=new ol.geom.MultiPolygon(null),r.setPolygons(o),ol.format.KML.setCommonGeometryProperties_(r,o),r;if(a==ol.geom.GeometryType.GEOMETRY_COLLECTION)return new ol.geom.GeometryCollection(o);goog.asserts.fail("Unexpected type: "+a);return null}return new ol.geom.GeometryCollection(o)};ol.format.KML.readPoint_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Point"==e.localName,"localName should be Point");var o=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,t),r=ol.format.KML.readFlatCoordinatesFromNode_(e,t);if(goog.isDefAndNotNull(r)){var n=new ol.geom.Point(null);goog.asserts.assert(3==r.length,"flatCoordinates should have a length of 3");n.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,r);n.setProperties(o);return n}};ol.format.KML.readPolygon_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Polygon"==e.localName,"localName should be Polygon");var o=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,t),r=ol.xml.pushParseAndPop([null],ol.format.KML.FLAT_LINEAR_RINGS_PARSERS_,e,t);if(goog.isDefAndNotNull(r)&&!goog.isNull(r[0])){var n,i,s=new ol.geom.Polygon(null),a=r[0],g=[a.length];n=1;for(i=r.length;i>n;++n)goog.array.extend(a,r[n]),g.push(a.length);s.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,a,g);s.setProperties(o);return s}};ol.format.KML.readStyle_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Style"==e.localName,"localName should be Style");var o=ol.xml.pushParseAndPop({},ol.format.KML.STYLE_PARSERS_,e,t);if(!goog.isDef(o))return null;var r=goog.object.get(o,"fillStyle",ol.format.KML.DEFAULT_FILL_STYLE_),n=o.fill;goog.isDef(n)&&!n&&(r=null);var n=goog.object.get(o,"imageStyle",ol.format.KML.DEFAULT_IMAGE_STYLE_),i=goog.object.get(o,"textStyle",ol.format.KML.DEFAULT_TEXT_STYLE_),s=goog.object.get(o,"strokeStyle",ol.format.KML.DEFAULT_STROKE_STYLE_),o=o.outline;goog.isDef(o)&&!o&&(s=null);return[new ol.style.Style({fill:r,image:n,stroke:s,text:i,zIndex:void 0})]};ol.format.KML.setCommonGeometryProperties_=function(e,t){var o,r,n,i,s=t.length,a=Array(t.length),g=Array(t.length);n=i=!1;for(r=0;s>r;++r)o=t[r],a[r]=o.get("extrude"),g[r]=o.get("altitudeMode"),n=n||goog.isDef(a[r]),i=i||goog.isDef(g[r]);n&&e.set("extrude",a);i&&e.set("altitudeMode",g)};ol.format.KML.DataParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Data"==e.localName,"localName should be Data");var o=e.getAttribute("name");if(!goog.isNull(o)){var r=ol.xml.pushParseAndPop(void 0,ol.format.KML.DATA_PARSERS_,e,t);if(goog.isDef(r)){var n=t[t.length-1];goog.asserts.assert(goog.isObject(n),"featureObject should be an Object");n[o]=r}}};ol.format.KML.ExtendedDataParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("ExtendedData"==e.localName,"localName should be ExtendedData");ol.xml.parseNode(ol.format.KML.EXTENDED_DATA_PARSERS_,e,t)};ol.format.KML.PairDataParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Pair"==e.localName,"localName should be Pair");var o=ol.xml.pushParseAndPop({},ol.format.KML.PAIR_PARSERS_,e,t);if(goog.isDef(o)){var r=o.key;goog.isDef(r)&&"normal"==r&&(r=o.styleUrl,goog.isDef(r)&&(t[t.length-1]=r),o=o.Style,goog.isDef(o)&&(t[t.length-1]=o))}};ol.format.KML.PlacemarkStyleMapParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("StyleMap"==e.localName,"localName should be StyleMap");var o=ol.format.KML.readStyleMapValue_(e,t);if(goog.isDef(o)){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"placemarkObject should be an Object");goog.isArray(o)?r.Style=o:goog.isString(o)?r.styleUrl=o:goog.asserts.fail("styleMapValue has an unknown type")}};ol.format.KML.SchemaDataParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("SchemaData"==e.localName,"localName should be SchemaData");ol.xml.parseNode(ol.format.KML.SCHEMA_DATA_PARSERS_,e,t)};ol.format.KML.SimpleDataParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("SimpleData"==e.localName,"localName should be SimpleData");var o=e.getAttribute("name");if(!goog.isNull(o)){var r=ol.format.XSD.readString(e);t[t.length-1][o]=r}};ol.format.KML.innerBoundaryIsParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("innerBoundaryIs"==e.localName,"localName should be innerBoundaryIs");var o=ol.xml.pushParseAndPop(void 0,ol.format.KML.INNER_BOUNDARY_IS_PARSERS_,e,t);if(goog.isDef(o)){var r=t[t.length-1];goog.asserts.assert(goog.isArray(r),"flatLinearRings should be an array");goog.asserts.assert(0<r.length,"flatLinearRings array should not be empty");r.push(o)}};ol.format.KML.outerBoundaryIsParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("outerBoundaryIs"==e.localName,"localName should be outerBoundaryIs");var o=ol.xml.pushParseAndPop(void 0,ol.format.KML.OUTER_BOUNDARY_IS_PARSERS_,e,t);if(goog.isDef(o)){var r=t[t.length-1];goog.asserts.assert(goog.isArray(r),"flatLinearRings should be an array");goog.asserts.assert(0<r.length,"flatLinearRings array should not be empty");r[0]=o}};ol.format.KML.LinkParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Link"==e.localName,"localName should be Link");ol.xml.parseNode(ol.format.KML.LINK_PARSERS_,e,t)};ol.format.KML.whenParser_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("when"==e.localName,"localName should be when");var o=t[t.length-1];goog.asserts.assert(goog.isObject(o),"gxTrackObject should be an Object");var o=o.whens,r=ol.xml.getAllTextContent(e,!1);if(r=/^\s*(\d{4})($|-(\d{2})($|-(\d{2})($|T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?)))))\s*$/.exec(r)){var n=parseInt(r[1],10),i=goog.isDef(r[3])?parseInt(r[3],10)-1:0,s=goog.isDef(r[5])?parseInt(r[5],10):1,a=goog.isDef(r[7])?parseInt(r[7],10):0,g=goog.isDef(r[8])?parseInt(r[8],10):0,l=goog.isDef(r[9])?parseInt(r[9],10):0,n=Date.UTC(n,i,s,a,g,l);goog.isDef(r[10])&&"Z"!=r[10]&&(i="-"==r[11]?-1:1,n+=60*i*parseInt(r[12],10),goog.isDef(r[13])&&(n+=3600*i*parseInt(r[13],10)));o.push(n)}else o.push(0)};ol.format.KML.DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{value:ol.xml.makeReplacer(ol.format.XSD.readString)});ol.format.KML.EXTENDED_DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Data:ol.format.KML.DataParser_,SchemaData:ol.format.KML.SchemaDataParser_});ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{extrude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),altitudeMode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.KML.FLAT_LINEAR_RING_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeReplacer(ol.format.KML.readFlatCoordinates_)});ol.format.KML.FLAT_LINEAR_RINGS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{innerBoundaryIs:ol.format.KML.innerBoundaryIsParser_,outerBoundaryIs:ol.format.KML.outerBoundaryIsParser_});ol.format.KML.GX_TRACK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{when:ol.format.KML.whenParser_},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{coord:ol.format.KML.gxCoordParser_}));ol.format.KML.GEOMETRY_FLAT_COORDINATES_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeReplacer(ol.format.KML.readFlatCoordinates_)});ol.format.KML.ICON_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{x:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),y:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),w:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),h:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)}));ol.format.KML.ICON_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Icon:ol.xml.makeObjectPropertySetter(ol.format.KML.readIcon_),heading:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),hotSpot:ol.xml.makeObjectPropertySetter(ol.format.KML.readVec2_),scale:ol.xml.makeObjectPropertySetter(ol.format.KML.readScale_)});ol.format.KML.INNER_BOUNDARY_IS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeReplacer(ol.format.KML.readFlatLinearRing_)});ol.format.KML.LABEL_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),scale:ol.xml.makeObjectPropertySetter(ol.format.KML.readScale_)});ol.format.KML.LINE_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),width:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)});ol.format.KML.MULTI_GEOMETRY_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LineString:ol.xml.makeArrayPusher(ol.format.KML.readLineString_),LinearRing:ol.xml.makeArrayPusher(ol.format.KML.readLinearRing_),MultiGeometry:ol.xml.makeArrayPusher(ol.format.KML.readMultiGeometry_),Point:ol.xml.makeArrayPusher(ol.format.KML.readPoint_),Polygon:ol.xml.makeArrayPusher(ol.format.KML.readPolygon_)});ol.format.KML.GX_MULTITRACK_GEOMETRY_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{Track:ol.xml.makeArrayPusher(ol.format.KML.readGxTrack_)});ol.format.KML.NETWORK_LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{ExtendedData:ol.format.KML.ExtendedDataParser_,Link:ol.format.KML.LinkParser_,address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),description:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),open:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),phoneNumber:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),visibility:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)});ol.format.KML.LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)});ol.format.KML.OUTER_BOUNDARY_IS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeReplacer(ol.format.KML.readFlatLinearRing_)});ol.format.KML.PAIR_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Style:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyle_),key:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),styleUrl:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyleUrl_)});ol.format.KML.PLACEMARK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{ExtendedData:ol.format.KML.ExtendedDataParser_,MultiGeometry:ol.xml.makeObjectPropertySetter(ol.format.KML.readMultiGeometry_,"geometry"),LineString:ol.xml.makeObjectPropertySetter(ol.format.KML.readLineString_,"geometry"),LinearRing:ol.xml.makeObjectPropertySetter(ol.format.KML.readLinearRing_,"geometry"),Point:ol.xml.makeObjectPropertySetter(ol.format.KML.readPoint_,"geometry"),Polygon:ol.xml.makeObjectPropertySetter(ol.format.KML.readPolygon_,"geometry"),Style:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyle_),StyleMap:ol.format.KML.PlacemarkStyleMapParser_,address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),description:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),open:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),phoneNumber:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),styleUrl:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_),visibility:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{MultiTrack:ol.xml.makeObjectPropertySetter(ol.format.KML.readGxMultiTrack_,"geometry"),Track:ol.xml.makeObjectPropertySetter(ol.format.KML.readGxTrack_,"geometry")}));ol.format.KML.POLY_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),fill:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),outline:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)});ol.format.KML.SCHEMA_DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{SimpleData:ol.format.KML.SimpleDataParser_});ol.format.KML.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{IconStyle:ol.format.KML.IconStyleParser_,LabelStyle:ol.format.KML.LabelStyleParser_,LineStyle:ol.format.KML.LineStyleParser_,PolyStyle:ol.format.KML.PolyStyleParser_});ol.format.KML.STYLE_MAP_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Pair:ol.format.KML.PairDataParser_});ol.format.KML.prototype.getExtensions=function(){return ol.format.KML.EXTENSIONS_};ol.format.KML.prototype.readDocumentOrFolder_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var o=ol.xml.getLocalName(e);goog.asserts.assert("Document"==o||"Folder"==o,"localName should be Document or Folder");o=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Document:ol.xml.makeArrayExtender(this.readDocumentOrFolder_,this),Folder:ol.xml.makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:ol.xml.makeArrayPusher(this.readPlacemark_,this),Style:goog.bind(this.readSharedStyle_,this),StyleMap:goog.bind(this.readSharedStyleMap_,this)});o=ol.xml.pushParseAndPop([],o,e,t,this);return goog.isDef(o)?o:void 0};ol.format.KML.prototype.readPlacemark_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Placemark"==e.localName,"localName should be Placemark");var o=ol.xml.pushParseAndPop({geometry:null},ol.format.KML.PLACEMARK_PARSERS_,e,t);if(goog.isDef(o)){var r=new ol.Feature,n=e.getAttribute("id");goog.isNull(n)||r.setId(n);var n=t[0],i=o.geometry;goog.isDefAndNotNull(i)&&ol.format.Feature.transformWithOptions(i,!1,n);r.setGeometry(i);goog.object.remove(o,"geometry");this.extractStyles_&&(n=ol.format.KML.createFeatureStyleFunction_(o.Style,o.styleUrl,this.defaultStyle_,this.sharedStyles_),r.setStyle(n));goog.object.remove(o,"Style");r.setProperties(o);return r}};ol.format.KML.prototype.readSharedStyle_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Style"==e.localName,"localName should be Style");var o=e.getAttribute("id");if(!goog.isNull(o)){var r=ol.format.KML.readStyle_(e,t);goog.isDef(r)&&(o=goog.isDefAndNotNull(e.baseURI)?goog.Uri.resolve(e.baseURI,"#"+o).toString():"#"+o,this.sharedStyles_[o]=r)}};ol.format.KML.prototype.readSharedStyleMap_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("StyleMap"==e.localName,"localName should be StyleMap");var o=e.getAttribute("id");if(!goog.isNull(o)){var r=ol.format.KML.readStyleMapValue_(e,t);goog.isDef(r)&&(o=goog.isDefAndNotNull(e.baseURI)?goog.Uri.resolve(e.baseURI,"#"+o).toString():"#"+o,this.sharedStyles_[o]=r)}};ol.format.KML.prototype.readFeatureFromNode=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!goog.array.contains(ol.format.KML.NAMESPACE_URIS_,e.namespaceURI))return null;goog.asserts.assert("Placemark"==e.localName,"localName should be Placemark");var o=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return goog.isDef(o)?o:null};ol.format.KML.prototype.readFeaturesFromNode=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!goog.array.contains(ol.format.KML.NAMESPACE_URIS_,e.namespaceURI))return[];var o;o=ol.xml.getLocalName(e);if("Document"==o||"Folder"==o)return o=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),goog.isDef(o)?o:[];if("Placemark"==o)return o=this.readPlacemark_(e,[this.getReadOptions(e,t)]),goog.isDef(o)?[o]:[];if("kml"==o){o=[];var r;for(r=e.firstElementChild;!goog.isNull(r);r=r.nextElementSibling){var n=this.readFeaturesFromNode(r,t);goog.isDef(n)&&goog.array.extend(o,n)}return o}return[]};ol.format.KML.prototype.readName=function(e){if(ol.xml.isDocument(e))return this.readNameFromDocument(e);if(ol.xml.isNode(e))return this.readNameFromNode(e);if(goog.isString(e))return e=ol.xml.parse(e),this.readNameFromDocument(e);goog.asserts.fail("Unknown type for source");return void 0};ol.format.KML.prototype.readNameFromDocument=function(e){for(e=e.firstChild;!goog.isNull(e);e=e.nextSibling)if(e.nodeType==goog.dom.NodeType.ELEMENT){var t=this.readNameFromNode(e);if(goog.isDef(t))return t}};ol.format.KML.prototype.readNameFromNode=function(e){var t;for(t=e.firstElementChild;!goog.isNull(t);t=t.nextElementSibling)if(goog.array.contains(ol.format.KML.NAMESPACE_URIS_,t.namespaceURI)&&"name"==t.localName)return ol.format.XSD.readString(t);for(t=e.firstElementChild;!goog.isNull(t);t=t.nextElementSibling)if(e=ol.xml.getLocalName(t),goog.array.contains(ol.format.KML.NAMESPACE_URIS_,t.namespaceURI)&&("Document"==e||"Folder"==e||"Placemark"==e||"kml"==e)&&(e=this.readNameFromNode(t),goog.isDef(e)))return e};ol.format.KML.prototype.readNetworkLinks=function(e){var t=[];ol.xml.isDocument(e)?goog.array.extend(t,this.readNetworkLinksFromDocument(e)):ol.xml.isNode(e)?goog.array.extend(t,this.readNetworkLinksFromNode(e)):goog.isString(e)?(e=ol.xml.parse(e),goog.array.extend(t,this.readNetworkLinksFromDocument(e))):goog.asserts.fail("unknown type for source");return t};ol.format.KML.prototype.readNetworkLinksFromDocument=function(e){var t=[];for(e=e.firstChild;!goog.isNull(e);e=e.nextSibling)e.nodeType==goog.dom.NodeType.ELEMENT&&goog.array.extend(t,this.readNetworkLinksFromNode(e));return t};ol.format.KML.prototype.readNetworkLinksFromNode=function(e){var t,o=[];for(t=e.firstElementChild;!goog.isNull(t);t=t.nextElementSibling)if(goog.array.contains(ol.format.KML.NAMESPACE_URIS_,t.namespaceURI)&&"NetworkLink"==t.localName){var r=ol.xml.pushParseAndPop({},ol.format.KML.NETWORK_LINK_PARSERS_,t,[]);o.push(r)}for(t=e.firstElementChild;!goog.isNull(t);t=t.nextElementSibling)e=ol.xml.getLocalName(t),!goog.array.contains(ol.format.KML.NAMESPACE_URIS_,t.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||goog.array.extend(o,this.readNetworkLinksFromNode(t));return o};ol.format.KML.writeColorTextNode_=function(e,t){var o,r=ol.color.asArray(t),r=[255*(4==r.length?r[3]:1),r[2],r[1],r[0]];for(o=0;4>o;++o){var n=parseInt(r[o],10).toString(16);r[o]=1==n.length?"0"+n:n}ol.format.XSD.writeStringTextNode(e,r.join(""))};ol.format.KML.writeCoordinatesTextNode_=function(e,t,o){o=o[o.length-1];goog.asserts.assert(goog.isObject(o),"context should be an Object");var r=o.layout;o=o.stride;var n;r==ol.geom.GeometryLayout.XY||r==ol.geom.GeometryLayout.XYM?n=2:r==ol.geom.GeometryLayout.XYZ||r==ol.geom.GeometryLayout.XYZM?n=3:goog.asserts.fail("Unknown geometry layout");var i,s=t.length,a="";if(s>0){a+=t[0];for(r=1;n>r;++r)a+=","+t[r];for(i=o;s>i;i+=o)for(a+=" "+t[i],r=1;n>r;++r)a+=","+t[i+r]}ol.format.XSD.writeStringTextNode(e,a)};ol.format.KML.writeDocument_=function(e,t,o){ol.xml.pushSerializeAndPop({node:e},ol.format.KML.DOCUMENT_SERIALIZERS_,ol.format.KML.DOCUMENT_NODE_FACTORY_,t,o)};ol.format.KML.writeIcon_=function(e,t,o){e={node:e};var r=ol.format.KML.ICON_SEQUENCE_[o[o.length-1].node.namespaceURI],n=ol.xml.makeSequence(t,r);ol.xml.pushSerializeAndPop(e,ol.format.KML.ICON_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,n,o,r);r=ol.format.KML.ICON_SEQUENCE_[ol.format.KML.GX_NAMESPACE_URIS_[0]];n=ol.xml.makeSequence(t,r);ol.xml.pushSerializeAndPop(e,ol.format.KML.ICON_SERIALIZERS_,ol.format.KML.GX_NODE_FACTORY_,n,o,r)};ol.format.KML.writeIconStyle_=function(e,t,o){e={node:e};var r={},n=t.getSrc(),i=t.getSize(),s=t.getImageSize(),n={href:n};if(!goog.isNull(i)){n.w=i[0];n.h=i[1];var a=t.getAnchor(),g=t.getOrigin();goog.isNull(g)||goog.isNull(s)||0===g[0]||g[1]===i[1]||(n.x=g[0],n.y=s[1]-(g[1]+i[1]));goog.isNull(a)||0===a[0]||a[1]===i[1]||(r.hotSpot={x:a[0],xunits:ol.style.IconAnchorUnits.PIXELS,y:i[1]-a[1],yunits:ol.style.IconAnchorUnits.PIXELS})}r.Icon=n;i=t.getScale();1!==i&&(r.scale=i);t=t.getRotation();0!==t&&(r.heading=t);t=ol.format.KML.ICON_STYLE_SEQUENCE_[o[o.length-1].node.namespaceURI];r=ol.xml.makeSequence(r,t);ol.xml.pushSerializeAndPop(e,ol.format.KML.ICON_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,r,o,t)};ol.format.KML.writeLabelStyle_=function(e,t,o){e={node:e};var r={},n=t.getFill();goog.isNull(n)||(r.color=n.getColor());t=t.getScale();goog.isDef(t)&&1!==t&&(r.scale=t);t=ol.format.KML.LABEL_STYLE_SEQUENCE_[o[o.length-1].node.namespaceURI];r=ol.xml.makeSequence(r,t);ol.xml.pushSerializeAndPop(e,ol.format.KML.LABEL_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,r,o,t)};ol.format.KML.writeLineStyle_=function(e,t,o){e={node:e};var r={color:t.getColor(),width:t.getWidth()};t=ol.format.KML.LINE_STYLE_SEQUENCE_[o[o.length-1].node.namespaceURI];r=ol.xml.makeSequence(r,t);ol.xml.pushSerializeAndPop(e,ol.format.KML.LINE_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,r,o,t)};ol.format.KML.writeMultiGeometry_=function(e,t,o){goog.asserts.assert(t instanceof ol.geom.MultiPoint||t instanceof ol.geom.MultiLineString||t instanceof ol.geom.MultiPolygon,"geometry should be one of: ol.geom.MultiPoint, ol.geom.MultiLineString or ol.geom.MultiPolygon");e={node:e};var r,n,i=t.getType();i==ol.geom.GeometryType.MULTI_POINT?(r=t.getPoints(),n=ol.format.KML.POINT_NODE_FACTORY_):i==ol.geom.GeometryType.MULTI_LINE_STRING?(r=t.getLineStrings(),n=ol.format.KML.LINE_STRING_NODE_FACTORY_):i==ol.geom.GeometryType.MULTI_POLYGON?(r=t.getPolygons(),n=ol.format.KML.POLYGON_NODE_FACTORY_):goog.asserts.fail("Unknown geometry type: "+i);ol.xml.pushSerializeAndPop(e,ol.format.KML.MULTI_GEOMETRY_SERIALIZERS_,n,r,o)};ol.format.KML.writeBoundaryIs_=function(e,t,o){ol.xml.pushSerializeAndPop({node:e},ol.format.KML.BOUNDARY_IS_SERIALIZERS_,ol.format.KML.LINEAR_RING_NODE_FACTORY_,[t],o)};ol.format.KML.writePlacemark_=function(e,t,o){var r={node:e};goog.isDefAndNotNull(t.getId())&&e.setAttribute("id",t.getId());e=t.getProperties();var n=t.getStyleFunction();goog.isDef(n)&&(n=n.call(t,0),!goog.isNull(n)&&0<n.length&&(e.Style=n[0],n=n[0].getText(),goog.isNull(n)||(e.name=n.getText())));n=ol.format.KML.PLACEMARK_SEQUENCE_[o[o.length-1].node.namespaceURI];e=ol.xml.makeSequence(e,n);ol.xml.pushSerializeAndPop(r,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,e,o,n);e=o[0];t=t.getGeometry();goog.isDefAndNotNull(t)&&(t=ol.format.Feature.transformWithOptions(t,!0,e));ol.xml.pushSerializeAndPop(r,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.format.KML.GEOMETRY_NODE_FACTORY_,[t],o)};ol.format.KML.writePrimitiveGeometry_=function(e,t,o){goog.asserts.assert(t instanceof ol.geom.Point||t instanceof ol.geom.LineString||t instanceof ol.geom.LinearRing,"geometry should be one of ol.geom.Point, ol.geom.LineString or ol.geom.LinearRing");var r=t.getFlatCoordinates();e={node:e};e.layout=t.getLayout();e.stride=t.getStride();ol.xml.pushSerializeAndPop(e,ol.format.KML.PRIMITIVE_GEOMETRY_SERIALIZERS_,ol.format.KML.COORDINATES_NODE_FACTORY_,[r],o)};ol.format.KML.writePolygon_=function(e,t,o){goog.asserts.assertInstanceof(t,ol.geom.Polygon,"polygon should be an ol.geom.Polygon");t=t.getLinearRings();goog.asserts.assert(0<t.length,"linearRings should not be empty");var r=t.shift();e={node:e};ol.xml.pushSerializeAndPop(e,ol.format.KML.POLYGON_SERIALIZERS_,ol.format.KML.INNER_BOUNDARY_NODE_FACTORY_,t,o);ol.xml.pushSerializeAndPop(e,ol.format.KML.POLYGON_SERIALIZERS_,ol.format.KML.OUTER_BOUNDARY_NODE_FACTORY_,[r],o)};ol.format.KML.writePolyStyle_=function(e,t,o){ol.xml.pushSerializeAndPop({node:e},ol.format.KML.POLY_STYLE_SERIALIZERS_,ol.format.KML.COLOR_NODE_FACTORY_,[t.getColor()],o)};ol.format.KML.writeScaleTextNode_=function(e,t){ol.format.XSD.writeDecimalTextNode(e,t*t)};ol.format.KML.writeStyle_=function(e,t,o){e={node:e};var r={},n=t.getFill(),i=t.getStroke(),s=t.getImage();t=t.getText();goog.isNull(s)||(r.IconStyle=s);goog.isNull(t)||(r.LabelStyle=t);goog.isNull(i)||(r.LineStyle=i);goog.isNull(n)||(r.PolyStyle=n);t=ol.format.KML.STYLE_SEQUENCE_[o[o.length-1].node.namespaceURI];r=ol.xml.makeSequence(r,t);ol.xml.pushSerializeAndPop(e,ol.format.KML.STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,r,o,t)};ol.format.KML.writeVec2_=function(e,t){e.setAttribute("x",t.x);e.setAttribute("y",t.y);e.setAttribute("xunits",t.xunits);e.setAttribute("yunits",t.yunits)};ol.format.KML.KML_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["Document","Placemark"]);ol.format.KML.KML_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Document:ol.xml.makeChildAppender(ol.format.KML.writeDocument_),Placemark:ol.xml.makeChildAppender(ol.format.KML.writePlacemark_)});ol.format.KML.DOCUMENT_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Placemark:ol.xml.makeChildAppender(ol.format.KML.writePlacemark_)});ol.format.KML.GEOMETRY_TYPE_TO_NODENAME_={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry"};ol.format.KML.ICON_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["href"],ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,["x","y","w","h"]));ol.format.KML.ICON_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{x:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),y:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),w:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),h:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode)}));ol.format.KML.ICON_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["scale","heading","Icon","hotSpot"]);ol.format.KML.ICON_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Icon:ol.xml.makeChildAppender(ol.format.KML.writeIcon_),heading:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),hotSpot:ol.xml.makeChildAppender(ol.format.KML.writeVec2_),scale:ol.xml.makeChildAppender(ol.format.KML.writeScaleTextNode_)});ol.format.KML.LABEL_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["color","scale"]);ol.format.KML.LABEL_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_),scale:ol.xml.makeChildAppender(ol.format.KML.writeScaleTextNode_)});ol.format.KML.LINE_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["color","width"]);ol.format.KML.LINE_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_),width:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode)});ol.format.KML.BOUNDARY_IS_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_)});ol.format.KML.MULTI_GEOMETRY_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LineString:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Point:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Polygon:ol.xml.makeChildAppender(ol.format.KML.writePolygon_)});ol.format.KML.PLACEMARK_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,"name open visibility address phoneNumber description styleUrl Style".split(" "));ol.format.KML.PLACEMARK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{MultiGeometry:ol.xml.makeChildAppender(ol.format.KML.writeMultiGeometry_),LineString:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),LinearRing:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Point:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Polygon:ol.xml.makeChildAppender(ol.format.KML.writePolygon_),Style:ol.xml.makeChildAppender(ol.format.KML.writeStyle_),address:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),description:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),open:ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode),phoneNumber:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),styleUrl:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),visibility:ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode)});ol.format.KML.PRIMITIVE_GEOMETRY_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeChildAppender(ol.format.KML.writeCoordinatesTextNode_)});ol.format.KML.POLYGON_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{outerBoundaryIs:ol.xml.makeChildAppender(ol.format.KML.writeBoundaryIs_),innerBoundaryIs:ol.xml.makeChildAppender(ol.format.KML.writeBoundaryIs_)});ol.format.KML.POLY_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_)});ol.format.KML.STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["IconStyle","LabelStyle","LineStyle","PolyStyle"]);ol.format.KML.STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{IconStyle:ol.xml.makeChildAppender(ol.format.KML.writeIconStyle_),LabelStyle:ol.xml.makeChildAppender(ol.format.KML.writeLabelStyle_),LineStyle:ol.xml.makeChildAppender(ol.format.KML.writeLineStyle_),PolyStyle:ol.xml.makeChildAppender(ol.format.KML.writePolyStyle_)});ol.format.KML.GX_NODE_FACTORY_=function(e,t,o){return ol.xml.createElementNS(ol.format.KML.GX_NAMESPACE_URIS_[0],"gx:"+o)
};ol.format.KML.DOCUMENT_NODE_FACTORY_=function(e,t){goog.asserts.assertInstanceof(e,ol.Feature,"value should be an ol.Feature");e=t[t.length-1].node;goog.asserts.assert(ol.xml.isNode(e),"parentNode should be an XML node");return ol.xml.createElementNS(e.namespaceURI,"Placemark")};ol.format.KML.GEOMETRY_NODE_FACTORY_=function(e,t){return goog.isDefAndNotNull(e)?(goog.asserts.assertInstanceof(e,ol.geom.Geometry,"value should be an ol.geom.Geometry"),t=t[t.length-1].node,goog.asserts.assert(ol.xml.isNode(t),"parentNode should be an XML node"),ol.xml.createElementNS(t.namespaceURI,ol.format.KML.GEOMETRY_TYPE_TO_NODENAME_[e.getType()])):void 0};ol.format.KML.COLOR_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("color");ol.format.KML.COORDINATES_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("coordinates");ol.format.KML.INNER_BOUNDARY_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("innerBoundaryIs");ol.format.KML.POINT_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("Point");ol.format.KML.LINE_STRING_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("LineString");ol.format.KML.LINEAR_RING_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("LinearRing");ol.format.KML.POLYGON_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("Polygon");ol.format.KML.OUTER_BOUNDARY_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("outerBoundaryIs");ol.format.KML.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var o=ol.xml.createElementNS(ol.format.KML.NAMESPACE_URIS_[4],"kml");ol.xml.setAttributeNS(o,"http://www.w3.org/2000/xmlns/","xmlns:gx",ol.format.KML.GX_NAMESPACE_URIS_[0]);ol.xml.setAttributeNS(o,"http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance");ol.xml.setAttributeNS(o,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",ol.format.KML.SCHEMA_LOCATION_);var r={node:o},n={};1<e.length?n.Document=e:1==e.length&&(n.Placemark=e[0]);var i=ol.format.KML.KML_SEQUENCE_[o.namespaceURI],n=ol.xml.makeSequence(n,i);ol.xml.pushSerializeAndPop(r,ol.format.KML.KML_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,n,[t],i);return o};ol.format.XLink={};ol.format.XLink.NAMESPACE_URI="http://www.w3.org/1999/xlink";ol.format.XLink.readHref=function(e){return e.getAttributeNS(ol.format.XLink.NAMESPACE_URI,"href")};ol.format.XML=function(){};ol.format.XML.prototype.read=function(e){if(ol.xml.isDocument(e))return this.readFromDocument(e);if(ol.xml.isNode(e))return this.readFromNode(e);if(goog.isString(e))return e=ol.xml.parse(e),this.readFromDocument(e);goog.asserts.fail();return null};ol.format.OWS=function(){ol.format.XML.call(this)};goog.inherits(ol.format.OWS,ol.format.XML);ol.format.OWS.prototype.readFromDocument=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(e=e.firstChild;!goog.isNull(e);e=e.nextSibling)if(e.nodeType==goog.dom.NodeType.ELEMENT)return this.readFromNode(e);return null};ol.format.OWS.prototype.readFromNode=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");e=ol.xml.pushParseAndPop({},ol.format.OWS.PARSERS_,e,[]);return goog.isDef(e)?e:null};ol.format.OWS.readAddress_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Address"==e.localName,"localName should be Address");return ol.xml.pushParseAndPop({},ol.format.OWS.ADDRESS_PARSERS_,e,t)};ol.format.OWS.readAllowedValues_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("AllowedValues"==e.localName,"localName should be AllowedValues");return ol.xml.pushParseAndPop({},ol.format.OWS.ALLOWED_VALUES_PARSERS_,e,t)};ol.format.OWS.readConstraint_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Constraint"==e.localName,"localName should be Constraint");var o=e.getAttribute("name");return goog.isDef(o)?ol.xml.pushParseAndPop({name:o},ol.format.OWS.CONSTRAINT_PARSERS_,e,t):void 0};ol.format.OWS.readContactInfo_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("ContactInfo"==e.localName,"localName should be ContactInfo");return ol.xml.pushParseAndPop({},ol.format.OWS.CONTACT_INFO_PARSERS_,e,t)};ol.format.OWS.readDcp_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("DCP"==e.localName,"localName should be DCP");return ol.xml.pushParseAndPop({},ol.format.OWS.DCP_PARSERS_,e,t)};ol.format.OWS.readGet_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Get"==e.localName,"localName should be Get");var o=ol.format.XLink.readHref(e);return goog.isDef(o)?ol.xml.pushParseAndPop({href:o},ol.format.OWS.REQUEST_METHOD_PARSERS_,e,t):void 0};ol.format.OWS.readHttp_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("HTTP"==e.localName,"localName should be HTTP");return ol.xml.pushParseAndPop({},ol.format.OWS.HTTP_PARSERS_,e,t)};ol.format.OWS.readOperation_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Operation"==e.localName,"localName should be Operation");var o=e.getAttribute("name"),r=ol.xml.pushParseAndPop({},ol.format.OWS.OPERATION_PARSERS_,e,t);if(goog.isDef(r)){var n=t[t.length-1];goog.asserts.assert(goog.isObject(n),"object should be an Object");n[o]=r}};ol.format.OWS.readOperationsMetadata_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("OperationsMetadata"==e.localName,"localName should be OperationsMetadata");return ol.xml.pushParseAndPop({},ol.format.OWS.OPERATIONS_METADATA_PARSERS_,e,t)};ol.format.OWS.readPhone_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Phone"==e.localName,"localName should be Phone");return ol.xml.pushParseAndPop({},ol.format.OWS.PHONE_PARSERS_,e,t)};ol.format.OWS.readServiceIdentification_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("ServiceIdentification"==e.localName,"localName should be ServiceIdentification");return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_IDENTIFICATION_PARSERS_,e,t)};ol.format.OWS.readServiceContact_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("ServiceContact"==e.localName,"localName should be ServiceContact");return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_CONTACT_PARSERS_,e,t)};ol.format.OWS.readServiceProvider_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("ServiceProvider"==e.localName,"localName should be ServiceProvider");return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_PROVIDER_PARSERS_,e,t)};ol.format.OWS.readValue_=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Value"==e.localName,"localName should be Value");return ol.format.XSD.readString(e)};ol.format.OWS.NAMESPACE_URIS_=[null,"http://www.opengis.net/ows/1.1"];ol.format.OWS.PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{ServiceIdentification:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceIdentification_),ServiceProvider:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceProvider_),OperationsMetadata:ol.xml.makeObjectPropertySetter(ol.format.OWS.readOperationsMetadata_)});ol.format.OWS.ADDRESS_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{DeliveryPoint:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),City:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),AdministrativeArea:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PostalCode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Country:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ElectronicMailAddress:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.ALLOWED_VALUES_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Value:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readValue_)});ol.format.OWS.CONSTRAINT_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{AllowedValues:ol.xml.makeObjectPropertySetter(ol.format.OWS.readAllowedValues_)});ol.format.OWS.CONTACT_INFO_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Phone:ol.xml.makeObjectPropertySetter(ol.format.OWS.readPhone_),Address:ol.xml.makeObjectPropertySetter(ol.format.OWS.readAddress_)});ol.format.OWS.DCP_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{HTTP:ol.xml.makeObjectPropertySetter(ol.format.OWS.readHttp_)});ol.format.OWS.HTTP_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Get:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readGet_),Post:void 0});ol.format.OWS.OPERATION_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{DCP:ol.xml.makeObjectPropertySetter(ol.format.OWS.readDcp_)});ol.format.OWS.OPERATIONS_METADATA_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Operation:ol.format.OWS.readOperation_});ol.format.OWS.PHONE_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Voice:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Facsimile:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.REQUEST_METHOD_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Constraint:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readConstraint_)});ol.format.OWS.SERVICE_CONTACT_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{IndividualName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PositionName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactInfo:ol.xml.makeObjectPropertySetter(ol.format.OWS.readContactInfo_)});ol.format.OWS.SERVICE_IDENTIFICATION_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ServiceTypeVersion:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ServiceType:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.SERVICE_PROVIDER_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{ProviderName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ProviderSite:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),ServiceContact:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceContact_)});ol.format.WFS=function(e){e=goog.isDef(e)?e:{};this.featureType_=e.featureType;this.featureNS_=e.featureNS;this.gmlFormat_=goog.isDef(e.gmlFormat)?e.gmlFormat:new ol.format.GML3;this.schemaLocation_=goog.isDef(e.schemaLocation)?e.schemaLocation:ol.format.WFS.SCHEMA_LOCATION;ol.format.XMLFeature.call(this)};goog.inherits(ol.format.WFS,ol.format.XMLFeature);ol.format.WFS.FEATURE_PREFIX="feature";ol.format.WFS.XMLNS="http://www.w3.org/2000/xmlns/";ol.format.WFS.SCHEMA_LOCATION="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd";ol.format.WFS.prototype.readFeaturesFromNode=function(e,t){var o={featureType:this.featureType_,featureNS:this.featureNS_};goog.object.extend(o,this.getReadOptions(e,goog.isDef(t)?t:{}));o=[o];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS].featureMember=ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFeaturesInternal);o=ol.xml.pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,o,this.gmlFormat_);goog.isDef(o)||(o=[]);return o};ol.format.WFS.prototype.readTransactionResponse=function(e){if(ol.xml.isDocument(e))return this.readTransactionResponseFromDocument(e);if(ol.xml.isNode(e))return this.readTransactionResponseFromNode(e);if(goog.isString(e))return e=ol.xml.parse(e),this.readTransactionResponseFromDocument(e);goog.asserts.fail("Unknown source type");return void 0};ol.format.WFS.prototype.readFeatureCollectionMetadata=function(e){if(ol.xml.isDocument(e))return this.readFeatureCollectionMetadataFromDocument(e);if(ol.xml.isNode(e))return this.readFeatureCollectionMetadataFromNode(e);if(goog.isString(e))return e=ol.xml.parse(e),this.readFeatureCollectionMetadataFromDocument(e);goog.asserts.fail("Unknown source type");return void 0};ol.format.WFS.prototype.readFeatureCollectionMetadataFromDocument=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(e=e.firstChild;!goog.isNull(e);e=e.nextSibling)if(e.nodeType==goog.dom.NodeType.ELEMENT)return this.readFeatureCollectionMetadataFromNode(e)};ol.format.WFS.FEATURE_COLLECTION_PARSERS_={"http://www.opengis.net/gml":{boundedBy:ol.xml.makeObjectPropertySetter(ol.format.GMLBase.prototype.readGeometryElement,"bounds")}};ol.format.WFS.prototype.readFeatureCollectionMetadataFromNode=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("FeatureCollection"==e.localName,"localName should be FeatureCollection");var t={},o=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("numberOfFeatures"));t.numberOfFeatures=o;return ol.xml.pushParseAndPop(t,ol.format.WFS.FEATURE_COLLECTION_PARSERS_,e,[],this.gmlFormat_)};ol.format.WFS.TRANSACTION_SUMMARY_PARSERS_={"http://www.opengis.net/wfs":{totalInserted:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),totalUpdated:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),totalDeleted:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)}};ol.format.WFS.readTransactionSummary_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WFS.TRANSACTION_SUMMARY_PARSERS_,e,t)};ol.format.WFS.OGC_FID_PARSERS_={"http://www.opengis.net/ogc":{FeatureId:ol.xml.makeArrayPusher(function(e){return e.getAttribute("fid")})}};ol.format.WFS.fidParser_=function(e,t){ol.xml.parseNode(ol.format.WFS.OGC_FID_PARSERS_,e,t)};ol.format.WFS.INSERT_RESULTS_PARSERS_={"http://www.opengis.net/wfs":{Feature:ol.format.WFS.fidParser_}};ol.format.WFS.readInsertResults_=function(e,t){return ol.xml.pushParseAndPop([],ol.format.WFS.INSERT_RESULTS_PARSERS_,e,t)};ol.format.WFS.TRANSACTION_RESPONSE_PARSERS_={"http://www.opengis.net/wfs":{TransactionSummary:ol.xml.makeObjectPropertySetter(ol.format.WFS.readTransactionSummary_,"transactionSummary"),InsertResults:ol.xml.makeObjectPropertySetter(ol.format.WFS.readInsertResults_,"insertIds")}};ol.format.WFS.prototype.readTransactionResponseFromDocument=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(e=e.firstChild;!goog.isNull(e);e=e.nextSibling)if(e.nodeType==goog.dom.NodeType.ELEMENT)return this.readTransactionResponseFromNode(e)};ol.format.WFS.prototype.readTransactionResponseFromNode=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should  be ELEMENT");goog.asserts.assert("TransactionResponse"==e.localName,"localName should be TransactionResponse");return ol.xml.pushParseAndPop({},ol.format.WFS.TRANSACTION_RESPONSE_PARSERS_,e,[])};ol.format.WFS.QUERY_SERIALIZERS_={"http://www.opengis.net/wfs":{PropertyName:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}};ol.format.WFS.writeFeature_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");r=ol.xml.createElementNS(r.featureNS,r.featureType);e.appendChild(r);ol.format.GML3.prototype.writeFeatureElement(r,t,o)};ol.format.WFS.writeOgcFidFilter_=function(e,t,o){o=ol.xml.createElementNS("http://www.opengis.net/ogc","Filter");var r=ol.xml.createElementNS("http://www.opengis.net/ogc","FeatureId");o.appendChild(r);r.setAttribute("fid",t);e.appendChild(o)};ol.format.WFS.writeDelete_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var n=r.featureType,i=r.featurePrefix,i=goog.isDef(i)?i:ol.format.WFS.FEATURE_PREFIX,r=r.featureNS;e.setAttribute("typeName",i+":"+n);ol.xml.setAttributeNS(e,ol.format.WFS.XMLNS,"xmlns:"+i,r);t=t.getId();goog.isDef(t)&&ol.format.WFS.writeOgcFidFilter_(e,t,o)};ol.format.WFS.writeUpdate_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var n=r.featureType,i=r.featurePrefix,i=goog.isDef(i)?i:ol.format.WFS.FEATURE_PREFIX,s=r.featureNS;e.setAttribute("typeName",i+":"+n);ol.xml.setAttributeNS(e,ol.format.WFS.XMLNS,"xmlns:"+i,s);n=t.getId();if(goog.isDef(n)){for(var i=t.getKeys(),s=[],a=0,g=i.length;g>a;a++){var l=t.get(i[a]);goog.isDef(l)&&s.push({name:i[a],value:l})}ol.xml.pushSerializeAndPop({node:e,srsName:r.srsName},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Property"),s,o);ol.format.WFS.writeOgcFidFilter_(e,n,o)}};ol.format.WFS.writeProperty_=function(e,t,o){var r=ol.xml.createElementNS("http://www.opengis.net/wfs","Name");e.appendChild(r);ol.format.XSD.writeStringTextNode(r,t.name);goog.isDefAndNotNull(t.value)&&(r=ol.xml.createElementNS("http://www.opengis.net/wfs","Value"),e.appendChild(r),t.value instanceof ol.geom.Geometry?ol.format.GML3.prototype.writeGeometryElement(r,t.value,o):ol.format.XSD.writeStringTextNode(r,t.value))};ol.format.WFS.writeNative_=function(e,t){goog.isDef(t.vendorId)&&e.setAttribute("vendorId",t.vendorId);goog.isDef(t.safeToIgnore)&&e.setAttribute("safeToIgnore",t.safeToIgnore);goog.isDef(t.value)&&ol.format.XSD.writeStringTextNode(e,t.value)};ol.format.WFS.TRANSACTION_SERIALIZERS_={"http://www.opengis.net/wfs":{Insert:ol.xml.makeChildAppender(ol.format.WFS.writeFeature_),Update:ol.xml.makeChildAppender(ol.format.WFS.writeUpdate_),Delete:ol.xml.makeChildAppender(ol.format.WFS.writeDelete_),Property:ol.xml.makeChildAppender(ol.format.WFS.writeProperty_),Native:ol.xml.makeChildAppender(ol.format.WFS.writeNative_)}};ol.format.WFS.writeQuery_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var n=r.featurePrefix,i=r.featureNS,s=r.propertyNames,a=r.srsName,g=goog.isDef(n)?n+":":"";e.setAttribute("typeName",g+t);goog.isDef(a)&&e.setAttribute("srsName",a);goog.isDef(i)&&ol.xml.setAttributeNS(e,ol.format.WFS.XMLNS,"xmlns:"+n,i);t=goog.object.clone(r);t.node=e;ol.xml.pushSerializeAndPop(t,ol.format.WFS.QUERY_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("PropertyName"),s,o);r=r.bbox;goog.isDef(r)&&(s=ol.xml.createElementNS("http://www.opengis.net/ogc","Filter"),ol.format.WFS.writeOgcBBOX_(s,r,o),e.appendChild(s))};ol.format.WFS.writeOgcPropertyName_=function(e,t,o){o=ol.xml.createElementNS("http://www.opengis.net/ogc","PropertyName");ol.format.XSD.writeStringTextNode(o,t);e.appendChild(o)};ol.format.WFS.writeOgcBBOX_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var r=r.geometryName,n=ol.xml.createElementNS("http://www.opengis.net/ogc","BBOX");e.appendChild(n);ol.format.WFS.writeOgcPropertyName_(n,r,o);ol.format.GML3.prototype.writeGeometryElement(n,t,o)};ol.format.WFS.GETFEATURE_SERIALIZERS_={"http://www.opengis.net/wfs":{Query:ol.xml.makeChildAppender(ol.format.WFS.writeQuery_)}};ol.format.WFS.writeGetFeature_=function(e,t,o){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");r=goog.object.clone(r);r.node=e;ol.xml.pushSerializeAndPop(r,ol.format.WFS.GETFEATURE_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Query"),t,o)};ol.format.WFS.prototype.writeGetFeature=function(e){var t=ol.xml.createElementNS("http://www.opengis.net/wfs","GetFeature");t.setAttribute("service","WFS");t.setAttribute("version","1.1.0");goog.isDef(e)&&(goog.isDef(e.handle)&&t.setAttribute("handle",e.handle),goog.isDef(e.outputFormat)&&t.setAttribute("outputFormat",e.outputFormat),goog.isDef(e.maxFeatures)&&t.setAttribute("maxFeatures",e.maxFeatures),goog.isDef(e.resultType)&&t.setAttribute("resultType",e.resultType),goog.isDef(e.startIndex)&&t.setAttribute("startIndex",e.startIndex),goog.isDef(e.count)&&t.setAttribute("count",e.count));ol.xml.setAttributeNS(t,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation_);var o={node:t,srsName:e.srsName,featureNS:goog.isDef(e.featureNS)?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,geometryName:e.geometryName,bbox:e.bbox,propertyNames:goog.isDef(e.propertyNames)?e.propertyNames:[]};goog.asserts.assert(goog.isArray(e.featureTypes),"options.featureTypes should be an array");ol.format.WFS.writeGetFeature_(t,e.featureTypes,[o]);return t};ol.format.WFS.prototype.writeTransaction=function(e,t,o,r){var n=[],i=ol.xml.createElementNS("http://www.opengis.net/wfs","Transaction");i.setAttribute("service","WFS");i.setAttribute("version","1.1.0");var s,a;goog.isDef(r)&&(s=goog.isDef(r.gmlOptions)?r.gmlOptions:{},goog.isDef(r.handle)&&i.setAttribute("handle",r.handle));ol.xml.setAttributeNS(i,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation_);goog.isDefAndNotNull(e)&&(a={node:i,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:r.featurePrefix},goog.object.extend(a,s),ol.xml.pushSerializeAndPop(a,ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Insert"),e,n));goog.isDefAndNotNull(t)&&(a={node:i,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:r.featurePrefix},goog.object.extend(a,s),ol.xml.pushSerializeAndPop(a,ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Update"),t,n));goog.isDefAndNotNull(o)&&ol.xml.pushSerializeAndPop({node:i,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:r.featurePrefix},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Delete"),o,n);goog.isDef(r.nativeElements)&&ol.xml.pushSerializeAndPop({node:i,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:r.featurePrefix},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Native"),r.nativeElements,n);return i};ol.format.WFS.prototype.readProjectionFromDocument=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be a DOCUMENT");for(e=e.firstChild;!goog.isNull(e);e=e.nextSibling)if(e.nodeType==goog.dom.NodeType.ELEMENT)return this.readProjectionFromNode(e);return null};ol.format.WFS.prototype.readProjectionFromNode=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("FeatureCollection"==e.localName,"localName should be FeatureCollection");if(goog.isDefAndNotNull(e.firstElementChild)&&goog.isDefAndNotNull(e.firstElementChild.firstElementChild))for(e=e.firstElementChild.firstElementChild,e=e.firstElementChild;!goog.isNull(e);e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var t=[{}];this.gmlFormat_.readGeometryElement(e,t);return ol.proj.get(t.pop().srsName)}return null};ol.format.WMSCapabilities=function(){ol.format.XML.call(this);this.version=void 0};goog.inherits(ol.format.WMSCapabilities,ol.format.XML);ol.format.WMSCapabilities.prototype.readFromDocument=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(e=e.firstChild;!goog.isNull(e);e=e.nextSibling)if(e.nodeType==goog.dom.NodeType.ELEMENT)return this.readFromNode(e);return null};ol.format.WMSCapabilities.prototype.readFromNode=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("WMS_Capabilities"==e.localName||"WMT_MS_Capabilities"==e.localName,"localName should be WMS_Capabilities or WMT_MS_Capabilities");this.version=goog.string.trim(e.getAttribute("version"));goog.asserts.assertString(this.version,"this.version should be a string");e=ol.xml.pushParseAndPop({version:this.version},ol.format.WMSCapabilities.PARSERS_,e,[]);return goog.isDef(e)?e:null};ol.format.WMSCapabilities.readAttribution_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Attribution"==e.localName,"localName should be Attribution");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.ATTRIBUTION_PARSERS_,e,t)};ol.format.WMSCapabilities.readBoundingBox_=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("BoundingBox"==e.localName,"localName should be BoundingBox");var t=[ol.format.XSD.readDecimalString(e.getAttribute("minx")),ol.format.XSD.readDecimalString(e.getAttribute("miny")),ol.format.XSD.readDecimalString(e.getAttribute("maxx")),ol.format.XSD.readDecimalString(e.getAttribute("maxy"))],o=[ol.format.XSD.readDecimalString(e.getAttribute("resx")),ol.format.XSD.readDecimalString(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS"),extent:t,res:o}};ol.format.WMSCapabilities.readEXGeographicBoundingBox_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("EX_GeographicBoundingBox"==e.localName,"localName should be EX_GeographicBoundingBox");var o=ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_,e,t);if(goog.isDef(o)){var r=o.westBoundLongitude,n=o.southBoundLatitude,i=o.eastBoundLongitude,o=o.northBoundLatitude;return goog.isDef(r)&&goog.isDef(n)&&goog.isDef(i)&&goog.isDef(o)?[r,n,i,o]:void 0}};ol.format.WMSCapabilities.readCapability_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Capability"==e.localName,"localName should be Capability");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CAPABILITY_PARSERS_,e,t)};ol.format.WMSCapabilities.readService_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Service"==e.localName,"localName should be Service");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.SERVICE_PARSERS_,e,t)};ol.format.WMSCapabilities.readContactInformation_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType shpuld be ELEMENT");goog.asserts.assert("ContactInformation"==e.localName,"localName should be ContactInformation");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_INFORMATION_PARSERS_,e,t)};ol.format.WMSCapabilities.readContactPersonPrimary_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("ContactPersonPrimary"==e.localName,"localName should be ContactPersonPrimary");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_PERSON_PARSERS_,e,t)};ol.format.WMSCapabilities.readContactAddress_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("ContactAddress"==e.localName,"localName should be ContactAddress");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_ADDRESS_PARSERS_,e,t)};ol.format.WMSCapabilities.readException_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Exception"==e.localName,"localName should be Exception");return ol.xml.pushParseAndPop([],ol.format.WMSCapabilities.EXCEPTION_PARSERS_,e,t)};ol.format.WMSCapabilities.readCapabilityLayer_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Layer"==e.localName,"localName should be Layer");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.LAYER_PARSERS_,e,t)};ol.format.WMSCapabilities.readLayer_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Layer"==e.localName,"localName should be Layer");var o=t[t.length-1],r=ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.LAYER_PARSERS_,e,t);if(goog.isDef(r)){var n=ol.format.XSD.readBooleanString(e.getAttribute("queryable"));goog.isDef(n)||(n=o.queryable);r.queryable=goog.isDef(n)?n:!1;n=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("cascaded"));goog.isDef(n)||(n=o.cascaded);r.cascaded=n;n=ol.format.XSD.readBooleanString(e.getAttribute("opaque"));goog.isDef(n)||(n=o.opaque);r.opaque=goog.isDef(n)?n:!1;n=ol.format.XSD.readBooleanString(e.getAttribute("noSubsets"));goog.isDef(n)||(n=o.noSubsets);r.noSubsets=goog.isDef(n)?n:!1;n=ol.format.XSD.readDecimalString(e.getAttribute("fixedWidth"));goog.isDef(n)||(n=o.fixedWidth);r.fixedWidth=n;n=ol.format.XSD.readDecimalString(e.getAttribute("fixedHeight"));goog.isDef(n)||(n=o.fixedHeight);r.fixedHeight=n;goog.array.forEach(["Style","CRS","AuthorityURL"],function(e){var t=o[e];if(goog.isDef(t)){var n=goog.object.setIfUndefined(r,e,[]),n=n.concat(t);r[e]=n}});goog.array.forEach("EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" "),function(e){goog.isDef(r[e])||(r[e]=o[e])});return r}};ol.format.WMSCapabilities.readDimension_=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Dimension"==e.localName,"localName should be Dimension");return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),"default":e.getAttribute("default"),multipleValues:ol.format.XSD.readBooleanString(e.getAttribute("multipleValues")),nearestValue:ol.format.XSD.readBooleanString(e.getAttribute("nearestValue")),current:ol.format.XSD.readBooleanString(e.getAttribute("current")),values:ol.format.XSD.readString(e)}};ol.format.WMSCapabilities.readFormatOnlineresource_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.FORMAT_ONLINERESOURCE_PARSERS_,e,t)};ol.format.WMSCapabilities.readRequest_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Request"==e.localName,"localName should be Request");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.REQUEST_PARSERS_,e,t)};ol.format.WMSCapabilities.readDCPType_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("DCPType"==e.localName,"localName should be DCPType");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.DCPTYPE_PARSERS_,e,t)};ol.format.WMSCapabilities.readHTTP_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("HTTP"==e.localName,"localName should be HTTP");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.HTTP_PARSERS_,e,t)};ol.format.WMSCapabilities.readOperationType_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.OPERATIONTYPE_PARSERS_,e,t)};ol.format.WMSCapabilities.readSizedFormatOnlineresource_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var o=ol.format.WMSCapabilities.readFormatOnlineresource_(e,t);if(goog.isDef(o)){var r=[ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("width")),ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("height"))];o.size=r;return o}};ol.format.WMSCapabilities.readAuthorityURL_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("AuthorityURL"==e.localName,"localName should be AuthorityURL");var o=ol.format.WMSCapabilities.readFormatOnlineresource_(e,t);return goog.isDef(o)?(o.name=e.getAttribute("name"),o):void 0
};ol.format.WMSCapabilities.readMetadataURL_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("MetadataURL"==e.localName,"localName should be MetadataURL");var o=ol.format.WMSCapabilities.readFormatOnlineresource_(e,t);return goog.isDef(o)?(o.type=e.getAttribute("type"),o):void 0};ol.format.WMSCapabilities.readStyle_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Style"==e.localName,"localName should be Style");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.STYLE_PARSERS_,e,t)};ol.format.WMSCapabilities.readKeywordList_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("KeywordList"==e.localName,"localName should be KeywordList");return ol.xml.pushParseAndPop([],ol.format.WMSCapabilities.KEYWORDLIST_PARSERS_,e,t)};ol.format.WMSCapabilities.NAMESPACE_URIS_=[null,"http://www.opengis.net/wms"];ol.format.WMSCapabilities.PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Service:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readService_),Capability:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readCapability_)});ol.format.WMSCapabilities.CAPABILITY_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Request:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readRequest_),Exception:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readException_),Layer:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readCapabilityLayer_)});ol.format.WMSCapabilities.SERVICE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),KeywordList:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readKeywordList_),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),ContactInformation:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactInformation_),Fees:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),AccessConstraints:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),LayerLimit:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MaxWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MaxHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)});ol.format.WMSCapabilities.CONTACT_INFORMATION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{ContactPersonPrimary:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactPersonPrimary_),ContactPosition:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactAddress:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactAddress_),ContactVoiceTelephone:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactFacsimileTelephone:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactElectronicMailAddress:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.CONTACT_PERSON_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{ContactPerson:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactOrganization:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.CONTACT_ADDRESS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{AddressType:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),City:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),StateOrProvince:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PostCode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Country:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.EXCEPTION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeArrayPusher(ol.format.XSD.readString)});ol.format.WMSCapabilities.LAYER_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),KeywordList:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readKeywordList_),CRS:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),EX_GeographicBoundingBox:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readEXGeographicBoundingBox_),BoundingBox:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readBoundingBox_),Dimension:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readDimension_),Attribution:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readAttribution_),AuthorityURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readAuthorityURL_),Identifier:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),MetadataURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readMetadataURL_),DataURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readFormatOnlineresource_),FeatureListURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readFormatOnlineresource_),Style:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readStyle_),MinScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),MaxScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),Layer:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readLayer_)});ol.format.WMSCapabilities.ATTRIBUTION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),LogoURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readSizedFormatOnlineresource_)});ol.format.WMSCapabilities.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{westBoundLongitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),eastBoundLongitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),southBoundLatitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),northBoundLatitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)});ol.format.WMSCapabilities.REQUEST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{GetCapabilities:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_),GetMap:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_),GetFeatureInfo:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_)});ol.format.WMSCapabilities.OPERATIONTYPE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),DCPType:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readDCPType_)});ol.format.WMSCapabilities.DCPTYPE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{HTTP:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readHTTP_)});ol.format.WMSCapabilities.HTTP_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Get:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_),Post:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_)});ol.format.WMSCapabilities.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),LegendURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readSizedFormatOnlineresource_),StyleSheetURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_),StyleURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_)});ol.format.WMSCapabilities.FORMAT_ONLINERESOURCE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref)});ol.format.WMSCapabilities.KEYWORDLIST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Keyword:ol.xml.makeArrayPusher(ol.format.XSD.readString)});ol.format.WMSGetFeatureInfo=function(){this.featureNS_="http://mapserver.gis.umn.edu/mapserver";this.gmlFormat_=new ol.format.GML2;ol.format.XMLFeature.call(this)};goog.inherits(ol.format.WMSGetFeatureInfo,ol.format.XMLFeature);ol.format.WMSGetFeatureInfo.featureIdentifier_="_feature";ol.format.WMSGetFeatureInfo.layerIdentifier_="_layer";ol.format.WMSGetFeatureInfo.prototype.readFeatures_=function(e,t){e.namespaceURI=this.featureNS_;goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var o=ol.xml.getLocalName(e),r=[];if(0===e.childNodes.length)return r;"msGMLOutput"==o&&goog.array.forEach(e.childNodes,function(e){if(e.nodeType===goog.dom.NodeType.ELEMENT){var o=t[0];goog.asserts.assert(goog.isObject(o),"context should be an Object");goog.asserts.assert(0<=e.localName.indexOf(ol.format.WMSGetFeatureInfo.layerIdentifier_),"localName of layer node should match layerIdentifier");var n=goog.string.remove(e.localName,ol.format.WMSGetFeatureInfo.layerIdentifier_)+ol.format.WMSGetFeatureInfo.featureIdentifier_;o.featureType=n;o.featureNS=this.featureNS_;var i={};i[n]=ol.xml.makeArrayPusher(this.gmlFormat_.readFeatureElement,this.gmlFormat_);o=ol.xml.makeStructureNS([o.featureNS,null],i);e.namespaceURI=this.featureNS_;e=ol.xml.pushParseAndPop([],o,e,t,this.gmlFormat_);goog.isDef(e)&&goog.array.extend(r,e)}},this);"FeatureCollection"==o&&(o=ol.xml.pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_),goog.isDef(o)&&(r=o));return r};ol.format.WMSGetFeatureInfo.prototype.readFeaturesFromNode=function(e,t){var o={featureType:this.featureType,featureNS:this.featureNS};goog.isDef(t)&&goog.object.extend(o,this.getReadOptions(e,t));return this.readFeatures_(e,[o])};ol.format.WMTSCapabilities=function(){ol.format.XML.call(this);this.owsParser_=new ol.format.OWS};goog.inherits(ol.format.WMTSCapabilities,ol.format.XML);ol.format.WMTSCapabilities.prototype.readFromDocument=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(e=e.firstChild;!goog.isNull(e);e=e.nextSibling)if(e.nodeType==goog.dom.NodeType.ELEMENT)return this.readFromNode(e);return null};ol.format.WMTSCapabilities.prototype.readFromNode=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Capabilities"==e.localName,"localName should be Capabilities");this.version=goog.string.trim(e.getAttribute("version"));goog.asserts.assertString(this.version,"this.version should be a string");var t=this.owsParser_.readFromNode(e);if(!goog.isDef(t))return null;t.version=this.version;t=ol.xml.pushParseAndPop(t,ol.format.WMTSCapabilities.PARSERS_,e,[]);return goog.isDef(t)?t:null};ol.format.WMTSCapabilities.readContents_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Contents"==e.localName,"localName should be Contents");return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.CONTENTS_PARSERS_,e,t)};ol.format.WMTSCapabilities.readLayer_=function(e,t){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert("Layer"==e.localName,"localName should be Layer");return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.LAYER_PARSERS_,e,t)};ol.format.WMTSCapabilities.readTileMatrixSet_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_PARSERS_,e,t)};ol.format.WMTSCapabilities.readStyle_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.STYLE_PARSERS_,e,t);if(goog.isDef(o)){var r="true"===e.getAttribute("isDefault");o.isDefault=r;return o}};ol.format.WMTSCapabilities.readTileMatrixSetLink_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_LINKS_PARSERS_,e,t)};ol.format.WMTSCapabilities.readResourceUrl_=function(e){var t=e.getAttribute("format"),o=e.getAttribute("template"),r=e.getAttribute("resourceType"),n={};goog.isDef(t)&&(n.format=t);goog.isDef(o)&&(n.template=o);goog.isDef(r)&&(n.resourceType=r);return n};ol.format.WMTSCapabilities.readWgs84BoundingBox_=function(e,t){var o=ol.xml.pushParseAndPop([],ol.format.WMTSCapabilities.WGS84_BBOX_READERS_,e,t);return 2!=o.length?void 0:ol.extent.boundingExtent(o)};ol.format.WMTSCapabilities.readLegendUrl_=function(e){var t={};t.format=e.getAttribute("format");t.href=ol.format.XLink.readHref(e);return t};ol.format.WMTSCapabilities.readCoordinates_=function(e){var t=ol.format.XSD.readString(e).split(" ");if(goog.isDef(t)&&2==t.length){var o=+t[0],t=+t[1];return isNaN(o)||isNaN(t)?void 0:[o,t]}};ol.format.WMTSCapabilities.readTileMatrix_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TM_PARSERS_,e,t)};ol.format.WMTSCapabilities.NAMESPACE_URIS_=[null,"http://www.opengis.net/wmts/1.0"];ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_=[null,"http://www.opengis.net/ows/1.1"];ol.format.WMTSCapabilities.PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Contents:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readContents_)});ol.format.WMTSCapabilities.CONTENTS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Layer:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readLayer_),TileMatrixSet:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrixSet_)});ol.format.WMTSCapabilities.LAYER_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Style:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readStyle_),Format:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),TileMatrixSetLink:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrixSetLink_),ResourceURL:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readResourceUrl_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),WGS84BoundingBox:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readWgs84BoundingBox_),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{LegendURL:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readLegendUrl_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.TMS_LINKS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{TileMatrixSet:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMTSCapabilities.WGS84_BBOX_READERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{LowerCorner:ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readCoordinates_),UpperCorner:ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readCoordinates_)});ol.format.WMTSCapabilities.TMS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{WellKnownScaleSet:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),TileMatrix:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrix_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{SupportedCRS:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.TM_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{TopLeftCorner:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readCoordinates_),ScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),TileWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),TileHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MatrixWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MatrixHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.Image=function(e,t,o,r,n,i,s){ol.ImageBase.call(this,e,t,o,ol.ImageState.IDLE,r);this.src_=n;this.image_=new Image;goog.isNull(i)||(this.image_.crossOrigin=i);this.imageByContext_={};this.imageListenerKeys_=null;this.state=ol.ImageState.IDLE;this.imageLoadFunction_=s};goog.inherits(ol.Image,ol.ImageBase);ol.Image.prototype.getImage=function(e){if(goog.isDef(e)){var t=goog.getUid(e);if(t in this.imageByContext_)return this.imageByContext_[t];e=goog.object.isEmpty(this.imageByContext_)?this.image_:this.image_.cloneNode(!1);return this.imageByContext_[t]=e}return this.image_};ol.Image.prototype.handleImageError_=function(){this.state=ol.ImageState.ERROR;this.unlistenImage_();this.changed()};ol.Image.prototype.handleImageLoad_=function(){goog.isDef(this.resolution)||(this.resolution=ol.extent.getHeight(this.extent)/this.image_.height);this.state=ol.ImageState.LOADED;this.unlistenImage_();this.changed()};ol.Image.prototype.load=function(){this.state==ol.ImageState.IDLE&&(this.state=ol.ImageState.LOADING,this.changed(),goog.asserts.assert(goog.isNull(this.imageListenerKeys_),"this.imageListenerKeys_ should be null"),this.imageListenerKeys_=[goog.events.listenOnce(this.image_,goog.events.EventType.ERROR,this.handleImageError_,!1,this),goog.events.listenOnce(this.image_,goog.events.EventType.LOAD,this.handleImageLoad_,!1,this)],this.imageLoadFunction_(this,this.src_))};ol.Image.prototype.unlistenImage_=function(){goog.asserts.assert(!goog.isNull(this.imageListenerKeys_),"this.imageListenerKeys_ should not be null");goog.array.forEach(this.imageListenerKeys_,goog.events.unlistenByKey);this.imageListenerKeys_=null};ol.ImageTile=function(e,t,o,r,n){ol.Tile.call(this,e,t);this.src_=o;this.image_=new Image;goog.isNull(r)||(this.image_.crossOrigin=r);this.imageByContext_={};this.imageListenerKeys_=null;this.tileLoadFunction_=n};goog.inherits(ol.ImageTile,ol.Tile);ol.ImageTile.prototype.disposeInternal=function(){this.state==ol.TileState.LOADING&&this.unlistenImage_();ol.ImageTile.superClass_.disposeInternal.call(this)};ol.ImageTile.prototype.getImage=function(e){if(goog.isDef(e)){var t=goog.getUid(e);if(t in this.imageByContext_)return this.imageByContext_[t];e=goog.object.isEmpty(this.imageByContext_)?this.image_:this.image_.cloneNode(!1);return this.imageByContext_[t]=e}return this.image_};ol.ImageTile.prototype.getKey=function(){return this.src_};ol.ImageTile.prototype.handleImageError_=function(){this.state=ol.TileState.ERROR;this.unlistenImage_();this.changed()};ol.ImageTile.prototype.handleImageLoad_=function(){ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE&&!goog.isDef(this.image_.naturalWidth)&&(this.image_.naturalWidth=this.image_.width,this.image_.naturalHeight=this.image_.height);this.state=this.image_.naturalWidth&&this.image_.naturalHeight?ol.TileState.LOADED:ol.TileState.EMPTY;this.unlistenImage_();this.changed()};ol.ImageTile.prototype.load=function(){this.state==ol.TileState.IDLE&&(this.state=ol.TileState.LOADING,this.changed(),goog.asserts.assert(goog.isNull(this.imageListenerKeys_),"this.imageListenerKeys_ should be null"),this.imageListenerKeys_=[goog.events.listenOnce(this.image_,goog.events.EventType.ERROR,this.handleImageError_,!1,this),goog.events.listenOnce(this.image_,goog.events.EventType.LOAD,this.handleImageLoad_,!1,this)],this.tileLoadFunction_(this,this.src_))};ol.ImageTile.prototype.unlistenImage_=function(){goog.asserts.assert(!goog.isNull(this.imageListenerKeys_),"this.imageListenerKeys_ should not be null");goog.array.forEach(this.imageListenerKeys_,goog.events.unlistenByKey);this.imageListenerKeys_=null};ol.interaction.DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend"};ol.interaction.DrawEvent=function(e,t){goog.events.Event.call(this,e);this.feature=t};goog.inherits(ol.interaction.DrawEvent,goog.events.Event);ol.interaction.Draw=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.Draw.handleDownEvent_,handleEvent:ol.interaction.Draw.handleEvent,handleUpEvent:ol.interaction.Draw.handleUpEvent_});this.downPx_=null;this.freehand_=!1;this.source_=goog.isDef(e.source)?e.source:null;this.features_=goog.isDef(e.features)?e.features:null;this.snapTolerance_=goog.isDef(e.snapTolerance)?e.snapTolerance:12;this.type_=e.type;this.mode_=ol.interaction.Draw.getMode_(this.type_);this.minPoints_=goog.isDef(e.minPoints)?e.minPoints:this.mode_===ol.interaction.DrawMode.POLYGON?3:2;this.maxPoints_=goog.isDef(e.maxPoints)?e.maxPoints:1/0;var t=e.geometryFunction;if(!goog.isDef(t))if(this.type_===ol.geom.GeometryType.CIRCLE)t=function(e,t){var o=goog.isDef(t)?t:new ol.geom.Circle([0/0,0/0]);goog.asserts.assertInstanceof(o,ol.geom.Circle,"geometry must be an ol.geom.Circle");var r=ol.coordinate.squaredDistance(e[0],e[1]);o.setCenterAndRadius(e[0],Math.sqrt(r));return o};else{var o,t=this.mode_;t===ol.interaction.DrawMode.POINT?o=ol.geom.Point:t===ol.interaction.DrawMode.LINE_STRING?o=ol.geom.LineString:t===ol.interaction.DrawMode.POLYGON&&(o=ol.geom.Polygon);t=function(e,t){var r=t;goog.isDef(r)?r.setCoordinates(e):r=new o(e);return r}}this.geometryFunction_=t;this.sketchLineCoords_=this.sketchLine_=this.sketchCoords_=this.sketchPoint_=this.sketchFeature_=this.finishCoordinate_=null;this.squaredClickTolerance_=goog.isDef(e.clickTolerance)?e.clickTolerance*e.clickTolerance:36;this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:!1,wrapX:goog.isDef(e.wrapX)?e.wrapX:!1}),style:goog.isDef(e.style)?e.style:ol.interaction.Draw.getDefaultStyleFunction()});this.geometryName_=e.geometryName;this.condition_=goog.isDef(e.condition)?e.condition:ol.events.condition.noModifierKeys;this.freehandCondition_=goog.isDef(e.freehandCondition)?e.freehandCondition:ol.events.condition.shiftKeyOnly;goog.events.listen(this,ol.Object.getChangeEventType(ol.interaction.InteractionProperty.ACTIVE),this.updateState_,!1,this)};goog.inherits(ol.interaction.Draw,ol.interaction.Pointer);ol.interaction.Draw.getDefaultStyleFunction=function(){var e=ol.style.createDefaultEditingStyles();return function(t){return e[t.getGeometry().getType()]}};ol.interaction.Draw.prototype.setMap=function(e){ol.interaction.Draw.superClass_.setMap.call(this,e);this.updateState_()};ol.interaction.Draw.handleEvent=function(e){var t=!this.freehand_;this.freehand_&&e.type===ol.MapBrowserEvent.EventType.POINTERDRAG?(this.addToDrawing_(e),t=!1):e.type===ol.MapBrowserEvent.EventType.POINTERMOVE?t=this.handlePointerMove_(e):e.type===ol.MapBrowserEvent.EventType.DBLCLICK&&(t=!1);return ol.interaction.Pointer.handleEvent.call(this,e)&&t};ol.interaction.Draw.handleDownEvent_=function(e){if(this.condition_(e))return this.downPx_=e.pixel,!0;if(this.mode_!==ol.interaction.DrawMode.LINE_STRING&&this.mode_!==ol.interaction.DrawMode.POLYGON||!this.freehandCondition_(e))return!1;this.downPx_=e.pixel;this.freehand_=!0;goog.isNull(this.finishCoordinate_)&&this.startDrawing_(e);return!0};ol.interaction.Draw.handleUpEvent_=function(e){this.freehand_=!1;var t=this.downPx_,o=e.pixel,r=t[0]-o[0],t=t[1]-o[1],o=!0;r*r+t*t<=this.squaredClickTolerance_&&(this.handlePointerMove_(e),goog.isNull(this.finishCoordinate_)?(this.startDrawing_(e),this.mode_===ol.interaction.DrawMode.POINT&&this.finishDrawing()):this.mode_===ol.interaction.DrawMode.CIRCLE?this.finishDrawing():this.atFinish_(e)?this.finishDrawing():this.addToDrawing_(e),o=!1);return o};ol.interaction.Draw.prototype.handlePointerMove_=function(e){goog.isNull(this.finishCoordinate_)?this.createOrUpdateSketchPoint_(e):this.modifyDrawing_(e);return!0};ol.interaction.Draw.prototype.atFinish_=function(e){var t=!1;if(!goog.isNull(this.sketchFeature_)){var o=!1,r=[this.finishCoordinate_];this.mode_===ol.interaction.DrawMode.LINE_STRING?o=this.sketchCoords_.length>this.minPoints_:this.mode_===ol.interaction.DrawMode.POLYGON&&(o=this.sketchCoords_[0].length>this.minPoints_,r=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]);if(o)for(var o=e.map,n=0,i=r.length;i>n;n++){var s=r[n],a=o.getPixelFromCoordinate(s),g=e.pixel,t=g[0]-a[0],a=g[1]-a[1],g=this.freehand_&&this.freehandCondition_(e)?1:this.snapTolerance_;if(t=Math.sqrt(t*t+a*a)<=g){this.finishCoordinate_=s;break}}}return t};ol.interaction.Draw.prototype.createOrUpdateSketchPoint_=function(e){e=e.coordinate.slice();if(goog.isNull(this.sketchPoint_))this.sketchPoint_=new ol.Feature(new ol.geom.Point(e)),this.updateSketchFeatures_();else{var t=this.sketchPoint_.getGeometry();goog.asserts.assertInstanceof(t,ol.geom.Point,"sketchPointGeom should be an ol.geom.Point");t.setCoordinates(e)}};ol.interaction.Draw.prototype.startDrawing_=function(e){this.finishCoordinate_=e=e.coordinate;this.mode_===ol.interaction.DrawMode.POINT?this.sketchCoords_=e.slice():this.mode_===ol.interaction.DrawMode.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):(this.sketchCoords_=[e.slice(),e.slice()],this.mode_===ol.interaction.DrawMode.CIRCLE&&(this.sketchLineCoords_=this.sketchCoords_));goog.isNull(this.sketchLineCoords_)||(this.sketchLine_=new ol.Feature(new ol.geom.LineString(this.sketchLineCoords_)));e=this.geometryFunction_(this.sketchCoords_);goog.asserts.assert(goog.isDef(e),"geometry should be defined");this.sketchFeature_=new ol.Feature;goog.isDef(this.geometryName_)&&this.sketchFeature_.setGeometryName(this.geometryName_);this.sketchFeature_.setGeometry(e);this.updateSketchFeatures_();this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWSTART,this.sketchFeature_))};ol.interaction.Draw.prototype.modifyDrawing_=function(e){var t=e.coordinate,o=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(o,ol.geom.SimpleGeometry,"geometry should be ol.geom.SimpleGeometry or subclass");var r;this.mode_===ol.interaction.DrawMode.POINT?r=this.sketchCoords_:this.mode_===ol.interaction.DrawMode.POLYGON?(r=this.sketchCoords_[0],r=r[r.length-1],this.atFinish_(e)&&(t=this.finishCoordinate_.slice())):(r=this.sketchCoords_,r=r[r.length-1]);r[0]=t[0];r[1]=t[1];goog.asserts.assert(!goog.isNull(this.sketchCoords_),"sketchCoords_ must not be null");this.geometryFunction_(this.sketchCoords_,o);goog.isNull(this.sketchPoint_)||(e=this.sketchPoint_.getGeometry(),goog.asserts.assertInstanceof(e,ol.geom.Point,"sketchPointGeom should be an ol.geom.Point"),e.setCoordinates(t));o instanceof ol.geom.Polygon&&this.mode_!==ol.interaction.DrawMode.POLYGON?(goog.isNull(this.sketchLine_)&&(this.sketchLine_=new ol.Feature(new ol.geom.LineString(null))),o=o.getLinearRing(0),t=this.sketchLine_.getGeometry(),goog.asserts.assertInstanceof(t,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString"),t.setFlatCoordinates(o.getLayout(),o.getFlatCoordinates())):goog.isNull(this.sketchLineCoords_)||(t=this.sketchLine_.getGeometry(),goog.asserts.assertInstanceof(t,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString"),t.setCoordinates(this.sketchLineCoords_));this.updateSketchFeatures_()};ol.interaction.Draw.prototype.addToDrawing_=function(e){e=e.coordinate;var t=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(t,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");var o,r;if(this.mode_===ol.interaction.DrawMode.LINE_STRING)this.finishCoordinate_=e.slice(),r=this.sketchCoords_,r.push(e.slice()),o=r.length>this.maxPoints_,this.geometryFunction_(r,t);else if(this.mode_===ol.interaction.DrawMode.POLYGON){r=this.sketchCoords_[0];r.push(e.slice());(o=r.length>this.maxPoints_)&&(this.finishCoordinate_=r[0]);this.geometryFunction_(this.sketchCoords_,t)}this.updateSketchFeatures_();o&&this.finishDrawing()};ol.interaction.Draw.prototype.removeLastPoint=function(){var e=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(e,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");var t,o;this.mode_===ol.interaction.DrawMode.LINE_STRING?(t=this.sketchCoords_,t.splice(-2,1),this.geometryFunction_(t,e)):this.mode_===ol.interaction.DrawMode.POLYGON&&(t=this.sketchCoords_[0],t.splice(-2,1),o=this.sketchLine_.getGeometry(),goog.asserts.assertInstanceof(o,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString"),o.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e));0===t.length&&(this.finishCoordinate_=null);this.updateSketchFeatures_()};ol.interaction.Draw.prototype.finishDrawing=function(){var e=this.abortDrawing_();goog.asserts.assert(!goog.isNull(e),"sketchFeature should not be null");var t=this.sketchCoords_,o=e.getGeometry();goog.asserts.assertInstanceof(o,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");this.mode_===ol.interaction.DrawMode.LINE_STRING?(t.pop(),this.geometryFunction_(t,o)):this.mode_===ol.interaction.DrawMode.POLYGON&&(t[0].pop(),t[0].push(t[0][0]),this.geometryFunction_(t,o));this.type_===ol.geom.GeometryType.MULTI_POINT?e.setGeometry(new ol.geom.MultiPoint([t])):this.type_===ol.geom.GeometryType.MULTI_LINE_STRING?e.setGeometry(new ol.geom.MultiLineString([t])):this.type_===ol.geom.GeometryType.MULTI_POLYGON&&e.setGeometry(new ol.geom.MultiPolygon([t]));this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWEND,e));goog.isNull(this.features_)||this.features_.push(e);goog.isNull(this.source_)||this.source_.addFeature(e)};ol.interaction.Draw.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;goog.isNull(e)||(this.sketchLine_=this.sketchPoint_=this.sketchFeature_=null,this.overlay_.getSource().clear(!0));return e};ol.interaction.Draw.prototype.extend=function(e){var t=e.getGeometry();goog.asserts.assert(this.mode_==ol.interaction.DrawMode.LINE_STRING,'interaction mode must be "line"');goog.asserts.assert(goog.isDefAndNotNull(t),"feature must have a geometry");goog.asserts.assert(t.getType()==ol.geom.GeometryType.LINE_STRING,"feature geometry must be a line string");this.sketchFeature_=e;this.sketchCoords_=t.getCoordinates();e=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=e.slice();this.sketchCoords_.push(e.slice());this.updateSketchFeatures_();this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWSTART,this.sketchFeature_))};ol.interaction.Draw.prototype.shouldStopEvent=goog.functions.FALSE;ol.interaction.Draw.prototype.updateSketchFeatures_=function(){var e=[];goog.isNull(this.sketchFeature_)||e.push(this.sketchFeature_);goog.isNull(this.sketchLine_)||e.push(this.sketchLine_);goog.isNull(this.sketchPoint_)||e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0);t.addFeatures(e)};ol.interaction.Draw.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();!goog.isNull(e)&&t||this.abortDrawing_();this.overlay_.setMap(t?e:null)};ol.interaction.Draw.createRegularPolygon=function(e,t){return function(o,r){var n=o[0],i=o[1],s=Math.sqrt(ol.coordinate.squaredDistance(n,i)),a=goog.isDef(r)?r:ol.geom.Polygon.fromCircle(new ol.geom.Circle(n),e);
goog.asserts.assertInstanceof(a,ol.geom.Polygon,"geometry must be a polygon");i=goog.isDef(t)?t:Math.atan((i[1]-n[1])/(i[0]-n[0]));ol.geom.Polygon.makeRegular(a,n,s,i);return a}};ol.interaction.Draw.getMode_=function(e){var t;e===ol.geom.GeometryType.POINT||e===ol.geom.GeometryType.MULTI_POINT?t=ol.interaction.DrawMode.POINT:e===ol.geom.GeometryType.LINE_STRING||e===ol.geom.GeometryType.MULTI_LINE_STRING?t=ol.interaction.DrawMode.LINE_STRING:e===ol.geom.GeometryType.POLYGON||e===ol.geom.GeometryType.MULTI_POLYGON?t=ol.interaction.DrawMode.POLYGON:e===ol.geom.GeometryType.CIRCLE&&(t=ol.interaction.DrawMode.CIRCLE);goog.asserts.assert(goog.isDef(t),"mode should be defined");return t};ol.interaction.DrawMode={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"};ol.TileUrlFunction={};ol.TileUrlFunction.createFromTemplate=function(e){var t=/\{z\}/g,o=/\{x\}/g,r=/\{y\}/g,n=/\{-y\}/g;return function(i){return goog.isNull(i)?void 0:e.replace(t,i[0].toString()).replace(o,i[1].toString()).replace(r,function(){return(-i[2]-1).toString()}).replace(n,function(){return((1<<i[0])+i[2]).toString()})}};ol.TileUrlFunction.createFromTemplates=function(e){return ol.TileUrlFunction.createFromTileUrlFunctions(goog.array.map(e,ol.TileUrlFunction.createFromTemplate))};ol.TileUrlFunction.createFromTileUrlFunctions=function(e){goog.asserts.assert(0<e.length,"Length of tile url functions should be greater than 0");return 1===e.length?e[0]:function(t,o,r){if(!goog.isNull(t)){var n=ol.tilecoord.hash(t),n=goog.math.modulo(n,e.length);return e[n](t,o,r)}}};ol.TileUrlFunction.nullTileUrlFunction=function(){};ol.TileUrlFunction.expandUrl=function(e){var t=[],o=/\{(\d)-(\d)\}/.exec(e)||/\{([a-z])-([a-z])\}/.exec(e);if(o)for(var r=o[1].charCodeAt(0),n=o[2].charCodeAt(0);n>=r;++r)t.push(e.replace(o[0],String.fromCharCode(r)));else t.push(e);return t};ol.source.TileImage=function(e){ol.source.Tile.call(this,{attributions:e.attributions,extent:e.extent,logo:e.logo,opaque:e.opaque,projection:e.projection,state:goog.isDef(e.state)?e.state:void 0,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX});this.tileUrlFunction=goog.isDef(e.tileUrlFunction)?e.tileUrlFunction:ol.TileUrlFunction.nullTileUrlFunction;this.crossOrigin=goog.isDef(e.crossOrigin)?e.crossOrigin:null;this.tileLoadFunction=goog.isDef(e.tileLoadFunction)?e.tileLoadFunction:ol.source.TileImage.defaultTileLoadFunction;this.tileClass=goog.isDef(e.tileClass)?e.tileClass:ol.ImageTile};goog.inherits(ol.source.TileImage,ol.source.Tile);ol.source.TileImage.defaultTileLoadFunction=function(e,t){e.getImage().src=t};ol.source.TileImage.prototype.getTile=function(e,t,o,r,n){var i=this.getKeyZXY(e,t,o);if(this.tileCache.containsKey(i))return this.tileCache.get(i);goog.asserts.assert(n,"argument projection is truthy");e=[e,t,o];t=this.getTileCoordForTileUrlFunction(e,n);r=goog.isNull(t)?void 0:this.tileUrlFunction(t,r,n);r=new this.tileClass(e,goog.isDef(r)?ol.TileState.IDLE:ol.TileState.EMPTY,goog.isDef(r)?r:"",this.crossOrigin,this.tileLoadFunction);goog.events.listen(r,goog.events.EventType.CHANGE,this.handleTileChange_,!1,this);this.tileCache.set(i,r);return r};ol.source.TileImage.prototype.getTileLoadFunction=function(){return this.tileLoadFunction};ol.source.TileImage.prototype.getTileUrlFunction=function(){return this.tileUrlFunction};ol.source.TileImage.prototype.handleTileChange_=function(e){e=e.target;switch(e.getState()){case ol.TileState.LOADING:this.dispatchEvent(new ol.source.TileEvent(ol.source.TileEventType.TILELOADSTART,e));break;case ol.TileState.LOADED:this.dispatchEvent(new ol.source.TileEvent(ol.source.TileEventType.TILELOADEND,e));break;case ol.TileState.ERROR:this.dispatchEvent(new ol.source.TileEvent(ol.source.TileEventType.TILELOADERROR,e))}};ol.source.TileImage.prototype.setTileLoadFunction=function(e){this.tileCache.clear();this.tileLoadFunction=e;this.changed()};ol.source.TileImage.prototype.setTileUrlFunction=function(e){this.tileCache.clear();this.tileUrlFunction=e;this.changed()};ol.source.TileImage.prototype.useTile=function(e,t,o){e=this.getKeyZXY(e,t,o);this.tileCache.containsKey(e)&&this.tileCache.get(e)};ol.source.Cluster=function(e){ol.source.Vector.call(this,{attributions:e.attributions,extent:e.extent,logo:e.logo,projection:e.projection});this.resolution_=void 0;this.distance_=goog.isDef(e.distance)?e.distance:20;this.features_=[];this.source_=e.source;this.source_.on(goog.events.EventType.CHANGE,ol.source.Cluster.prototype.onSourceChange_,this)};goog.inherits(ol.source.Cluster,ol.source.Vector);ol.source.Cluster.prototype.getSource=function(){return this.source_};ol.source.Cluster.prototype.loadFeatures=function(e,t,o){this.source_.loadFeatures(e,t,o);t!==this.resolution_&&(this.clear(),this.resolution_=t,this.cluster_(),this.addFeatures(this.features_))};ol.source.Cluster.prototype.onSourceChange_=function(){this.clear();this.cluster_();this.addFeatures(this.features_);this.changed()};ol.source.Cluster.prototype.cluster_=function(){if(goog.isDef(this.resolution_)){this.features_.length=0;for(var e=ol.extent.createEmpty(),t=this.distance_*this.resolution_,o=this.source_.getFeatures(),r={},n=0,i=o.length;i>n;n++){var s=o[n];goog.object.containsKey(r,goog.getUid(s).toString())||(s=s.getGeometry(),goog.asserts.assert(s instanceof ol.geom.Point,"feature geometry is a ol.geom.Point instance"),s=s.getCoordinates(),ol.extent.createOrUpdateFromCoordinate(s,e),ol.extent.buffer(e,t,e),s=this.source_.getFeaturesInExtent(e),goog.asserts.assert(1<=s.length,"at least one neighbor found"),s=goog.array.filter(s,function(e){e=goog.getUid(e).toString();return goog.object.containsKey(r,e)?!1:r[e]=!0}),this.features_.push(this.createCluster_(s)))}goog.asserts.assert(goog.object.getCount(r)==this.source_.getFeatures().length,"number of clustered equals number of features in the source")}};ol.source.Cluster.prototype.createCluster_=function(e){for(var t=e.length,o=[0,0],r=0;t>r;r++){var n=e[r].getGeometry();goog.asserts.assert(n instanceof ol.geom.Point,"feature geometry is a ol.geom.Point instance");n=n.getCoordinates();ol.coordinate.add(o,n)}ol.coordinate.scale(o,1/t);t=new ol.Feature(new ol.geom.Point(o));t.set("features",e);return t};ol.source.wms={};ol.source.wms.ServerType={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};ol.source.ImageWMS=function(e){e=goog.isDef(e)?e:{};ol.source.Image.call(this,{attributions:e.attributions,logo:e.logo,projection:e.projection,resolutions:e.resolutions});this.crossOrigin_=goog.isDef(e.crossOrigin)?e.crossOrigin:null;this.url_=e.url;this.imageLoadFunction_=goog.isDef(e.imageLoadFunction)?e.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;this.params_=e.params;this.v13_=!0;this.updateV13_();this.serverType_=e.serverType;this.hidpi_=goog.isDef(e.hidpi)?e.hidpi:!0;this.image_=null;this.imageSize_=[0,0];this.renderedRevision_=0;this.ratio_=goog.isDef(e.ratio)?e.ratio:1.5};goog.inherits(ol.source.ImageWMS,ol.source.Image);ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_=[101,101];ol.source.ImageWMS.prototype.getGetFeatureInfoUrl=function(e,t,o,r){goog.asserts.assert(!("VERSION"in r),"key VERSION is not allowed in params");if(goog.isDef(this.url_)){var n=ol.extent.getForViewAndSize(e,t,0,ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_),i={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};goog.object.extend(i,this.params_,r);r=Math.floor((n[3]-e[1])/t);i[this.v13_?"I":"X"]=Math.floor((e[0]-n[0])/t);i[this.v13_?"J":"Y"]=r;return this.getRequestUrl_(n,ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_,1,ol.proj.get(o),i)}};ol.source.ImageWMS.prototype.getParams=function(){return this.params_};ol.source.ImageWMS.prototype.getImage=function(e,t,o,r){if(!goog.isDef(this.url_))return null;t=this.findNearestResolution(t);1==o||this.hidpi_&&goog.isDef(this.serverType_)||(o=1);e=e.slice();var n=(e[0]+e[2])/2,i=(e[1]+e[3])/2;if(1!=this.ratio_){var s=this.ratio_*ol.extent.getWidth(e)/2,a=this.ratio_*ol.extent.getHeight(e)/2;e[0]=n-s;e[1]=i-a;e[2]=n+s;e[3]=i+a}var g=t/o,s=Math.ceil(ol.extent.getWidth(e)/g),a=Math.ceil(ol.extent.getHeight(e)/g);e[0]=n-g*s/2;e[2]=n+g*s/2;e[1]=i-g*a/2;e[3]=i+g*a/2;n=this.image_;if(!goog.isNull(n)&&this.renderedRevision_==this.getRevision()&&n.getResolution()==t&&n.getPixelRatio()==o&&ol.extent.containsExtent(n.getExtent(),e))return n;n={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};goog.object.extend(n,this.params_);this.imageSize_[0]=s;this.imageSize_[1]=a;r=this.getRequestUrl_(e,this.imageSize_,o,r,n);this.image_=new ol.Image(e,t,o,this.getAttributions(),r,this.crossOrigin_,this.imageLoadFunction_);this.renderedRevision_=this.getRevision();goog.events.listen(this.image_,goog.events.EventType.CHANGE,this.handleImageChange,!1,this);return this.image_};ol.source.ImageWMS.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_};ol.source.ImageWMS.prototype.getRequestUrl_=function(e,t,o,r,n){goog.asserts.assert(goog.isDef(this.url_),"url is defined");n[this.v13_?"CRS":"SRS"]=r.getCode();"STYLES"in this.params_||(n.STYLES=new String(""));if(1!=o)switch(this.serverType_){case ol.source.wms.ServerType.GEOSERVER:o=90*o+.5|0;goog.isDef(n.FORMAT_OPTIONS)?n.FORMAT_OPTIONS+=";dpi:"+o:n.FORMAT_OPTIONS="dpi:"+o;break;case ol.source.wms.ServerType.MAPSERVER:n.MAP_RESOLUTION=90*o;break;case ol.source.wms.ServerType.CARMENTA_SERVER:case ol.source.wms.ServerType.QGIS:n.DPI=90*o;break;default:goog.asserts.fail("unknown serverType configured")}n.WIDTH=t[0];n.HEIGHT=t[1];t=r.getAxisOrientation();e=this.v13_&&"ne"==t.substr(0,2)?[e[1],e[0],e[3],e[2]]:e;n.BBOX=e.join(",");return goog.uri.utils.appendParamsFromMap(this.url_,n)};ol.source.ImageWMS.prototype.getUrl=function(){return this.url_};ol.source.ImageWMS.prototype.setImageLoadFunction=function(e){this.image_=null;this.imageLoadFunction_=e;this.changed()};ol.source.ImageWMS.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())};ol.source.ImageWMS.prototype.updateParams=function(e){goog.object.extend(this.params_,e);this.updateV13_();this.image_=null;this.changed()};ol.source.ImageWMS.prototype.updateV13_=function(){var e=goog.object.get(this.params_,"VERSION",ol.DEFAULT_WMS_VERSION);this.v13_=0<=goog.string.compareVersions(e,"1.3")};ol.tilegrid.WMTS=function(e){goog.asserts.assert(e.resolutions.length==e.matrixIds.length,"options resolutions and matrixIds must have equal length (%s == %s)",e.resolutions.length,e.matrixIds.length);this.matrixIds_=e.matrixIds;ol.tilegrid.TileGrid.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})};goog.inherits(ol.tilegrid.WMTS,ol.tilegrid.TileGrid);ol.tilegrid.WMTS.prototype.getMatrixId=function(e){goog.asserts.assert(e>=0&&e<this.matrixIds_.length,"attempted to retrive matrixId for illegal z (%s)",e);return this.matrixIds_[e]};ol.tilegrid.WMTS.prototype.getMatrixIds=function(){return this.matrixIds_};ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet=function(e,t){var o,r=[],n=[],i=[],s=[],a=[];o=ol.proj.get(e.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var g=o.getMetersPerUnit(),l="ne"==o.getAxisOrientation().substr(0,2);goog.array.sort(e.TileMatrix,function(e,t){return t.ScaleDenominator-e.ScaleDenominator});goog.array.forEach(e.TileMatrix,function(e,t,o){n.push(e.Identifier);t=28e-5*e.ScaleDenominator/g;o=e.TileWidth;var u=e.TileHeight;i.push(l?[e.TopLeftCorner[1],e.TopLeftCorner[0]]:e.TopLeftCorner);r.push(t);s.push(o==u?o:[o,u]);a.push([e.MatrixWidth,-e.MatrixHeight])});return new ol.tilegrid.WMTS({extent:t,origins:i,resolutions:r,matrixIds:n,tileSizes:s,sizes:a})};ol.source.WMTSRequestEncoding={KVP:"KVP",REST:"REST"};ol.source.WMTS=function(e){function t(e){e=r==ol.source.WMTSRequestEncoding.KVP?goog.uri.utils.appendParamsFromMap(e,i):e.replace(/\{(\w+?)\}/g,function(e,t){return t.toLowerCase()in i?i[t.toLowerCase()]:e});return function(t){if(!goog.isNull(t)){var o={TileMatrix:n.getMatrixId(t[0]),TileCol:t[1],TileRow:-t[2]-1};goog.object.extend(o,s);t=e;return t=r==ol.source.WMTSRequestEncoding.KVP?goog.uri.utils.appendParamsFromMap(t,o):t.replace(/\{(\w+?)\}/g,function(e,t){return o[t]})}}}this.version_=goog.isDef(e.version)?e.version:"1.0.0";this.format_=goog.isDef(e.format)?e.format:"image/jpeg";this.dimensions_=goog.isDef(e.dimensions)?e.dimensions:{};this.coordKeyPrefix_="";this.resetCoordKeyPrefix_();this.layer_=e.layer;this.matrixSet_=e.matrixSet;this.style_=e.style;var o=e.urls;!goog.isDef(o)&&goog.isDef(e.url)&&(o=ol.TileUrlFunction.expandUrl(e.url));this.urls_=goog.isDefAndNotNull(o)?o:[];var r=this.requestEncoding_=goog.isDef(e.requestEncoding)?e.requestEncoding:ol.source.WMTSRequestEncoding.KVP,n=e.tileGrid,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};r==ol.source.WMTSRequestEncoding.KVP&&goog.object.extend(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_});var s=this.dimensions_,o=0<this.urls_.length?ol.TileUrlFunction.createFromTileUrlFunctions(goog.array.map(this.urls_,t)):ol.TileUrlFunction.nullTileUrlFunction;ol.source.TileImage.call(this,{attributions:e.attributions,crossOrigin:e.crossOrigin,logo:e.logo,projection:e.projection,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:o,wrapX:goog.isDef(e.wrapX)?e.wrapX:!1})};goog.inherits(ol.source.WMTS,ol.source.TileImage);ol.source.WMTS.prototype.getDimensions=function(){return this.dimensions_};ol.source.WMTS.prototype.getFormat=function(){return this.format_};ol.source.WMTS.prototype.getKeyZXY=function(e,t,o){return this.coordKeyPrefix_+ol.source.WMTS.superClass_.getKeyZXY.call(this,e,t,o)};ol.source.WMTS.prototype.getLayer=function(){return this.layer_};ol.source.WMTS.prototype.getMatrixSet=function(){return this.matrixSet_};ol.source.WMTS.prototype.getRequestEncoding=function(){return this.requestEncoding_};ol.source.WMTS.prototype.getStyle=function(){return this.style_};ol.source.WMTS.prototype.getUrls=function(){return this.urls_};ol.source.WMTS.prototype.getVersion=function(){return this.version_};ol.source.WMTS.prototype.resetCoordKeyPrefix_=function(){var e,t=0,o=[];for(e in this.dimensions_)o[t++]=e+"-"+this.dimensions_[e];this.coordKeyPrefix_=o.join("/")};ol.source.WMTS.prototype.updateDimensions=function(e){goog.object.extend(this.dimensions_,e);this.resetCoordKeyPrefix_();this.changed()};ol.source.WMTS.optionsFromCapabilities=function(e,t){goog.asserts.assert(!goog.isNull(t.layer),'config "layer" must not be null');var o=goog.array.find(e.Contents.Layer,function(e){return e.Identifier==t.layer});goog.asserts.assert(!goog.isNull(o),"found a matching layer in Contents/Layer");goog.asserts.assert(0<o.TileMatrixSetLink.length,"layer has TileMatrixSetLink");var r,n,i=e.Contents.TileMatrixSet;r=1<o.TileMatrixSetLink.length?goog.isDef(t.projection)?goog.array.findIndex(o.TileMatrixSetLink,function(e){return goog.array.find(i,function(t){return t.Identifier==e.TileMatrixSet}).SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3")==t.projection}):goog.array.findIndex(o.TileMatrixSetLink,function(e){return e.TileMatrixSet==t.matrixSet}):0;0>r&&(r=0);n=o.TileMatrixSetLink[r].TileMatrixSet;goog.asserts.assert(!goog.isNull(n),"TileMatrixSet must not be null");var s=o.Format[0];goog.isDef(t.format)&&(s=t.format);r=goog.array.findIndex(o.Style,function(e){return goog.isDef(t.style)?e.Title==t.style:e.isDefault});0>r&&(r=0);r=o.Style[r].Identifier;var a={};goog.isDef(o.Dimension)&&goog.array.forEach(o.Dimension,function(e,t,o){t=e.Identifier;o=e["default"];goog.isDef(o)?goog.asserts.assert(goog.array.contains(e.values,o),"default value contained in values"):o=e.values[0];goog.asserts.assert(goog.isDef(o),"value could be found");a[t]=o});var g=goog.array.find(e.Contents.TileMatrixSet,function(e){return e.Identifier==n});goog.asserts.assert(!goog.isNull(g),"found matrixSet in Contents/TileMatrixSet");var l;l=ol.proj.get(goog.isDef(t.projection)?t.projection:g.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var u,c,h=o.WGS84BoundingBox;goog.isDef(h)&&(c=ol.proj.get("EPSG:4326").getExtent(),c=h[0]==c[0]&&h[2]==c[2],u=ol.proj.transformExtent(h,"EPSG:4326",l),h=l.getExtent(),goog.isNull(h)||ol.extent.containsExtent(h,u)||(u=void 0));var g=ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet(g,u),d=[];u=t.requestEncoding;u=goog.isDef(u)?u:"";goog.asserts.assert(goog.array.contains(["REST","RESTful","KVP",""],u),'requestEncoding (%s) is one of "REST", "RESTful", "KVP" or ""',u);if(e.hasOwnProperty("OperationsMetadata")&&e.OperationsMetadata.hasOwnProperty("GetTile")&&!goog.string.startsWith(u,"REST"))for(var o=e.OperationsMetadata.GetTile.DCP.HTTP.Get,h=0,m=o.length;m>h;++h){var p=goog.array.find(o[h].Constraint,function(e){return"GetEncoding"==e.name}).AllowedValues.Value;0<p.length&&goog.array.contains(p,"KVP")&&(u=ol.source.WMTSRequestEncoding.KVP,d.push(o[h].href))}else u=ol.source.WMTSRequestEncoding.REST,goog.array.forEach(o.ResourceURL,function(e){"tile"==e.resourceType&&(s=e.format,d.push(e.template))});goog.asserts.assert(0<d.length,"At least one URL found");return{urls:d,layer:t.layer,matrixSet:n,format:s,projection:l,requestEncoding:u,tileGrid:g,style:r,dimensions:a,wrapX:c}};goog.exportSymbol("ol.Map",ol.Map);goog.exportSymbol("ol.Overlay",ol.Overlay);goog.exportSymbol("ol.View",ol.View);goog.exportSymbol("ol.control.defaults",ol.control.defaults);goog.exportSymbol("ol.control.OverviewMap",ol.control.OverviewMap);goog.exportSymbol("ol.control.ScaleLine",ol.control.ScaleLine);goog.exportSymbol("ol.control.ZoomSlider",ol.control.ZoomSlider);goog.exportSymbol("ol.control.ZoomToExtent",ol.control.ZoomToExtent);goog.exportSymbol("ol.geom.LineString",ol.geom.LineString);goog.exportSymbol("ol.geom.MultiLineString",ol.geom.MultiLineString);goog.exportSymbol("ol.geom.MultiPolygon",ol.geom.MultiPolygon);goog.exportSymbol("ol.geom.Point",ol.geom.Point);goog.exportSymbol("ol.geom.Polygon",ol.geom.Polygon);goog.exportSymbol("ol.format.Feature",ol.format.Feature);goog.exportSymbol("ol.format.GeoJSON",ol.format.GeoJSON);goog.exportSymbol("ol.format.GML2",ol.format.GML2);goog.exportSymbol("ol.format.GML3",ol.format.GML3);goog.exportSymbol("ol.format.KML",ol.format.KML);goog.exportSymbol("ol.format.WFS",ol.format.WFS);goog.exportSymbol("ol.format.WMSCapabilities",ol.format.WMSCapabilities);goog.exportSymbol("ol.format.WMSGetFeatureInfo",ol.format.WMSGetFeatureInfo);goog.exportSymbol("ol.format.WMTSCapabilities",ol.format.WMTSCapabilities);goog.exportSymbol("ol.interaction.Draw",ol.interaction.Draw);goog.exportSymbol("ol.interaction.Pointer",ol.interaction.Pointer);goog.exportSymbol("ol.layer.Tile",ol.layer.Tile);goog.exportSymbol("ol.layer.Image",ol.layer.Image);goog.exportSymbol("ol.layer.Vector",ol.layer.Vector);goog.exportSymbol("ol.proj.Projection",ol.proj.Projection);goog.exportSymbol("ol.source.Cluster",ol.source.Cluster);goog.exportSymbol("ol.source.ImageWMS",ol.source.ImageWMS);goog.exportSymbol("ol.source.WMTS",ol.source.WMTS);goog.exportSymbol("ol.style.Circle",ol.style.Circle);goog.exportSymbol("ol.style.Fill",ol.style.Fill);goog.exportSymbol("ol.style.Icon",ol.style.Icon);goog.exportSymbol("ol.style.Stroke",ol.style.Stroke);goog.exportSymbol("ol.style.Style",ol.style.Style);goog.exportSymbol("ol.style.Text",ol.style.Text);